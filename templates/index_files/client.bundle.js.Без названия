(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1e3:function(e,t,s){},1008:function(e,t,s){},1009:function(e,t,s){},1010:function(e,t,s){},1011:function(e,t,s){},1012:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),r=s(34),i=s.n(r),o=s(22),c=s(32);class l{static init(e){window.Ya.Rum.updateErrors({page:"search",yandexuid:e})}static captureException(e){window.Ya.Rum.logError({},e)}static captureComponentException(e,t){window.Ya.Rum.logError({additional:t},e)}}var u=s(4),d=s.n(u),m=s(1090),p=s(340),h=s.n(p),b=s(7),E=s(15);const f=Object(E.createAction)("[app] initialize"),g=()=>{const e=Object(b.c)();return Object(a.useEffect)(()=>{e(f())},[e]),null};class y extends a.Component{constructor(){super(...arguments),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0}),l.captureComponentException(e,t)}render(){const{hasError:e}=this.state,{children:t,renderFallback:s}=this.props;return e?s():t}}y.displayName="ErrorBoundary";var S=y,O=s(2);const v=" ",N=Object(a.forwardRef)((e,t)=>n.a.createElement("a",Object.assign({ref:t,rel:"noopener noreferrer",target:"_blank"},e)));var I=s(21),k=s(35);class T extends k.b{}var C=s(16);const j="/courses/:courseId/groups/:groupId",w={root:new C.a("/"),courses:new C.a("/courses"),courseDetails:new C.a(j),lessonDetails:new C.a("".concat(j,"/lessons/:lessonId")),lessonMaterial:new C.a("".concat(j,"/lessons/:lessonId/materials/:materialId"))},A={lessonTasks:new C.a("".concat(j,"/lessons/:lessonId/tasks")),taskDetails:new C.a("".concat(j,"/lessons/:lessonId/tasks/:taskId")),lessonProblem:new C.a("".concat(j,"/lessons/:lessonId/problems/:problemLinkId"))},_={courseSolutions:new C.a("".concat(j,"/solutions")),courseProgress:new C.a("".concat(j,"/progress")),courseAttendance:new C.a("".concat(j,"/progress/attendance")),courseVariants:new C.a("".concat(j,"/progress/variants")),lessonProgress:new C.a("".concat(j,"/lessons/:lessonId/progress")),taskSolutions:new C.a("".concat(j,"/lessons/:lessonId/tasks/:taskId/solutions/:solutionId?")),problemSolution:new C.a("".concat(j,"/lessons/:lessonId/problem/:problemLinkId/solution/:solutionId?"))},M={teacherHelp:new C.a("https://yandex.ru/support/lyceum-teachers"),studentHelp:new C.a("https://yandex.ru/support/lyceum-students"),yandexForm:new C.a("https://connect.yandex.ru/forms/:formId/"),feedbackForm:new C.a("https://yandex.ru/support/lyceum/faq.html#another-question__feedback-form"),contestAdminRunReport:new C.a("https://contest.yandex.:tld/admin/run-report")};let x,D;function P(e,t){return!(!e||!t)&&e.groups.includes(t)}!function(e){e.Student="student",e.Teacher="teacher",e.Methodist="methodist"}(x||(x={})),function(e){e.Schedule="schedule",e.Conditional="conditional"}(D||(D={}));var R=s(108),L=s.n(R);function F(e,t){L()("reachGoal",e,t)}class z extends a.Component{constructor(){super(...arguments),this.linkClickHandler=()=>{F("ButtonHelp",{uid:this.props.userUid})},this.renderHelpLink=e=>{const{courseMap:t}=this.props,s=Number(e.match.params.courseId),a=Number(e.match.params.groupId);if(!P(t[s],a))return null;const{role:r}=t[s];let i;switch(r){case x.Student:i=M.studentHelp.build();break;case x.Teacher:case x.Methodist:i=M.teacherHelp.build();break;default:throw new T("Role not supported",{role:r})}return n.a.createElement(N,{onClick:this.linkClickHandler,className:this.props.linkClassName,href:i},O.b.text({id:"help"}))}}render(){return n.a.createElement(I.b,{path:w.courseDetails.template,render:this.renderHelpLink})}}z.displayName="Help";var U=z;var H=Object(I.k)(Object(b.b)(function(e){const{courses:{courseMap:t}}=e;return{courseMap:t}})(U));let V,G;!function(e){e.RU="ru",e.COM="com"}(V||(V={})),function(e){e.RU="ru",e.EN="en"}(G||(G={}));const B=Object(a.createContext)({language:G.RU,tld:V.RU});class W extends a.Component{render(){const{settings:e,children:t}=this.props;return n.a.createElement(B.Provider,{value:e},t)}}function K(e){return e.users.user}function q(e){return e.users.user?e.users.user.id:null}function Y(e){return e.users.user?e.users.user.uid:null}function J(e){return!!e.users.user&&e.users.user.isSuperuser}W.displayName="SiteSettingsProvider";s(522);const Z=d.a.with("footer");class X extends a.Component{constructor(){super(...arguments),this.renderCopyright=()=>{const e=(new Date).getUTCFullYear();return n.a.createElement(B.Consumer,null,t=>n.a.createElement("div",{className:Z("copyright")},"© ",e>2018?"2018 – ".concat(e):"2018",v,v,O.b.element({id:"link-YANDEX",params:{yandex:n.a.createElement(N,{className:Z("yandex-link"),href:"https://yandex.".concat(t.tld)},O.b.text({id:"yandex"}))}})))}}render(){const{withHelpLink:e=!1,userUid:t}=this.props;return n.a.createElement("footer",{className:Z()},n.a.createElement("div",{className:Z("controls")},e&&n.a.createElement(H,{userUid:t,linkClassName:Z("help-link")})),n.a.createElement("div",{className:Z("legal")},n.a.createElement("div",null,O.b.markdown({id:"legal-notice-line",keyset:"common"})),this.renderCopyright()))}}X.displayName="Footer";var Q=Object(b.b)(function(e){return{userUid:Y(e)}})(X),$=s(11),ee=s(20);const te={courseSchedule:new C.a("/courses/:courseId/groups/:groupId/schedule")},se=[{exact:!0,key:"course-details",passTypes:[D.Schedule,D.Conditional],buildUrl:(e,t)=>w.courseDetails.build({courseId:e,groupId:t})}],ae=[{exact:!0,key:"course-details",passTypes:[D.Schedule,D.Conditional],buildUrl:(e,t)=>w.courseDetails.build({courseId:e,groupId:t})},{exact:!0,key:"course-solutions",passTypes:[D.Schedule,D.Conditional],buildUrl:(e,t)=>_.courseSolutions.build({courseId:e,groupId:t})},{exact:!0,key:"course-schedule",passTypes:[D.Schedule],buildUrl:(e,t)=>te.courseSchedule.build({courseId:e,groupId:t})},{key:"course-progress",passTypes:[D.Schedule,D.Conditional],buildUrl:(e,t)=>_.courseProgress.build({courseId:e,groupId:t})}];var ne=s(37);const re=e=>e.courses.courseMap,ie=Object(ne.a)([re,e=>e.courses.allIds],(e,t)=>t.map(t=>e[t]));function oe(e,t){return e.courses.courseMap[t]}function ce(e){if(!e)throw new k.e("No courseId was provided",{courseId:e});const t=Object(b.d)(t=>oe(t,e.toString()));if(!t)throw new k.e("No course data",{courseId:e});return t}var le=s(14);s(523);const ue=d.a.with("course-nav"),de=e=>{const{className:t,courseId:s,groupId:r,theme:i="dark",onNavItemClick:c}=e,l=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["className","courseId","groupId","theme","onNavItemClick"]),u=ce(s),d=Object(a.useMemo)(()=>(function(e,t){let s;switch(t){case x.Student:s=se;break;case x.Teacher:case x.Methodist:s=ae;break;default:s=[]}return s.filter(t=>t.passTypes.includes(e))})(u.passType,u.role),[u.passType,u.role]);return n.a.createElement("nav",Object.assign({},l,{className:Object(le.b)(ue("",{theme:i}),t)}),n.a.createElement("ul",{className:ue("items")},d.map(e=>n.a.createElement("li",{key:e.key},n.a.createElement(o.c,{exact:e.exact,activeClassName:ue("link",{active:!0}),className:ue("link"),to:e.buildUrl(s.toString(),r.toString()),onClick:c},O.b.text({id:e.key,keyset:"courses"}))))))};de.displayName="CourseNav";var me=de,pe=s(1059),he=s(5),be=s(1105),Ee=s(1058),fe=s(1057),ge=(s(524),s(1102)),ye=s(1056),Se=s(18),Oe=s(390);s(547);const ve=e=>n.a.createElement(Oe.a,Object.assign({followCursor:!0,animation:"fade",animateFill:!1,delay:0,theme:"dark",size:"small",placement:"bottom",trigger:"focus mouseenter"},e),e.children);ve.displayName="Tooltip";s(548);const Ne=d.a.with("notification-center"),Ie=e=>{let{theme:t,unreadCount:s,hideAllNotifications:a}=e;return n.a.createElement("header",{className:Ne("header")},n.a.createElement("h1",{className:Ne("title",{theme:t})},O.b.text({id:"notifications-title",keyset:"notifications"})),n.a.createElement(ve,{content:O.b.text({id:"hide-all-notifications-hint",keyset:"notifications"})},n.a.createElement("span",null,n.a.createElement(Se.a,{className:Ne("hide-all-button",{visible:Boolean(s)}),size:"s",theme:"clear",view:"lyceum",icon:e=>n.a.createElement(ge.a,{cls:e,size:"l",type:"remove-all"}),onClick:a}))))};Ie.displayName="NotificationCenterHeader";var ke=s(70),Te=s(41);var Ce=Te.DateTime;const je=d.a.with("notification"),we={dark:"remove-white",light:"remove"},Ae=e=>{const{children:t,theme:s,url:a,addedTime:r,hideNotification:i,onLinkClick:c}=e,l=n.a.createElement("time",{className:je("time")},Ce.fromISO(r).toLocaleString(Object.assign({},Ce.DATETIME_MED,{year:void 0}))),u=n.a.createElement(ve,{content:O.b.text({id:"hide-notification-hint",keyset:"notifications"})},n.a.createElement("span",null,n.a.createElement(Se.a,{className:je("hide-button"),size:"s",theme:"clear",view:"lyceum",icon:e=>n.a.createElement(ge.a,{cls:e,size:"xs",type:we[s]}),onClick:e=>{e.preventDefault(),e.stopPropagation(),i()}})));if(!a)return n.a.createElement("div",{className:je({theme:s})},t,l,u);return n.a.createElement(o.b,{className:je({type:"link",theme:s}),to:a,onClick:()=>{i(),c&&c()}},t,l,u)};let _e;Ae.displayName="NotificationWrapper",function(e){e.Male="male",e.Female="female",e.Unspecified="unspecified"}(_e||(_e={}));const Me=d.a.with("notification"),xe=e=>{const{changedBy:{gender:t,firstName:s,lastName:a},newScore:r}=e,i=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["changedBy","newScore","oldScore"]),o=O.b.text({id:"bonus-score-changed",keyset:"notifications"});return n.a.createElement(Ae,i,n.a.createElement("h2",{className:Me("title"),title:o},o),n.a.createElement("div",{className:Me("body")},n.a.createElement(ge.a,{cls:Me("icon"),type:"present",size:"m"}),n.a.createElement("span",null,O.b.text({id:t&&t!==_e.Unspecified?"".concat(t,"-teacher-has-set-score"):"teacher-has-set-score",keyset:"notifications",params:{teacher:"".concat(s," ").concat(a),score:O.b.text({id:"N-bonus-score",keyset:"notifications",params:{n:r,count:r}})}}))))};xe.displayName="BonusScoreChanged";const De=d.a.with("notification"),Pe=e=>{const{lessonId:t,type:s,title:a,course:r,group:i}=e,o=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["lessonId","type","title","course","group"]),c=w.lessonDetails.build({courseId:r.toString(),groupId:i.toString(),lessonId:t.toString()});return n.a.createElement(Ae,Object.assign({},o,{url:c}),n.a.createElement("h2",{className:De("title")},O.b.text({id:"".concat(s,"-lesson-opened"),keyset:"notifications"})),n.a.createElement("div",{className:De("body",{type:"padded"})},a))};Pe.displayName="LessonOpened";s(556);const Re=d.a.with("indicator");let Le,Fe,ze;!function(e){e.DarkGreen="dark-green",e.DarkGrey="dark-grey",e.Green="green",e.Grey="grey",e.Red="red",e.White="white",e.Yellow="yellow"}(Le||(Le={})),function(e){e.Red="red"}(Fe||(Fe={})),function(e){e.XS="xs",e.S="s",e.M="m",e.L="l"}(ze||(ze={}));class Ue extends a.PureComponent{render(){const{cls:e,title:t,withDot:s,withTick:a,size:r,color:i,semiTransparent:o,dotColor:c}=this.props;return n.a.createElement("div",{title:t,className:Object(le.b)(e,Re({color:i,size:r,"semi-transparent_yes":o,"with-dot_yes":s,"dot-color":c}))},a&&n.a.createElement(ge.a,{size:"l"===r?"m":r,type:"grey"===i?"tick-green":"tick-white"}))}}Ue.displayName="Indicator";var He=Ue;let Ve;!function(e){e.InProgress="in-progress",e.Finished="finished"}(Ve||(Ve={}));const Ge={large:ze.L,small:ze.XS},Be={[Ve.Finished]:{color:Le.Grey,withTick:!0},[Ve.InProgress]:{color:Le.White}};class We extends a.Component{render(){const{size:e,type:t}=this.props,s=Object.assign({size:Ge[e]},Be[t]);return n.a.createElement(He,s)}}We.displayName="LessonProgressIndicator";var Ke=We;s(557);const qe=d.a.with("manual-check-icon");class Ye extends a.PureComponent{render(){return n.a.createElement("span",{className:Object(le.b)(qe(),this.props.cls),title:O.b.text({id:"manual-check-hint",keyset:"tasks"})},O.b.text({id:"manual-check-abbr",keyset:"tasks"}))}}Ye.displayName="ManualCheckIcon";var Je=Ye;let Ze;!function(e){e.Review="review",e.AutoReview="auto-review",e.Rework="rework",e.Accepted="accepted",e.AcceptedAfterDeadline="accepted-after-deadline",e.New="new",e.Draft="draft",e.Wrong="wrong",e.PartialAccepted="partial-accepted",e.NotSolved="not-solved"}(Ze||(Ze={}));const Xe={[Ze.AutoReview]:1,[Ze.Review]:2,[Ze.Rework]:3,[Ze.Accepted]:4,[Ze.AcceptedAfterDeadline]:5,[Ze.Draft]:6,[Ze.New]:7,[Ze.Wrong]:8,[Ze.PartialAccepted]:9,[Ze.NotSolved]:10},Qe={[Ze.Review]:"status-waiting-for-review",[Ze.AutoReview]:"status-waiting-for-review",[Ze.Rework]:"status-rework",[Ze.Accepted]:"status-accepted",[Ze.AcceptedAfterDeadline]:"status-accepted-after-deadline",[Ze.New]:"status-new",[Ze.Draft]:"status-draft"},$e={[Ze.Review]:"status-on-manual-review",[Ze.AutoReview]:"status-on-auto-review",[Ze.Rework]:"status-rework",[Ze.Accepted]:"status-accepted",[Ze.AcceptedAfterDeadline]:"status-accepted-after-deadline",[Ze.New]:"status-new",[Ze.Draft]:"status-draft"};let et,tt;!function(e){e.Classwork="classwork",e.Homework="homework",e.Additional="additional",e.Additional2="additional-2",e.Additional3="additional-3",e.ControlWork="control-work",e.IndividualWork="individual-work",e.Another="another"}(et||(et={})),function(e){e.New="new",e.Max="max"}(tt||(tt={}));class st extends a.PureComponent{render(){const{role:e=x.Student,score:t,scoreMax:s,sentAfterDeadline:a,hasActivityAfterDeadline:r,solutionStatus:i}=this.props,o={[Ze.Accepted]:{color:Le.Green,withTick:!0},[Ze.PartialAccepted]:{color:Le.Green},[Ze.AcceptedAfterDeadline]:{color:Le.Green,withTick:!0},[Ze.New]:{color:Le.Grey},[Ze.Draft]:{color:Le.DarkGrey},[Ze.Review]:{color:e===x.Student?Le.DarkGrey:Le.Yellow},[Ze.AutoReview]:{color:Le.DarkGrey},[Ze.Rework]:{color:Le.Red},[Ze.Wrong]:{color:Le.Red},[Ze.NotSolved]:{color:Le.Red},[tt.New]:{color:Le.Grey},[tt.Max]:{color:Le.DarkGreen,withTick:!0}},c={withDot:r,title:r?O.b.text({id:"has-activity-after-deadline",keyset:"solutions"}):void 0,dotColor:r?Fe.Red:void 0},l={semiTransparent:Boolean(a)};return i?i===Ze.Accepted&&t===s?n.a.createElement(He,Object.assign({},o[tt.Max],l,c,{size:ze.XS})):n.a.createElement(He,Object.assign({},o[i],l,c,{size:ze.XS})):n.a.createElement(He,Object.assign({},o[tt.New],l,c,{size:ze.XS}))}}st.displayName="TaskProgressIndicator";var at=st;s(558);const nt=d.a.with("task-preview");class rt extends a.Component{render(){const{taskTitle:e,isTaskManuallyChecked:t,scoreMax:s,score:a,solutionStatus:r,role:i=x.Student,lesson:o}=this.props;return n.a.createElement("div",{className:nt()},n.a.createElement("div",{className:nt("progress-indicator")},n.a.createElement(at,{role:i,score:a,scoreMax:s,solutionStatus:r})),n.a.createElement("div",{className:nt("data")},n.a.createElement("span",{className:nt("task-name")},e,t&&n.a.createElement(Je,{cls:nt("task-check-info")})),o&&n.a.createElement("div",{className:nt("lesson")},n.a.createElement(Ke,{size:"small",type:o.status}),n.a.createElement("span",{className:nt("lesson-name")},o.title))))}}rt.displayName="TaskPreview";var it=rt;const ot=d.a.with("notification"),ct=e=>{const{verdict:t,taskSolution:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["verdict","taskSolution"]),{course:r,lesson:i,group:o,id:c,scoreMax:l}=s.task;let u,d;i&&(d=A.taskDetails.build({courseId:r.toString(),groupId:o.toString(),lessonId:i.id.toString(),taskId:c.toString()}),u={title:i.title,status:i.isAccepted?Ve.Finished:Ve.InProgress});const m=O.b.text({id:"solution-checked",keyset:"notifications"}),p="".concat(m,": ").concat(s.score,"/").concat(l,", ").concat(t);return n.a.createElement(Ae,Object.assign({},a,{url:d}),n.a.createElement("h2",{className:ot("title"),title:p},p),n.a.createElement("div",{className:ot("body",{type:"task"})},n.a.createElement(it,{role:x.Student,lesson:u||null,scoreMax:l,solutionStatus:s.status.type,taskTitle:p})))};ct.displayName="SubmissionChecked";const lt=d.a.with("notification"),ut=e=>{const{author:t,taskSolution:s,courseMap:a,data:r}=e,i=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["author","taskSolution","courseMap","data"]),{course:o,lesson:c,group:l,id:u}=s.task,d=a[o];let m,p,h;if(d&&c){h={title:c.title,status:c.isAccepted?Ve.Finished:Ve.InProgress};const e={courseId:o.toString(),groupId:l.toString(),lessonId:c.id.toString(),taskId:u.toString()};switch(p=d.role){case x.Student:m=A.taskDetails.build(e);break;case x.Teacher:case x.Methodist:m=_.taskSolutions.build(Object.assign({},e,{solutionId:s.id.toString()}));break;default:throw new T("Role not supported",{role:p})}}const b="".concat(t.displayName,": ").concat(r);return n.a.createElement(Ae,Object.assign({},i,{url:m}),n.a.createElement("h2",{className:lt("title"),title:b,dangerouslySetInnerHTML:{__html:b}}),n.a.createElement("div",{className:lt("body")},n.a.createElement(it,{role:p,lesson:h||null,scoreMax:s.task.scoreMax,solutionStatus:s.status.type,taskTitle:s.task.title})))};ut.displayName="TaskSolutionCommented";const dt=d.a.with("notification"),mt=e=>{const{task:t,score:s,status:a}=e,r=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["task","score","status"]),{course:i,lesson:o,group:c,id:l,scoreMax:u,title:d}=t;let m,p;return o&&(p=A.taskDetails.build({courseId:i.toString(),groupId:c.toString(),lessonId:o.id.toString(),taskId:l.toString()}),m={title:o.title,status:o.isAccepted?Ve.Finished:Ve.InProgress}),n.a.createElement(Ae,Object.assign({},r,{url:p}),n.a.createElement("h2",{className:dt("title")},O.b.text({id:"solution-checked",keyset:"notifications"}),": ",s,"/",u),n.a.createElement("div",{className:dt("body")},n.a.createElement(it,{role:x.Student,lesson:m||null,scoreMax:u,solutionStatus:a.type,taskTitle:d})))};let pt,ht;function bt(){return{type:pt.START_NOTIFICATION_POLL}}function Et(){return{type:pt.STOP_NOTIFICATION_POLL}}function ft(e){return{type:pt.SET_UNREAD_COUNT,payload:e}}function gt(){return{type:pt.FETCH_NOTIFICATIONS_START}}function yt(e){return{type:pt.FETCH_NOTIFICATIONS_SUCCESS,payload:e}}function St(e){return{type:pt.HIDE_NOTIFICATION,payload:e}}function Ot(){return{type:pt.HIDE_ALL_NOTIFICATIONS}}function vt(e){return{type:pt.SET_CONSISTENCY_FLAG,payload:e}}mt.displayName="TaskSolutionReviewed",function(e){e.START_NOTIFICATION_POLL="[notification-center] start notification poll",e.STOP_NOTIFICATION_POLL="[notification-center] stop notification poll",e.SET_UNREAD_COUNT="[notification-center] set unread count",e.FETCH_NOTIFICATIONS_START="[notification-center] fetch notifications start",e.FETCH_NOTIFICATIONS_SUCCESS="[notification-center] fetch notifications success",e.FETCH_NOTIFICATIONS_FAIL="[notification-center] fetch notifications fail",e.HIDE_NOTIFICATION="[notification-center] hide notification",e.UNHIDE_NOTIFICATION="[notification-center] unhide notification",e.DELETE_NOTIFICATION="[notification-center] delete notification",e.HIDE_ALL_NOTIFICATIONS="[notification-center] hide all notifications",e.UNHIDE_ALL_NOTIFICATIONS="[notification-center] unhide all notifications",e.DELETE_ALL_NOTIFICATIONS="[notification-center] delete all notifications",e.SET_CONSISTENCY_FLAG="[notification-center] set consistency flag"}(pt||(pt={})),function(e){e.SubmissionChecked="submission-checked",e.TaskSolutionCommented="task-solution-commented",e.TaskSolutionReviewed="task-solution-reviewed",e.LessonOpened="lesson-opened",e.BonusScoreChanged="bonus-score-changed"}(ht||(ht={}));var Nt;s(559);let It=(kt=(Nt=class extends a.PureComponent{render(){const{theme:e,courseMap:t,onNotificationClick:s,notification:{addedTime:a,objectData:r,type:i}}=this.props,o={theme:e,addedTime:a,onLinkClick:s,hideNotification:this.hideNotification};switch(i){case ht.LessonOpened:return n.a.createElement(Pe,Object.assign({},o,r));case ht.TaskSolutionCommented:return n.a.createElement(ut,Object.assign({},o,r,{courseMap:t}));case ht.TaskSolutionReviewed:return n.a.createElement(mt,Object.assign({},o,r));case ht.SubmissionChecked:return n.a.createElement(ct,Object.assign({},o,r));case ht.BonusScoreChanged:return n.a.createElement(xe,Object.assign({},o,r));default:throw new k.f("Notification type not supported",{type:i})}}hideNotification(){this.props.hide(this.props.notification.id)}}).prototype,Tt="hideNotification",Ct=[$.a],jt=Object.getOwnPropertyDescriptor(Nt.prototype,"hideNotification"),wt=Nt.prototype,At={},Object.keys(jt).forEach(function(e){At[e]=jt[e]}),At.enumerable=!!At.enumerable,At.configurable=!!At.configurable,("value"in At||At.initializer)&&(At.writable=!0),At=Ct.slice().reverse().reduce(function(e,t){return t(kt,Tt,e)||e},At),wt&&void 0!==At.initializer&&(At.value=At.initializer?At.initializer.call(wt):void 0,At.initializer=void 0),void 0===At.initializer&&(Object.defineProperty(kt,Tt,At),At=null),Nt);var kt,Tt,Ct,jt,wt,At;It.displayName="NotificationComponent";const _t=Object(b.b)(function(e){return{courseMap:re(e)}},function(e){return Object(ee.bindActionCreators)({hide:St},e)})(It);s(560);const Mt=d.a.with("notification-center"),xt=e=>{let{theme:t,notifications:s,onNotificationClick:r}=e;const i=Object(b.d)(Y),o=Object(a.useCallback)(()=>{F("ButtonBellChats",{uid:i}),r&&r()},[r,i]);return n.a.createElement("ul",{className:Mt("list")},n.a.createElement(ke.TransitionGroup,{component:null},s.map(e=>n.a.createElement(ke.CSSTransition,{key:e.id,timeout:500,classNames:"fade"},n.a.createElement("li",{className:Mt("item",{theme:t})},n.a.createElement(_t,{theme:t,notification:e,onNotificationClick:o}))))))};function Dt(e,t){const{notificationMap:s}=e.notificationCenter,a=s[t];return Boolean(a&&!a.isRead)}function Pt(e){const{notificationIds:t,notificationMap:s}=e.notificationCenter;return t.map(e=>s[e]).filter(e=>e&&!e.isRead)}function Rt(e){return e.notificationCenter.notificationIds.find(t=>Dt(e,t))}function Lt(e){return function(e,t){for(let s=e.length-1;s>=0;--s)if(t(e[s]))return e[s]}(e.notificationCenter.notificationIds,t=>Dt(e,t))}function Ft(e){return e.notificationCenter.notificationIds}function zt(e){return e.notificationCenter.unreadCount}function Ut(e){return e.notificationCenter.fetchStatus}function Ht(e){return e.notificationCenter.fetchError}function Vt(e){return e.notificationCenter.isConsistent}xt.displayName="NotificationCenterList";var Gt=s(8);s(561);const Bt=d.a.with("notification-center"),Wt=250;class Kt extends a.Component{constructor(){super(...arguments),this.containerRef=Object(a.createRef)(),this.renderMain=()=>{const{unreadCount:e,fetchError:t,notifications:s,fetchStatus:a,theme:r,onNotificationClick:i}=this.props;if(!e)return this.renderEmptyListMessage();if(s.length)return n.a.createElement(xt,{notifications:s,theme:r,onNotificationClick:i});if(a===Gt.a.PENDING)return this.renderCenteredSpin();if(a===Gt.a.FAIL){const{id:e,keyset:s}=Object(O.a)(t);return this.renderCenteredMessage(O.b.text({id:e,keyset:s}))}return null},this.shouldLoadMore=()=>{const{fetchStatus:e,notifications:t,unreadCount:s}=this.props;return e!==Gt.a.PENDING&&t.length<s},this.handleScroll=()=>{if(!this.shouldLoadMore())return;const e=this.containerRef.current;e&&(e.clientHeight+e.scrollTop<e.scrollHeight-Wt||this.props.fetchNotifications())},this.renderEmptyListMessage=()=>{const e=O.b.text({id:"notifications-empty-message",keyset:"notifications"});return this.renderCenteredMessage(e)},this.renderErrorMessage=()=>{const e=O.b.text({id:"internal-error",keyset:"errors"});return this.renderCenteredMessage(e)},this.renderCenteredMessage=e=>n.a.createElement("div",{className:Bt("message-wrapper")},n.a.createElement("p",{className:Bt("message")},e)),this.renderCenteredSpin=()=>n.a.createElement(ye.a,{progress:!0,position:"center",size:"m"})}componentDidMount(){this.props.unreadCount&&this.props.fetchNotifications()}getSnapshotBeforeUpdate(e){if(e.notifications.length>=this.props.notifications.length)return null;const[t]=e.notifications,[s]=this.props.notifications;if(!t||t.id===s.id)return null;const a=this.containerRef.current;return a?a.scrollHeight-a.scrollTop:null}componentDidUpdate(e,t,s){const a=this.containerRef.current;if(!a)return;if(null!==s)return void(a.scrollTop=a.scrollHeight-s);const n=a.scrollHeight-a.clientHeight;n&&n<=Wt&&this.shouldLoadMore()&&this.props.fetchNotifications()}render(){const{unreadCount:e,theme:t,hideNotifications:s}=this.props;return n.a.createElement("section",{className:Bt({theme:t})},n.a.createElement(Ie,{theme:t,unreadCount:e,hideAllNotifications:s}),n.a.createElement(S,{renderFallback:this.renderErrorMessage},n.a.createElement("main",{className:Bt("main"),ref:this.containerRef,onScroll:this.handleScroll},this.renderMain())))}}Kt.displayName="NotificationCenter";var qt,Yt=Object(b.b)(function(e){return{notifications:Pt(e),unreadCount:zt(e),fetchStatus:Ut(e),fetchError:Ht(e)}},function(e){return Object(ee.bindActionCreators)({fetchNotifications:gt,hideNotifications:Ot},e)})(Kt),Jt=s(1103);s(580);const Zt=d.a.with("question-form");let Xt=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((qt=class extends a.Component{constructor(){super(...arguments),this.state={iframeHeight:0}}componentDidMount(){window.addEventListener("message",this.receiveFormMessage)}componentWillUnmount(){window.removeEventListener("message",this.receiveFormMessage)}render(){const{iframeHeight:e}=this.state,{isMobile:t,formId:s,formName:a}=this.props;return n.a.createElement("div",{className:Zt({mobile:t})},n.a.createElement("iframe",{frameBorder:0,name:a,src:M.yandexForm.build({formId:s},{iframe:1,"media-type":t?"mobile":void 0}),style:{height:e}}),!e&&n.a.createElement("div",{className:Zt("spinner")},n.a.createElement(ye.a,{progress:!0,position:"center",size:"l"})))}receiveFormMessage(e){try{const t=JSON.parse(e.data),s=t["iframe-height"];s&&t.name===this.props.formName&&this.setState({iframeHeight:s})}catch(e){}}}).prototype,"receiveFormMessage",[$.a],Object.getOwnPropertyDescriptor(qt.prototype,"receiveFormMessage"),qt.prototype),qt);Xt.displayName="QuestionForm";var Qt=Xt;var $t;function es(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const ts=O.b.text({id:"question-form.staff-id"}),ss=O.b.text({id:"question-form.non-staff-id"});let as=(es(($t=class e extends a.Component{constructor(){super(...arguments),this.state={isModalVisible:!1,formKey:0}}static shouldOpenModal(){return document.documentElement.clientWidth>=768}static getFormId(e){switch(e){case x.Student:return ss;case x.Teacher:case x.Methodist:return ts;default:throw new T("Role not supported",{role:e})}}componentDidUpdate(e,t){!t.isModalVisible&&this.state.isModalVisible&&this.setState({formKey:t.formKey+1})}handleLinkClick(t){F("ButtonAskQuestion",{uid:this.props.userUid}),e.shouldOpenModal()&&(t.preventDefault(),this.setState({isModalVisible:!0}))}closeModal(){this.setState({isModalVisible:!1})}renderQuestionLink(t){let{match:{params:s}}=t;const{courseMap:a,linkClassName:r,isMobile:i=!1}=this.props,{isModalVisible:o,formKey:c}=this.state,l=Number(s.courseId),u=Number(s.groupId);if(!P(a[l],u))return null;const{role:d}=a[l],m=e.getFormId(d);return n.a.createElement(n.a.Fragment,null,n.a.createElement(N,{className:r,href:M.yandexForm.build({formId:m}),onClick:this.handleLinkClick},O.b.text({id:"question"})),n.a.createElement(Jt.a,{autoclosable:!0,visible:o,onOutsideClick:this.closeModal},n.a.createElement(Qt,{key:c,formId:m,formName:"ya-form-".concat(m,"-").concat(c),isMobile:i})))}render(){return n.a.createElement(I.b,{path:w.courseDetails.template,render:this.renderQuestionLink})}}).prototype,"handleLinkClick",[$.a],Object.getOwnPropertyDescriptor($t.prototype,"handleLinkClick"),$t.prototype),es($t.prototype,"closeModal",[$.a],Object.getOwnPropertyDescriptor($t.prototype,"closeModal"),$t.prototype),es($t.prototype,"renderQuestionLink",[$.a],Object.getOwnPropertyDescriptor($t.prototype,"renderQuestionLink"),$t.prototype),$t);as.displayName="Question";var ns=as;var rs=Object(I.k)(Object(b.b)(function(e){const{courses:{courseMap:t}}=e;return{courseMap:t}})(ns));const is=Object(a.createContext)({host:"https://avatars.mds.yandex.net"});class os extends a.Component{render(){const{avatarOptions:e,children:t}=this.props;return n.a.createElement(is.Provider,{value:e},t)}}os.displayName="AvatarOptionsProvider";const cs=Object(a.createContext)(1),ls=e=>{let{id:t,children:s}=e;return n.a.createElement(cs.Provider,{value:t},s)};function us(){return(us=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}ls.displayName="LyceumBotIdProvider";var ds=n.a.createElement("path",{opacity:.44,d:"M5 16.67c0-2.3 1.87-4.17 4.17-4.17h8.33A2.5 2.5 0 0 0 20 10V5c0-2.21-1.79-4-4-4h-5C8.79 1 7 2.8 7 5v2H5c-2.21 0-4 1.79-4 4v5c0 2.21 1.79 4 4 4v-3.33z"}),ms=n.a.createElement("path",{opacity:.44,d:"M22 7v3.33c0 2.3-1.87 4.17-4.17 4.17H9.5A2.5 2.5 0 0 0 7 17v5c0 2.21 1.79 4 4 4h5c2.21 0 4-1.79 4-4v-2h2c2.21 0 4-1.79 4-4v-5c0-2.21-1.79-4-4-4z"}),ps=n.a.createElement("circle",{fill:"#fff",cx:11.5,cy:5,r:1.5}),hs=n.a.createElement("circle",{fill:"#fff",cx:15.5,cy:22,r:1.5});const bs=e=>n.a.createElement("svg",us({width:27,height:27,viewBox:"0 0 27 27"},e),ds,ms,ps,hs);function Es(){return(Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var fs=n.a.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 19.74h6.2M13.5 7.26H7.3m12.44 0V5.34c0-2.12-1.72-3.84-3.84-3.84h-4.8c-2.12 0-3.84 1.72-3.84 3.84v1.92H5.34c-2.12 0-3.84 1.72-3.84 3.84v4.8c0 2.12 1.72 3.84 3.84 3.84h1.92v1.92c0 2.12 1.72 3.84 3.84 3.84h4.8c2.12 0 3.84-1.72 3.84-3.84v-1.92h1.92c2.12 0 3.84-1.72 3.84-3.84v-4.8c0-2.12-1.72-3.84-3.84-3.84h-1.92z"}),gs=n.a.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.26 19.74v-2.4c0-2.12 1.72-3.84 3.84-3.84h2.88M13.98 13.5h1.92c2.12 0 3.84-1.72 3.84-3.84v-2.4"});const ys=e=>n.a.createElement("svg",Es({width:27,height:27,viewBox:"0 0 27 27",opacity:.44},e),fs,gs);function Ss(){return(Ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var Os=n.a.createElement("circle",{cx:13.5,cy:13.5,r:12.5,fillRule:"evenodd",clipRule:"evenodd",opacity:.44}),vs=n.a.createElement("circle",{fill:"#fff",cx:13.5,cy:10.5,r:4.5}),Ns=n.a.createElement("path",{fill:"#fff",d:"M20.99 22.21C19.86 19.17 16.93 17 13.5 17s-6.35 2.17-7.49 5.21C8.03 23.94 10.64 25 13.5 25s5.47-1.06 7.49-2.79z"});const Is=e=>n.a.createElement("svg",Ss({width:27,height:27,viewBox:"0 0 27 27"},e),Os,vs,Ns);function ks(){return(ks=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var Ts=n.a.createElement("circle",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",cx:13.5,cy:13.5,r:12}),Cs=n.a.createElement("path",{d:"M21.17 22.73C20.19 19.42 17.13 17 13.5 17s-6.69 2.42-7.67 5.73",fill:"none",stroke:"#000",strokeLinejoin:"round"}),js=n.a.createElement("circle",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",cx:13.5,cy:10.5,r:4.5});const ws=e=>n.a.createElement("svg",ks({width:27,height:27,viewBox:"0 0 27 27",opacity:.44},e),Ts,Cs,js);s(585);const As=Object(le.a)("user-icon"),_s="0/0-0",Ms={s:"small",m:"middle",l:"50",xl:"150"},xs={s:"retina-small",m:"retina-middle",l:"retina-50",xl:"300"},Ds=Object(a.forwardRef)((e,t)=>{const{className:s,userId:a,avatarId:r=_s,size:i="m",alt:o="",style:c}=e,l=Object(le.b)(As({size:i}),s);return n.a.createElement(cs.Consumer,null,e=>{const s=r===_s;if(s||a===e){const e=t;let a;switch(i){case"s":case"m":a=s?Is:bs;break;case"l":a=s?ws:ys;break;default:a=null}return n.a.createElement("span",{ref:e},a&&n.a.createElement(a,{className:l,style:c}))}const u=t;return n.a.createElement(is.Consumer,null,e=>{const t="".concat(e.host,"/get-yapic/").concat(r);return n.a.createElement("img",{ref:u,className:l,style:c,alt:o,src:"".concat(t,"/islands-").concat(Ms[i]),srcSet:"".concat(t,"/islands-").concat(xs[i])})})})});class Ps extends a.PureComponent{render(){return this.props.children({user:this.props.user})}}Ps.displayName="UserProvider";var Rs=Object(b.b)(function(e){return{user:K(e)}})(Ps);const Ls={profile:new C.a("/profile/:userId?")};var Fs;s(586);function zs(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const Us=d.a.with("header"),Hs=Object(he.compose)(fe.a,Ee.a)(be.a);var Vs;!function(e){e.Navigation="navigation",e.Notifications="notifications"}(Vs||(Vs={}));const Gs={view:Vs.Navigation,searchText:""};let Bs=(zs((Fs=class extends a.Component{constructor(){super(...arguments),this.state=Object.assign({},Gs,{isMenuVisible:!1}),this.renderCourseSection=e=>{let{match:{params:t}}=e;const{courseId:s,groupId:a}=t,{courseMap:r}=this.props;return P(r[s],Number(a))?n.a.createElement("div",{className:Us("course-section")},this.renderCoursesLink(),this.renderCurrentCourse(s,a),n.a.createElement("div",{className:Us("course-nav")},n.a.createElement(me,{courseId:Number(s),groupId:Number(a),onNavItemClick:this.toggleMenu}))):this.renderCoursesLink()},this.renderCurrentCourse=(e,t)=>{const{courseMap:s,groupMap:a}=this.props,r=s[e],i=a[t];if(!r)return null;let o;switch(r.role){case x.Student:break;case x.Teacher:case x.Methodist:o=i.name;break;default:throw new T("Role not supported",{role:r.role})}return n.a.createElement("div",{className:Us("current-course")},r.title,o&&n.a.createElement("div",{className:Us("group-name")},i.name))}}componentDidUpdate(e,t){!t.isMenuVisible&&this.state.isMenuVisible&&this.resetMenu()}render(){const{notificationCount:e}=this.props,{isMenuVisible:t,view:s}=this.state;return n.a.createElement(n.a.Fragment,null,this.renderMenuToggle("menu"),n.a.createElement(Rs,null,a=>{let{user:r}=a;return r?n.a.createElement(Hs,{visible:t,keepMounted:!1,onOutsideClick:this.toggleMenu},n.a.createElement("div",{className:Us("menu")},n.a.createElement("div",{className:Us("menu-controls")},n.a.createElement(o.b,{className:Us("user-link"),to:Ls.profile.build({userId:r.id.toString()}),onClick:this.toggleMenu},n.a.createElement(Ds,{className:Us("avatar"),avatarId:this.props.avatar,size:"l"})),n.a.createElement("button",{type:"button",className:Us("notification-button",{active:s===Vs.Notifications}),onClick:()=>this.toggleMenuView(r.uid)},n.a.createElement(ge.a,{size:"l",type:"signal-outline-white"}),n.a.createElement(pe.a,{count:e,maxCount:1/0})),this.renderMenuToggle("close-white"),n.a.createElement("div",{className:Us("menu-context-controls")},s===Vs.Notifications&&this.renderNotificationControls())),s===Vs.Navigation&&this.renderNavigation(r.uid),s===Vs.Notifications&&this.renderNotifications())):null}))}renderNavigation(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.d,null,n.a.createElement(I.b,{path:w.courseDetails.template,render:this.renderCourseSection}),n.a.createElement(I.b,{render:this.renderCoursesLink})),n.a.createElement(H,{userUid:e,linkClassName:Us("link")}),n.a.createElement(rs,{userUid:e,isMobile:!0,linkClassName:Us("link")}))}renderNotifications(){return n.a.createElement(Yt,{theme:"dark",onNotificationClick:this.toggleMenu})}renderNotificationControls(){const{notificationCount:e,hideAllNotifications:t}=this.props;return e?n.a.createElement("div",{className:Us("notification-controls")},e>0&&O.b.text({id:"N-notifications",keyset:"notifications",params:{count:e,n:e}}),n.a.createElement("button",{type:"button",className:Us("control-button"),onClick:t},O.b.text({id:"hide-all-notifications-hint",keyset:"notifications"}))):null}renderMenuToggle(e){return n.a.createElement("button",{type:"button",className:Us("menu-toggle"),onClick:this.toggleMenu},n.a.createElement(ge.a,{size:"l",type:e}))}renderCoursesLink(){return Object.keys(this.props.courseMap).length?n.a.createElement(o.b,{className:Us("link"),to:w.courses.build(),onClick:this.toggleMenu},O.b.text({id:"courses",keyset:"courses"})):null}resetMenu(){this.setState(Object.assign({},Gs))}toggleMenu(){this.setState(e=>({isMenuVisible:!e.isMenuVisible}))}toggleMenuView(e){F("ButtonBell",{uid:e}),this.changeMenuView(Vs.Notifications)}changeMenuView(e){this.setState(t=>({view:t.view===e?Vs.Navigation:e}))}}).prototype,"renderCoursesLink",[$.a],Object.getOwnPropertyDescriptor(Fs.prototype,"renderCoursesLink"),Fs.prototype),zs(Fs.prototype,"toggleMenu",[$.a],Object.getOwnPropertyDescriptor(Fs.prototype,"toggleMenu"),Fs.prototype),zs(Fs.prototype,"toggleMenuView",[$.a],Object.getOwnPropertyDescriptor(Fs.prototype,"toggleMenuView"),Fs.prototype),zs(Fs.prototype,"changeMenuView",[$.a],Object.getOwnPropertyDescriptor(Fs.prototype,"changeMenuView"),Fs.prototype),Fs);Bs.displayName="HeaderMenu";var Ws=Bs,Ks=s(1113);const qs=d.a.with("header");class Ys extends a.Component{constructor(){super(...arguments),this.state={isPopupVisible:!1},this.notificationButton=n.a.createRef(),this.popupDirections=["bottom-right"],this.togglePopup=()=>{F("ButtonBell",{uid:this.props.uid}),this.setState(e=>({isPopupVisible:!e.isPopupVisible}))}}render(){const{notificationCount:e}=this.props,{isPopupVisible:t}=this.state;return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{ref:this.notificationButton,type:"button",className:qs("notification-button",{active:Boolean(e)||t}),onClick:this.togglePopup},n.a.createElement(ge.a,{size:"l",type:"signal-outline"}),n.a.createElement(pe.a,{count:e,maxCount:1/0})),n.a.createElement(Ks.a,{autoclosable:!0,anchor:this.notificationButton.current,directions:this.popupDirections,mainOffset:4,target:"anchor",theme:"normal",visible:t,onOutsideClick:this.togglePopup},n.a.createElement(Yt,{theme:"light",onNotificationClick:this.togglePopup})))}}Ys.displayName="HeaderNotifications";var Js=Ys;s(602);const Zs=d.a.with("login-link"),Xs=e=>{let{passportHost:t,currentUrl:s}=e;const a="".concat(t,"/auth?retpath=").concat(encodeURIComponent(s));return n.a.createElement("a",{className:Zs(),href:a},O.b.text({id:"login",keyset:"common"}))};Xs.displayName="LoginLink";s(603);const Qs=d.a.with("logo");class $s extends a.Component{render(){const{isExternal:e=!1}=this.props,t={className:Qs("link",{type:"service"}),title:O.b.text({id:"lyceum"})};return n.a.createElement(B.Consumer,null,s=>n.a.createElement("div",{className:Qs({lang:s.language})},n.a.createElement(N,{className:Qs("link",{type:"main"}),href:"https://yandex.".concat(s.tld),title:O.b.text({id:"yandex"})}),e?n.a.createElement(N,Object.assign({},t,{href:"/",target:"_self"})):n.a.createElement(o.b,Object.assign({},t,{to:"/"}))))}}$s.displayName="Logo";var ea=$s,ta=s(173),sa=s(174),aa=s(175),na=s(338);const ra=Object(he.compose)(ta.a,fe.a,Ee.a,sa.a,aa.a)(na.a),ia=d.a.with("old-popup");class oa extends a.PureComponent{render(){const e=this.props,{autoclosable:t=!0,target:s="anchor",theme:a="normal",children:r,cls:i}=e,o=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["autoclosable","target","theme","children","cls"]);return n.a.createElement(Ks.a,Object.assign({cls:Object(le.b)(i,ia()),target:s,autoclosable:t,theme:a},o),r)}}oa.displayName="OldPopup";var ca=oa;const la=(e,t,s)=>{const[n,r]=Object(a.useState)(e);return[n,Object(a.useCallback)(()=>{r(e=>!e)},[]),Object(a.useCallback)(()=>{r(!1)},[]),Object(a.useCallback)(e=>{t&&t.contains(e.target)||s&&s.contains(e.target)||r(!1)},[t,s])]};s(608);const ua=d.a.with("nav-tab"),da=e=>{const{children:t,className:s,activeClassName:a,view:r="button",wide:i=!1,wideOnMobile:c=!1,back:l=!1,exact:u=!1}=e,d=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["children","className","activeClassName","view","wide","wideOnMobile","back","exact"]);return n.a.createElement(o.c,Object.assign({},d,{exact:u,activeClassName:Object(le.b)(ua({active:!0}),a),className:Object(le.b)(ua({back:l,"wide-on-mobile":c,wide:i,view:r}),s)}),l&&n.a.createElement(ge.a,{cls:ua("arrow-icon"),type:"arrow-short",size:"s",direction:"left"}),n.a.createElement("span",{className:ua("inner")},t))};da.displayName="NavTab";s(609);const ma=d.a.with("main-nav"),pa=(e,t)=>w.courseDetails.build({courseId:e.toString(),groupId:t.toString()}),ha=e=>{let{open:t,courseList:s,groupMap:r,onNavItemClick:i}=e;const c=Object(a.useRef)(null),l=document.querySelector(".".concat(ma("active-element")));Object(a.useEffect)(()=>{if(l)try{l.scrollIntoView({block:"center"})}catch(e){l.scrollIntoView(!1),c.current&&(c.current.scrollTop+=c.current.clientHeight/2)}},[t,l]);const u=Object(a.useCallback)(e=>{let{id:t,title:s,groups:a}=e;return n.a.createElement(o.c,{className:ma("course-link"),activeClassName:Object(le.b)(ma("course-link",{active:!0}),ma("active-element")),to:pa(t,a[0]),onClick:i},s)},[i]),d=Object(a.useCallback)(e=>{let{id:t,title:s,groups:a}=e;return n.a.createElement(n.a.Fragment,null,s,n.a.createElement("ul",{className:ma("group-list")},a.map(e=>n.a.createElement("li",{key:e,className:ma("group-item")},n.a.createElement(da,{view:"button",activeClassName:ma("active-element"),to:pa(t,e),onClick:i},r[e].name)))))},[r,i]);return n.a.createElement("nav",{className:ma("menu")},n.a.createElement("header",{className:ma("header")},n.a.createElement(N,{className:ma("courses-link"),href:w.courses.build()},O.b.text({id:"courses",keyset:"courses"}),n.a.createElement(ge.a,{size:"m",type:"new-window"}))),n.a.createElement("ul",{ref:c,className:ma("course-list")},s.map(e=>n.a.createElement("li",{key:e.id,className:ma("course-item")},e.role===x.Student?u(e):d(e)))))};ha.displayName="MainNavMenu";s(610);const ba=d.a.with("main-nav"),Ea=["bottom-center"],fa=e=>{let{courseList:t,groupMap:s,currentCourse:r,currentGroup:i}=e;const o=Object(a.useRef)(null),[c,l]=Object(a.useState)(!1),u=Object(a.useCallback)(()=>l(!c),[c]),d=Object(a.useCallback)(()=>l(!1),[]),m=Object(a.useCallback)(e=>n.a.createElement(ge.a,{cls:Object(le.b)(ba("icon"),e),type:"arrow-dropdown",size:"xs"}),[]);return n.a.createElement("div",{className:ba()},n.a.createElement("div",{className:ba("current-course")},n.a.createElement("span",{className:ba("course-name"),title:r.title},r.title),r.role!==x.Student&&n.a.createElement("span",{className:ba("group-name"),title:i.name},i.name)),n.a.createElement(Se.a,{className:ba("button",{active:c}),innerRef:o,size:"xs",theme:"pseudo",view:"default",tone:"default",onClick:u,icon:m}),n.a.createElement(ca,{target:"anchor",anchor:o.current,directions:Ea,theme:"normal",mainOffset:12,visible:c,onOutsideClick:d},n.a.createElement(ha,{open:c,courseList:t,groupMap:s,onNavItemClick:d})))};fa.displayName="MainNav";s(611);const ga=d.a.with("section-header"),ya=e=>{let{className:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["className"]);return n.a.createElement("header",Object.assign({className:Object(le.b)(ga(),t)},s))};ya.displayName="SectionHeader";s(612);const Sa=d.a.with("heading"),Oa=e=>{const{className:t,level:s=1,controls:r,smaller:i,smallerOnDesktop:o}=e,c=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["className","level","controls","smaller","smallerOnDesktop"]),l=Object(a.createElement)("h".concat(s),Object.assign({className:Object(le.b)(Sa({level:s,padded:Boolean(r),smaller:i,"smaller-on-desktop":o}),t)},c));return r?n.a.createElement(ya,null,l,r):l};s(613);const va=d.a.with("modal-dialog"),Na=e=>{const{title:t,okText:s,cancelText:a,content:r,onOkClick:i,onCancelClick:o,onCloseClick:c,isDangerous:l}=e,u=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["title","okText","cancelText","content","onOkClick","onCancelClick","onCloseClick","isDangerous"]);return n.a.createElement(Jt.a,u,n.a.createElement("div",{className:va()},n.a.createElement("header",{className:va("header")},t&&n.a.createElement(Oa,{level:1,className:va("heading")},t)),n.a.createElement("section",{className:va("content")},r),n.a.createElement("footer",{className:va("footer")},l&&n.a.createElement(Se.a,{className:va("action"),theme:"reject",size:"m",view:"lyceum",onClick:i},s),o&&n.a.createElement(Se.a,{className:va("action"),theme:"pseudo",size:"m",view:"lyceum",onClick:o},a),!l&&n.a.createElement(Se.a,{className:va("action"),theme:"action",size:"m",view:"lyceum",onClick:i},s)),c&&n.a.createElement(Se.a,{className:va("close"),icon:e=>n.a.createElement(ge.a,{cls:e,size:"l",type:"close"}),theme:"clear",size:"l",view:"lyceum",onClick:c})))};Na.displayName="ModalDialog";var Ia=Na;s(614);const ka=d.a.with("test-timer");class Ta extends a.Component{constructor(e){super(e),this.state={remainingTime:this.getRemainingTime(),isForceFinishModalOpened:!1,isFinishModalOpened:!1},this.timeout=0,this.actions=void 0,this.tick=()=>{const{oneSecondMs:e,allowableTimeError:t}=Ta,{remainingTime:s}=this.state,a=s,n=this.getRemainingTime();if(a<n||a.minus(n)>t)this.syncTime();else{if(n.milliseconds<=0)return clearTimeout(this.timeout),this.setState({remainingTime:Te.Duration.fromMillis(0)}),this.doActions(),void this.toggleFinishModal();this.setState({remainingTime:this.getRemainingTime()}),this.timeout=setTimeout(this.tick,e),this.doActions()}},this.syncTime=()=>{const{onTimeOutOfSync:e}=this.props;clearTimeout(this.timeout),e()},this.doActions=()=>{const e=this.state.remainingTime.minus({seconds:1});this.actions.filter(t=>this.isInTimeRange(e,t.time)&&!t.done).forEach(e=>{e.doAction(),e.done=!0})},this.onFinish=()=>{const{onFinish:e}=this.props;this.toggleFinishModal(),e()},this.onForceFinish=()=>{const{onForceFinish:e}=this.props;this.toggleForceFinishModal(),e()},this.toggleForceFinishModal=()=>{this.setState(e=>({isForceFinishModalOpened:!e.isForceFinishModalOpened}))},this.toggleFinishModal=()=>{this.setState(e=>({isFinishModalOpened:!e.isFinishModalOpened}))},this.timeout=setTimeout(this.tick,Ta.oneSecondMs),this.actions=e.actions?e.actions.map(e=>Object.assign({},e,{done:!1})):[]}componentDidUpdate(e){e.timer!==this.props.timer&&(clearTimeout(this.timeout),this.setState({remainingTime:this.getRemainingTime()}),this.timeout=setTimeout(this.tick,Ta.oneSecondMs))}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{timer:e,courseId:t,groupId:s,theme:a="dark"}=this.props,{lesson:r}=e,{remainingTime:i,isForceFinishModalOpened:c,isFinishModalOpened:l}=this.state,u=w.lessonDetails.build({courseId:t,groupId:s,lessonId:r.id.toString()});return n.a.createElement("section",{className:ka("",{theme:a})},n.a.createElement(o.b,{className:ka("link"),to:u},n.a.createElement("h5",{className:ka("title")},O.b.text({id:"go-to-test",keyset:"lessons"}))),n.a.createElement("time",{className:ka("time")},i.toFormat("hh:mm:ss")),n.a.createElement(Se.a,{className:ka("button"),theme:"action",size:"s",view:"lyceum",onClick:this.toggleForceFinishModal},O.b.text({id:"stop-test",keyset:"lessons"})),n.a.createElement(Ia,{visible:c,title:O.b.text({id:"force-finish-test-dialog-title",keyset:"lessons"}),okText:O.b.text({id:"force-finish-test-dialog-ok",keyset:"lessons"}),cancelText:O.b.text({id:"force-finish-test-dialog-cancel",keyset:"lessons"}),content:O.b.text({id:"force-finish-test-dialog-content",keyset:"lessons"}),onOkClick:this.onForceFinish,onCancelClick:this.toggleForceFinishModal,onCloseClick:this.toggleForceFinishModal}),n.a.createElement(Ia,{visible:l,title:O.b.text({id:"finish-test-dialog-title",keyset:"lessons"}),okText:O.b.text({id:"finish-test-dialog-ok",keyset:"lessons"}),content:O.b.text({id:"finish-test-dialog-content",keyset:"lessons"}),onOkClick:this.onFinish,onCloseClick:this.toggleFinishModal}))}getRemainingTime(){const{deadline:e,delta:t}=this.props.timer;return e.diffNow().minus(t)}isInTimeRange(e,t){const{actionTimeRange:s}=Ta;return e<t&&e>t.minus(s)}}Ta.oneSecondMs=1e3,Ta.allowableTimeError=Te.Duration.fromObject({seconds:3}),Ta.actionTimeRange=Te.Duration.fromObject({seconds:5}),Ta.displayName="TestTimer";var Ca=Ta;const ja=Object(E.createAsyncAction)("[lessons] start test","[lessons] start test success","[lessons] start test fail")(),wa=Object(E.createAsyncAction)("[lessons] finish test","[lessons] finish test success","[lessons] finish test fail")();let Aa,_a;function Ma(e){return{type:Aa.FETCH_TIMER_START,payload:e}}function xa(e){return{type:Aa.FETCH_TIMER_SUCCESS,payload:e}}function Da(){return{type:Aa.CLEAR_TIMER}}function Pa(e){return e.lessons.timer.timer}function Ra(e){return{type:_a.FETCH_STUDENT_TASKS_START,payload:e}}function La(e){return{type:_a.FETCH_STUDENT_TASKS_UNSOLVED_START,payload:e}}function Fa(){return{type:_a.CLEAR_DETAILS}}function za(){return{type:_a.SET_TEST_FINISHED_FLAG}}function Ua(e){return{type:_a.FETCH_STUDENT_DETAILS_START,payload:e}}function Ha(e){return{type:_a.FETCH_TEACHER_DETAILS_START,payload:e}}function Va(e){return{type:_a.FETCH_STUDENT_TASK_GROUPS_START,payload:e}}function Ga(e){return{type:_a.FETCH_TEACHER_TASK_GROUPS_START,payload:e}}function Ba(e){return{type:_a.FETCH_TASK_GROUPS_SUCCESS,payload:e}}function Wa(e){return{type:_a.FETCH_TASK_GROUPS_FAIL,payload:e}}function Ka(){return{type:_a.CLEAR_PROBLEM_RUN}}function qa(e){return{type:_a.SET_PROBLEM_DETAILS,details:e}}function Ya(){return{type:_a.UPDATE_PROBLEM_DETAILS}}!function(e){e.FETCH_TIMER_START="[lessons] fetch timer start",e.FETCH_TIMER_SUCCESS="[lessons] fetch timer success",e.FETCH_TIMER_FAIL="[lessons] fetch timer fail",e.CLEAR_TIMER="[lessons] clear timer"}(Aa||(Aa={})),function(e){e.FETCH_STUDENT_TASKS_START="[lesson-elements] fetch student tasks start",e.FETCH_STUDENT_TASKS_SUCCESS="[lesson-elements] fetch student tasks success",e.FETCH_STUDENT_TASKS_FAIL="[lesson-elements] fetch student tasks fail",e.FETCH_STUDENT_TASKS_UNSOLVED_START="[lesson-elements] fetch student tasks unsolved start",e.FETCH_STUDENT_TASKS_UNSOLVED_SUCCESS="[lesson-elements] fetch student tasks unsolved success",e.FETCH_STUDENT_TASKS_UNSOLVED_FAIL="[lesson-elements] fetch student tasks unsolved fail",e.FETCH_STUDENT_DETAILS_START="[lesson-elements] fetch student details start",e.FETCH_TEACHER_DETAILS_START="[lesson-elements] fetch teacher details start",e.FETCH_DETAILS_SUCCESS="[lesson-elements] fetch details success",e.FETCH_DETAILS_FAIL="[lesson-elements] fetch details fail",e.CLEAR_DETAILS="[lesson-elements] clear details",e.SET_TEST_FINISHED_FLAG="[lesson-elements] set test finished flag",e.FETCH_STUDENT_TASK_GROUPS_START="[lesson-elements] fetch student task groups start",e.FETCH_TEACHER_TASK_GROUPS_START="[lesson-elements] fetch teacher task groups start",e.FETCH_TASK_GROUPS_SUCCESS="[lesson-elements] fetch task groups success",e.FETCH_TASK_GROUPS_FAIL="[lesson-elements] fetch task groups fail",e.CLEAR_PROBLEM_RUN="[lesson-elements] clear task groups and problemDetails",e.UPDATE_TEACHER_TASK_STATISTICS="[lesson-elements] update teacher task statistics",e.UPDATE_STUDENTS_TASK_SOLUTION="[lesson-elements] update student task solution",e.OPEN_PROBLEM="[lesson-elements] open problem details",e.SET_SOLUTION_ID="[lesson-elements] set solution id in problem",e.POST_PROBLEM_SUBMISSION="[lesson-elements] send problem submission",e.POST_PROBLEM_SUBMISSION_SUCCESS="[lesson-elements] end of send submission request",e.SET_PROBLEM_DETAILS="[lesson-elements] set problem details",e.UPDATE_GROUPS_DATA="[lesson-element] update problemLink data in groups",e.UPDATE_PROBLEM_DETAILS="[lesson-elements] update problem details"}(_a||(_a={}));class Ja extends a.Component{constructor(){super(...arguments),this.fetchTimer=()=>{const{courseId:e}=this.props.match.params;this.props.fetchTimer({courseId:Number(e)})},this.onForceFinish=()=>{const{timer:e,match:t}=this.props,{groupId:s}=t.params;e&&this.props.finishTest({groupId:Number(s),lessonId:e.lesson.id})},this.onFinish=()=>{this.props.updateProblemDetails(),this.props.clearTimer(),this.props.setFinishedFlagToTask()}}componentDidMount(){this.fetchTimer()}componentDidUpdate(e){e.match.params.courseId!==this.props.match.params.courseId&&(this.props.clearTimer(),this.fetchTimer())}componentWillUnmount(){this.props.clearTimer()}render(){const{timer:e,actions:t,match:s,theme:a}=this.props,{courseId:r,groupId:i}=s.params;return e?n.a.createElement(Ca,{timer:e,actions:t,courseId:r,groupId:i,theme:a,onTimeOutOfSync:this.fetchTimer,onForceFinish:this.onForceFinish,onFinish:this.onFinish}):null}}Ja.displayName="TestTimerContainer";var Za=Object(I.k)(Object(b.b)(function(e){return{timer:Pa(e)}},function(e){return Object(ee.bindActionCreators)({updateProblemDetails:Ya,fetchTimer:Ma,clearTimer:Da,setFinishedFlagToTask:za,finishTest:wa.request},e)})(Ja)),Xa=s(1121),Qa=s(352);const $a=e=>{let{uid:t,yandexuid:s,name:a,avatar:r,avatarOptions:i,retpath:o,menuItems:c}=e;return t&&s?n.a.createElement(B.Consumer,null,e=>{let{language:l,tld:u}=e;return n.a.createElement(Xa.a,{getContent:Qa.getContent,customMenuItems:c,avatarHost:i.host,avatarId:r,name:a,retpath:o,uid:t,yu:s,lang:l,tld:u,noCounter:!0})}):null};$a.displayName="UserMenu";var en,tn=Object(I.k)((en=$a,class extends a.Component{render(){return n.a.createElement(is.Consumer,null,e=>n.a.createElement(en,Object.assign({avatarOptions:e},this.props)))}})),sn=s(25),an=s(24);s(615);const nn=Object(a.createContext)({run:()=>{},hasHints:!1}),rn=()=>{const{run:e,hasHints:t}=Object(a.useContext)(nn),s=Object(b.d)(Y),{pathname:r}=Object(I.h)(),i=Object(a.useCallback)(()=>{F("wizardRun",{uid:s,path:r}),e()},[r,e,s]);return t?n.a.createElement(Se.a,{className:"header__help",icon:()=>n.a.createElement(ge.a,{size:"l",type:"question"}),onClick:i}):null};rn.displayName="HeaderHelp";var on,cn=rn;function ln(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const un=d.a.with("header");let dn=(ln((on=class e extends a.Component{constructor(){super(...arguments),this.timerActions=[this.getTimeLeftAction(5),this.getTimeLeftAction(2)]}getTimeLeftAction(e){const{addNotificationPopup:t}=this.props;return{time:Te.Duration.fromObject({minutes:e}),doAction:()=>{t({type:an.b.INFO,i18n:{id:"NUMBER-minutes-left",keyset:"lessons",params:{count:e,number:e}}})}}}static renderCourseElement(e){return n.a.createElement(I.b,{path:w.courseDetails.template,render:e})}renderMainNav(e){const{courseList:t,courseMap:s,groupMap:a}=this.props,r=Number(e.match.params.courseId),i=Number(e.match.params.groupId),o=s[r];return P(o,i)?n.a.createElement("div",{className:un("main-nav")},n.a.createElement(fa,{courseList:t,groupMap:a,currentCourse:o,currentGroup:a[i]})):null}renderCourseNav(e){let{match:{params:t}}=e;const{courseMap:s}=this.props,{courseId:a,groupId:r}=t;return P(s[a],Number(r))?n.a.createElement("div",{className:un("course-nav")},n.a.createElement(me,{courseId:Number(a),groupId:Number(r)})):null}renderTimer(e){const{courseMap:t}=this.props,s=Number(e.match.params.courseId),a=Number(e.match.params.groupId),r=t[s];if(!P(r,a))return null;const{role:i}=r;return i===x.Student&&n.a.createElement("div",{className:un("test-timer")},n.a.createElement(Za,{actions:this.timerActions}))}render(){const{user:t,passportHost:s,yandexuid:a,courseMap:r,groupMap:i,notificationCount:o,hideNotifications:c,currentUrl:l}=this.props;return n.a.createElement("header",{className:un()},n.a.createElement("div",{className:un("top")},n.a.createElement("div",{className:un("left")},n.a.createElement(ea,{isExternal:!t}),e.renderCourseElement(this.renderMainNav)),n.a.createElement("div",{className:un("right")},t?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ws,{avatar:t.avatar,courseMap:r,groupMap:i,notificationCount:o,hideAllNotifications:c}),n.a.createElement("nav",{className:un("user-nav")},n.a.createElement("div",{className:un("user-links")},n.a.createElement(rs,{userUid:t.uid,linkClassName:un("link")})),n.a.createElement(cn,null),n.a.createElement(Js,{uid:t.uid,notificationCount:o}),n.a.createElement(tn,{uid:t.uid.toString(),yandexuid:a.toString(),name:t.displayName,email:t.email,avatar:t.avatar,passportHost:s,retpath:l,menuItems:[{text:O.b.text({id:"profile"}),url:Ls.profile.build({userId:t.id.toString()})}]}))):n.a.createElement(Xs,{currentUrl:l,passportHost:s}))),n.a.createElement("div",{className:un("bottom")},e.renderCourseElement(this.renderCourseNav),e.renderCourseElement(this.renderTimer)))}}).prototype,"renderMainNav",[$.a],Object.getOwnPropertyDescriptor(on.prototype,"renderMainNav"),on.prototype),ln(on.prototype,"renderCourseNav",[$.a],Object.getOwnPropertyDescriptor(on.prototype,"renderCourseNav"),on.prototype),ln(on.prototype,"renderTimer",[$.a],Object.getOwnPropertyDescriptor(on.prototype,"renderTimer"),on.prototype),on);dn.displayName="Header";var mn=Object(I.k)(Object(b.b)(function(e){const{courses:{courseMap:t},groups:{groupMap:s}}=e;return{courseMap:t,groupMap:s,courseList:ie(e),notificationCount:zt(e),user:K(e)}},function(e){return Object(ee.bindActionCreators)({hideNotifications:Ot,addNotificationPopup:sn.a},e)})(dn));class pn extends a.Component{render(){return n.a.createElement(R.YMInitializer,Object.assign({},this.props,{version:"2"}))}}pn.displayName="MetrikaCounter";var hn=pn;class bn extends a.PureComponent{componentDidMount(){this.props.isLoggedIn&&this.props.startNotificationCountPoll()}componentWillUnmount(){this.props.stopNotificationCountPoll()}render(){return null}}bn.displayName="NotificationCenterPoll";var En=Object(b.b)(function(e){const t=K(e);return{isLoggedIn:Boolean(t)}},function(e){return Object(ee.bindActionCreators)({startNotificationCountPoll:bt,stopNotificationCountPoll:Et},e)})(bn);function fn(e){return e.notifications}s(616);const gn=d.a.with("notifications"),yn={[an.b.SUCCESS]:"tick-green",[an.b.ERROR]:"cross-red"};class Sn extends a.Component{constructor(){super(...arguments),this.transitionTimeout=300,this.removeNotification=e=>()=>this.props.removeNotification(e)}render(){const{notifications:e}=this.props;return n.a.createElement("div",{className:gn()},n.a.createElement(ke.TransitionGroup,{component:null},e.map(e=>n.a.createElement(ke.CSSTransition,{key:e.id,classNames:gn("item"),timeout:this.transitionTimeout},n.a.createElement("div",{className:gn("item",{type:e.type})},e.type!==an.b.INFO&&n.a.createElement("div",{className:gn("icon-wrapper")},n.a.createElement(ge.a,{size:"m",type:yn[e.type]})),e.i18n?O.b.text(e.i18n):e.text,n.a.createElement(Se.a,{className:gn("remove-button"),size:"m",theme:"clear",view:"lyceum",icon:e=>n.a.createElement(ge.a,{cls:e,size:"m",type:"close-thin"}),onClick:this.removeNotification(e.id)}))))))}}Sn.displayName="Notifications";var On=Sn;var vn=Object(b.b)(function(e){return{notifications:fn(e)}},function(e){return{removeNotification:t=>e(Object(sn.b)(t))}})(On);const Nn=Object(a.createContext)({fileExtensions:[]}),In=e=>{let{options:t,children:s}=e;return n.a.createElement(Nn.Provider,{value:t},s)};function kn(e){return t=>n.a.createElement(Nn.Consumer,null,s=>n.a.createElement(e,Object.assign({contestOptions:s},t)))}In.displayName="ContestOptionsProvider";const Tn=Object(a.createContext)({fileSize:262144,displayableFileSize:102400});class Cn extends a.Component{render(){const{children:e,fileLimits:t}=this.props;return n.a.createElement(Tn.Provider,{value:t},e)}}function jn(e){return class extends a.Component{render(){return n.a.createElement(Tn.Consumer,null,t=>n.a.createElement(e,Object.assign({fileLimits:t},this.props)))}}}Cn.displayName="FileLimitsProvider";var wn=s(39);s(617);const An=d.a.with("layout"),_n=e=>n.a.createElement("div",{className:An("top")},e.children);_n.displayName="Top";const Mn=e=>{let{className:t,children:s}=e;return n.a.createElement("main",{className:Object(le.b)(An("main"),t)},s)};Mn.displayName="Main";const xn=e=>{let{className:t,children:s}=e;return n.a.createElement("aside",{className:Object(le.b)(An("active-area"),t)},s)};xn.displayName="ActiveArea";const Dn=e=>n.a.createElement("aside",{className:An("aside")},e.children);Dn.displayName="Aside";class Pn extends a.Component{render(){const{type:e,fixed:t,className:s}=this.props;let r=null;const i=a.Children.map(this.props.children,e=>n.a.isValidElement(e)&&"string"!=typeof e.type?e.type===xn||e.type.displayName===xn.name?(r=n.a.cloneElement(e),null):e:null);return n.a.createElement("div",{className:Object(le.b)(An(),s)},n.a.createElement("div",{className:An("wrapper",{type:e,fixed:t})},i),r)}}Pn.ActiveArea=void 0,Pn.Aside=void 0,Pn.Main=void 0,Pn.Top=void 0,Pn.displayName="Layout",Pn.ActiveArea=xn,Pn.Aside=Dn,Pn.Main=Mn,Pn.Top=_n;var Rn=Pn,Ln=s(49);s(618);function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var zn=n.a.createElement("style",null,"\n    .st0,.st1{stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st0{fill:none;stroke:#000}.st1{stroke:#13110c}.st1,.st2{fill:#fff}.st3,.st4,.st5{fill:none;stroke:#13110c;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st4,.st5{fill:#fff;stroke:#000}.st5{fill:#ffd33c}\n  "),Un=n.a.createElement("path",{className:"st0",d:"M275.7 387.6l10.3-11s2.1-2.1 3.9-.4c1.3 1.2 9.7 9.1 12.4 11.5 1.6 1.3 3.4-.3 3.4-.3l10.2-10.9s1.4-1.5 3.3.3M199.2 389.8l-10.3-11s-2.1-2.1-3.9-.4c-1.3 1.2-9.7 9.1-12.4 11.5-1.6 1.3-3.4-.3-3.4-.3L159 378.7M115.8 389.8l10.3-11s2.1-2.1 3.9-.4c1.3 1.2 9.7 9.1 12.4 11.5"}),Hn=n.a.createElement("path",{className:"st1",d:"M336 162h100v86H336z"}),Vn=n.a.createElement("path",{className:"st2",d:"M426 162v86h-90v-86"}),Gn=n.a.createElement("path",{className:"st3",d:"M369 162h57v86h-90v-23M336 205v-43h18"}),Bn=n.a.createElement("path",{className:"st3",d:"M344 204.8V171h10M369 171h48v62h-73v-8M349 240h-5M388 240h-15"}),Wn=n.a.createElement("path",{className:"st2",d:"M372 248h17v22h-17z"}),Kn=n.a.createElement("path",{className:"st1",d:"M372 248h26v22h-26z"}),qn=n.a.createElement("path",{className:"st4",d:"M389 249v21M409.9 262c-.7 0-83.2-.1-84.5 0-1.3.1-1.4 1.1-1.4 1.1v5.8c0 1.1 1.6 1 1.6 1s81.8.1 83.7 0c1.9-.1 1.7-.8 1.7-.8v-6c0 .1 0-1.1-1.1-1.1zM392.7 262v7"}),Yn=n.a.createElement("path",{className:"st5",d:"M369 147V176.7s0 2 2.7 2c2.6 0 13.3.1 13.3.1v18h-26.1s-4.9.3-4.9-4.2v-33.7s.1-2-1.5-2h-6.1c-3.9 0-3.6-1.2-3.6-7 0-3.9-.3-7 3.6-7h14.1c6.5-.1 8.4-.1 8.5 4.1z"}),Jn=n.a.createElement("path",{className:"st0",d:"M334 153.8h2.4c.7 0 .6-.8.6-.8v-1.5s0-.7.8-.7h4.2"}),Zn=n.a.createElement("circle",{cx:358.2,cy:148.9,r:1.5}),Xn=n.a.createElement("g",null,n.a.createElement("path",{className:"st5",d:"M310 179.4v22.8s.1 2.5 3.5 2.5 71.5.1 71.5.1v21.9h-89.5s-6.5.4-6.5-5.4v-28s.1-2.5-2-2.6h-6.3c-5 0-4.6-1.6-4.6-9 0-5-.4-9 4.6-9h18.2c9.3.1 11.1.1 11.1 6.7z"}),n.a.createElement("path",{className:"st0",d:"M265 186.8h3.1c.9 0 .9-1.1.9-1.1v-2s0-.9 1.2-.9h5.8"}),n.a.createElement("circle",{cx:297.7,cy:179.9,r:1.5})),Qn=n.a.createElement("g",null,n.a.createElement("path",{className:"st0",d:"M429 122h-26M427 131h-26M411.5 113.9c-1.1 8.3-2.2 16.8-3.2 25.2M422 113.9c-1.1 8.3-2.2 16.8-3.2 25.2"})),$n=n.a.createElement("path",{className:"st4",d:"M319 271.7c0 1-.1 136.4 0 138.3.1 1.9 1.7 2 1.7 2h120.6c1.7 0 1.6-2.3 1.6-2.3s.1-134.4 0-137.1c-.1-2.8-1.3-2.5-1.3-2.5H320.8c0-.1-1.8-.1-1.8 1.6z"}),er=n.a.createElement("g",null,n.a.createElement("path",{className:"st0",d:"M374.2 89.5c0-2.4-.1-1.7 0-4.3.1-2.6 2.4-2.2 2.4-2.2h3.3s2.1-.2 2.1 2.4v3.7s-.2 1.9 1.7 1.9h2.4s1.5-.4 1.5-2.2c0-1.7-.1-3.2 0-4.5.1-1.4 1.5-1.3 1.5-1.3h4.2c.5 0 .9.4.9.9v5c0 1.8 1 2.1 1.5 2.1h3.5c2.5 0 2.3-2.6 2.3-2.6v-2.6c0-2.4 1.6-2.8 2.2-2.8h8.3"})),tr=n.a.createElement("g",null,n.a.createElement("path",{className:"st0",d:"M272 124h4.8c2.8 0 2.4 2.2 2.4 2.2v4.7c0 2.3 1.9 2.1 1.9 2.1h4.3s1.8-.2 1.8-2.6-.1-1.7 0-4.3c.1-2.5 2.4-2.2 2.4-2.2h3.4s2.1-.3 2.1 2.4v3.7s-.2 1.9 1.7 1.9h2.4s1.5-.5 1.5-2.2c0-1.8-.1-3.1 0-4.5s1.5-1.3 1.5-1.3h3.8c1.4 0 1.4 1.6 1.4 1.6v3.7c0 1.7 1.5 1.7 1.5 1.7h4.2c1.8-.1 1.6-2.2 1.6-2.2v-2.6c0-2.4 2.2-2.2 2.2-2.2h8.3"})),sr=n.a.createElement("path",{className:"st0",d:"M385 176.8v52"}),ar=n.a.createElement("path",{className:"st4",d:"M319 278h124M412 278v134"}),nr=n.a.createElement("g",null,n.a.createElement("path",{className:"st0",d:"M338 80h-25M337 89h-26M321.3 71.5c-1.1 8.3-2.2 16.8-3.2 25.2M331.8 71.5c-1.1 8.3-2.2 16.8-3.2 25.2"})),rr=n.a.createElement("g",null,n.a.createElement("path",{className:"st0",d:"M295 255h-25M293 263h-25M278 246c-1.1 8.3-2.2 16.8-3.2 25.2M288.5 246c-1.1 8.3-2.2 16.8-3.2 25.2"})),ir=n.a.createElement("g",null,n.a.createElement("path",{className:"st4",d:"M201.5 205.9c-.8-.4-1.5-.8-1.5-.8s-.7-.4-1-.6l-9.7-5c-.5.6-1.1 1-2.2 1.3-3.5.9-10.3 2.6-18.1 4.6v8.8s19.2-3.2 31.1-5.1l1.4-3.2zM142.1 399s-.9 7.4-1.1 8.5c-.1 1.1.9 1.5.9 1.5h29.6c1.4 0 1.5-1.4 1.5-1.4v-1.8c0-.6-1-.9-1.8-1-.8-.1-23.5-5-23.5-5l-5.6-.8z"}),n.a.createElement("path",{className:"st5",d:"M163.2 238.9l30.9 74.9s1.8 4.1-.4 8.1c-3.1 5.5-43.8 75.3-43.8 75.3s-1.2 2.7-2.6 2.7c-1.8 0-3.1 0-4.6-.4-1.5-.4-1.4-2.2-.8-4.3 2.9-10.3 11.6-41.1 15.2-58.2.2-.8 1-4.4 1.2-5.2 2.3-12.9 11.8-14.2 15.2-14.3 0 0 1-.2.8-.6-.3-.4-39.1-54-39.1-54l18.8-27.4 9.2 3.4z"}),n.a.createElement("path",{className:"st4",d:"M39.2 387.5l-3 3.6s-.6 1.6.1 3.1 10 11.9 10.9 12.7c.9.7 2.3 1.2 3.3 1.2h9.9s1.6-.4 1.6-1.8v-1.4s-.1-1-1.5-1.2c-1.4-.2-6-1.3-7.7-1.8-1.6-.4-2.5-2.5-2.5-2.5l-3.7-8.4-7.4-3.5"}),n.a.createElement("path",{className:"st5",d:"M215.4 184.5l12.2 3.1s5.7.8 7-3.5c1.2-3.9 27.2-90.2 33.1-109.8.5-1.8-.4-3.8-.9-4.8-.2-.4-.6-.5-1-.4-1.1.4-3.2 1.4-4.3 3.1-10.8 17.9-58.2 96.9-60.3 100.4-2.4 4 2.5 6.8 2.5 6.8l11.7 5.1zM241.6 127l-26.2 57.5"}),n.a.createElement("path",{className:"st4",d:"M188.8 114.2c-2.2-.4-2.8.6-2.8.6l-3.7 4.4s-.8 1.1-1.8.1-2.3-2.4-2.3-2.4-1.4-.8-1.9.3c-.4 1-2.3 5.5-2.8 6.6-.5 1.1.1 2.4.1 2.4s.1.3.8 1.1c.7.8-.3 1.8-.3 1.8s-.5.4-1.6 1.7c-1.1 1.3-2.3.4-2.3.4l-4.8-3.9-.5.7-7.8 10.5s.1 0 .1.1l2.2 1.3c3.9 2.4 6.2 6.3 6.7 10.6l8.1-10.7s.8-1.1 1.8-.5c1 .6 2.9 1.6 2.9 1.6s3.6 1.4 5-1.2c1.4-2.6 2.7-5.2 3.1-6 .4-.8 1.2-.6 1.2-.6s1.2.3 3.1.9c1.9.5 2.1-1.7 2.1-1.7l3.6-15.9c-3-1-7-2-8.2-2.2z"}),n.a.createElement("path",{d:"M189 120.4c.1.5-.2 1-.7 1.1-.5.1-1-.2-1.1-.7-.1-.5.2-1 .7-1.1.5-.1 1 .2 1.1.7z",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10}),n.a.createElement("path",{className:"st5",d:"M117.4 165.1l21.1-35.3-1.9-1.1c-6.6-4-15.2-1.8-19.2 4.8l-21.1 35.3 1.9 1.1c6.7 4 15.3 1.8 19.2-4.8zM116.3 221.6c.2.1.4.3.7.4.7.3 3.2 1.3 6.7 2.6l-6.3 10.5c-2.1 3.5-5.5 5.8-9.2 6.5l-22.1 55s-11.6-2.5-16.7 10.9c-3.5 9-4.3 10.9-4.3 10.9l-26.8 68.7 8.9 4.2L154 235.5l-37.7-13.9zM170.3 131l-8.5-7s-1.4-1.6-.4-2.7c1-1.1 17.3-19.4 18.7-20.8 1.4-1.4 3.4-.7 3.4-.7s22 4.8 24.1 5.3c2 .5.7 2.4.7 2.4s-3.5 6.3-4.6 8c-1.1 1.7-2.7 1.4-2.7 1.4s-10.1-2.4-12.3-2.8c-2.2-.4-2.8.6-2.8.6l-3.7 4.4s-.8 1.1-1.8.1-2.3-2.4-2.3-2.4-1.4-.8-1.9.3c-.4 1-2.3 5.5-2.8 6.6-.5 1.1.1 2.4.1 2.4s.1.3.8 1.1c.7.8-.3 1.8-.3 1.8s-.5.4-1.6 1.7c-.9 1.2-2.1.3-2.1.3z"}),n.a.createElement("path",{className:"st4",d:"M189.7 192.7c0-1.9-2.6-1.7-2.6-1.7h-40s-1.6-.5-.6-2.2c1-1.7 17.8-29.8 17.8-29.8 4-6.7 1.9-15.4-4.7-19.4l-2.2-1.3c-6.6-4-15.2-1.9-19.2 4.8L108 193.4c-4 6.7-1.9 15.4 4.7 19.4l2.2 1.3c2.3 1.4 4.8 2 7.3 2 1.5.1 3.3 0 4.9-.4 3.3-.8 48.5-12.2 59.9-15.1 1.6-.4 2.3-1.1 2.8-2.4.5-1.2-.1-3.6-.1-5.5zM241 192.6h-6.6c-.8 0-4.8.1-5.5.3l-2.1.2-6 1.7c.5 1.3.7 2.7.5 4.3-.2 2-.8 4.1-1.7 5.8l7.9 3.2c.4.2 1.4.5 1.4.5s4.4 1.5 5.2 1.5l7 .1c-.1-5.8-.1-11.7-.1-17.6z"}),n.a.createElement("path",{className:"st4",d:"M241.1 275.1s-.1-64.8-.1-110.9l7.4-25.8c3.5 12.6 7.3 26.2 7.3 26.2s1.2 3.8 1.2 8.2c0 5.6-.1 41.5 0 46.5 0 3.6-1 7.8-1 7.8s-11.4 46.2-12.8 48.1c-1.3 1.8-2-.1-2-.1z"}),n.a.createElement("path",{className:"st5",d:"M205.8 215.2c-.9 1.8-3.1 2.5-5 1.7-1.8-.8-2.7-2.8-2.1-4.6-2.7.9-4.6 3.6-4.2 6.5.4 3.3 3.5 5.6 6.8 5.2 3.3-.4 5.6-3.5 5.2-6.8-.2-.7-.4-1.4-.7-2z"}),n.a.createElement("path",{className:"st4",d:"M215.7 190.4l-10.1-.9c-.6-.1-3.7-.2-4.3-.1l-1.7.1-11 1.8.7 8.1 9.7 5c.3.2 1 .6 1 .6s3.3 1.8 3.9 1.8l11 1.3c3.5.3 6-4.6 6.4-9.1.3-4.4-2.1-8.3-5.6-8.6zM165.4 156.8c-.3.8-.7 1.6-1.1 2.3 0 0-16.8 28.1-17.8 29.8-1 1.7.6 2.2.6 2.2h22v-33c0-3-2-5-2.7-5.7-.2 1.4-.5 2.9-1 4.4zM129.2 215.3c-1 .2-1.7.4-2 .5-1.7.4-3.4.4-4.9.4-1.7 0-3.5-.3-5.2-1l-1.3 2.2s-2.1 3.1 1.2 4.6c3.3 1.5 45.3 16.5 48.1 17.5 2.8 1 3.9-2.8 3.9-2.8v-31.4c-14.9 3.8-33.5 8.5-39.8 10z"}),n.a.createElement("g",null,n.a.createElement("path",{className:"st4",d:"M116.9 222c-3.3-1.5-1.2-4.6-1.2-4.6l1.3-2.2c-.7-.3-1.4-.6-2.1-1l-2.2-1.3c-6.6-4-8.7-12.7-4.7-19.4l30.1-50.3c2.5-4.2 6.8-6.6 11.3-6.8l-10.9-6.5-21.1 35.3c-4 6.6-12.5 8.8-19.2 4.8l-1.9-1.1-23.6 39.6c-4 6.6-1.8 15.2 4.8 19.2L98.2 240c6.6 4 15.2 1.8 19.2-4.8l6.3-10.5c-3.5-1.4-6-2.4-6.8-2.7z"})),n.a.createElement("g",null,n.a.createElement("path",{className:"st4",d:"M215.7 190.4c.4 0 .9.1 1.3.3l1.1-2.4c.9-1.9 0-4.2-2-5.1-1.9-.9-4.2-.1-5.1 1.9l-2.2 4.7 6.9.6zM203.9 206.9c-.3 0-1.4-.6-2.3-1l-2.7 5.9c-.9 1.9 0 4.2 2 5.1 2 .9 4.2.1 5.1-1.8l3.4-7.4-5.5-.8z"}))),or=n.a.createElement("g",null,n.a.createElement("path",{className:"st0",d:"M266.5 423.5l-10.3-11s-2.1-2.1-3.9-.4c-1.3 1.2-9.7 9.1-12.4 11.5-1.6 1.3-3.4-.3-3.4-.3l-10.2-10.9s-1.7-1.6-3.3.1"}),n.a.createElement("path",{className:"st0",d:"M183.1 423.4l10.3-11s2.1-2.1 3.9-.4c1.3 1.2 9.7 9.1 12.4 11.5 1.6 1.3 3.4-.3 3.4-.3l10.2-10.9s1.4-1.5 3.3.3"}));const cr=e=>n.a.createElement("svg",Fn({id:"Layer_1",viewBox:"0 0 500 500"},e),zn,Un,Hn,Vn,Gn,Bn,Wn,Kn,qn,Yn,Jn,Zn,Xn,Qn,$n,er,tr,sr,ar,nr,rr,ir,or);s.p;const lr=d.a.with("error-page"),ur=e=>{let{pageTitle:t,errorText:s,errorDescription:a,withHomeLink:r,Image:i=cr}=e;return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,t),n.a.createElement("meta",{name:"title",content:t})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement("article",{className:lr()},n.a.createElement(i,{className:lr("image"),width:500,height:500}),n.a.createElement(Oa,{className:lr("title"),level:1},s),a&&n.a.createElement("p",{className:lr("description")},a),n.a.createElement("div",{className:lr("feedback")},n.a.createElement(Se.a,{type:"link",url:M.feedbackForm.build(),target:"_blank",rel:"noopener noreferrer",size:"l",view:"lyceum",theme:"action"},O.b.text({id:"feedback"})),n.a.createElement("p",{className:lr("feedback-text")},O.b.text({id:"feedback-prompt"}))),r&&n.a.createElement(Ln.a,{href:"/"},O.b.text({id:"home-link"}))))))};function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var mr=n.a.createElement("style",null,"\n    .st0,.st1,.st2,.st3,.st4{fill:#fff;stroke:#13110c;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st1,.st2,.st3,.st4{fill:#ffd33c;stroke:#000}.st2,.st3,.st4{fill:none;stroke:#13110c}.st3,.st4{fill:#ffd33c}.st4{fill:none;stroke:#000}.st5{fill:#ffd33c}.st6{fill:#13110c}.st7{fill:#fff;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\n  "),pr=n.a.createElement("path",{className:"st0",d:"M214.2 269.3c-15.7-2-44.4-8.8-44.4-8.8s-5.2 1.5-10.8 2.5v150h99.5l-4.7-108.4c-16.2-8-29.9-20.3-39.6-35.3zM159 95v154.1c5.5 2.3 10.8 4.7 10.8 4.7s18.3-3.7 33.7-7c-3.3-9.8-5-20.3-5-31.2v-2.9c9 0 16.4-7.3 16.4-16.4 0-6.9-4.2-12.7-10.2-15.2 14-37.8 50.5-64.7 93.3-64.7 4.5 0 8.9.3 13.2.9V95H159z"}),hr=n.a.createElement("path",{className:"st1",d:"M264.8 230.4c-.1.4-.3.9-.4 1.3.1-.4.3-.8.4-1.3zM253.5 250.2zM259.8 241.4l-.1.1.1-.1zM254.7 248.7s0 .1 0 0c0 .1 0 0 0 0zM252.3 251.6c0 .1 0 .1 0 0 0 .1 0 .1 0 0zM251 253.1c-8.4 9.2-19.4 16.8-30 16.8-1.7 0-4.1-.2-6.8-.6 9.7 15 23.4 27.3 39.6 35.3l-1.8-41.9c-.7-1.7-1-5.1-1-9.6zM297.8 116.4c-42.8 0-79.2 26.9-93.3 64.7 6 2.4 10.2 8.3 10.2 15.2 0 9-7.3 16.3-16.4 16.4v2.9c0 10.9 1.8 21.4 5 31.2 10.6-2.3 19.8-4.4 20.4-5 3-1.3 27.1-50.1 32.9-62 .8-1.6 2.4-2.6 4.2-2.6h3.9l46.3-.2v-59.7c-4.3-.5-8.7-.9-13.2-.9zM263.7 233.7c-.1.3-.2.5-.3.8 0-.2.2-.5.3-.8zM263 235.2c-.1.3-.2.5-.3.8.1-.3.2-.5.3-.8zM264.2 232.2l-.3.9.3-.9zM262.3 236.7c-.1.2-.2.5-.3.7.1-.2.2-.4.3-.7zM260.7 239.8c-.1.2-.2.3-.3.5.1-.2.2-.3.3-.5zM261.6 238.2l-.3.6c0-.1.2-.3.3-.6z"}),br=n.a.createElement("path",{className:"st0",d:"M347 116h95v89h-95z"}),Er=n.a.createElement("path",{className:"st2",d:"M355 132h79v34h-79z"}),fr=n.a.createElement("path",{className:"st3",d:"M355 172.8h20V196h-20zM385 172.8h20V196h-20zM414 172.8h20V196h-20z"}),gr=n.a.createElement("path",{className:"st4",d:"M355 124h79M364.8 413H456M274.9 413h74.4M117.8 413h140.7M54 413h22.6"}),yr=n.a.createElement("path",{className:"st5",d:"M254.2 315c-7.7-5.7-17.2-9.1-27.6-9.1-25.5 0-46.1 20.6-46.1 46s20.6 46 46.1 46c11.8 0 22.5-4.4 30.7-11.6l-3.1-71.3z"}),Sr=n.a.createElement("path",{d:"M254.7 314.1c-20.1-14.5-48.6-11.4-64.5 7.9-14.3 17.3-14.1 43 .4 60.2 15.8 18.7 44.4 22 64.1 7.3 1.7-1.3 3.2-2.1 3.5-4.1.3-1.8-.2-4-.2-5.8-.3-7.4-.6-14.7-1-22.1-.6-14.2-1.2-28.4-1.8-42.5-.1-1.3-2.1-1.3-2 0 1 22.5 1.9 44.9 2.9 67.4 0 1 .4 2.6.2 3.5-.3 1-3.2 2.4-4.4 3.2-3 2-6.2 3.7-9.5 4.9-11.7 4.3-25 3.6-36.1-2.1-20.9-10.7-30.4-36.5-20.9-58.1 11.6-26.5 45.2-34.7 68.4-18 1 .8 2-.9.9-1.7z"}),Or=n.a.createElement("path",{className:"st2",d:"M149 273c-5.5 0-10-4.5-10-10.1v-17.8c0-5.6 4.5-10.1 10-10.1M235.2 323c0 2.8-2.3 5.1-5.1 5.1s-5.1-2.3-5.1-5.1 2.3-5.1 5.1-5.1 5.1 2.3 5.1 5.1zM226.7 382.8c0 1.6-1.3 2.9-3 2.9-1.6 0-3-1.3-3-2.9s1.3-2.9 3-2.9c1.6 0 3 1.3 3 2.9zM224.2 344c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9 7.1.1 12.9 5.8 12.9 12.9zM254.8 354.6c0 4.3-3.5 7.8-7.7 7.8-4.3 0-7.7-3.5-7.7-7.8s3.5-7.8 7.7-7.8 7.7 3.5 7.7 7.8zM184.1 369.6c4.2-2.7 12.9 5.7 8.2 12.1"}),vr=n.a.createElement("path",{className:"st5",d:"M283.7 107.1c0 3-2.4 5.5-5.5 5.5-3 0-5.5-2.4-5.5-5.5 0-3 2.4-5.5 5.5-5.5 3 0 5.5 2.5 5.5 5.5z"}),Nr=n.a.createElement("path",{d:"M282.7 107.1c-.3 5.7-8.9 5.8-8.9 0s8.6-5.7 8.9 0c.1 1.3 2.1 1.3 2 0-.2-3.5-2.8-6.5-6.5-6.5-3.5 0-6.5 2.9-6.5 6.5 0 3.4 2.8 6.3 6.2 6.4 3.8.2 6.6-2.8 6.8-6.4.1-1.3-1.9-1.3-2 0z"}),Ir=n.a.createElement("path",{className:"st6",d:"M196.7 119.9c-.5-.3-1.1-.2-1.4.3l-4.6 7.2c.7.1 1.3.5 1.7 1.1l4.6-7.2c.3-.5.2-1.1-.3-1.4zM187.8 131.8l-4.6 7.2c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.2c-.6-.2-1.2-.6-1.6-1.1zM188.6 127.7l-7.5-5.2c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l7.4 5.2c.2-.7.6-1.3 1.2-1.7zM199.5 135.3l-6.6-4.6c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.5.2-1.1-.2-1.4z"}),kr=n.a.createElement("path",{className:"st1",d:"M304.5 279H347v-47h-35.2c-4.1 19.4-8.2 37.3-9.7 40.7l2.4 6.3z"}),Tr=n.a.createElement("path",{className:"st6",d:"M177.2 302.6l-4.6 7.2c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.2c-.6-.2-1.2-.6-1.6-1.1zM186.1 290.7c-.5-.3-1.1-.2-1.4.3l-4.6 7.2c.7.1 1.3.5 1.7 1.1l4.6-7.2c.3-.5.2-1.1-.3-1.4z"}),Cr=n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M188.8 306.1l-6.6-4.6c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.2.8-.4.4-.5.3-1.1-.2-1.4zM177.9 298.5l-7.5-5.2c-.5-.3-1.1-.2-1.4.3s-.2 1.1.3 1.4l7.4 5.2c.2-.7.7-1.3 1.2-1.7z"})),jr=n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M239.7 165.8l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.1-1.2-.5-1.6-1.1zM246.6 157.1c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M240.5 161.8l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.4 1.2-1.7zM248.2 167.2l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.6.2-1.2-.3-1.5z"}))),wr=n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M175.2 397.1l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.1-1.2-.5-1.6-1.1zM182.1 388.4c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M176 393.1l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.4 1.2-1.7zM183.7 398.4l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.5.2-1.1-.3-1.5z"}))),Ar=n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M178.1 233.5l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.2-1.1-.6-1.6-1.1zM185 224.7c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M178.9 229.4l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.3 1.2-1.7zM186.7 234.8l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.2-.6.1-1.2-.3-1.5z"}))),_r=n.a.createElement("path",{className:"st0",d:"M112.6 286.1l16.9 12.7-29.1 25.5zM54.3 322.5l12.8-16.9 25.4 29.1z"}),Mr=n.a.createElement("path",{className:"st2",d:"M100.7 324.3L94 336.2V356"}),xr=n.a.createElement("path",{className:"st0",d:"M92.5 298.8l-17.3-25.5 17.8-5.2z"}),Dr=n.a.createElement("g",null,n.a.createElement("path",{className:"st7",d:"M308.6 246.5c0-.2.1-.4.1-.6 0 .2 0 .4-.1.6zM309 244.9c.1-.2.1-.5.2-.7-.1.2-.2.5-.2.7zM308.3 248.1c0-.1.1-.3.1-.4-.1.1-.1.3-.1.4zM309.4 243.1c.1-.2.1-.5.2-.7-.1.3-.2.5-.2.7zM306.9 254c0-.1.1-.2.1-.3 0 .1 0 .2-.1.3zM306.6 255.5c0-.2.1-.4.1-.5 0 .2-.1.4-.1.5zM309.8 241.4c.1-.3.1-.5.2-.8-.1.3-.2.5-.2.8zM307.6 251.2v-.2.2zM307.9 249.8c0-.2.1-.3.1-.5 0 .2-.1.3-.1.5zM310.1 239.7c.1-.3.1-.6.2-.8-.1.2-.1.5-.2.8zM302 272.7c.1-.1.1-.2.2-.4-.1.2-.1.3-.2.4zM302.3 272.2c0-.1.1-.2.1-.3-.1.1-.1.2-.1.3zM304.5 279l-2.5-6.3 5 12.7c5.2-1.5 14.3-4.2 21.1-6.5h-23.6zM310.5 237.8c.1-.2.1-.5.2-.7-.1.2-.1.4-.2.7zM310.9 236c.1-.3.1-.5.2-.8-.1.3-.1.5-.2.8zM311.3 234.1c.1-.3.1-.5.2-.8-.1.3-.1.6-.2.8zM311.8 232h20c-3.9-23.5-8.5-48.6-9.3-52.8v.4c-1.5 7.7-6.2 31.2-10.8 52.8 0-.2 0-.3.1-.4zM303.3 268.8c0-.2.1-.3.1-.5 0 .2 0 .4-.1.5zM303.1 269.7c0-.1.1-.3.1-.4 0 .1-.1.2-.1.4zM303.6 267.9c0-.2.1-.3.1-.5 0 .2-.1.4-.1.5zM302.4 271.7c0-.1.1-.2.1-.3 0 .1 0 .2-.1.3zM303.8 267c0-.2.1-.3.1-.5 0 .1 0 .3-.1.5zM302.9 270.4c0-.1.1-.3.1-.4-.1.2-.1.3-.1.4zM302.7 271.1c0-.1.1-.2.1-.4-.1.2-.1.3-.1.4zM306.3 257c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6zM304.1 265.9c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM305.9 258.5c0-.2.1-.4.1-.6 0 .2 0 .4-.1.6zM305.3 261.2c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6zM305.6 259.8c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM304.4 264.8c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM304.7 263.7c.1-.2.1-.4.2-.6-.1.2-.2.4-.2.6zM305 262.5c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6z"})),Pr=n.a.createElement("path",{className:"st0",d:"M92.5 298.8l1.2 37.4"}),Rr=n.a.createElement("path",{className:"st7",d:"M320.2 254.5c0 2.8-2.3 5-5 5s-5-2.3-5-5c0-2.8 2.3-5 5-5s5 2.2 5 5zM295.4 167.4c-.2-.2-.5-.4-.6-.9-.4-1.4-.6-1.9-.6-1.9s-.4-1.1.5-1.5c.8-.4 1-.6 1-.6s.9-.8 1-1.8c0-1 .2-5.2.3-6.2 0-1-1.4-.9-1.4-.9s-1.5.6-2.7 1c-1.2.4-1.4-.7-1.4-.7l-1.2-4.8s-.1-1-2-1.5c-1.8-.4-8.6-1.9-8.6-1.9h-.4l-6.5 13.1s-.8 1.6.8 2c1.6.4 2.6.7 2.6.7s.7.2.7.9-.2 3-.4 5.4c-.1 2.4 3.1 2.9 3.1 2.9s1.8.1 2.8.1c1 0 1.1 1.1 1.1 1.1l.7 5h12.2l-1-9.2v-.3z"}),Lr=n.a.createElement("path",{d:"M282.6 153.6c-.3.3-.3.8 0 1.1.3.3.8.3 1.1 0 .3-.3.3-.8 0-1.1-.3-.3-.8-.3-1.1 0z",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10}),Fr=n.a.createElement("path",{className:"st7",d:"M252.8 442h-11.1s-1.7 3.2 0 3.8c1.7.6 19.1 7.2 21.9 8 2.8.8 5.4-1.1 5.4-1.1l-1-10.7h-15.2zM355.6 430h-11.8s-1.8 3.2 0 3.8c1.8.6 20.5 7.2 23.4 8 3 .8 5.8-1.1 5.8-1.1l-1.1-10.7h-16.3z"}),zr=n.a.createElement("g",null,n.a.createElement("path",{className:"st7",d:"M346.4 369.4c-5-11.8-11-11.8-11-11.8L302 272.7c-.1.1-.1.2-.1.3-3.3 5.9-44.5-2.7-49.6-9.6-.1-.2-.3-.4-.4-.7l7.8 179.3h8.6s8.4-36.4 13-58c4.6-21.5-4.1-29.6-4.1-29.6l6.7-34.5L361.3 430h10.6s-20.5-48.8-25.5-60.6z"})),Ur=n.a.createElement("path",{className:"st0",d:"M283.8 319.9l-6.7 34.5s8.7 8.1 4.1 29.6c-1.8 8.4-4.1 19.1-6.4 29h36.4v-54l-27.4-39.1z"}),Hr=n.a.createElement("path",{className:"st7",d:"M289.5 293.4l-5.7 26.7"}),Vr=n.a.createElement("path",{className:"st1",d:"M296.4 167.6l3.3-.4s2.2-1.7 2.4-4.3c.1-1.3.8-23.3.2-24.9-.5-1.6-2.4-1.8-2.4-1.8s-22.2-.7-24.1-.8c-3.4-.2-5.7.1-5.9 1.7-.2 1.6 1.1 4.7 2.5 7.2.9 1.6 7.1 1.4 7.1 1.4s6.8 1.4 8.6 1.9c1.8.4 2 1.5 2 1.5l1.2 4.8s.2 1.2 1.4.7c1.2-.4 2.7-1 2.7-1s1.4-.1 1.4.9-.2 5.2-.3 6.2c0 1-1 1.8-1 1.8s-.2.2-1 .6c-.8.4-.5 1.5-.5 1.5s.2.5.6 1.9c.6 1.4 1.8 1.1 1.8 1.1z"}),Gr=n.a.createElement("path",{className:"st0",d:"M214.8 196.3c0 9-7.3 16.4-16.4 16.4-9.1 0-16.4-7.3-16.4-16.4 0-9 7.3-16.4 16.4-16.4 9 .1 16.4 7.4 16.4 16.4z"}),Br=n.a.createElement("path",{className:"st7",d:"M264.8 177.2s5.2 34.3 0 53.2c-1.8 6.5-6.9 15.2-13.8 22.7 0 5.3.4 9.1 1.3 10.3 5 6.9 46.2 15.5 49.6 9.6 3-5.3 17.7-78.7 20.6-93.5.3-1.3-.8-2.6-2.1-2.6l-55.6.3z"}),Wr=n.a.createElement("path",{className:"st7",d:"M169.8 260.4v-6.6s52.7-10.6 54-12c3-1.3 27.1-50.1 32.9-62 .8-1.6 2.4-2.6 4.2-2.6h3.9s5.2 34.3 0 53.2c-4 14.6-24.6 39.5-43.8 39.4-11.6 0-51.2-9.4-51.2-9.4z"}),Kr=n.a.createElement("g",null,n.a.createElement("path",{className:"st0",d:"M159 249.1V95h-10v150.5c2.5.6 6.3 2.1 10 3.6zM149 263.8V413h10V262.9c-3.6.7-7.4 1.2-10 .9z"})),qr=n.a.createElement("g",null,n.a.createElement("path",{d:"M169.8 253.8s-20.7-9.6-23.3-8.6c-2.6 1-3.8 14.9 0 17.9 3.8 2.9 23.3-2.6 23.3-2.6v-6.7z",fill:"#fff"}),n.a.createElement("path",{d:"M170.3 253c-5.7-2.6-11.5-5.2-17.4-7.3-1.7-.6-5-2.2-6.9-1.3-2.1 1-2.5 4.7-2.7 6.6-.7 6-.4 13.7 7 13.9 6.6.2 13.5-1.7 19.8-3.5.4-.1.7-.5.7-1v-6.6c0-1.3-2-1.3-2 0v3.8c0 .6-.2 1.4 0 2 .3 1.1-.2.5.7-.1-1.5 1-4.3 1.1-6 1.5-3.6.8-7.4 1.6-11.1 1.8-4.6.3-6.6-.9-7.2-5.6-.3-2.3-.8-9.4 1.5-10.8 1.6-1 6.1 1.4 7.7 2 5 1.9 10 4.1 14.9 6.3 1.1.5 2.1-1.2 1-1.7z"})),Yr=n.a.createElement("path",{className:"st7",d:"M311 284.3v11.2l-4-10z"}),Jr=n.a.createElement("path",{className:"st0",d:"M68.7 357l8.9 70h36.8l8.9-70z"});const Zr=e=>n.a.createElement("svg",dr({id:"Layer_1",viewBox:"0 0 500 500"},e),mr,pr,hr,br,Er,fr,gr,yr,Sr,Or,vr,Nr,Ir,kr,Tr,Cr,jr,wr,Ar,_r,Mr,xr,Dr,Pr,Rr,Lr,Fr,zr,Ur,Hr,Vr,Gr,Br,Wr,Kr,qr,Yr,Jr);s.p;function Xr(){return(Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var Qr=n.a.createElement("style",null,"\n    .st0{fill:#ffd33c;stroke:#000;stroke-miterlimit:10}.st0,.st1,.st2,.st4{stroke-width:2;stroke-linecap:round;stroke-linejoin:round}.st1{stroke:#000;stroke-miterlimit:10;fill:#fff}.st2,.st4{fill:none}.st2{stroke-miterlimit:10;stroke:#000}.st4{stroke:#13110c}.st5{fill:#13110c}\n  "),$r=n.a.createElement("path",{className:"st0",d:"M179 402h37.6c1.5 0 1.3-1.4 1.3-1.4s.1-4.5 0-6.2c-.1-1.6-1.1-1.5-1.1-1.5H179v9.1zM75 327.4c0 .9-.1 71.3 0 72.9.1 1.6 1.5 1.7 1.5 1.7h101.1c1.5 0 1.3-1.9 1.3-1.9s.1-69.6 0-71.9c-.1-2.3-1.1-2.1-1.1-2.1H76.5c0-.1-1.5-.1-1.5 1.3z"}),ei=n.a.createElement("path",{className:"st1",d:"M136 351c0 5-4 9-9 9s-9-4-9-9 4-9 9-9 9 4 9 9zM436 410H56c-2.2 0-4-1.8-4-4s1.8-4 4-4h380c2.2 0 4 1.8 4 4s-1.8 4-4 4z"}),ti=n.a.createElement("path",{className:"st0",d:"M341 100H83c-2.2 0-4 1.8-4 4v89.7c0 36.7 0 70.9.1 72.5.3 3.6 3.7 3.8 3.7 3.8h81.3c-11.6-23.9-28.5-59.4-36.1-74.9-.3-.7.2-1.4.9-1.4h12.9c13.9 15.5 52.2 58.4 54.4 60.8 2.7 3 10.4 2.5 10.4 2.5h138.3v-18.9c0-.4.1-1.7.1-1.7s-1.2.6-1.5.8c-3 1.6-9.6 5.2-9.7 5.2l-2.6-5.1s-.8-1.9.6-2.6c1.3-.7 5.8-2.9 5.8-2.9s1-1.6.4-3-.9-1.9-.9-1.9-.8-1.4-2.8-1.4l-2-.1s-2 .6-3.5-3.2c-1.2-3-4.1-8.9-5-11.2-.9-1.6 1.9-3.2 1.9-3.2l9.4-3.3s4.7-1.4 9.9.4V104c0-2.2-1.8-4-4-4z"}),si=n.a.createElement("path",{className:"st1",d:"M334 107H90c-2.2 0-4 1.8-4 4v16.7h.1c-.1 39.1-.2 129.3 0 131.9.3 3.2 3.5 3.5 3.5 3.5h71.1c-13.3-27.6-31.2-65-35.7-73.8-1.6-3.2 1.4-3.2 1.4-3.2h5.6c2.9 0 4.8 2.1 4.8 2.1s56.7 63.4 59.4 66.4c2.7 3 10.4 2.5 10.4 2.5h131.3v-16.8l-4.1 2.2-2.6-5.1s-.8-1.9.6-2.6c1.3-.7 5.8-2.9 5.8-2.9s.2-.3.3-.6v-2.5c-.5-1.2-.8-1.7-.8-1.7s-.8-1.4-2.8-1.4l-2-.1s-2 .6-3.5-3.2c-1.2-3-4.1-8.9-5-11.2-.1-.1-.1-.2-.1-.4l-7.8 9.2-17.5-33.1s-.9-2 .4-4 4.5-6.8 4.5-6.8.9-1 2.4.2c1.3 1 23.9 18.7 32.2 25.2V111c.1-2.2-1.7-4-3.9-4z"}),ai=n.a.createElement("path",{className:"st1",d:"M130 186h2.1c2.9 0 4.8 2.1 4.8 2.1s28.9 32.3 46.4 51.9H210V140h-78s-2 0-1.9 1.8c0 .9-.1 28.4-.1 44.2zM333.8 242.4l-2.6-5.1s-.8-1.9.6-2.6c1.3-.7 5.8-2.9 5.8-2.9s1-1.6.4-3-.9-1.9-.9-1.9-.8-1.4-2.8-1.4l-2-.1s-2 .6-3.5-3.2c-1.2-3-4.1-8.9-5-11.2-.1-.1-.1-.2-.1-.4l-12.8 15.1s-1.4 1.7.2 2.7c1.7 1 2.8 1.6 2.8 1.6s.7.5.5 1.3c-.3.8-1.2 3.6-2.2 6.4-.9 2.8 2.6 4.4 2.6 4.4s2 .7 3.2 1c1.1.3.9 1.7.9 1.7l-1.6 12.3h14.5l2-13.8 1.2-1.4-1.2.5zM133.6 251.5c0 1.9-1.6 3.5-3.5 3.5h-22.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5h22.5c1.9 0 3.5 1.6 3.5 3.5z"}),ni=n.a.createElement("path",{className:"st2",d:"M130 186h-3.5c-3.6-3.6-8.2-9.5-8.2-16.6 0-9.1 4.9-16.8 11.9-19.2L130 186z"}),ri=n.a.createElement("path",{d:"M322.4 220.1c-.4.3-.6.8-.3 1.3.3.4.8.6 1.3.3.4-.3.6-.9.3-1.3s-.9-.6-1.3-.3z",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10}),ii=n.a.createElement("path",{className:"st2",d:"M142 153h57M142 165h57M142 178h57"}),oi=n.a.createElement("path",{className:"st1",d:"M292 142.8c-.1-3-1.5-2.8-1.5-2.8h-62.8l-8.8 19.3c4.2 2.9 5.3 8.6 2.6 13l-2.6 4.2 6.5 12.2-5.2 15.2 5.1 11.6-8.5 8.5 7.8 8-14.6 8h80.2c1.9 0 1.8-2.6 1.8-2.6s.1-91.6 0-94.6z"}),ci=n.a.createElement("path",{className:"st2",d:"M232 200h48M232 212h48M232 224h48M232 165h48M232 153h48M232 177h48M232 189h48M298.3 183.6l-6.3-5.3v-25l11.4 22.5z"}),li=n.a.createElement("path",{className:"st0",d:"M425.7 285.5c1.9-3.9 3.1-8.2 3.1-12.8 0-13.1-8.8-24.1-20.9-27.5 2.2-4.7 3.3-10.1 2.8-15.7-1.2-15.3-13.7-27.6-29.1-28.6-18.2-1.2-33.4 13.2-33.4 31.2 0 6.1 1.8 11.8 4.8 16.6V278c-6.2 2.9-10.6 9.1-10.6 16.4 0 7.1 4.1 13.3 10.2 16.2-.9 3.5-1.3 7.2-1.3 11 0 25.4 20.6 46 46 46s46-20.6 46-46c0-14.6-6.9-27.7-17.6-36.1z"}),ui=n.a.createElement("path",{className:"st1",d:"M210 240v-99.6l20.4-6.3-11.5 25.3c4.2 2.9 5.3 8.6 2.6 13l-2.6 4.2 6.5 12.2-5.2 15.2 5.1 11.6-8.5 8.5 7.8 8L210 240z"}),di=n.a.createElement("path",{className:"st0",d:"M156.9 255H97.1s-1.1 0-1 .1c0 .1-.1 7.5 0 7.7.1.2 1 .2 1 .2h63.7c-1.3-2.6-2.6-5.3-3.9-8z"}),mi=n.a.createElement("path",{className:"st1",d:"M351.3 321.7c0-3.8.5-7.5 1.3-11-6-2.9-10.2-9.1-10.2-16.2 0-7.3 4.3-13.6 10.6-16.4v-21H206.6s-7.7.5-10.4-2.5-59.4-66.4-59.4-66.4-1.9-2.1-4.8-2.1h-5.6s-3 0-1.4 3.2c6.4 12.5 40.5 84.4 49 101.1 9.3 18.3 33.9 18.4 33.9 18.4s45.7.6 52.1.2c6.4-.4 4.3 2.9 2.8 6.6-1.5 3.7-34.5 86.5-29.1 86.5h131.1v-47.6c-8.3-8.4-13.5-20-13.5-32.8z"}),pi=n.a.createElement("path",{className:"st0",d:"M348.2 232.1c0-7.1 2.4-13.6 6.4-18.9-6.7-12.5-19.5-8.8-19.5-8.8l-9.4 3.3s-2.8 1.6-1.9 3.2c.9 2.3 3.8 8.2 5 11.2 1.5 3.7 3.5 3.2 3.5 3.2l2 .1c2 .1 2.8 1.4 2.8 1.4s.2.6.9 1.9c.6 1.4-.4 3-.4 3s-4.5 2.2-5.8 2.9c-1.3.7-.6 2.6-.6 2.6l2.6 5.1 14.5-7.8c-.1-.7-.1-1.6-.1-2.4z"}),hi=n.a.createElement("path",{className:"st1",d:"M324 211.4c-.1-.2-.2-.4-.2-.5.1.2.2.3.2.5zM325.1 213.8c-.1-.3-.2-.5-.4-.8.1.3.3.5.4.8zM324.3 212.1c-.1-.2-.1-.3-.2-.5.1.2.1.3.2.5zM324.7 212.9c-.1-.2-.2-.4-.2-.5 0 .1.1.3.2.5z"}),bi=n.a.createElement("path",{className:"st1",d:"M305.7 176.1c-1.6-1.2-2.4-.2-2.4-.2s-3.2 4.8-4.5 6.8c-1.3 2-.4 4-.4 4l17.5 33.1 7.8-9.2c-.4-1.5 2-2.8 2-2.8l9.4-3.3s2.3-.7 5.4-.5l.5-.4s-33.7-26.3-35.3-27.5z"}),Ei=n.a.createElement("g",null,n.a.createElement("path",{className:"st4",d:"M366.8 83.2s0-15.3 14.6-15.3c10.2 0 15.9 5.7 15.9 15.2 0 11.8-15.3 16.9-15.3 27"}),n.a.createElement("path",{className:"st5",d:"M381.9 116.7c1.3 0 2.4 1.1 2.4 2.4 0 1.4-1.1 2.4-2.4 2.4-1.4 0-2.4-1.1-2.4-2.4-.1-1.3 1-2.4 2.4-2.4z"})),fi=n.a.createElement("g",null,n.a.createElement("path",{className:"st4",d:"M404 117.5s0-11.9 11.4-11.9c7.9 0 12.4 4.5 12.4 11.9 0 9.2-11.9 13.1-11.9 21.1"})),gi=n.a.createElement("path",{className:"st5",d:"M415.9 144.2c1.4 0 2.4 1.1 2.4 2.4 0 1.4-1.1 2.4-2.4 2.4-1.3 0-2.4-1.1-2.4-2.4 0-1.4 1.1-2.4 2.4-2.4z"}),yi=n.a.createElement("path",{className:"st1",d:"M331.8 257l2-14.6 14.5-7.8s1.5 8.5 4.7 14.2v8.3h-21.2z"});const Si=e=>n.a.createElement("svg",Xr({id:"Layer_1",viewBox:"0 0 500 500"},e),Qr,$r,ei,ti,si,ai,ni,ri,ii,oi,ci,li,ui,di,mi,pi,hi,bi,Ei,fi,gi,yi);s.p;function Oi(){return(Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var vi=n.a.createElement("style",null,"\n    .st0{fill:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st0,.st1,.st3{stroke:#000;stroke-width:2}.st1{stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;fill:none}.st3{fill:#ffd33c}.st3,.st4,.st5{stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st4{fill:#fff;stroke-width:2;stroke:#13110c}.st5{stroke:#000}.st7{fill:#13110c}\n  "),Ni=n.a.createElement("path",{className:"st0",d:"M270 401.4c0 .8-.1 31.4 0 33 .1 1.5 1.4 1.7 1.4 1.7h93.3c1.3 0 1.2-1.9 1.2-1.9s.1-29.8 0-32c-.1-2.3-1-2.1-1-2.1h-93.6c.1-.1-1.3-.1-1.3 1.3zM118.1 401.5c0-1.5 1.3-1.5 1.3-1.5H38c-2.2 0-4 1.8-4 4s1.8 4 4 4h80.1v-6.5z"}),Ii=n.a.createElement("path",{className:"st0",d:"M270 401.4c0-1.4 1.4-1.4 1.4-1.4h-65.2c.2 0 .8.3.9 2.3v5.7h63c-.1-3.7 0-6.4-.1-6.6z"}),ki=n.a.createElement("path",{className:"st1",d:"M385.5 255H457M40 255h65.1M404.9 314H437"}),Ti=n.a.createElement("path",{className:"st0",d:"M365 400s1-.2 1 2.1c.1 2.3 0 32 0 32s.1 1.9-1.2 1.9h-80.7v5.9c.1 1.9 1.4 2 1.4 2h91.2c1.4 0 1.3-2.3 1.3-2.3s.1-36.4 0-39.1c-.1-2.8-1.1-2.5-1.1-2.5H365"}),Ci=n.a.createElement("path",{className:"st1",d:"M278 408h77M278 418h77M278 427h77"}),ji=n.a.createElement("path",{className:"st3",d:"M145.3 112h-12.6c-4.8 0-8.7 3.9-8.7 8.7V140h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"}),wi=n.a.createElement("path",{className:"st4",d:"M132 101.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3.1h-.1z"}),Ai=n.a.createElement("path",{className:"st1",d:"M95.2 314H50M156.3 197H50M444 197H338.4M327 140H108M198 141v16"}),_i=n.a.createElement("path",{className:"st0",d:"M76.3 286H63.7c-4.8 0-8.7 3.9-8.7 8.7V314h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"}),Mi=n.a.createElement("path",{className:"st4",d:"M63 275.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c1.2-.6 2.2-1.7 2.7-3.1.2-.5.3-1.1.3-1.7v-7.4c0-.8-.2-1.6-.5-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.2-4.8 3l-.1.3c-.4.7-.5 1.5-.5 2.3v3.2H63zM400 275.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c1.2-.6 2.2-1.7 2.7-3.1.2-.5.3-1.1.3-1.7v-7.4c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3.1h-.1z"}),xi=n.a.createElement("path",{className:"st0",d:"M428.3 227h-12.6c-4.8 0-8.7 3.9-8.7 8.7V255h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"}),Di=n.a.createElement("path",{className:"st4",d:"M415 216.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.7-.6-2.4l-.1-.3c-.9-1.8-2.7-2.9-4.8-2.9h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3h-.1z"}),Pi=n.a.createElement("path",{className:"st0",d:"M257.3 112h-12.6c-4.8 0-8.7 3.9-8.7 8.7V140h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"}),Ri=n.a.createElement("path",{className:"st4",d:"M245 101.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3.1h-.1z"}),Li=n.a.createElement("path",{className:"st3",d:"M367.3 169h-12.6c-4.8 0-8.7 3.9-8.7 8.7V197h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"}),Fi=n.a.createElement("path",{className:"st4",d:"M355 158.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.6-.5-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.2-4.8 3l-.1.3c-.4.7-.5 1.5-.5 2.4v3.1h-.3z"}),zi=n.a.createElement("path",{className:"st0",d:"M83.3 169H70.7c-4.8 0-8.7 3.9-8.7 8.7V197h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"}),Ui=n.a.createElement("path",{className:"st4",d:"M70 158.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.6-.3 1.2-.8 1.7-1.3.9-1 1.3-2.3 1.3-3.6V155.7c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.2-4.8 3l-.1.3c-.4.7-.6 1.5-.6 2.4v3H70z"}),Hi=n.a.createElement("path",{className:"st0",d:"M420.3 169h-12.6c-4.8 0-8.7 3.9-8.7 8.7V197h30v-19.3c0-4.8-3.9-8.7-8.7-8.7z"}),Vi=n.a.createElement("path",{className:"st4",d:"M141 158.7v4.3c0 1.4.6 2.8 1.6 3.8.4.4.9.7 1.4 1l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c.5-.3 1-.6 1.4-1 1-1 1.6-2.4 1.6-3.8v-7.4c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-3-4.8-3h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3.1h-.1z"}),Gi=n.a.createElement("path",{className:"st1",d:"M103 198v15M391 198v15"}),Bi=n.a.createElement("path",{className:"st4",d:"M407 158.7v4.3c0 .6.1 1.2.3 1.7.5 1.3 1.4 2.4 2.7 3l1.2.6c1.5.8 3.3.8 4.8 0l1.2-.6c1-.5 1.8-1.3 2.4-2.3.4-.8.6-1.7.6-2.5V155.6c0-.8-.2-1.6-.6-2.4l-.1-.3c-.9-1.8-2.8-2.9-4.8-2.9h-2.1c-2 0-3.9 1.1-4.8 3l-.1.3c-.4.7-.6 1.6-.6 2.4v3h-.1z"}),Wi=n.a.createElement("path",{className:"st0",d:"M327.7 229.1l.3-.6c-.4-.2-.7-.6-.9-1.3-.5-2-.8-2.7-.8-2.7s-.5-1.6.6-2.1c1.2-.5 1.4-.8 1.4-.8s1.3-1.2 1.4-2.6c.1-1.4.3-7.3.4-8.7.1-1.4-1.9-1.3-1.9-1.3s-2.1.8-3.8 1.4c-1.6.6-2-1.1-2-1.1l-1.8-6.8s-.2-1.4-2.8-2.1c-2.6-.6-12.1-2.7-12.1-2.7h-.6l-9.2 18.5s-1.1 2.3 1.1 2.8c2.2.6 3.7 1 3.7 1s1 .3.9 1.3c-.1 1-.3 4.3-.5 7.7-.2 3.4 4.3 4.1 4.3 4.1s2.6.2 4 .2 1.6 1.6 1.6 1.6l1.1 7.9H302c1.5 8.6 8.6 15.1 17.1 15.1 8.6 0 15.7-6.5 17.1-15.1h-7l-1.5-13.7z"}),Ki=n.a.createElement("path",{className:"st5",d:"M309.9 209c-.4.4-.4 1.1 0 1.5.4.4 1.1.4 1.6-.1.4-.4.4-1.1 0-1.5-.5-.4-1.2-.3-1.6.1z"}),qi=n.a.createElement("path",{d:"M307.8 205.6c2.9-.5 5.7-1 8.6-1.6 1.3-.2.7-2.2-.5-1.9-2.9.5-5.7 1-8.6 1.6-1.3.2-.8 2.1.5 1.9z"}),Yi=n.a.createElement("path",{className:"st0",d:"M378 392.6l-.6-.6-60.5-64.3s-1.5-2.1-.3-4.5 3.6-6.2 3.6-6.2 1.6-2.4 5.2-.8c2.3 1 32.1 13.7 52.7 22.5 0-42.1-.3-95.8-.3-95.8h-41.4c-1.5 8.6-8.6 15.1-17.1 15.1-8.6 0-15.7-6.5-17.1-15.1l-34 .4s22.4 5.8 19.4 50.5c-2.6 38.2-18.7 69.1-23.3 77.2l-1.2 2.1 1.2.4c5.7 1.9 30.1 10.1 41.9 15.5 2.2.5 3.2 10.8-1.3 10.9h71.8c1.8 0 1.6-2.3 1.6-2.3s-.3-1.7-.3-5z"}),Ji=n.a.createElement("path",{className:"st3",d:"M325.3 384.6l-19.2-19c-1.2-1.2-3.2-1.2-4.4 0-1.2 1.2-1.2 3.2 0 4.4l16 15.9c2.4-.9 5-1.4 7.6-1.3z"}),Zi=n.a.createElement("path",{fill:"none",stroke:"#13110c",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M304.8 373.1l4.6-4.2"}),Xi=n.a.createElement("path",{className:"st0",d:"M222.9 381.2c-5.2 18 13.4 18.8 13.4 18.8h68.2c4.5 0 3.6-10.4 1.4-10.9-13.5-6.1-43.1-15.9-43.1-15.9s21.4-34.7 24.5-79.3c3-44.6-19.4-50.5-19.4-50.5s-5.1-1-7.1 5.8c-1.9 6.8-35 121.1-37.9 132z"}),Qi=n.a.createElement("path",{d:"M236.6 370.6c8.7-.8 17.7.8 25.9 3.5 1.2.4 1.8-1.5.5-1.9-8.4-2.7-17.6-4.4-26.4-3.6-1.2.1-1.2 2.1 0 2z"}),$i=n.a.createElement("path",{className:"st0",d:"M404.9 314H421v-19.3c0-4.8-3.9-8.7-8.7-8.7h-12.6c-1.2 0-2.4.3-3.5.7 2.8 8.7 5.8 18.1 8.7 27.3zM317.5 321.4c1.2-2.1 2.6-4.3 2.6-4.3s.9-1.4 3-1.3c0 0 5.5-20.3 4.3-27.7-.8-4.9-4.3-10.6-9.9-12.8-5.5-2.7-4.5 4.3-4.5 4.3v38.7c0 5.1 3.3 4.5 3.3 4.5l1.2-1.4z"}),eo=n.a.createElement("path",{className:"st3",d:"M329.4 228.8l7.8-.9s2.4-1 1.9-2.8c-.5-1.8-.4-35.8-1.2-38.1-.8-2.3-3.5-2.5-3.5-2.5s-31.5-.6-34-1.2c-2.5-.5-2.1 2.3-2.1 2.3s1 6.9 3 10.4c1.2 2.2 4.4 2 4.4 2s9.5 2 12.1 2.7c2.6.6 2.8 2.1 2.8 2.1l1.8 6.8s.3 1.7 2 1.1c1.6-.6 3.8-1.4 3.8-1.4s2-.1 1.9 1.3c-.1 1.4-.3 7.3-.4 8.7 0 1.4-1.4 2.6-1.4 2.6s-.2.2-1.4.8c-1.2.5-.6 2.1-.6 2.1s.3.7.8 2.7c.5 1.7 2.3 1.3 2.3 1.3z"}),to=n.a.createElement("path",{className:"st0",d:"M341.2 397.2c0-7-6.6-12.6-14.8-12.6h-1.1c-7.8-.5-15.7 5.6-17.8 7.4.7 3.2.1 8-2.9 8H341.3s-.1-.2-.3-.5c.1-.8.2-1.5.2-2.3zM249.3 204.8c-2.7.1-9-1-12.6-.9-4.4.1-4.8-2.2-4.8-2.2l-1-2.1c-1-2.1-2.7-2.3-2.7-2.3h-2.3c-1.6 0-2.9 7.4-3 9-.1 3.4-4.3 7.9-4.3 7.9l-.7.6c1 2.8 1.9 5.1 2.1 5.5.7 1 2.1 2.9 2.1 2.9s2.8 3 5.2 1.2c2.4-1.8 4.7-3.6 5.4-4.2.7-.5 1.4.1 1.4.1s1 .9 2.6 2.3c1.5 1.4 2.7-.6 2.7-.6l9.9-17.2zM164.2 391.7s-.9-.9-1.7-1.3c-2.8-1.5-52.3-16.9-52.3-16.9s-3.3-2.2-.6-8c2.6-5.8 36.4-80.4 36.4-80.4 17-.1 31.6-10.1 38.2-24.4 1 .2 2 .3 3.1.3 8.2 0 14.8-6.6 14.8-14.8 0-2.8-.8-5.5-2.2-7.7 1.5-2 3.9-5.4 6.6-8.9l9.9.1c-.8 3.1-1.9 7.1-1.9 7.1s-.4 4.5.3 5.4c1.4 2-.6 7.7-.6 7.7h.2c-3-.3-3.4 2-3.4 2l-41.4 116.8c-1.4 4-2.3 12.3-2.3 12.9 0 0 .2 4.8 1.3 7.1l-4.4 3"}),so=n.a.createElement("path",{className:"st0",d:"M220.7 251.4c-2.3-.5-2.3-.5-5.9-1.3-3.6-.8-4 1.9-4 1.9l-41.4 116.8c-1.4 4-2.3 12.3-2.3 12.9 0 2.6.5 4.9 1.3 7.1 3.5-2.1 8.2-4.2 13-4h1.1c7.8 0 14.1 5.1 14.8 11.6 4.2-3.4 7-8.6 7.5-14.5l17.5-127c-.1.1.7-3-1.6-3.5zM140.4 284.7c.2 0 .4 0 .6.1-.3 0-.4 0-.6-.1zM142.7 284.9h.7c-.2.1-.5.1-.7 0zM137.4 284.2c.3.1.7.1 1 .2-.4 0-.7-.1-1-.2zM134.5 283.6c.6.2 1.2.3 1.7.4-.5-.1-1.1-.3-1.7-.4zM132.3 282.9c.4.1.8.3 1.2.4-.4-.1-.8-.2-1.2-.4z"}),ao=n.a.createElement("path",{className:"st5",d:"M240.8 208.2c-.1.5-.6.9-1.1.8-.5-.1-.9-.6-.8-1.2.1-.5.6-.9 1.1-.8.6.2.9.7.8 1.2z"}),no=n.a.createElement("path",{className:"st0",d:"M162.6 390.4c-2.8-1.5-52.3-16.9-52.3-16.9s-3.3-2.2-.6-8c2.6-5.8 36.4-80.4 36.4-80.4h-.4c-14 0-26.5-6.7-34.1-17-10.4 28.9-32.1 89.6-35.1 101.7-.9 3.6-7.6 28.6 15.2 29.9 9.3.5 73.4 0 73.4 0v-5.5c-.1-.1.3-2.3-2.5-3.8z"}),ro=n.a.createElement("path",{className:"st3",d:"M181.3 384.9h1.1c.5 0 1.1 0 1.6.1l-19.4-19.5c-1.2-1.2-3.2-1.2-4.4 0-1.2 1.2-1.2 3.2 0 4.4l15.6 15.6c1.8-.4 3.6-.7 5.5-.6z"}),io=n.a.createElement("path",{className:"st0",d:"M214 250s2-5.7.6-7.7c-.7-1-.3-5.4-.3-5.4s2.3-8.4 2.7-10.1c.3-1.8 2.5-1.5 2.5-1.5s9.5.4 13.4.7c3.9.3 1.4 4.6 1.4 4.6l-12.7 20.9-7.6-1.5zM182.4 384.9h-1.1c-7.1-.4-14.3 4.6-17.1 6.8 1 1.2.8 2.4.8 2.4v5.5l32.1.3c.2-.7.2-1.7.2-2.5 0-6.8-6.7-12.5-14.9-12.5zM162 190.4v-12.7c0-4.8-3.9-8.7-8.7-8.7h-12.6c-4.8 0-8.7 3.9-8.7 8.7V197h24.3c1.5-2.5 3.5-4.7 5.7-6.6z"}),oo=n.a.createElement("path",{className:"st7",d:"M282.2 167.9l-4.6 7.1c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.1c-.6-.2-1.2-.6-1.6-1.1zM291.1 156c-.5-.3-1.1-.2-1.4.3l-4.6 7.1c.7.1 1.3.5 1.7 1.1l4.6-7.1c.2-.5.1-1.1-.3-1.4zM293.8 171.3l-6.5-4.5c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.1.8-.4.2-.5.1-1.2-.3-1.5zM282.9 163.8l-7.5-5.2c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l7.4 5.1c.2-.7.7-1.2 1.2-1.6z"}),co=n.a.createElement("path",{className:"st0",d:"M118.1 401.5c0 .9-.1 34.9 0 36.6.1 1.7 1.3 1.8 1.3 1.8h86.5c1.3 0 1.1-2.1 1.1-2.1s.1-33.1 0-35.6-.9-2.3-.9-2.3h-86.7c-.1.1-1.4.1-1.3 1.6zM455 400l-78.1-.1c.2 0 1.1.1 1.1 8.1h77c2.2 0 4-1.8 4-4s-1.8-4-4-4z"}),lo=n.a.createElement("path",{className:"st3",d:"M255.1 187.5c-1-2.5-6.5-13.4-22.2-12.5-10.2.6-16.9 4.4-21.2 8.7 0 0-15.4 3.8-14.4 3.6 1-.3-2.6.7-2.6.7l-.4-.3c-4.2-2.6-8.8-3.9-14.2-3.9-12.6 0-23.2 8.3-26.7 19.7-2.5-.5-5.1-.7-7.7-.7-23.3 0-42.2 18.4-42.2 41.2s18.9 41.2 42.2 41.2c17.2 0 31.9-10 38.5-24.4 1 .2 2 .3 3.1.3 8.2 0 14.8-6.6 14.8-14.8 0-2.8-.8-5.5-2.2-7.7 4.2-5.9 17.2-22.9 17.2-22.9l1.6-1.3s4.3-4.5 4.3-7.9c0-1.7 1.3-9.1 3-9h2.3s1.7.2 2.7 2.3l1 2.1s.4 2.4 4.8 2.2c3.6-.1 9.9 1 12.6.9 2.3.2 10.1-7 5.7-17.5z"}),uo=n.a.createElement("path",{className:"st0",d:"M417.6 360.7c-2.5-3.6-5.5-6.3-7.8-7.7-1.9-1.1-12.2-5.8-12.2-5.8s-68.7-29.3-72.3-30.9c-3.6-1.6-5.2.8-5.2.8s-2.4 3.8-3.6 6.2c-1.2 2.4.3 4.5.3 4.5l60.5 64.3c2.7 3 6.1 5.4 9.9 6.9 3.1 1.4 6.6 2.2 10.3 2.2 13.9 0 25.2-11.3 25.2-25.2 0-5.8-1.9-11.1-5.1-15.3z"}),mo=n.a.createElement("path",{className:"st0",d:"M397.6 347.2s10.3 4.7 12.2 5.8c3.5 2.1 8.8 7.6 11.3 14.3-4.9-16.5-34.3-111.8-38.3-120-2-4.1-5.2-4.3-5.2-4.3l.5 95.9c11.1 4.7 19.5 8.3 19.5 8.3z"});const po=e=>n.a.createElement("svg",Oi({id:"Layer_1",viewBox:"0 0 500 500"},e),vi,Ni,Ii,ki,Ti,Ci,ji,wi,Ai,_i,Mi,xi,Di,Pi,Ri,Li,Fi,zi,Ui,Hi,Vi,Gi,Bi,Wi,Ki,qi,Yi,Ji,Zi,Xi,Qi,$i,eo,to,so,ao,no,ro,io,oo,co,lo,uo,mo);s.p;function ho(e){switch(e){case wn.b:return Zr;case wn.c:return po;case wn.d:return Si;case wn.e:default:return cr}}function bo(e){let t;switch(e){case wn.b:t="not-authorized";break;case wn.c:t="no-access";break;case wn.d:t="not-found";break;case wn.e:default:t="internal-error"}return O.b.text({id:t,keyset:"page-titles"})}function Eo(e,t){let s;switch(e){case wn.c:case wn.e:s=!0;break;default:s=!1}const a="".concat(s?e:t,":description"),n=O.b.text({id:a,keyset:"api-errors"});return a===n?void 0:n}const fo=e=>{let{statusCode:t,errorCode:s,withHomeLink:a}=e;return n.a.createElement(ur,{withHomeLink:a,Image:ho(t),pageTitle:bo(t),errorText:O.b.text({id:s,keyset:"api-errors"}),errorDescription:Eo(t,s)})};fo.displayName="APIErrorPage";const go=()=>n.a.createElement(ur,{pageTitle:O.b.text({id:"fetch-error",keyset:"page-titles"}),errorText:O.b.text({id:"fetch-error",keyset:"errors"}),errorDescription:O.b.text({id:"fetch-error-description",keyset:"errors"})});go.displayName="NetworkErrorPage";const yo=()=>n.a.createElement(ur,{pageTitle:O.b.text({id:"internal-error",keyset:"page-titles"}),errorText:O.b.text({id:"internal-error",keyset:"errors"}),errorDescription:O.b.text({id:"internal-error-description",keyset:"errors"})});yo.displayName="InternalErrorPage";const So=()=>n.a.createElement(ur,{Image:Si,pageTitle:O.b.text({id:"page-not-found",keyset:"page-titles"}),errorText:O.b.text({id:"page-not-found-error",keyset:"errors"}),errorDescription:O.b.text({id:"page-not-found-error-description",keyset:"errors"})});So.displayName="PageNotFoundErrorPage";var Oo=s(354);const vo=!1;var No=s(3);let Io,ko;function To(e){return{type:Io.FETCH_STUDENT_COMMENTS_START,payload:e}}function Co(e){return{type:Io.FETCH_TEACHER_COMMENTS_START,payload:e}}function jo(e){return{type:Io.FETCH_COMMENTS_FAIL,payload:e}}function wo(e){return{type:Io.CLEAR_COMMENTS,payload:e}}function Ao(e){return{type:Io.ADD_STUDENT_COMMENT_START,payload:e}}function _o(e){return{type:Io.ADD_TEACHER_COMMENT_START,payload:e}}function Mo(e){return{type:Io.EDIT_STUDENT_COMMENT_START,payload:e}}function xo(e){return{type:Io.EDIT_TEACHER_COMMENT_START,payload:e}}!function(e){e.FETCH_STUDENT_COMMENTS_START="[comments] fetch student list start",e.FETCH_TEACHER_COMMENTS_START="[comments] fetch teacher list start",e.FETCH_STUDENT_COMMENTS_SUCCESS="[comments] fetch student list success",e.FETCH_TEACHER_COMMENTS_SUCCESS="[comments] fetch teacher list success",e.FETCH_COMMENTS_FAIL="[comments] fetch list fail",e.CLEAR_COMMENTS="[comments] clear list",e.ADD_STUDENT_COMMENT_START="[comments] add student comment start",e.ADD_TEACHER_COMMENT_START="[comments] add teacher comment start",e.ADD_COMMENT_SUCCESS="[comments] add comment success",e.ADD_COMMENT_FAIL="[comments] add comment fail",e.EDIT_STUDENT_COMMENT_START="[comments] edit student comment start",e.EDIT_TEACHER_COMMENT_START="[comments] edit teacher comment start",e.EDIT_COMMENT_SUCCESS="[comments] edit comment success",e.EDIT_COMMENT_FAIL="[comments] edit comment fail"}(Io||(Io={})),function(e){e.SET_GRADE_START="[solutions] set mark start",e.SET_GRADE_SUCCESS="[solutions] set mark success",e.SET_GRADE_FAIL="[solutions] set mark fail"}(ko||(ko={}));var Do=s(17);const Po={apiCourseDetails:new C.a("/api/courses/:courseId([0-9]+)"),apiCourseInvites:new C.a("/api/invites/group/:groupId([0-9]+)"),apiCourseProgress:new C.a("/api/courses/:courseId([0-9]+)/progress"),apiSetBonusScore:new C.a("/api/courses/:courseId([0-9]+)/progress"),apiCourseVariants:new C.a("/api/courses/:courseId([0-9]+)/variants"),apiExpelStudent:new C.a("/api/courses/:courseId([0-9]+)/expel"),apiCourseBanners:new C.a("/api/courses/banners"),apiStudentLessons:new C.a("/api/student/lessons"),apiTeacherLessons:new C.a("/api/teacher/lessons"),apiStudentLessonDetails:new C.a("/api/student/lessons/:lessonId([0-9]+)"),apiTeacherLessonDetails:new C.a("/api/teacher/lessons/:lessonId([0-9]+)"),apiTeacherLessonProgress:new C.a("/api/teacher/lessons/:lessonId([0-9]+)/progress"),apiTeacherLessonProgressPreview:new C.a("/api/teacher/lessons/:lessonId([0-9]+)/progress/preview"),apiChangeLessonVisibility:new C.a("/api/teacher/lessons/:lessonId([0-9]+)/visibility"),apiAssignVariant:new C.a("/api/teacher/lessons/:lessonId([0-9]+)/variants/:variantId([0-9]+)/assign"),apiShuffleVariants:new C.a("/api/teacher/lessons/:lessonId([0-9]+)/variants/shuffle"),apiTestTimer:new C.a("/api/student/lessons/timer"),apiStartTest:new C.a("/api/student/lessons/:lessonId([0-9]+)/start"),apiFinishTest:new C.a("/api/student/lessons/:lessonId([0-9]+)/finish"),apiStudentProblemSolution:new C.a("/api/student/problem/solution"),apiProblemDetails:new C.a("/api/problem/details"),apiStudentProblemSubmission:new C.a("/api/student/problem/submission"),apiTeacherProblemSolutions:new C.a("/api/teacher/problem/solutions"),apiAssignProblemVariant:new C.a("/api/teacher/assign-variant"),apiMaterialList:new C.a("/api/materials"),downloadMaterial:new C.a("/download/materials/:materialId([0-9]+)"),apiStudentDetailedMaterial:new C.a("/api/student/materials/:materialId([0-9]+)"),apiTeacherDetailedMaterial:new C.a("/api/teacher/materials/:materialId([0-9]+)"),apiStudentLessonTasks:new C.a("/api/student/lessonTasks"),apiTeacherLessonTasks:new C.a("/api/teacher/lessonTasks"),apiStudentTasks:new C.a("/api/student/tasks"),apiStudentTasksUnsolved:new C.a("/api/student/tasks/unsolved"),apiDetailedStudentTask:new C.a("/api/student/tasks/:taskId([0-9]+)"),apiDetailedTeacherTask:new C.a("/api/teacher/tasks/:taskId([0-9]+)"),apiSolutionPreview:new C.a("api/solutions/:solutionId([0-9]+)/preview/"),apiTeacherTaskSolutions:new C.a("/api/teacher/tasks/:taskId([0-9]+)/solutions"),apiTeacherTaskNoSolutions:new C.a("/api/teacher/solutions/no_solution"),apiStudentSubmission:new C.a("/api/student/solutions/:solutionId([0-9]+)/comments/:commentId([0-9]+)/submission"),apiTeacherSubmission:new C.a("/api/teacher/solutions/:solutionId([0-9]+)/comments/:commentId([0-9]+)/submission"),apiTeacherSolutionList:new C.a("/api/teacher/solutions"),apiTeacherSolutionFilters:new C.a("/api/teacher/solutions/filters"),apiStudentSolutionDetails:new C.a("/api/student/solutions/:solutionId([0-9]+)"),apiTeacherSolutionDetails:new C.a("/api/teacher/solutions/:solutionId([0-9]+)"),apiSendSolution:new C.a("/api/student/solutions/:solutionId([0-9]+)/comments/files"),apiGradeSolution:new C.a("/api/teacher/solutions/:solutionId([0-9]+)"),apiRejudgeSolution:new C.a("/api/teacher/solutions/:solutionId([0-9]+)"),apiStudentSolutionComments:new C.a("/api/student/solutions/:solutionId([0-9]+)/comments"),apiTeacherSolutionComments:new C.a("/api/teacher/solutions/:solutionId([0-9]+)/comments"),apiAddStudentSolutionComment:new C.a("/api/student/solutions/:solutionId([0-9]+)/comments"),apiAddTeacherSolutionComment:new C.a("/api/teacher/solutions/:solutionId([0-9]+)/comments"),apiEditStudentSolutionComment:new C.a("/api/student/solutions/:solutionId([0-9]+)/comments/:commentId([0-9]+)"),apiEditTeacherSolutionComment:new C.a("/api/teacher/solutions/:solutionId([0-9]+)/comments/:commentId([0-9]+)"),apiParentInvites:new C.a("/api/invites/parent/:userId([0-9]+)")};let Ro;function Lo(e){return{type:Ro.SELECT_SUBMISSION,payload:e}}function*Fo(e){const t=e.payload,s=Po.apiTeacherSolutionComments.build({solutionId:t});try{const{response:e}=yield Object(No.g)({response:Object(No.b)(Do.a,s),gradeSolution:Object(No.i)(ko.SET_GRADE_SUCCESS)});e&&(yield Object(No.f)((a=e,{type:Io.FETCH_TEACHER_COMMENTS_SUCCESS,payload:a})))}catch(e){yield Object(No.f)(jo(e))}var a}function*zo(e){const{solutionId:t,selectLatestSubmission:s}=e.payload,a=Po.apiStudentSolutionComments.build({solutionId:t});try{const e=yield Object(No.b)(Do.a,a);yield Object(No.f)((n=e,{type:Io.FETCH_STUDENT_COMMENTS_SUCCESS,payload:n})),s&&e.solutionPreview.latestSubmission&&(yield Object(No.f)(Lo(e.solutionPreview.latestSubmission)))}catch(e){yield Object(No.f)(jo(e))}var n}function*Uo(e){const{solutionId:t,text:s}=e.payload,a={[Io.ADD_STUDENT_COMMENT_START]:Po.apiAddStudentSolutionComment,[Io.ADD_TEACHER_COMMENT_START]:Po.apiAddTeacherSolutionComment}[e.type].build({solutionId:t});try{const e=yield Object(No.b)(Do.a,a,{body:JSON.stringify({data:s}),method:"POST"});yield Object(No.f)((n={solutionId:t,addedComment:e},{type:Io.ADD_COMMENT_SUCCESS,payload:n}))}catch(e){yield Object(No.f)(function(e){return{type:Io.ADD_COMMENT_FAIL,payload:e}}(e)),yield Object(No.f)(Object(sn.a)({i18n:{id:"add-comment-error",keyset:"errors"},type:an.b.ERROR}))}var n}function*Ho(e){const{commentId:t,solutionId:s,text:a}=e.payload,n={[Io.EDIT_STUDENT_COMMENT_START]:Po.apiEditStudentSolutionComment,[Io.EDIT_TEACHER_COMMENT_START]:Po.apiEditTeacherSolutionComment}[e.type].build({solutionId:s,commentId:t});try{const e=yield Object(No.b)(Do.a,n,{body:JSON.stringify({data:a}),method:"PATCH"});yield Object(No.f)((r={solutionId:s,commentId:t,editedComment:e},{type:Io.EDIT_COMMENT_SUCCESS,payload:r}))}catch(e){yield Object(No.f)(function(e){return{type:Io.EDIT_COMMENT_FAIL,payload:e}}(e)),yield Object(No.f)(Object(sn.a)({i18n:{id:"edit-comment-error",keyset:"errors"},type:an.b.ERROR}))}var r}(Ro||(Ro={})).SELECT_SUBMISSION="[solutions] select submission";var Vo=function*(){yield Object(No.a)([Object(No.k)(Io.FETCH_STUDENT_COMMENTS_START,zo),Object(No.k)(Io.FETCH_TEACHER_COMMENTS_START,Fo),Object(No.k)(Io.ADD_STUDENT_COMMENT_START,Uo),Object(No.k)(Io.ADD_TEACHER_COMMENT_START,Uo),Object(No.k)(Io.EDIT_STUDENT_COMMENT_START,Ho),Object(No.k)(Io.EDIT_TEACHER_COMMENT_START,Ho)])};const Go=Object(E.createAsyncAction)("[course-details] fetch start","[course-details] fetch success","[course-details] fetch failure")(),Bo=Object(E.createAction)("[course-details] clear"),Wo=Object(E.createAction)("[course-details] fetch course banners",e=>t=>e({courseId:t})),Ko=Object(E.createAction)("[course-details] set course banners",e=>t=>e(t)),qo=Object(E.createAction)("[course-details] clear banner list",e=>()=>e());function*Yo(e){const t=Po.apiCourseInvites.build({groupId:e});let s={};try{s=yield Object(No.b)(Do.a,t)}catch(e){console.error(e)}return s}function*Jo(e){const{courseId:t,groupId:s}=e.payload;try{const e=Po.apiCourseDetails.build({courseId:t},{groupId:s}),[a,n]=yield Object(No.a)([Object(No.b)(Do.a,e),Object(No.b)(Yo,s)]);a.invite=n,yield Object(No.f)(Go.success(a))}catch(e){yield Object(No.f)(Go.failure(e))}}function*Zo(e){let{payload:{courseId:t}}=e;try{yield Object(No.f)(Ko(null));const e=Po.apiCourseBanners.build({},{courseId:t}),s=yield Object(No.b)(Do.a,e);yield Object(No.f)(Ko(s))}catch(e){console.error(e)}}var Xo=function*(){yield Object(No.a)([Object(No.k)(Object(E.getType)(Go.request),Jo),Object(No.k)(Object(E.getType)(Wo),Zo)])};let Qo,$o;!function(e){e.NAME="displayName",e.RATING="rating"}(Qo||(Qo={})),function(e){e.FETCH_COURSE_PROGRESS_START="[course-progress] fetch start",e.FETCH_COURSE_PROGRESS_SUCCESS="[course-progress] fetch success",e.FETCH_COURSE_PROGRESS_FAIL="[course-progress] fetch fail",e.CLEAR_COURSE_PROGRESS="[course-progress] clear",e.CHANGE_ATTENDANCE_STATUS="[course-progress] change attendance",e.UPDATE_REFERENCE_ATTENDANCE="[course-progress] update reference attendance",e.RESTORE_ATTENDANCE_FROM_REFERENCE="[course-progress] restore attendance from reference",e.CHANGE_SORT="[course-progress] change sort"}($o||($o={}));const ec=Object(E.createAsyncAction)("[course-progress] expel student start","[course-progress] expel student success","[course-progress] expel student fail")();function tc(e){return{type:$o.FETCH_COURSE_PROGRESS_START,payload:e}}function sc(){return{type:$o.CLEAR_COURSE_PROGRESS}}function ac(e){return{type:$o.CHANGE_ATTENDANCE_STATUS,payload:e}}function nc(e){return{type:$o.CHANGE_SORT,payload:e}}const rc=Object(E.createAsyncAction)("[course-progress] set bonus score start","[course-progress] set bonus score success","[course-progress] set bonus score fail")();var ic=s(55);const oc={scheduleGet:new C.a("/api/schedule"),scheduleCreate:new C.a("/api/schedule"),scheduleUpdate:new C.a("/api/schedule"),studyPlanUpdate:new C.a("/api/schedule/plan"),periodScheduleGet:new C.a("/api/schedule/period"),changeAttendance:new C.a("/api/events/:eventId/attendance")};function*cc(e){const{eventId:t,studentId:s,status:a}=e.payload;yield Object(No.b)(ic.c,500);const n=oc.changeAttendance.build({eventId:t},{studentId:s}),r=JSON.stringify({status:a});try{yield Object(No.b)(Do.a,n,{body:r,method:"PATCH"}),yield Object(No.f)((i={eventId:t,studentId:s},{type:$o.UPDATE_REFERENCE_ATTENDANCE,payload:i})),yield Object(No.f)(Object(sn.a)({i18n:{id:"change-attendance-success-message",keyset:"attendance"},timeout:3e3,type:an.b.SUCCESS}))}catch(e){yield Object(No.f)(function(e){return{type:$o.RESTORE_ATTENDANCE_FROM_REFERENCE,payload:e}}({eventId:t,studentId:s})),yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}var i}var lc=function*(){yield Object(No.a)([Object(No.e)(function*(){const e={};for(;;){const t=yield Object(No.i)($o.CHANGE_ATTENDANCE_STATUS),{studentId:s,eventId:a}=t.payload;e[s]||(e[s]={}),e[s][a]||(e[s][a]=Object(ic.a)(),yield Object(No.k)(e[s][a],cc)),yield Object(No.f)(e[s][a],t)}})])};function*uc(e){const{courseId:t,studentId:s,oldScore:a,newScore:n}=e.payload;try{const e=Po.apiSetBonusScore.build({courseId:t},{studentId:s}),{rating:r,bonusScore:i}=yield Object(No.b)(Do.a,e,{body:JSON.stringify({bonusScore:n}),method:"PATCH"});yield Object(No.f)(rc.success({studentId:s,rating:r,bonusScore:i}))}catch(e){yield Object(No.f)(rc.failure({studentId:s,oldScore:a})),yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}}var dc=function*(){yield Object(No.a)([Object(No.e)(function*(){const e={};for(;;){const t=yield Object(No.i)(Object(E.getType)(rc.request)),{studentId:s}=t.payload;e[s]||(e[s]=Object(ic.a)(),yield Object(No.k)(e[s],uc)),yield Object(No.f)(e[s],t)}})])};function*mc(e){const{courseId:t,groupId:s,studentId:a,status:n}=e.payload,r=Po.apiExpelStudent.build({courseId:t},{groupId:s});try{yield Object(No.b)(Do.a,r,{body:JSON.stringify({studentId:a}),method:"PATCH"}),yield Object(No.f)(ec.success({studentId:a}))}catch(e){yield Object(No.f)(ec.failure({studentId:a,oldStatus:n})),yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}}var pc=function*(){yield Object(No.j)(Object(E.getType)(ec.request),mc)};function*hc(e){const{courseId:t,groupId:s}=e.payload,a=Po.apiCourseProgress.build({courseId:t},{groupId:s});try{const e=yield Object(No.b)(Do.a,a);yield Object(No.f)((n=e,{type:$o.FETCH_COURSE_PROGRESS_SUCCESS,payload:n}))}catch(e){yield Object(No.f)(function(e){return{type:$o.FETCH_COURSE_PROGRESS_FAIL,payload:e}}(e))}var n}var bc=function*(){yield Object(No.a)([lc(),dc(),pc(),Object(No.k)($o.FETCH_COURSE_PROGRESS_START,hc)])};const Ec=Object(E.createAsyncAction)("[course-variants] fetch start","[course-variants] fetch success","[course-variants] fetch fail")(),fc=Object(E.createAction)("[course-variants] clear"),gc=Object(E.createStandardAction)("[course-variants] update lesson")(),yc=Object(E.createStandardAction)("[course-variants] change sort")();function*Sc(e){const{courseId:t,groupId:s}=e.payload;try{const e=Po.apiCourseVariants.build({courseId:t},{groupId:s}),a=yield Object(No.b)(Do.a,e);yield Object(No.f)(Ec.success(a))}catch(e){yield Object(No.f)(Ec.failure(e))}}var Oc=function*(){yield Object(No.a)([Object(No.k)(Object(E.getType)(Ec.request),Sc)])};let vc;function Nc(e){return{type:vc.FETCH_SOLUTION_FILTERS_START,payload:e}}function Ic(){return{type:vc.CLEAR_FILTERS}}function*kc(e){const t=e.payload,s=Po.apiTeacherSolutionFilters.build({},t);try{const e=yield Object(No.b)(Do.a,s);yield Object(No.f)((a=e,{type:vc.FETCH_FILTERS_SUCCESS,payload:a}))}catch(e){yield Object(No.f)(function(e){return{type:vc.FETCH_FILTERS_FAIL,payload:e}}(e))}var a}!function(e){e.FETCH_SOLUTION_FILTERS_START="[filters] solution filters fetch start",e.FETCH_FILTERS_SUCCESS="[filters] fetch success",e.FETCH_FILTERS_FAIL="[filters] fetch fail",e.CLEAR_FILTERS="[filters] clear"}(vc||(vc={}));var Tc=function*(){yield Object(No.a)([Object(No.k)(vc.FETCH_SOLUTION_FILTERS_START,kc)])};const Cc=Object(E.createAsyncAction)("[lesson-progress-preview] fetch start","[lesson-progress-preview] fetch success","[lesson-progress-preview] fetch fail")(),jc=Object(E.createAction)("[lesson-progress-preview] clear");function*wc(e){const{lessonId:t,groupId:s}=e.payload;try{const e=Po.apiTeacherLessonProgressPreview.build({lessonId:t},{groupId:s}),a=yield Object(No.b)(Do.a,e);yield Object(No.f)(Cc.success(a))}catch(e){yield Object(No.f)(Cc.failure(e))}}var Ac=function*(){yield Object(No.a)([Object(No.k)(Object(E.getType)(Cc.request),wc)])};const _c=Object(E.createAsyncAction)("[lesson-progress] fetch start","[lesson-progress] fetch success","[lesson-progress] fetch fail")(),Mc=Object(E.createAction)("[lesson-progress] clear"),xc=Object(E.createAction)("[lesson-progress] change sort options",e=>t=>e(t)),Dc=Object(E.createAction)("[lesson-progress] change attendance status",e=>t=>e(t)),Pc=Object(E.createAction)("[lesson-progress] update reference attendance",e=>t=>e(t)),Rc=Object(E.createAction)("[lesson-progress] restore reference attendance",e=>t=>e(t));function*Lc(e){const{lessonId:t,groupId:s}=e.payload;try{const e=Po.apiTeacherLessonProgress.build({lessonId:t},{groupId:s}),a=yield Object(No.b)(Do.a,e);yield Object(No.f)(_c.success(a))}catch(e){yield Object(No.f)(_c.failure(e))}}function*Fc(e){const{eventId:t,studentId:s,status:a}=e.payload;yield Object(No.b)(ic.c,500);const n=oc.changeAttendance.build({eventId:t},{studentId:s}),r=JSON.stringify({status:a});try{yield Object(No.b)(Do.a,n,{body:r,method:"PATCH"}),yield Object(No.f)(Pc({studentId:s,eventId:t})),yield Object(No.f)(Object(sn.a)({timeout:3e3,type:an.b.SUCCESS,i18n:{id:"change-attendance-success-message",keyset:"attendance"}}))}catch(e){yield Object(No.f)(Rc({studentId:s,eventId:t})),yield Object(No.f)(Object(sn.a)({type:an.b.ERROR,i18n:Object(O.a)(e)}))}}var zc=function*(){yield Object(No.a)([Object(No.k)(Object(E.getType)(_c.request),Lc),Object(No.e)(function*(){const e={};for(;;){const t=yield Object(No.i)(Object(E.getType)(Dc));e[t.payload.studentId]||(e[t.payload.studentId]=Object(ic.a)(),yield Object(No.k)(e[t.payload.studentId],Fc)),yield Object(No.f)(e[t.payload.studentId],t)}})])};let Uc;function Hc(e){return{type:Uc.FETCH_STUDENT_LESSON_DETAILS_START,payload:e}}function Vc(e){return{type:Uc.FETCH_TEACHER_LESSON_DETAILS_START,payload:e}}function Gc(){return{type:Uc.CLEAR_LESSON_DETAILS}}function Bc(e){return{type:Uc.CHANGE_LESSON_VISIBILITY_START,payload:e}}function*Wc(e){const t={[Uc.FETCH_STUDENT_LESSON_DETAILS_START]:Po.apiStudentLessonDetails,[Uc.FETCH_TEACHER_LESSON_DETAILS_START]:Po.apiTeacherLessonDetails},{courseId:s,groupId:a,lessonId:n}=e.payload,r=t[e.type].build({lessonId:n},{courseId:s,groupId:a});try{const e=yield Object(No.b)(Do.a,r);yield Object(No.f)((i=e,{type:Uc.FETCH_LESSON_DETAILS_SUCCESS,payload:i}))}catch(e){yield Object(No.f)(function(e){return{type:Uc.FETCH_LESSON_DETAILS_FAIL,payload:e}}(e))}var i}function*Kc(e){const{group:t,lesson:s}=e.payload,a=!s.isHidden,n=Po.apiChangeLessonVisibility.build({lessonId:s.id},{groupId:t.id});try{yield Object(No.b)(Do.a,n,{body:JSON.stringify({isHidden:a}),method:"PATCH"}),yield Object(No.f)((r={isHidden:a},{type:Uc.CHANGE_LESSON_VISIBILITY_SUCCESS,payload:r})),yield Object(No.f)(Object(sn.a)({i18n:{id:a?"hide-lesson-success":"show-lesson-success",keyset:"lessons",params:{lesson:s.title,group:t.name}},type:an.b.SUCCESS}))}catch(e){yield Object(No.f)(function(e){return{type:Uc.CHANGE_LESSON_VISIBILITY_FAIL,payload:e}}(e)),yield Object(No.f)(Object(sn.a)({i18n:{id:a?"hide-lesson-fail":"show-lesson-fail",keyset:"lessons",params:{lesson:s.title,group:t.name,error:"Error ".concat(e.statusCode||"")}},type:an.b.ERROR}))}var r}function*qc(e){const t=yield Object(No.e)(Wc,e);yield Object(No.i)(Uc.CLEAR_LESSON_DETAILS),yield Object(No.c)(t)}!function(e){e.FETCH_STUDENT_LESSON_DETAILS_START="[lessons] fetch student lesson details start",e.FETCH_TEACHER_LESSON_DETAILS_START="[lessons] fetch teacher lesson details start",e.FETCH_LESSON_DETAILS_SUCCESS="[lessons] fetch lesson details success",e.FETCH_LESSON_DETAILS_FAIL="[lessons] fetch lesson details fail",e.CLEAR_LESSON_DETAILS="[lessons] clear lesson details",e.CHANGE_LESSON_VISIBILITY_START="[lessons] change lesson visibility start",e.CHANGE_LESSON_VISIBILITY_SUCCESS="[lessons] change lesson visibility success",e.CHANGE_LESSON_VISIBILITY_FAIL="[lessons] change lesson visibility fail",e.PATCH_DETAILS="[lessons] patch details"}(Uc||(Uc={}));var Yc=function*(){yield Object(No.a)([Object(No.k)(Uc.FETCH_STUDENT_LESSON_DETAILS_START,qc),Object(No.k)(Uc.FETCH_TEACHER_LESSON_DETAILS_START,qc),Object(No.k)(Uc.CHANGE_LESSON_VISIBILITY_START,Kc)])};const Jc=Object(E.createAsyncAction)("[lessons] fetch student lessons start","[lessons] fetch student lessons success","[lessons] fetch student lessons fail")(),Zc=Object(E.createAsyncAction)("[lessons] fetch teacher lessons start","[lessons] fetch teacher lessons success","[lessons] fetch teacher lessons fail")(),Xc=Object(E.createStandardAction)("[lessons] clear")(),Qc=Object(E.createStandardAction)("[lessons] set list filter")();let $c,el,tl;!function(e){e.InProgress="in-progress",e.Finished="finished"}($c||($c={})),function(e){e[e.ShowAll=0]="ShowAll",e[e.ShowPublished=1]="ShowPublished",e[e.ShowUnpublished=2]="ShowUnpublished"}(el||(el={})),function(e){e.Normal="normal",e.Test="test"}(tl||(tl={}));const sl=e=>e.lessons.list.list,al=e=>e.lessons.list.listFilter,nl=Object(ne.a)([e=>e.lessons.list.list,al],(e,t)=>{switch(t){default:case el.ShowAll:return e;case el.ShowPublished:return e.filter(e=>!e.isHidden);case el.ShowUnpublished:return e.filter(e=>e.isHidden)}}),rl=e=>e.lessons.list.fetchError,il=e=>e.lessons.list.fetchStatus;let ol,cl,ll;!function(e){e.SolutionsTable="solutions:solutions-table",e.LessonFilterPreferences="lessons:filter",e.SolutionDrafts="solutions:drafts",e.WizardViewedHints="wizard:hints"}(ol||(ol={})),function(e){e.Solutions="solutions:solutions-table"}(cl||(cl={})),function(e){e.Student="student",e.Solution="solution",e.Task="task",e.Tag="tag",e.Lesson="lesson",e.Variant="variant",e.Status="status",e.UpdatedAt="updatedAt"}(ll||(ll={}));const ul={[ol.SolutionsTable]:{pageSize:20,columnsSettings:{[ll.Student]:{hidden:!1,alwaysVisible:!0},[ll.Solution]:{hidden:!1,alwaysVisible:!0},[ll.Task]:{hidden:!1,alwaysVisible:!1},[ll.Tag]:{hidden:!1,alwaysVisible:!1},[ll.Lesson]:{hidden:!1,alwaysVisible:!1},[ll.Variant]:{hidden:!0,alwaysVisible:!1},[ll.Status]:{hidden:!1,alwaysVisible:!0},[ll.UpdatedAt]:{hidden:!1,alwaysVisible:!0}}},[ol.LessonFilterPreferences]:{},[ol.SolutionDrafts]:{}},dl={1:{forward:e=>{e.set(ol.LessonFilterPreferences,ul[ol.LessonFilterPreferences])},backward:e=>{e.remove(ol.LessonFilterPreferences)}},2:{forward:e=>{e.set(ol.SolutionDrafts,ul[ol.SolutionDrafts])},backward:e=>{e.remove(ol.SolutionDrafts)}}};class ml extends Error{constructor(e,t){super(),this.code=void 0,this.webStorage=void 0,this.code=e,this.webStorage=t,Object.setPrototypeOf(this,new.target.prototype)}}function pl(e,t){return Array.from({length:t-e},(t,s)=>s+e)}class hl{constructor(){this.data={}}get length(){return Object.keys(this.data).length}setItem(e,t){this.data[e]=t}getItem(e){return e in this.data?this.data[e]:null}removeItem(e){delete this.data[e]}clear(){this.data={}}key(e){const t=Object.keys(this.data);return e in t?t[e]:null}}let bl;!function(e){e[e.Local=0]="Local",e[e.Session=1]="Session",e[e.Fallback=2]="Fallback"}(bl||(bl={}));const El=new class{get isInitialized(){return null!==this.get(this.versionKey)}constructor(e){let{version:t,versionKey:s,type:a,defaultState:n}=e;if(this.version=void 0,this.type=void 0,this.defaultState=void 0,this.storage=void 0,this.versionKey=void 0,this.version=t,this.defaultState=n,this.versionKey=s,a===bl.Fallback||!function(e){try{const t=e===bl.Local?localStorage:sessionStorage;return t.setItem("test","test"),t.removeItem("test"),!0}catch(e){return!1}}(a))return this.type=bl.Fallback,void(this.storage=new hl);this.type=a,this.storage=a===bl.Local?localStorage:sessionStorage}set(e,t){this.storage.setItem(e,JSON.stringify(t))}get(e){const t=this.storage.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(t){const s=this.defaultState[e];return this.set(e,s),s}}remove(e){this.storage.removeItem(e)}clear(){this.storage.clear()}applyState(e,t){this.clear();for(const e of Object.keys(t))this.set(e,t[e]);this.set(this.versionKey,e)}applyDefault(){this.applyState(this.version,this.defaultState)}migrate(e){const t=this.get(this.versionKey);if(null===t)throw new ml("storage-uninitialized",this);t!==this.version&&(t<this.version?this.migrateForward(e,t):this.migrateBackward(e,t),this.set(this.versionKey,this.version))}migrateForward(e,t){const s=pl(t+1,this.version+1);if(s.some(t=>!e[t]))throw new ml("some-migrations-missing",this);s.forEach(t=>{e[t].forward(this)})}migrateBackward(e,t){const s=pl(this.version+1,t+1).reverse();if(s.some(t=>!e[t]))throw new ml("some-migrations-missing",this);s.forEach(t=>{e[t].backward(this)})}}({version:2,versionKey:"db:version",type:bl.Local,defaultState:ul});if(El.isInitialized)try{El.migrate(dl)}catch(e){El.applyDefault(),l.captureException(e)}else El.applyDefault();function*fl(e){try{const t=Po.apiStudentLessons.build({},e.payload),s=yield Object(No.b)(Do.a,t);yield Object(No.f)(Jc.success(s))}catch(e){yield Object(No.f)(Jc.failure(e))}}function*gl(e){try{const t=Po.apiTeacherLessons.build({},e.payload),s=yield Object(No.b)(Do.a,t);yield Object(No.f)(Zc.success(s))}catch(e){yield Object(No.f)(Zc.failure(e))}}function*yl(e){const{groupId:t}=e.payload,s=yield Object(No.h)(al),a=function(e){return(El.get(ol.LessonFilterPreferences)||{})[e]}(t);void 0!==a&&s!==a&&(yield Object(No.f)(Qc({groupId:t,filter:a})))}function Sl(e){const t=El.get(ol.LessonFilterPreferences)||{},{groupId:s,filter:a}=e.payload;El.set(ol.LessonFilterPreferences,Object.assign({},t,{[s]:a}))}var Ol=function*(){yield Object(No.a)([Object(No.k)(Object(E.getType)(Jc.request),fl),Object(No.k)(Object(E.getType)(Zc.request),gl),Object(No.k)(Object(E.getType)(Zc.request),yl),Object(No.k)(Object(E.getType)(Qc),Sl)])};function vl(e){let{lesson:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["lesson"]);const a=Ce.fromISO(s.serverTime);return{deadline:Ce.fromISO(s.deadline),delta:a.diffNow(),lesson:t}}const Nl=e=>Boolean(e.id);let Il,kl;!function(e){e.onboardingTest="onboarding-test",e.controlTest="control-test",e.test1="test1",e.test2="test2",e.test3="test3"}(Il||(Il={})),function(e){e.correctAnswer="correct-answer"}(kl||(kl={}));var Tl=s(270),Cl=s.n(Tl);const jl={i18n:{id:"profile-saved",keyset:"profile"},type:an.b.SUCCESS,timeout:5e3},wl={i18n:{id:"profile-save-error",keyset:"profile"},type:an.b.ERROR,timeout:1e4},Al={i18n:{id:"save-success-message",keyset:"common"},type:an.b.SUCCESS},_l={i18n:{id:"save-error-message",keyset:"common"},type:an.b.ERROR},Ml={i18n:{id:"400_file_is_empty",keyset:"api-errors"},type:an.b.ERROR},xl=e=>({i18n:{id:"file-SIZE-exceeded",keyset:"errors",params:{size:Cl()(e,{locale:!0})}},type:an.b.ERROR}),Dl={i18n:{id:"openProblemError",keyset:"problems"},type:an.b.ERROR,timeout:1e4},Pl={i18n:{id:"sendSubmissionError",keyset:"problems"},type:an.b.ERROR,timeout:1e4};var Rl=s(100),Ll=s(119),Fl=s.n(Ll);function zl(e){return"object"==typeof e&&null!==e}const Ul={inline:function(e,t){if(!zl(t)||!zl(e))return t===e;const s=Object.keys(e),a=Object.keys(t);return Fl()(s,a)&&s.every(s=>{const a=!1===e[s]?null:e[s],n=!1===t[s]?null:t[s];return Fl()(a,n)})},choice:function(e,t){return Fl()(e&&e.slice().sort(),t&&t.slice().sort())},chooseimage:function(e,t){return Boolean(e&&t&&Fl()(new Set(e),new Set(t)))},macaroni:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===t.length&&e.every(e=>t.find(function(e,t){return e[0]===t[0]&&e[1]===t[1]}.bind(null,e)))}};function Hl(e){return e.lessonElements.studentTasksUnsolved}function Vl(e){return e.lessonElements.studentTasksUnsolvedFetchStatus}function Gl(e){return e.lessonElements.studentTasksUnsolvedFetchError}function Bl(e){return e.lessonElements.taskDetails}function Wl(e){const t=Bl(e);return t&&t.lesson.type===tl.Test&&t.lesson.isTestFinished}function Kl(e){const t=Bl(e);return t?t.description:null}function ql(e){return e.lessonElements.taskDetailsFetchError}function Yl(e){return e.lessonElements.taskDetailsFetchStatus}function Jl(e){return e.lessonElements.lessonElementGroups}function Zl(e){return e.lessonElements.taskGroupsFetchError}function Xl(e){return e.lessonElements.taskGroupsFetchStatus}const Ql=Object(ne.a)(Jl,e=>e.reduce((e,t)=>e.concat(t.tasks||[]),[])),$l=Object(ne.a)(Ql,e=>Object(Rl.a)(t=>{const s=e.findIndex(e=>e.id===t);return-1===s?null:{previousTask:s>0?e[s-1]:null,currentTask:e[s],nextTask:s<e.length?e[s+1]:null}})),eu=(e,t)=>t.problemLinkId,tu=Object(ne.a)(Jl,e=>e.reduce((e,t)=>(t.problems&&t.problems.forEach(t=>{e[t.id]=t}),e),{})),su=Object(ne.a)([tu,eu],(e,t)=>e[t]),au=Object(ne.a)([Jl,eu],(e,t)=>e.find(e=>!!e.problems&&e.problems.some(e=>e.id===t),{})),nu=Object(ne.a)([au,eu],(e,t)=>{if(!e||!e.problems)return[0,0];const s=e.problems.findIndex(e=>e.id===t);return[void 0===s?0:s+1,e.problems.length]}),ru=e=>"solution"in e&&!e.solution.isClosed,iu=Object(ne.a)([au,eu],(e,t)=>{if(!e||!e.problems)return{previousProblem:null,currentProblem:null,nextProblem:null};const s=e.problems.findIndex(e=>e.id===t);return{previousProblem:s>0?e.problems[s-1]:null,currentProblem:e.problems[s],nextProblem:s<e.problems.length?e.problems[s+1]:null}}),ou=Object(ne.a)([au,eu],(e,t)=>{if(!e||!e.problems)return;const s=e.problems.findIndex(e=>e.id===t),a=e.problems.find((e,t)=>t>s&&ru(e));if(a)return a;const n=e.problems.find(ru);return n||(s===e.problems.length-1?e.problems[0]:e.problems[s+1])}),cu=e=>e.lessonElements.problemDetails,lu=Object(ne.a)(cu,e=>{const t={};return e?0===e.submissions.length?t:e.submissions[e.submissions.length-1].submission:t}),uu=Object(ne.a)(cu,e=>e?e.solution:null),du=(Object(ne.a)(cu,e=>e?e.solution.status.type:Ze.Draft),Object(ne.a)(cu,e=>e?e.submissions.length:0)),mu=Object(ne.a)(cu,e=>{if(e)return e.problem}),pu=Object(ne.a)(cu,e=>{if(e)return e.solution.id}),hu=Object(ne.a)(su,e=>e?e.problem.markup.layout.reduce((e,t)=>{if("marker"===t.kind){const{id:s,type:a}=t.content;e[s]=Ul[a]}return e},{}):{}),bu=Object(ne.a)(hu,e=>(function(t,s){return Object.entries(t).every(t=>{let[a,n]=t;return e[a](n,s[a])})})),Eu=Object(ne.a)(cu,e=>{if(!e)return!1;const t=e.solution.isClosed,s="test"===e.lesson.type,a=!1!==e.lesson.evaluated;return s&&t&&!a}),fu=e=>e.lessonElements.sendingSubmissionStatus!==Gt.a.SUCCESS;function*gu(e){const{courseId:t,limit:s}=e.payload;try{const e=Po.apiStudentTasks.build({},{courseId:t,limit:s}),n=yield Object(No.b)(Do.a,e);yield Object(No.f)((a=n,{type:_a.FETCH_STUDENT_TASKS_SUCCESS,payload:a}))}catch(e){yield Object(No.f)(function(e){return{type:_a.FETCH_STUDENT_TASKS_FAIL,payload:e}}(e))}var a}function*yu(e){const{courseId:t,groupId:s,limit:a}=e.payload;try{const e=Po.apiStudentTasksUnsolved.build({},{courseId:t,groupId:s,limit:a}),r=yield Object(No.b)(Do.a,e);yield Object(No.f)((n=r,{type:_a.FETCH_STUDENT_TASKS_UNSOLVED_SUCCESS,payload:n}))}catch(e){yield Object(No.f)(function(e){return{type:_a.FETCH_STUDENT_TASKS_UNSOLVED_FAIL,payload:e}}(e))}var n}function*Su(e){const{taskId:t,groupId:s}=e.payload,a={[_a.FETCH_STUDENT_DETAILS_START]:Po.apiDetailedStudentTask,[_a.FETCH_TEACHER_DETAILS_START]:Po.apiDetailedTeacherTask};try{const r=a[e.type].build({taskId:t},{groupId:s}),i=yield Object(No.b)(Do.a,r);yield Object(No.f)((n=i,{type:_a.FETCH_DETAILS_SUCCESS,payload:n}))}catch(e){yield Object(No.f)(function(e){return{type:_a.FETCH_DETAILS_FAIL,payload:e}}(e))}var n}function*Ou(e){try{const t=Po.apiStudentLessonTasks.build({},e.payload),s=yield Object(No.b)(Do.a,t);return yield Object(No.f)(Ba(s)),s}catch(e){return yield Object(No.f)(Wa(e)),null}}function*vu(e){try{const t=Po.apiTeacherLessonTasks.build({},e.payload),s=yield Object(No.b)(Do.a,t);yield Object(No.f)(Ba(s))}catch(e){yield Object(No.f)(Wa(e))}}function*Nu(e){const t=yield Object(No.e)(vu,e);yield Object(No.i)(_a.CLEAR_PROBLEM_RUN),yield Object(No.c)(t)}function*Iu(e){const t=yield Object(No.e)(Ou,e);yield Object(No.i)(_a.CLEAR_PROBLEM_RUN),yield Object(No.c)(t)}function*ku(e){try{const{problemLinkId:t,lessonId:s,courseId:a}=e;let n,r;if(0===(yield Object(No.h)(Jl)).length&&(yield Ou({payload:{lessonId:s,courseId:a}})),!(r=(n=yield Object(No.h)(tu))[t]))return;if(!Nl(r.solution)){const e=Po.apiStudentProblemSolution.build({},{problemLinkId:t.toString()}),s=yield Object(No.b)(Do.a,e,{method:"POST"});Nl(s)&&(yield Object(No.f)(function(e,t){return{type:_a.SET_SOLUTION_ID,solutionId:e,problemLinkId:t}}(s.id,r.id)))}if((r=(n=yield Object(No.h)(tu))[t])&&r.solution.id){const{solution:{id:e}}=r;yield Cu(e)}}catch(e){yield Object(No.f)(Object(sn.a)(Dl))}}function*Tu(){yield Cu(yield Object(No.h)(pu))}function*Cu(e){if(null==e)return;const t=Po.apiProblemDetails.build({},{solutionId:e.toString()}),s=yield Object(No.b)(Do.a,t);yield Object(No.f)(qa(s))}function*ju(e){try{const{solutionId:t,userAnswer:s,lessonId:a,courseId:n,onSuccess:r}=e,i=Po.apiStudentProblemSubmission.build({},{solutionId:t.toString()}),o=yield Object(No.b)(Do.a,i,{method:"POST",body:JSON.stringify(s)});yield Object(No.f)(qa(o)),yield Object(No.f)({type:_a.POST_PROBLEM_SUBMISSION_SUCCESS}),yield Object(No.b)(Ou,{payload:{lessonId:Number(a),courseId:Number(n)}}),r&&r()}catch(e){yield Object(No.f)(Object(sn.a)(Pl))}}var wu=function*(){yield Object(No.a)([Object(No.k)(_a.FETCH_STUDENT_TASKS_START,gu),Object(No.k)(_a.FETCH_STUDENT_TASKS_UNSOLVED_START,yu),Object(No.k)(_a.FETCH_STUDENT_DETAILS_START,Su),Object(No.k)(_a.FETCH_TEACHER_DETAILS_START,Su),Object(No.k)(_a.FETCH_STUDENT_TASK_GROUPS_START,Iu),Object(No.k)(_a.FETCH_TEACHER_TASK_GROUPS_START,Nu),Object(No.k)(_a.OPEN_PROBLEM,ku),Object(No.k)(_a.POST_PROBLEM_SUBMISSION,ju),Object(No.k)(_a.UPDATE_PROBLEM_DETAILS,Tu)])};function*Au(e){try{const{courseId:s,lessonId:a,groupId:n}=e.payload,r=Po.apiStartTest.build({lessonId:a},{courseId:s,groupId:n}),i=vl(yield Object(No.b)(Do.a,r,{method:"POST"}));yield Object(No.f)(ja.success()),yield Object(No.f)((t={isTestStarted:!0},{type:Uc.PATCH_DETAILS,payload:t})),yield Object(No.f)(xa(i)),yield Object(No.f)(Va({courseId:s,lessonId:a}))}catch(e){yield Object(No.f)(ja.failure(e)),yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}var t}function*_u(e){try{const{lessonId:t,groupId:s}=e.payload,a=Po.apiFinishTest.build({lessonId:t},{groupId:s});yield Object(No.b)(Do.a,a,{method:"POST"}),yield Cu(yield Object(No.h)(pu)),yield Object(No.f)(wa.success()),yield Object(No.f)(Da()),yield Object(No.f)(za())}catch(e){console.error(e),yield Object(No.f)(wa.failure(e)),yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}}var Mu=function*(){yield Object(No.a)([Object(No.k)(Object(E.getType)(ja.request),Au),Object(No.k)(Object(E.getType)(wa.request),_u)])};function*xu(e){try{const t=Po.apiTestTimer.build({},e.payload),s=vl(yield Object(No.b)(Do.a,t));yield Object(No.f)(xa(s))}catch(e){const t=e;if(t.statusCode===wn.d)return void xa(null);t,Aa.FETCH_TIMER_FAIL,yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(t),type:an.b.ERROR}))}}var Du=function*(){yield Object(No.k)(Aa.FETCH_TIMER_START,xu)};function*Pu(){yield Object(No.a)([Yc(),Ol(),Mu(),Du()])}let Ru;function Lu(e){return{type:Ru.FETCH_MATERIALS_START,payload:e}}function Fu(){return{type:Ru.CLEAR_MATERIALS}}function zu(e){return{type:Ru.FETCH_TEACHER_DETAILS_START,payload:e}}function Uu(e){return{type:Ru.FETCH_STUDENT_DETAILS_START,payload:e}}function Hu(){return{type:Ru.CLEAR_DETAILS}}function*Vu(e){const{lessonId:t}=e.payload,s=Po.apiMaterialList.build({},{lessonId:t});try{const e=yield Object(No.b)(Do.a,s);yield Object(No.f)((a=e,{type:Ru.FETCH_MATERIALS_SUCCESS,payload:a}))}catch(e){yield Object(No.f)(function(e){return{type:Ru.FETCH_MATERIALS_FAIL,payload:e}}(e))}var a}function*Gu(e){const t={[Ru.FETCH_TEACHER_DETAILS_START]:Po.apiTeacherDetailedMaterial,[Ru.FETCH_STUDENT_DETAILS_START]:Po.apiStudentDetailedMaterial},{materialId:s,lessonId:a,groupId:n}=e.payload,r=t[e.type].build({materialId:s},{lessonId:a,groupId:n});try{const e=yield Object(No.b)(Do.a,r);yield Object(No.f)((i=e,{type:Ru.FETCH_DETAILS_SUCCESS,payload:i}))}catch(e){yield Object(No.f)(function(e){return{type:Ru.FETCH_DETAILS_FAIL,payload:e}}(e))}var i}function*Bu(e){const t=yield Object(No.e)(Vu,e);yield Object(No.i)(Ru.CLEAR_MATERIALS),yield Object(No.c)(t)}!function(e){e.FETCH_MATERIALS_START="[materials] fetch materials start",e.FETCH_MATERIALS_SUCCESS="[materials] fetch materials success",e.FETCH_MATERIALS_FAIL="[materials] fetch materials fail",e.CLEAR_MATERIALS="[materials] clear materials",e.FETCH_TEACHER_DETAILS_START="[materials] fetch teacher details start",e.FETCH_STUDENT_DETAILS_START="[materials] fetch student details start",e.FETCH_DETAILS_SUCCESS="[materials] fetch details success",e.FETCH_DETAILS_FAIL="[materials] fetch details fail",e.CLEAR_DETAILS="[materials] clear details"}(Ru||(Ru={}));var Wu=function*(){yield Object(No.a)([Object(No.k)(Ru.FETCH_TEACHER_DETAILS_START,Gu),Object(No.k)(Ru.FETCH_STUDENT_DETAILS_START,Gu),Object(No.k)(Ru.FETCH_MATERIALS_START,Bu)])};const Ku={apiInfo:new C.a("/api/notifications/info"),apiRead:new C.a("/api/notifications/read"),apiList:new C.a("/api/notifications"),apiChange:new C.a("/api/notifications/:notificationId")},qu=6e4,Yu=20;function*Ju(){const e=yield Object(No.h)(Lt),t={isRead:!1,limit:Yu,position:e},s=Ku.apiList.build({},t);try{const e=yield Object(No.b)(Do.a,s);yield Object(No.f)(yt(e))}catch(e){yield Object(No.f)((a=e,{type:pt.FETCH_NOTIFICATIONS_FAIL,payload:a}))}var a}function*Zu(){for(;;)yield Object(No.i)(pt.FETCH_NOTIFICATIONS_START),yield Object(No.g)({fetchTask:Object(No.b)(Ju),hideAll:Object(No.i)(pt.HIDE_ALL_NOTIFICATIONS)})}function*Xu(e,t){const s=yield Object(No.h)(Ut);return!(!e||e===t||null===s)&&!(yield Object(No.h)(Ft)).includes(e)}function*Qu(e){const t=Ku.apiList.build({},{isRead:!1,isReversed:!0,position:e});try{const e=yield Object(No.b)(Do.a,t);yield Object(No.f)(yt(Object.assign({},e,{isNewBatch:!0})))}catch(e){}}function*$u(e){const t=e.payload,s=Ku.apiChange.build({notificationId:t}),a=JSON.stringify({isRead:!0});let n;try{n=yield Object(No.h)(zt),yield Object(No.f)(ft(n-1)),yield Object(No.f)(vt(!1)),yield Object(No.b)(Do.a,s,{body:a,method:"PATCH"}),yield Object(No.f)((r=t,{type:pt.DELETE_NOTIFICATION,payload:r}))}catch(e){yield Object(No.f)(function(e){return{type:pt.UNHIDE_NOTIFICATION,payload:e}}(t)),(yield Object(No.h)(Vt))||(n=yield Object(No.h)(zt),yield Object(No.f)(ft(n+1)))}var r}function*ed(){const e=yield Object(No.h)(zt),t=Ku.apiRead.build();try{yield Object(No.f)(ft(0)),yield Object(No.f)(vt(!1)),yield Object(No.b)(Do.a,t,{method:"PATCH"}),yield Object(No.f)({type:pt.DELETE_ALL_NOTIFICATIONS})}catch(t){yield Object(No.f)({type:pt.UNHIDE_ALL_NOTIFICATIONS}),(yield Object(No.h)(Vt))||(yield Object(No.f)(ft(e)))}}function*td(){const e=Ku.apiInfo.build();try{const{count:t,newestId:s}=yield Object(No.b)(Do.a,e),a=yield Object(No.h)(Rt);if(yield Object(No.b)(Xu,s,a))return void(yield Object(No.b)(Qu,a));t!==(yield Object(No.h)(zt))&&(yield Object(No.f)(ft(t))),yield Object(No.f)(vt(!0))}catch(e){e instanceof k.a&&e.statusCode===wn.b&&(yield Object(No.f)(Et()))}finally{(yield Object(No.d)())&&(yield Object(No.b)(ic.c,3e5),yield Object(No.f)(bt()))}}function*sd(){for(;;)yield Object(No.b)(ic.c,qu),yield Object(No.b)(td)}function*ad(){for(;;){yield Object(No.i)(pt.START_NOTIFICATION_POLL);const e=yield Object(No.e)(sd);yield Object(No.i)(pt.STOP_NOTIFICATION_POLL),yield Object(No.c)(e)}}var nd=function*(){yield Object(No.a)([ad(),Zu(),Object(No.j)(pt.HIDE_NOTIFICATION,$u),Object(No.k)(pt.HIDE_ALL_NOTIFICATIONS,ed)])};const rd=5,id=15e3;function*od(e){const t=fn(yield Object(No.h)()),s=t.length-rd;if(s>0){const e=t.slice(0,s);for(const t of e)yield Object(No.f)(Object(sn.b)(t.id))}const{id:a,timeout:n}=e.payload,{shouldBeRemoved:r}=yield Object(No.g)({alreadyRemoved:Object(No.i)(e=>!!function(e){return e.type===an.a.REMOVE_NOTIFICATION}(e)&&e.payload.id===a),shouldBeRemoved:Object(No.b)(ic.c,n||id)});r&&(yield Object(No.f)(Object(sn.b)(a)))}var cd=function*(){yield Object(No.a)([Object(No.j)(an.a.ADD_NOTIFICATION,od)])};let ld;function ud(e){return{type:ld.GENERATE_SCHEDULE,payload:e}}function dd(e){return{type:ld.UPDATE_STUDY_PLAN,payload:e}}function md(e){return{type:ld.SET_GENERATED_SCHEDULE,payload:e}}function pd(e){return{type:ld.SET_GENERATE_ERROR,payload:e}}function hd(){return{type:ld.RESET_SCHEDULE_GENERATOR}}function bd(e){return{type:ld.LOAD_PAGE_DATA,payload:e}}function Ed(e){return{type:ld.CHANGE_STUDY_PERIOD,payload:e}}function fd(e,t){return{type:ld.SET_SCHEDULE,payload:e,meta:t}}function gd(){return{type:ld.RESET_SCHEDULE}}function yd(e,t){return{type:ld.ADD_SKIP_REASON,payload:{id:e,reason:t}}}function Sd(e,t){return{type:ld.ASSIGN_EVENT,payload:{electiveId:e,reserveId:t}}}function Od(e){return{type:ld.SKIP_EVENT,payload:{id:e}}}function vd(e,t){return{type:ld.SWAP_EVENTS,payload:{fromId:e,toId:t}}}function Nd(){return{type:ld.CANCEL_CHANGES}}function Id(e){return{type:ld.SAVE_SCHEDULE,payload:e}}function kd(e){return e.schedule.actions}function Td(e){return e.schedule.editedEvents.reduce((t,s,a)=>{const n=e.schedule.initialEvents[a],r=s.id!==n.id,i=s.title!==n.title;return r||i?[...t,s.id]:t},[])}function Cd(e){const{currentStudyPeriod:t,courseDetails:s}=e.schedule;return s&&t&&s.studyPeriods.find(e=>e.id===t)||null}function jd(e){return e.schedule.courseDetails}function wd(e){return e.schedule.editedEvents}function Ad(e){return e.schedule.currentOrPassedSchedulePlan}function _d(e){return e.schedule.futureSchedulePlan}function Md(e){return e.schedule.pageLoadStatus}function xd(e){return e.schedule.pageLoadError}function Dd(e){return e.schedule.scheduleLoadStatus}function Pd(e){return e.schedule.scheduleLoadError}function Rd(e){return e.schedule.saveStatus}function Ld(e){return e.schedule.generateStatus}function Fd(e){return e.schedule.generateError}function zd(e){return e.schedule.unassignedEvents}function Ud(e){const{currentOrPassedSchedulePlan:t,futureSchedulePlan:s}=e.schedule;return!(null!==t&&0!==Object.keys(t).length||null!==s&&0!==Object.keys(s).length)}function Hd(e){return e.schedule.initialEvents.length>0}function Vd(e){return Td(e).length>0}function Gd(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}function*Bd(){yield Object(No.f)(Object(sn.a)({i18n:{id:"schedule-changed",keyset:"schedule"},timeout:3e3,type:an.b.SUCCESS}))}function*Wd(e){try{const s=oc.scheduleGet.build({},e.payload),a=yield Object(No.b)(Do.a,s);yield Object(No.f)((t=a,{type:ld.LOAD_PAGE_DATA_SUCCESS,payload:t}))}catch(e){yield Object(No.f)(function(e){return{type:ld.LOAD_PAGE_DATA_FAILURE,payload:e}}(e))}var t}function*Kd(e){try{const s=oc.periodScheduleGet.build({},e.payload),a=yield Object(No.b)(Do.a,s);yield Object(No.f)(fd(a,{studyPeriodId:e.payload.studyPeriodId}))}catch(e){yield Object(No.f)((t=e,{type:ld.SET_SCHEDULE_LOAD_ERROR,payload:t}))}var t}function*qd(e){try{const t=e.payload,{plan:s}=t,a=Gd(t,["plan"]),n=JSON.stringify(s),r=oc.scheduleCreate.build({},a),i=yield Object(No.b)(Do.a,r,{body:n,method:"POST"});yield Object(No.f)(md(i)),yield Object(No.f)(Object(sn.a)({i18n:{id:"schedule-generated",keyset:"schedule"},timeout:3e3,type:an.b.SUCCESS}))}catch(e){yield Object(No.f)(pd(e))}}function*Yd(e){try{const t=e.payload,{plan:s}=t,a=Gd(t,["plan"]),n=JSON.stringify(s),r=oc.studyPlanUpdate.build({},a),i=yield Object(No.b)(Do.a,r,{body:n,method:"PATCH"});yield Object(No.f)(md(i)),yield Object(No.f)(Object(sn.a)({i18n:{id:"study-plan-updated",keyset:"schedule"},timeout:3e3,type:an.b.SUCCESS}))}catch(e){yield Object(No.f)(pd(e))}}function*Jd(e){try{const s=oc.scheduleUpdate.build({},e.payload),a=yield Object(No.h)(kd),n=JSON.stringify(a),r=yield Object(No.b)(Do.a,s,{body:n,method:"PATCH"});yield Object(No.f)({type:ld.SET_SAVE_SUCCESS}),yield Object(No.f)(fd(r)),yield Object(No.f)(Object(sn.a)({i18n:{id:"schedule-saved",keyset:"schedule"},timeout:3e3,type:an.b.SUCCESS}))}catch(e){yield Object(No.f)((t=e,{type:ld.SET_SAVE_ERROR,payload:t})),yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}var t}!function(e){e.GENERATE_SCHEDULE="[schedule] generate start",e.UPDATE_STUDY_PLAN="[schedule] update study plan start",e.SET_GENERATE_ERROR="[schedule] set generate error",e.SET_GENERATED_SCHEDULE="[schedule] set generated schedule",e.RESET_SCHEDULE_GENERATOR="[schedule] reset schedule generator",e.LOAD_PAGE_DATA="[schedule] load page start",e.LOAD_PAGE_DATA_SUCCESS="[schedule] load page success",e.LOAD_PAGE_DATA_FAILURE="[schedule] load page failure",e.CHANGE_STUDY_PERIOD="[schedule] change study period",e.SET_SCHEDULE="[schedule] set schedule",e.SET_SCHEDULE_LOAD_ERROR="[schedule] set schedule load error",e.RESET_SCHEDULE="[schedule] reset schedule",e.ADD_SKIP_REASON="[schedule] add event skip reason",e.ASSIGN_EVENT="[schedule] assign event",e.EDIT_ACTION="[schedule] edit event",e.SKIP_EVENT="[schedule] skip event",e.SWAP_EVENTS="[schedule] swap events",e.SAVE_SCHEDULE="[schedule] save start",e.SET_SAVE_ERROR="[schedule] set save error",e.SET_SAVE_SUCCESS="[schedule] set save success",e.CANCEL_CHANGES="[schedule] cancel changes"}(ld||(ld={}));var Zd=function*(){yield Object(No.a)([Object(No.j)([ld.ADD_SKIP_REASON,ld.ASSIGN_EVENT,ld.EDIT_ACTION,ld.SKIP_EVENT,ld.SWAP_EVENTS],Bd),Object(No.k)(ld.LOAD_PAGE_DATA,Wd),Object(No.k)(ld.CHANGE_STUDY_PERIOD,Kd),Object(No.k)(ld.GENERATE_SCHEDULE,qd),Object(No.k)(ld.UPDATE_STUDY_PLAN,Yd),Object(No.k)(ld.SAVE_SCHEDULE,Jd)])};let Xd;function Qd(e){return{type:Xd.FETCH_TEACHER_DETAILS_START,payload:e}}function $d(e){return{type:Xd.FETCH_DETAILS_SUCCESS,payload:e}}function em(e){return{type:Xd.FETCH_DETAILS_FAIL,payload:e}}function tm(e){return{type:Xd.CLEAR_DETAILS,payload:e}}function*sm(e){const{solutionId:t}=e.payload,s=Po.apiStudentSolutionDetails.build({solutionId:t});try{const e=yield Object(No.b)(Do.a,s);yield Object(No.f)($d(e))}catch(e){yield Object(No.f)(em(e))}}function*am(e){const{solutionId:t,groupId:s}=e.payload,a=Po.apiTeacherSolutionDetails.build({solutionId:t},{groupId:s});try{const e=yield Object(No.b)(Do.a,a);yield Object(No.f)($d(e))}catch(e){yield Object(No.f)(em(e))}}!function(e){e.FETCH_STUDENT_DETAILS_START="[solutions] fetch student details start",e.FETCH_TEACHER_DETAILS_START="[solutions] fetch teacher details start",e.FETCH_DETAILS_SUCCESS="[solutions] fetch details success",e.FETCH_DETAILS_FAIL="[solutions] fetch details fail",e.CLEAR_DETAILS="[solutions] clear details",e.PATCH_DETAILS="[solutions] patch details"}(Xd||(Xd={}));var nm=function*(){yield Object(No.a)([Object(No.k)(Xd.FETCH_TEACHER_DETAILS_START,am),Object(No.k)(Xd.FETCH_STUDENT_DETAILS_START,sm)])};function rm(e){return{type:ko.SET_GRADE_START,payload:e}}let im;function om(e){return{type:im.FETCH_TEACHER_SOLUTIONS_START,payload:e}}function cm(){return{type:im.CLEAR_SOLUTIONS}}function*lm(e){const t=e.payload,{solutionId:s,groupId:a}=t,n=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["solutionId","groupId"]);try{const e=Po.apiGradeSolution.build({solutionId:s},{groupId:a}),t=yield Object(No.b)(Do.a,e,{body:JSON.stringify(n),method:"PATCH"}),i=Object.assign({id:s},t);yield Object(No.f)((r=i,{type:Xd.PATCH_DETAILS,payload:r})),yield Object(No.f)(function(e){return{type:im.PATCH_SOLUTION,payload:e}}(i)),yield Object(No.f)({type:ko.SET_GRADE_SUCCESS}),yield Object(No.f)(Co(s))}catch(e){yield Object(No.f)(function(e){return{type:ko.SET_GRADE_FAIL,payload:e}}(e)),yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}var r}!function(e){e.FETCH_TEACHER_SOLUTIONS_START="[solutions] fetch list start",e.FETCH_SOLUTIONS_SUCCESS="[solutions] fetch list success",e.FETCH_SOLUTIONS_FAIL="[solutions] fetch list fail",e.CLEAR_SOLUTIONS="[solutions] clear list",e.PATCH_SOLUTION="[solutions] patch solution in list"}(im||(im={}));var um=function*(){yield Object(No.k)(ko.SET_GRADE_START,lm)};let dm;function mm(e){return{type:dm.FETCH_SOLUTIONS_INFO_START,payload:e}}function pm(){return{type:dm.CLEAR_SOLUTIONS_INFO}}function*hm(e){const{groupId:t,taskId:s}=e.payload,a=Po.apiTeacherTaskSolutions.build({taskId:s},{groupId:t});try{const e=yield Object(No.b)(Do.a,a);yield Object(No.f)((n=e,{type:dm.FETCH_SOLUTIONS_INFO_SUCCESS,payload:n})),yield Object(No.f)(function(e,t){return{type:_a.UPDATE_TEACHER_TASK_STATISTICS,payload:{taskId:e,statusCounter:t}}}(s,e.statusCounter))}catch(e){yield Object(No.f)(function(e){return{type:dm.FETCH_SOLUTIONS_INFO_FAIL,payload:e}}(e))}var n}!function(e){e.FETCH_SOLUTIONS_INFO_START="[solutions] fetch info start",e.FETCH_SOLUTIONS_INFO_SUCCESS="[solutions] fetch info success",e.FETCH_SOLUTIONS_INFO_FAIL="[solutions] fetch info fail",e.CLEAR_SOLUTIONS_INFO="[solutions] clear info"}(dm||(dm={}));var bm=function*(){yield Object(No.k)(dm.FETCH_SOLUTIONS_INFO_START,hm)};let Em;function fm(e){return{type:Em.FETCH_STUDENTS_WITHOUT_SOLUTIONS_START,payload:e}}function gm(){return{type:Em.CLEAR_STUDENTS_WITHOUT_SOLUTIONS}}function*ym(e){const{groupId:t,taskId:s,lessonId:a,courseId:n}=e.payload,r=Po.apiTeacherTaskNoSolutions.build({},{groupId:t,taskId:s,lessonId:a,courseId:n});try{const e=yield Object(No.b)(Do.a,r);yield Object(No.f)((i=e,{type:Em.FETCH_STUDENTS_WITHOUT_SOLUTIONS_SUCCESS,payload:i}))}catch(e){yield Object(No.f)(function(e){return{type:Em.FETCH_STUDENTS_WITHOUT_SOLUTIONS_FAIL,payload:e}}(e))}var i}!function(e){e.FETCH_STUDENTS_WITHOUT_SOLUTIONS_START="[solutions] fetch student without solutions start",e.FETCH_STUDENTS_WITHOUT_SOLUTIONS_SUCCESS="[solutions] fetch student without solutions success",e.FETCH_STUDENTS_WITHOUT_SOLUTIONS_FAIL="[solutions] fetch student without solutions fail",e.CLEAR_STUDENTS_WITHOUT_SOLUTIONS="[solutions] clear student without solutions"}(Em||(Em={}));var Sm=function*(){yield Object(No.k)(Em.FETCH_STUDENTS_WITHOUT_SOLUTIONS_START,ym)};function*Om(e){const t=Po.apiTeacherSolutionList.build({},e.payload);try{const e=yield Object(No.b)(Do.a,t);yield Object(No.f)((s=e,{type:im.FETCH_SOLUTIONS_SUCCESS,payload:s}))}catch(e){yield Object(No.f)(function(e){return{type:im.FETCH_SOLUTIONS_FAIL,payload:e}}(e))}var s}var vm=function*(){yield Object(No.k)(im.FETCH_TEACHER_SOLUTIONS_START,Om)};const Nm=Object(E.createAsyncAction)("[solutions] rejudge solution start","[solutions] rejudge solution success","[solutions] rejudge solution fail")();function*Im(e){const{solutionId:t}=e.payload;try{const e=Po.apiRejudgeSolution.build({solutionId:t});yield Object(No.b)(Do.a,e,{method:"POST"}),yield Object(No.f)(Nm.success()),yield Object(No.f)(Co(t))}catch(e){yield Object(No.f)(Nm.failure(e)),yield Object(No.f)(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}}var km=function*(){yield Object(No.k)(Object(E.getType)(Nm.request),Im)};let Tm,Cm,jm;function wm(e){return{type:Tm.SEND_SOLUTION_START,payload:e}}function Am(e){return{type:Tm.SEND_SOLUTION_FAIL,payload:e}}function _m(e){return{type:jm.SAVE_CODE,payload:e}}function Mm(e){return{type:jm.TOGGLE_READONLY,payload:e}}!function(e){e.SEND_SOLUTION_START="[solutions] send solution start",e.SEND_SOLUTION_SUCCESS="[solutions] send solution success",e.SEND_SOLUTION_FAIL="[solutions] send solution fail"}(Tm||(Tm={})),function(e){e.FROM_EDITOR="editor",e.FROM_FILE="file"}(Cm||(Cm={})),function(e){e.SAVE_CODE="[code editor] save code",e.TOGGLE_READONLY="[code editor] toggle readonly"}(jm||(jm={}));const xm=e=>e.substr((Math.max(0,e.lastIndexOf("."))||1/0)+1);function Dm(e){return e.solutions.interface.selectedSubmission}function*Pm(e){const{solutionId:t,taskId:s,file:a,maxSize:n,shouldShowSuccessMessage:r=!1,shouldDisableReadonly:i=!1,sendWay:o,routeParams:c}=e.payload,l=Po.apiSendSolution.build({solutionId:t});if(0===a.size)return yield Object(No.f)(Object(sn.a)(Ml)),void(yield Object(No.f)(Am()));if(a.size>n)return yield Object(No.f)(Object(sn.a)(xl(n))),void(yield Object(No.f)(Am()));const u=xm(a.name),d="solution.".concat(u);try{const e=new FormData;e.append("file",a,d),yield Object(No.b)(Do.a,l,{method:"POST",body:e,excludeDefaultHeaders:!0});const n=!(yield Object(No.h)(Dm));if(yield Object(No.f)((m={solutionId:t,taskId:s},{type:Tm.SEND_SOLUTION_SUCCESS,payload:m})),yield Object(No.f)(To({solutionId:t,selectLatestSubmission:n})),i&&(yield Object(No.f)(Mm(!0))),r&&(yield Object(No.f)(Object(sn.a)(Al))),c){const e={uid:yield Object(No.h)(Y),group_id:c.groupId,lesson_id:c.lessonId,tasks_id:c.taskId,solutions_id:c.solutionId};switch(o){case Cm.FROM_EDITOR:F("CodeEditorSolution",e);break;case Cm.FROM_FILE:F("FileSolution",e)}}}catch(e){yield Object(No.f)(Am(e)),"400_file_is_empty"===e.code?yield Object(No.f)(Object(sn.a)(Ml)):yield Object(No.f)(Object(sn.a)(_l))}var m}var Rm=function*(){yield Object(No.a)([Object(No.k)(Tm.SEND_SOLUTION_START,Pm)])};let Lm;function Fm(e,t){return{type:Lm.FETCH_PROBLEM_SOLUTIONS_START,problemLinkId:e,groupId:t}}function zm(){return{type:Lm.CLEAR}}function Um(e,t,s){return{type:Lm.FETCH_PROBLEM_DETAILS,problemLinkId:e,groupId:t,solutionId:s}}function*Hm(e){const{problemLinkId:t,groupId:s}=e,a=Po.apiTeacherProblemSolutions.build({},{problemLinkId:t.toString(),groupId:s.toString()});try{const e=yield Object(No.b)(Do.a,a);yield Object(No.f)((r=e,{type:Lm.SET_PROBLEM_SOLUTIONS,solutionInfo:r}))}catch(e){yield Object(No.f)((n=e,{type:Lm.FETCH_PROBLEM_SOLUTIONS_ERROR,error:n}))}var n,r}function*Vm(e){const{problemLinkId:t,groupId:s,solutionId:a}=e;if(yield Hm(Fm(t,s)),Number.isNaN(a))return;const n=Po.apiProblemDetails.build({},{solutionId:a.toString()}),r=yield Object(No.b)(Do.a,n);yield Object(No.f)(function(e){return{type:Lm.SET_PROBLEM_DETAILS,problemDetails:e}}(r))}!function(e){e.FETCH_PROBLEM_SOLUTIONS_START="[solutions] start fetching problem details",e.FETCH_PROBLEM_SOLUTIONS_ERROR="[solutions] set fetching problem details error",e.SET_PROBLEM_SOLUTIONS="[solutions] set teacher problem solutions",e.CLEAR="[solutions] clear problem details",e.FETCH_PROBLEM_DETAILS="[solution] fetch teacher problem details",e.SET_PROBLEM_DETAILS="[solution] set teacher problem details"}(Lm||(Lm={}));var Gm=function*(){yield Object(No.k)(Lm.FETCH_PROBLEM_SOLUTIONS_START,Hm),yield Object(No.k)(Lm.FETCH_PROBLEM_DETAILS,Vm)};function*Bm(){yield Object(No.a)([nm(),um(),bm(),Sm(),vm(),km(),Rm(),Gm()])}const Wm={metadata:new C.a("/api/files/:fileId"),sourceCode:new C.a("/api/files/:fileId/text-content")},Km=Object(E.createAsyncAction)("[files] fetch source code start","[files] fetch source code success","[files] fetch source code failure")();function*qm(e){const{fileId:t}=e.payload,s=Wm.sourceCode.build({fileId:t});try{const e=yield Object(No.b)(fetch,s);if(!e.ok){let s="500_internal_server_error",a="Internal Server Error";return 0!==e.status&&({code:s,message:a}=yield e.json()),void(yield Object(No.f)(Km.failure({fileId:t,error:new k.a(e.status,s,a,{fileId:t})})))}const a=yield e.text();yield Object(No.f)(Km.success({fileId:t,sourceCode:a}))}catch(e){yield Object(No.f)(Km.failure({fileId:t,error:e}))}}function*Ym(){yield Object(No.j)(Object(E.getType)(Km.request),qm)}var Jm=s(263);new C.a("/api/v1/admission/admission-info/season/"),new C.a("/api/v1/admission/interviews/cities/all"),new C.a("/api/v1/admission/interviews/venues/all"),new C.a("/api/v1/admission/admission-info/season/"),new C.a("/api/v1/accounts/profile/update/");const Zm={cities:new C.a("/api/admission/cities/"),venues:new C.a("/api/admission/venues/:cityId/"),season:new C.a("/api/admission/season/"),profileUpdate:new C.a("/api/v1/admission/profile-update/")},Xm={profile:new C.a("/api/profile"),foreignProfile:new C.a("/api/profile/:userId")};let Qm;function $m(e){return{type:Qm.SET_VENUES,venues:e}}function ep(e){return{type:Qm.CHANGE_VENUE,venue:e}}function tp(e){return{type:Qm.TOGGLE_CITIES_LOADING,isLoading:e}}function sp(e){return{type:Qm.TOGGLE_VENUES_LOADING,isLoading:e}}function ap(e){return{type:Qm.SET_VALIDATION_ERRORS,statusMap:e}}function np(e){return e.profileEditor.isEditing}function rp(e){return e.profileEditor.phone}function ip(e){return e.profileEditor.city}function op(e){return e.profileEditor.username}function cp(e){return e.profileEditor.venue}function lp(e){return e.profileEditor.cityList}function up(e){return e.profileEditor.venueList}function dp(e){return e.profileEditor.isCitiesLoading||e.profileEditor.isSaving}function mp(e){return e.profileEditor.isVenuesLoading||e.profileEditor.isSaving}function pp(e){return e.profileEditor.errors}function hp(e){return e.profileEditor.isSaving}!function(e){e.START_EDIT="[profile editor] start edit",e.END_EDITING="[profile editor] edn editing profile",e.SAVE_PROFILE="[profile editor] save profile",e.SET_PHONE="[profile editor] set phone",e.SET_CITIES="[profile editor] set cities list",e.SET_VENUES="[profile editor] set venues list",e.CHANGE_CITY="[profile editor] change city",e.CHANGE_VENUE="[profile editor] change venue",e.CHANGE_USERNAME="[profile editor] change user fullname",e.TOGGLE_VENUES_LOADING="[profile editor] toggle venues loading",e.TOGGLE_CITIES_LOADING="[profile editor] toggle cities loading",e.SET_VALIDATION_ERRORS="[profile editor] set validation errors"}(Qm||(Qm={}));const bp=/\s+/g,Ep=e=>{const[t,s="",...a]=e.replace(bp," ").split(/\s/g);return{firstName:s,middleName:a.join(" "),lastName:t}},fp=/\S/,gp=12,yp=(e,t)=>Object(No.e)(function*(){for(;;){const s=yield Object(No.i)(e);yield Object(No.b)(t,s)}});function*Sp(e){const{city:t,venue:s}=e;if(t&&s){yield Object(No.f)(tp(!0)),yield Object(No.f)(sp(!0));const e=yield Object(No.b)(Do.a,Zm.cities.build()),s=yield Object(No.b)(Do.a,Zm.venues.build({cityId:t.id}));yield Object(No.f)(tp(!1)),yield Object(No.f)(sp(!1)),yield Object(No.f)(function(e){return{type:Qm.SET_CITIES,cities:e}}(e)),yield Object(No.f)($m(s))}}function*Op(e){yield Object(No.f)(ep(null)),yield Object(No.f)(sp(!0));const t=yield Object(No.b)(Do.a,Zm.venues.build({cityId:e.city.id}));yield Object(No.f)(sp(!1)),yield Object(No.f)($m(t))}function*vp(e){let{callback:t}=e;const s=yield function*(){const e=yield Object(No.h)(ip),t=yield Object(No.h)(cp),s=yield Object(No.h)(rp),a=yield Object(No.h)(op);return{city:null===e,venue:null===t,phone:!s||s.length!==gp,name:!fp.exec(a)}}();if(!Object.values(s).every(e=>!1===e))return void(yield Object(No.f)(ap(s)));const a=yield Object(No.h)(ip),n=yield Object(No.h)(cp),r=yield Object(No.h)(rp);try{a&&n&&(yield Object(No.b)(Do.a,Zm.season.build(),{method:"PATCH",body:JSON.stringify({city:a.id,venue:n.id})}));const e=Ep(yield Object(No.h)(op));yield Object(No.b)(Do.a,Xm.profile.build(),{method:"PATCH",body:JSON.stringify({last_name:e.lastName,middle_name:e.middleName,first_name:e.firstName,phone:r})});try{yield Object(No.b)(Do.a,Zm.profileUpdate.build(),{method:"PATCH",body:JSON.stringify({last_name:e.lastName,middle_name:e.middleName,first_name:e.firstName,phone:r})})}catch(e){console.error("Ошибка сохранения информации о поступлении",e)}yield Object(No.f)({type:Qm.END_EDITING}),yield Object(No.f)(Object(sn.a)(jl)),t&&t()}catch(e){yield Object(No.f)(Object(sn.a)(wl))}}var Np=function*(){yield Object(No.a)([Object(No.j)(Qm.START_EDIT,Sp),Object(No.j)(Qm.CHANGE_CITY,Op),yp(Qm.SAVE_PROFILE,vp)])};function*Ip(){yield Object(No.a)([Vo(),Xo(),bc(),Oc(),Ym(),Tc(),Pu(),Ac(),zc(),Wu(),nd(),cd(),Zd(),wu(),Bm(),Object(Jm.a)(),Np()])}const kp=Object(ic.b)({onError:e=>{l.captureException(e)}});function Tp(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Cp={commentMap:{},downloadStatus:null,downloadStatusError:null,uploadStatus:null};function jp(e,t){const s=t.payload,a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e.commentMap,[s].map(Tp));return Object.assign({},e,{commentMap:a,downloadStatus:null,uploadStatus:null})}var wp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xd.FETCH_DETAILS_SUCCESS:return function(e,t){const{solution:s,comments:a}=t.payload;return Object.assign({},e,{commentMap:Object.assign({},e.commentMap,{[s.id]:a})})}(e,t);case Io.FETCH_STUDENT_COMMENTS_START:case Io.FETCH_TEACHER_COMMENTS_START:return function(e){return Object.assign({},e,{downloadStatus:Gt.a.PENDING,downloadStatusError:null})}(e);case Io.FETCH_STUDENT_COMMENTS_SUCCESS:case Io.FETCH_TEACHER_COMMENTS_SUCCESS:return function(e,t){const{solutionPreview:s,comments:a}=t.payload;return Object.assign({},e,{downloadStatus:Gt.a.SUCCESS,commentMap:Object.assign({},e.commentMap,{[s.id]:a})})}(e,t);case Io.FETCH_COMMENTS_FAIL:return function(e,t){return Object.assign({},e,{downloadStatus:Gt.a.FAIL,downloadStatusError:t.payload})}(e,t);case Io.CLEAR_COMMENTS:return jp(e,t);case Io.ADD_STUDENT_COMMENT_START:case Io.ADD_TEACHER_COMMENT_START:return function(e){return Object.assign({},e,{uploadStatus:Gt.a.PENDING})}(e);case Io.ADD_COMMENT_SUCCESS:return function(e,t){const{solutionId:s,addedComment:a}=t.payload,n=e.commentMap[s];return n?Object.assign({},e,{commentMap:Object.assign({},e.commentMap,{[s]:[...n,a]}),uploadStatus:Gt.a.SUCCESS}):e}(e,t);case Io.ADD_COMMENT_FAIL:return function(e){return Object.assign({},e,{uploadStatus:Gt.a.FAIL})}(e);case Io.EDIT_STUDENT_COMMENT_START:case Io.EDIT_TEACHER_COMMENT_START:return function(e){return Object.assign({},e,{uploadStatus:Gt.a.PENDING})}(e);case Io.EDIT_COMMENT_SUCCESS:return function(e,t){const{solutionId:s,editedComment:a}=t.payload,n=e.commentMap[s];if(!n)return e;const r=function(e,t){for(let s=e.length-1;s>=0;--s)if(t(e[s]))return s;return-1}(n,e=>e.id===a.id);if(-1===r)return e;const i=[...n];return i[r]=a,Object.assign({},e,{commentMap:Object.assign({},e.commentMap,{[s]:i}),uploadStatus:Gt.a.SUCCESS})}(e,t);case Io.EDIT_COMMENT_FAIL:return function(e){return Object.assign({},e,{uploadStatus:Gt.a.FAIL})}(e);default:return e}};const Ap={fetchError:null,fetchStatus:null,courseDetails:null,courseBanners:null};var _p=s(101),Mp=s.n(_p);let xp,Dp;function Pp(e){return Boolean(e.event)}function Rp(e){return!e.event&&Boolean(e.lesson)}function Lp(e){return e.length>0&&Pp(e[0])}function Fp(e){return Lp(e.slots)}!function(e){e.Enrolled="enrolled",e.Expelled="expelled",e.Graduated="graduated",e.ToBeExpelled="to-be-expelled"}(xp||(xp={})),function(e){e.ASCENDING="asc",e.DESCENDING="desc"}(Dp||(Dp={}));const zp={fetchStatus:null,fetchError:null,maxRating:0,maxBonusScore:0,useBonusScore:!1,tags:{},slots:[],students:{},attendance:{},sortedStudentIds:[],sortBy:Qo.NAME,sortOrder:Dp.ASCENDING};function Up(e,t,s){return Mp()(Object.values(e),t,s).map(e=>e.id)}function Hp(e,t){if(!Fp(e))return e;const{studentId:s,eventId:a,status:n}=t,r=Object.assign({},e.students);return r[s].attendance[a]=n,Object.assign({},e,{students:r})}var Vp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $o.FETCH_COURSE_PROGRESS_START:return function(e){return Object.assign({},e,{fetchStatus:Gt.a.PENDING,fetchError:null})}(e);case $o.FETCH_COURSE_PROGRESS_SUCCESS:return function(e,t){return Object.assign({},e,{},t.payload,{sortedStudentIds:Up(t.payload.students,e.sortBy,e.sortOrder),fetchStatus:Gt.a.SUCCESS,fetchError:null})}(e,t);case $o.FETCH_COURSE_PROGRESS_FAIL:return function(e,t){return Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL})}(e,t);case $o.CLEAR_COURSE_PROGRESS:return zp;case $o.CHANGE_ATTENDANCE_STATUS:return function(e,t){return Hp(e,t.payload)}(e,t);case $o.UPDATE_REFERENCE_ATTENDANCE:return function(e,t){if(!Fp(e))return e;const{eventId:s,studentId:a}=t.payload,n=Object.assign({},e.attendance);return n[a][s]=e.students[a].attendance[s],Object.assign({},e,{referenceAttendance:n})}(e,t);case $o.RESTORE_ATTENDANCE_FROM_REFERENCE:return function(e,t){if(!Fp(e))return e;const{eventId:s,studentId:a}=t.payload;return Hp(e,{eventId:s,studentId:a,status:e.attendance[a][s]})}(e,t);case $o.CHANGE_SORT:return function(e,t){const{sortBy:s,sortOrder:a}=t.payload;return Object.assign({},e,{sortBy:s,sortOrder:a,sortedStudentIds:Up(e.students,s,a)})}(e,t);case Object(E.getType)(rc.request):return function(e,t){const{studentId:s,newScore:a}=t.payload,n=Object.assign({},e.students);return n[s].bonusScore=a,Object.assign({},e,{students:n})}(e,t);case Object(E.getType)(rc.success):return function(e,t){const{studentId:s,rating:a,bonusScore:n}=t.payload,r=Object.assign({},e.students);return r[s].rating=a,r[s].bonusScore=n,Object.assign({},e,{students:r})}(e,t);case Object(E.getType)(rc.failure):return function(e,t){const{studentId:s,oldScore:a}=t.payload,n=Object.assign({},e.students);return n[s].bonusScore=a,Object.assign({},e,{students:n})}(e,t);case Object(E.getType)(ec.request):return function(e,t){const{studentId:s}=t.payload,a=Object.assign({},e.students);return a[s].status=xp.ToBeExpelled,Object.assign({},e,{students:a})}(e,t);case Object(E.getType)(ec.success):return function(e,t){const{studentId:s}=t.payload,a=Object.assign({},e.students);return a[s].status=xp.Expelled,Object.assign({},e,{students:a})}(e,t);case Object(E.getType)(ec.failure):return function(e,t){const{studentId:s,oldStatus:a}=t.payload,n=Object.assign({},e.students);return n[s].status=a,Object.assign({},e,{students:n})}(e,t);default:return e}};let Gp;function Bp(e,t,s){return Mp()(Object.values(e),t,s).map(e=>e.id)}!function(e){e.NAME="displayName",e.RATING="rating"}(Gp||(Gp={}));const Wp={fetchError:null,fetchStatus:null,maxRating:0,studentIds:[],studentsMap:{},slots:[],sortBy:Gp.NAME,sortOrder:Dp.ASCENDING};const Kp={courseMap:{},allIds:[]};var qp=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kp};const Yp={filters:null,fetchError:null,fetchStatus:null};var Jp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vc.FETCH_SOLUTION_FILTERS_START:return function(e){return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING})}(e);case vc.FETCH_FILTERS_SUCCESS:return function(e,t){let{payload:s}=t;return Object.assign({},e,{filters:s,fetchError:null,fetchStatus:Gt.a.SUCCESS})}(e,t);case vc.FETCH_FILTERS_FAIL:return function(e,t){let{payload:s}=t;return Object.assign({},e,{fetchError:s,fetchStatus:Gt.a.FAIL})}(e,t);case vc.CLEAR_FILTERS:return Yp;default:return e}};const Zp={groupMap:{}};var Xp=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zp};const Qp={fetchError:null,fetchStatus:null,progressPreview:null};let $p;function eh(e){return Boolean(e.eventId)}!function(e){e.NAME="displayName",e.RATING="rating"}($p||($p={}));const th={fetchError:null,fetchStatus:null,lessonPreview:null,progressTable:null,referenceAttendance:null,tableSortOptions:{field:$p.NAME,order:Dp.ASCENDING}};function sh(e,t,s){return Mp()(Object.values(e),t,s).map(e=>e.id)}function ah(e,t){if(!e.progressTable)return e;const s=Object.assign({},e.progressTable);return s.studentsMap[t.studentId].attendance=t.status,Object.assign({},e,{progressTable:s})}const nh={lessonDetails:null,lessonDetailsFetchError:null,lessonDetailsFetchStatus:null,visibilityFetchStatus:null};var rh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Uc.FETCH_STUDENT_LESSON_DETAILS_START:case Uc.FETCH_TEACHER_LESSON_DETAILS_START:return function(e){return Object.assign({},e,{lessonDetailsFetchStatus:Gt.a.PENDING,lessonDetailsFetchError:null})}(e);case Uc.FETCH_LESSON_DETAILS_SUCCESS:return function(e,t){return Object.assign({},e,{lessonDetails:t.payload,lessonDetailsFetchStatus:Gt.a.SUCCESS,lessonDetailsFetchError:null})}(e,t);case Uc.FETCH_LESSON_DETAILS_FAIL:return function(e,t){return Object.assign({},e,{lessonDetailsFetchStatus:Gt.a.FAIL,lessonDetailsFetchError:t.payload})}(e,t);case Uc.CLEAR_LESSON_DETAILS:return nh;case Uc.CHANGE_LESSON_VISIBILITY_START:return function(e){return Object.assign({},e,{visibilityFetchStatus:Gt.a.PENDING})}(e);case Uc.CHANGE_LESSON_VISIBILITY_SUCCESS:return function(e,t){const{isHidden:s}=t.payload;return e.lessonDetails?Object.assign({},e,{lessonDetails:Object.assign({},e.lessonDetails,{isHidden:s}),visibilityFetchStatus:Gt.a.SUCCESS}):Object.assign({},e)}(e,t);case Uc.CHANGE_LESSON_VISIBILITY_FAIL:return function(e){return Object.assign({},e,{visibilityFetchStatus:Gt.a.FAIL})}(e);case Uc.PATCH_DETAILS:return function(e,t){const s=e.lessonDetails;return s?Object.assign({},e,{lessonDetails:Object.assign({},s,{},t.payload)}):e}(e,t);default:return e}};const ih={fetchError:null,fetchStatus:null,list:[],listFilter:el.ShowAll},oh=Object(E.createReducer)(ih).handleAction(Qc,(e,t)=>Object.assign({},e,{listFilter:t.payload.filter})).handleAction([Jc.request,Zc.request],e=>Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING})).handleAction([Jc.success,Zc.success],(e,t)=>Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.SUCCESS,list:t.payload})).handleAction([Jc.failure,Zc.failure],(e,t)=>Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL})).handleAction(Xc,()=>ih),ch={startingStatus:null,startingError:null,finishingStatus:null,finishingError:null};const lh={timer:null,fetchError:null,fetchStatus:null};const uh={details:rh,list:oh,timer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Aa.FETCH_TIMER_START:return function(e){return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING})}(e);case Aa.FETCH_TIMER_SUCCESS:return function(e,t){return Object.assign({},e,{timer:t.payload,fetchError:null,fetchStatus:Gt.a.SUCCESS})}(e,t);case Aa.FETCH_TIMER_FAIL:return function(e,t){return Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL})}(e,t);case Aa.CLEAR_TIMER:return lh;default:return e}},test:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ch,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(E.getType)(ja.request):return Object.assign({},e,{startingStatus:Gt.a.PENDING,startingError:null});case Object(E.getType)(ja.success):return Object.assign({},e,{startingStatus:Gt.a.SUCCESS,startingError:null});case Object(E.getType)(ja.failure):return Object.assign({},e,{startingStatus:Gt.a.FAIL,startingError:t.payload});case Object(E.getType)(wa.request):return Object.assign({},e,{finishingStatus:Gt.a.PENDING,finishingError:null});case Object(E.getType)(wa.success):return Object.assign({},e,{finishingStatus:Gt.a.SUCCESS,finishingError:null});case Object(E.getType)(wa.failure):return Object.assign({},e,{finishingStatus:Gt.a.FAIL,finishingError:t.payload});default:return e}}};var dh=Object(ee.combineReducers)(uh);const mh={materials:[],materialsFetchError:null,materialsFetchStatus:null,detailedMaterialInfo:null,detailsFetchError:null,detailsFetchStatus:null};var ph=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ru.FETCH_MATERIALS_START:return function(e){return Object.assign({},e,{materialsFetchError:null,materialsFetchStatus:Gt.a.PENDING})}(e);case Ru.FETCH_MATERIALS_SUCCESS:return function(e,t){const s=t.payload;return Object.assign({},e,{materials:s,materialsFetchError:null,materialsFetchStatus:Gt.a.SUCCESS})}(e,t);case Ru.FETCH_MATERIALS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{materialsFetchError:s,materialsFetchStatus:Gt.a.FAIL})}(e,t);case Ru.CLEAR_MATERIALS:return function(e){return Object.assign({},e,{materials:[],materialsFetchError:null,materialsFetchStatus:null})}(e);case Ru.FETCH_TEACHER_DETAILS_START:case Ru.FETCH_STUDENT_DETAILS_START:return function(e){return Object.assign({},e,{detailsFetchError:null,detailsFetchStatus:Gt.a.PENDING})}(e);case Ru.FETCH_DETAILS_SUCCESS:return function(e,t){const s=t.payload;return Object.assign({},e,{detailedMaterialInfo:s,detailsFetchError:null,detailsFetchStatus:Gt.a.SUCCESS})}(e,t);case Ru.FETCH_DETAILS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{detailsFetchError:s,detailsFetchStatus:Gt.a.FAIL})}(e,t);case Ru.CLEAR_DETAILS:return mh;default:return e}};function hh(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const bh={notificationMap:{},notificationIds:[],fetchStatus:null,fetchError:null,unreadCount:0,isConsistent:!0};function Eh(e,t,s){const a=e.notificationMap[t];return a?Object.assign({},e,{notificationMap:Object.assign({},e.notificationMap,{[t]:Object.assign({},a,{},s)})}):e}function fh(e,t){const s=t.payload,a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e.notificationMap,[s].map(hh)),n=e.notificationIds.filter(e=>e!==s);return Object.assign({},e,{notificationMap:a,notificationIds:n})}function gh(e,t){const s=Object.assign({},e.notificationMap);return Object.keys(s).forEach(e=>{s[e]=Object.assign({},s[e],{},t)}),Object.assign({},e,{notificationMap:s})}var yh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt.FETCH_NOTIFICATIONS_START:return Object.assign({},e,{fetchStatus:Gt.a.PENDING});case pt.FETCH_NOTIFICATIONS_SUCCESS:return function(e,t){const{notificationIds:s,notificationMap:a,unreadCount:n,isNewBatch:r=!1}=t.payload;return Object.assign({},e,{notificationMap:Object.assign({},e.notificationMap,{},a),notificationIds:r?[...s,...e.notificationIds]:[...e.notificationIds,...s],fetchError:null,unreadCount:n,fetchStatus:Gt.a.SUCCESS,isConsistent:!0})}(e,t);case pt.FETCH_NOTIFICATIONS_FAIL:return Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL});case pt.SET_UNREAD_COUNT:return Object.assign({},e,{unreadCount:t.payload});case pt.HIDE_NOTIFICATION:return Eh(e,t.payload,{isRead:!0});case pt.UNHIDE_NOTIFICATION:return Eh(e,t.payload,{isRead:!1});case pt.DELETE_NOTIFICATION:return fh(e,t);case pt.HIDE_ALL_NOTIFICATIONS:return gh(e,{isRead:!0});case pt.UNHIDE_ALL_NOTIFICATIONS:return gh(e,{isRead:!1});case pt.DELETE_ALL_NOTIFICATIONS:return bh;case pt.SET_CONSISTENCY_FLAG:return e.isConsistent===t.payload?e:Object.assign({},e,{isConsistent:t.payload});default:return e}};const Sh=[];var Oh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case an.a.ADD_NOTIFICATION:return function(e,t){let{payload:s}=t;return[...e,s]}(e,t);case an.a.REMOVE_NOTIFICATION:return function(e,t){let{payload:s}=t;const a=e.filter(e=>e.id!==s.id);return e.length===a.length?e:a}(e,t);default:return e}};let vh,Nh;!function(e){e.Elective="elective",e.Lesson="lesson",e.Reserve="reserve",e.Test="test",e.Skip="skip"}(vh||(vh={})),function(e){e.Assign="assign",e.Edit="edit",e.Skip="skip",e.Swap="swap"}(Nh||(Nh={}));const Ih={courseDetails:null,currentStudyPeriod:null,initialEvents:[],initialUnassignedEvents:[],currentOrPassedSchedulePlan:null,futureSchedulePlan:null,generateError:null,generateStatus:null,pageLoadError:null,pageLoadStatus:null,scheduleLoadError:null,scheduleLoadStatus:null,saveError:null,saveStatus:null,actions:[],editedEvents:[],unassignedEvents:[]};let kh=-1;const Th=()=>kh--;var Ch=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ih,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ld.GENERATE_SCHEDULE:return function(e){return Object.assign({},e,{generateError:null,generateStatus:Gt.a.PENDING})}(e);case ld.SET_GENERATE_ERROR:return function(e,t){return Object.assign({},e,{generateError:t.payload,generateStatus:Gt.a.FAIL})}(e,t);case ld.SET_GENERATED_SCHEDULE:return function(e,t){const{currentOrPassedSchedulePlan:s,futureSchedulePlan:a,events:n,unassignedEvents:r}=t.payload;return Object.assign({},e,{generateError:null,generateStatus:Gt.a.SUCCESS,currentOrPassedSchedulePlan:s,futureSchedulePlan:a,unassignedEvents:r,editedEvents:n,initialEvents:n,initialUnassignedEvents:r,actions:[]})}(e,t);case ld.RESET_SCHEDULE_GENERATOR:return function(e){return Object.assign({},e,{generateError:null,generateStatus:null})}(e);case ld.SET_SCHEDULE:return function(e,t){const{currentOrPassedSchedulePlan:s,futureSchedulePlan:a,events:n,unassignedEvents:r}=t.payload,i=Object.assign({},e,{scheduleLoadError:null,scheduleLoadStatus:Gt.a.SUCCESS,currentOrPassedSchedulePlan:s,futureSchedulePlan:a,unassignedEvents:r,editedEvents:n,initialEvents:n,initialUnassignedEvents:r,actions:[]});return t.meta&&(i.currentStudyPeriod=t.meta.studyPeriodId),i}(e,t);case ld.SET_SCHEDULE_LOAD_ERROR:return function(e,t){return Object.assign({},e,{scheduleLoadError:t.payload,scheduleLoadStatus:Gt.a.FAIL})}(e,t);case ld.RESET_SCHEDULE:return Ih;case ld.LOAD_PAGE_DATA:return function(e){return Object.assign({},e,{pageLoadError:null,pageLoadStatus:Gt.a.PENDING})}(e);case ld.LOAD_PAGE_DATA_SUCCESS:return function(e,t){const{currentOrPassedSchedulePlan:s,futureSchedulePlan:a,events:n,unassignedEvents:r}=t.payload.courseSchedule;return Object.assign({},e,{courseDetails:t.payload.courseDetails,currentStudyPeriod:t.payload.studyPeriodId,pageLoadError:null,pageLoadStatus:Gt.a.SUCCESS,scheduleLoadError:null,scheduleLoadStatus:Gt.a.SUCCESS,currentOrPassedSchedulePlan:s,futureSchedulePlan:a,unassignedEvents:r,editedEvents:n,initialEvents:n,initialUnassignedEvents:r,actions:[]})}(e,t);case ld.LOAD_PAGE_DATA_FAILURE:return function(e,t){return Object.assign({},e,{pageLoadError:t.payload,pageLoadStatus:Gt.a.FAIL})}(e,t);case ld.CHANGE_STUDY_PERIOD:return function(e,t){return Object.assign({},e,{scheduleLoadError:null,scheduleLoadStatus:Gt.a.PENDING,currentStudyPeriod:t.payload.studyPeriodId})}(e,t);case ld.ADD_SKIP_REASON:return function(e,t){let{payload:s}=t;return Object.assign({},e,{actions:(a=s.id,a<0?e.actions.map(e=>e.type===Nh.Skip&&e.payload.skipId===s.id?Object.assign({},e,{payload:Object.assign({},e.payload,{reason:s.reason})}):e):[...e.actions,{type:Nh.Edit,payload:{id:s.id,title:s.reason}}]),editedEvents:e.editedEvents.map(e=>e.id===s.id?Object.assign({},e,{title:s.reason}):e)});var a}(e,t);case ld.ASSIGN_EVENT:return function(e,t){let{payload:s}=t;const a=e.unassignedEvents.findIndex(e=>e.id===s.electiveId),n=e.editedEvents.findIndex(e=>e.id===s.reserveId);return Object.assign({},e,{actions:[...e.actions,{type:Nh.Assign,payload:{electiveId:s.electiveId,reserveId:s.reserveId}}],editedEvents:e.editedEvents.map((t,s)=>s===n?Object.assign({},e.unassignedEvents[a],{date:e.editedEvents[n].date}):t),unassignedEvents:[...e.unassignedEvents.slice(0,a),...e.unassignedEvents.slice(a+1)]})}(e,t);case ld.SKIP_EVENT:return function(e,t){let{payload:s}=t;const a=Th(),n=e.editedEvents.findIndex(e=>e.id===s.id);let r=-1;for(let t=n;t<e.editedEvents.length;t++)if(e.editedEvents[t].type===vh.Reserve){r=t;break}let i=-1;if(-1!==r)i=r;else for(i=e.editedEvents.length-1;e.editedEvents[i].type===vh.Skip;)i--;let o=e.editedEvents.slice(n,i);const c=o.filter(e=>e.type===vh.Skip),l=o.filter(e=>e.type!==vh.Skip).map((t,s,a)=>a[s+1]?Object.assign({},t,{date:a[s+1].date}):Object.assign({},t,{date:e.editedEvents[i].date}));return o=[...c,...l].sort((e,t)=>Ce.fromISO(e.date).diff(Ce.fromISO(t.date)).milliseconds),Object.assign({},e,{actions:[...e.actions,{type:Nh.Skip,payload:{id:s.id,reason:"",skipId:a}}],editedEvents:[...e.editedEvents.slice(0,n),{id:a,type:vh.Skip,title:"",date:e.editedEvents[n].date},...o,...e.editedEvents.slice(i+1)]})}(e,t);case ld.SWAP_EVENTS:return function(e,t){let{payload:s}=t;const a=e.editedEvents.findIndex(e=>e.id===s.fromId),n=e.editedEvents.findIndex(e=>e.id===s.toId);return Object.assign({},e,{actions:[...e.actions,{type:Nh.Swap,payload:{fromId:s.fromId,toId:s.toId}}],editedEvents:e.editedEvents.map((t,s)=>s===a?Object.assign({},e.editedEvents[n],{date:e.editedEvents[a].date}):s===n?Object.assign({},e.editedEvents[a],{date:e.editedEvents[n].date}):t)})}(e,t);case ld.SAVE_SCHEDULE:return function(e){return Object.assign({},e,{saveError:null,saveStatus:Gt.a.PENDING})}(e);case ld.SET_SAVE_ERROR:return function(e,t){return Object.assign({},e,{saveError:t.payload,saveStatus:Gt.a.FAIL})}(e,t);case ld.SET_SAVE_SUCCESS:return function(e){return Object.assign({},e,{saveError:null,saveStatus:Gt.a.SUCCESS})}(e);case ld.CANCEL_CHANGES:return function(e){return Object.assign({},e,{actions:[],editedEvents:e.initialEvents,unassignedEvents:e.initialUnassignedEvents,saveError:null,saveStatus:null})}(e);default:return e}};function jh(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}function wh(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const Ah={detailsMap:{},fetchError:null,fetchStatus:null};var _h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ah,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xd.FETCH_STUDENT_DETAILS_START:case Xd.FETCH_TEACHER_DETAILS_START:return function(e){return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING})}(e);case Xd.FETCH_DETAILS_SUCCESS:return function(e,t){const{solution:s}=t.payload,a=Object.assign({},e.detailsMap,{[s.id]:s});return Object.assign({},e,{detailsMap:a,fetchError:null,fetchStatus:Gt.a.SUCCESS})}(e,t);case Xd.FETCH_DETAILS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchError:s,fetchStatus:Gt.a.FAIL})}(e,t);case Xd.CLEAR_DETAILS:return function(e,t){const s=t.payload,a=jh(e.detailsMap,[s].map(wh));return Object.assign({},e,{detailsMap:a,fetchError:null,fetchStatus:null})}(e,t);case Xd.PATCH_DETAILS:case Io.FETCH_STUDENT_COMMENTS_SUCCESS:case Io.FETCH_TEACHER_COMMENTS_SUCCESS:return function(e,t){const s=t.type===Xd.PATCH_DETAILS?t.payload:t.payload.solutionPreview,{id:a}=s,n=jh(s,["id"]),r=e.detailsMap[a];if(!r)return e;const i=Object.assign({},r);for(const e of Object.keys(n))i[e]=n[e];return Object.assign({},e,{detailsMap:Object.assign({},e.detailsMap,{[a]:i})})}(e,t);default:return e}};const Mh={fetchError:null,fetchStatus:null};var xh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ko.SET_GRADE_START:return function(e){return Object.assign({},e,{fetchStatus:Gt.a.PENDING,fetchError:null})}(e);case ko.SET_GRADE_SUCCESS:return function(e){return Object.assign({},e,{fetchStatus:Gt.a.SUCCESS})}(e);case ko.SET_GRADE_FAIL:return function(e,t){return Object.assign({},e,{fetchStatus:Gt.a.FAIL,fetchError:t.payload})}(e,t);default:return e}};const Dh={info:null,fetchError:null,fetchStatus:null};var Ph=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dm.FETCH_SOLUTIONS_INFO_START:return function(e){return Object.assign({},e,{info:null,fetchError:null,fetchStatus:Gt.a.PENDING})}(e);case dm.FETCH_SOLUTIONS_INFO_SUCCESS:return function(e,t){const s=t.payload;return Object.assign({},e,{info:s,fetchError:null,fetchStatus:Gt.a.SUCCESS})}(e,t);case dm.FETCH_SOLUTIONS_INFO_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchError:s,fetchStatus:Gt.a.FAIL})}(e,t);case dm.CLEAR_SOLUTIONS_INFO:return Dh;default:return e}};const Rh={studentsWithoutSolutions:null,fetchError:null,fetchStatus:null};var Lh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Em.FETCH_STUDENTS_WITHOUT_SOLUTIONS_START:return function(e){return Object.assign({},e,{studentsWithoutSolutions:null,fetchError:null,fetchStatus:Gt.a.PENDING})}(e);case Em.FETCH_STUDENTS_WITHOUT_SOLUTIONS_SUCCESS:return function(e,t){const s=t.payload;return Object.assign({},e,{studentsWithoutSolutions:s,fetchError:null,fetchStatus:Gt.a.SUCCESS})}(e,t);case Em.FETCH_STUDENTS_WITHOUT_SOLUTIONS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchError:s,fetchStatus:Gt.a.FAIL})}(e,t);case Em.CLEAR_STUDENTS_WITHOUT_SOLUTIONS:return Rh;default:return e}};const Fh={count:null,list:[],fetchStatus:null,fetchError:null};function zh(e,t){const s=t.type===im.PATCH_SOLUTION?t.payload:t.payload.solutionPreview,{id:a}=s,n=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(s,["id"]),r=[...e.list],i=r.find(e=>e.id===a);if(!i)return e;for(const e of Object.keys(n))i[e]=n[e];return Object.assign({},e,{list:r})}var Uh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case im.FETCH_TEACHER_SOLUTIONS_START:return function(e){return Object.assign({},e,{fetchStatus:Gt.a.PENDING,fetchError:null})}(e);case im.FETCH_SOLUTIONS_SUCCESS:return function(e,t){const{count:s,results:a}=t.payload;return Object.assign({},e,{count:s,list:a,fetchStatus:Gt.a.SUCCESS,fetchError:null})}(e,t);case im.FETCH_SOLUTIONS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{fetchStatus:Gt.a.FAIL,fetchError:s})}(e,t);case im.CLEAR_SOLUTIONS:return Fh;case im.PATCH_SOLUTION:case Io.FETCH_STUDENT_COMMENTS_SUCCESS:case Io.FETCH_TEACHER_COMMENTS_SUCCESS:return zh(e,t);default:return e}};const Hh={fetchError:null,fetchStatus:null};const Vh={fetchStatus:null};var Gh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vh;switch((arguments.length>1?arguments[1]:void 0).type){case Tm.SEND_SOLUTION_START:return function(e){return Object.assign({},e,{fetchStatus:Gt.a.PENDING})}(e);case Tm.SEND_SOLUTION_SUCCESS:return function(e){return Object.assign({},e,{fetchStatus:Gt.a.SUCCESS})}(e);case Tm.SEND_SOLUTION_FAIL:return function(e){return Object.assign({},e,{fetchStatus:Gt.a.FAIL})}(e);default:return e}};const Bh={solutionInfo:null,fetchError:null,fetchStatus:null,problemDetails:null};var Wh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lm.FETCH_PROBLEM_SOLUTIONS_START:return Object.assign({},e,{solutionInfo:null,fetchError:null,fetchStatus:Gt.a.PENDING});case Lm.SET_PROBLEM_SOLUTIONS:{const{solutionInfo:s}=t;return Object.assign({},e,{solutionInfo:s,fetchError:null,fetchStatus:Gt.a.SUCCESS})}case Lm.FETCH_PROBLEM_SOLUTIONS_ERROR:{const{error:s}=t;return Object.assign({},e,{fetchError:s,fetchStatus:Gt.a.FAIL})}case Lm.SET_PROBLEM_DETAILS:{const{problemDetails:s}=t;return Object.assign({},e,{problemDetails:s})}case Lm.CLEAR:return Bh;default:return e}};const Kh=Object(E.createStandardAction)("[solutions] create solution draft")(),qh=Object(E.createStandardAction)("[solutions] update solution draft")(),Yh=Object(E.createStandardAction)("[solutions] delete solution draft")();function Jh(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Zh(e,t){const{taskId:s}=t.payload;if(!e.entities[s])return e;const a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e.entities,[s].map(Jh));return El.set(ol.SolutionDrafts,a),Object.assign({},e,{entities:a})}const Xh=Object(E.createReducer)({entities:{}}).handleAction(f,function(e){const t=El.get(ol.SolutionDrafts)||{};return Object.assign({},e,{entities:t})}).handleAction(Kh,function(e,t){const{taskId:s}=t.payload,a=Object.assign({},e.entities,{[s]:{taskId:s,content:"",timestamp:Date.now()}});return El.set(ol.SolutionDrafts,a),Object.assign({},e,{entities:a})}).handleAction(qh,function(e,t){const{taskId:s,content:a}=t.payload,n=Object.assign({},e.entities,{[s]:Object.assign({},e.entities[s],{content:a})});return El.set(ol.SolutionDrafts,n),Object.assign({},e,{entities:n})}).handleAction(Yh,Zh).handleAction(Tm.SEND_SOLUTION_SUCCESS,Zh),Qh={selectedSubmission:null};const $h={details:_h,grade:xh,info:Ph,studentsWithoutSolutions:Lh,list:Uh,rejudge:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(E.getType)(Nm.request):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING});case Object(E.getType)(Nm.success):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.SUCCESS});case Object(E.getType)(Nm.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL});default:return e}},send:Gh,drafts:Xh,interface:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qh,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ro.SELECT_SUBMISSION:return function(e,t){return Object.assign({},e,{selectedSubmission:t.payload})}(e,t);case Xd.FETCH_DETAILS_SUCCESS:return function(e,t){return Object.assign({},e,{selectedSubmission:t.payload.solution.latestSubmission})}(e,t);case Io.FETCH_STUDENT_COMMENTS_SUCCESS:case Io.FETCH_TEACHER_COMMENTS_SUCCESS:return function(e,t){const{selectedSubmission:s}=e;if(!s)return e;const a=t.payload.comments.find(e=>e.submission&&e.submission.id===s.id);return a?Object.assign({},e,{selectedSubmission:Object.assign({},s,{},a.submission)}):e}(e,t);default:return e}},problemDetails:Wh};var eb=Object(ee.combineReducers)($h);let tb;!function(e){e.INITIALIZE_TABLE="[table-settings] initialize table",e.SET_PAGE_SIZE="[table-settings] set page size",e.TOGGLE_COLUMN_VISIBILITY="[table-settings] toggle column visibility",e.CLEAR_SETTINGS="[table-settings] clear settings"}(tb||(tb={}));const sb={tableName:null,settings:null};var ab=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sb,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tb.INITIALIZE_TABLE:return function(e,t){let{payload:s}=t;const a=s,n=El.get(a);return Object.assign({},e,{tableName:a,settings:n})}(e,t);case tb.SET_PAGE_SIZE:return function(e,t){let{payload:s}=t;const{tableName:a,settings:n}=e;if(!a||!n)throw new k.c("You should initialize table before using setPageSize()",{tableName:a,settings:n});const r=Object.assign({},n,{pageSize:s});return El.set(a,r),Object.assign({},e,{settings:r})}(e,t);case tb.TOGGLE_COLUMN_VISIBILITY:return function(e,t){let{payload:s}=t;const{tableName:a,settings:n}=e;if(!a||!n)throw new k.c("You should initialize table before using toggleColumnVisibility()",{tableName:a,settings:n});const{columnsSettings:r}=n,i=r[s],o=Object.assign({},n,{columnsSettings:Object.assign({},r,{[s]:Object.assign({},i,{hidden:!i.hidden})})});return El.set(a,o),Object.assign({},e,{settings:o})}(e,t);case tb.CLEAR_SETTINGS:return sb;default:return e}};function nb(e,t){let s=-1;return{group:e.find(e=>{const a=e.tasks;return-1!==(s=a.findIndex(e=>e.id===t))}),taskIndex:s}}const rb={studentTasks:[],studentTasksFetchError:null,studentTasksFetchStatus:null,studentTasksUnsolved:[],studentTasksUnsolvedFetchError:null,studentTasksUnsolvedFetchStatus:null,taskDetails:null,taskDetailsFetchError:null,taskDetailsFetchStatus:null,lessonElementGroups:[],taskGroupsFetchError:null,taskGroupsFetchStatus:null,problemDetails:null,sendingSubmissionStatus:Gt.a.SUCCESS};var ib=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rb,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _a.FETCH_STUDENT_TASKS_START:return function(e){return Object.assign({},e,{studentTasksFetchError:null,studentTasksFetchStatus:Gt.a.PENDING})}(e);case _a.FETCH_STUDENT_TASKS_SUCCESS:return function(e,t){return Object.assign({},e,{studentTasks:t.payload,studentTasksFetchError:null,studentTasksFetchStatus:Gt.a.SUCCESS})}(e,t);case _a.FETCH_STUDENT_TASKS_FAIL:return function(e,t){return Object.assign({},e,{studentTasksFetchError:t.payload,studentTasksFetchStatus:Gt.a.FAIL})}(e,t);case _a.FETCH_STUDENT_TASKS_UNSOLVED_START:return function(e){return Object.assign({},e,{studentTasksUnsolvedFetchError:null,studentTasksUnsolvedFetchStatus:Gt.a.PENDING})}(e);case _a.FETCH_STUDENT_TASKS_UNSOLVED_SUCCESS:return function(e,t){return Object.assign({},e,{studentTasksUnsolved:t.payload,studentTasksUnsolvedFetchError:null,studentTasksUnsolvedFetchStatus:Gt.a.SUCCESS})}(e,t);case _a.FETCH_STUDENT_TASKS_UNSOLVED_FAIL:return function(e,t){return Object.assign({},e,{studentTasksUnsolvedFetchError:t.payload,studentTasksUnsolvedFetchStatus:Gt.a.FAIL})}(e,t);case _a.FETCH_TEACHER_DETAILS_START:case _a.FETCH_STUDENT_DETAILS_START:return function(e){return Object.assign({},e,{taskDetailsFetchError:null,taskDetailsFetchStatus:Gt.a.PENDING})}(e);case _a.FETCH_DETAILS_SUCCESS:return function(e,t){return Object.assign({},e,{taskDetails:t.payload,taskDetailsFetchError:null,taskDetailsFetchStatus:Gt.a.SUCCESS})}(e,t);case _a.FETCH_DETAILS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{taskDetailsFetchError:s,taskDetailsFetchStatus:Gt.a.FAIL})}(e,t);case _a.CLEAR_DETAILS:return function(e){return Object.assign({},e,{taskDetails:null,taskDetailsFetchError:null,taskDetailsFetchStatus:null})}(e);case _a.SET_TEST_FINISHED_FLAG:return function(e){const t=e.taskDetails;if(!t)return e;const s=Object.assign({},t,{lesson:Object.assign({},t.lesson,{isTestFinished:!0})});return Object.assign({},e,{taskDetails:s})}(e);case _a.FETCH_STUDENT_TASK_GROUPS_START:case _a.FETCH_TEACHER_TASK_GROUPS_START:return function(e){return Object.assign({},e,{taskGroupsFetchError:null,taskGroupsFetchStatus:Gt.a.PENDING})}(e);case _a.FETCH_TASK_GROUPS_SUCCESS:return function(e,t){return Object.assign({},e,{lessonElementGroups:t.payload,taskGroupsFetchError:null,taskGroupsFetchStatus:Gt.a.SUCCESS})}(e,t);case _a.FETCH_TASK_GROUPS_FAIL:return function(e,t){const s=t.payload;return Object.assign({},e,{taskGroupsFetchError:s,taskGroupsFetchStatus:Gt.a.FAIL})}(e,t);case _a.CLEAR_PROBLEM_RUN:return function(e){return Object.assign({},e,{lessonElementGroups:[],taskGroupsFetchError:null,taskGroupsFetchStatus:null,problemDetails:null})}(e);case _a.UPDATE_TEACHER_TASK_STATISTICS:return function(e,t){const{taskId:s,statusCounter:a}=t.payload,n=[...e.lessonElementGroups],{group:r,taskIndex:i}=nb(n,s);if(r&&-1!==i&&r.tasks){const e=r.tasks[i],{total:t}=e.statistics;e.statistics=Object.assign({total:t},a)}return Object.assign({},e,{lessonElementGroups:n})}(e,t);case Io.FETCH_STUDENT_COMMENTS_SUCCESS:return function(e,t){const{id:s,taskId:a,status:n,score:r,latestSubmission:i}=t.payload.solutionPreview,o=[...e.lessonElementGroups];let{taskDetails:c}=e;const{group:l,taskIndex:u}=nb(o,a);if(l&&-1!==u&&l.tasks){l.tasks[u].solution={id:s,score:r,status:n}}return c&&((c=Object.assign({},c)).latestSubmission=i),Object.assign({},e,{lessonElementGroups:o,taskDetails:c})}(e,t);case _a.SET_SOLUTION_ID:{const{problemLinkId:s,solutionId:a}=t,n=e.lessonElementGroups.map(e=>(e.problems&&e.problems.forEach(e=>{s===e.id&&"solution"in e&&(e.solution.id=a)}),e),{});return Object.assign({},e,{lessonElementGroups:n})}case _a.SET_PROBLEM_DETAILS:{const{details:s}=t;return Object.assign({},e,{problemDetails:s})}case _a.POST_PROBLEM_SUBMISSION:return Object.assign({},e,{sendingSubmissionStatus:Gt.a.PENDING});case _a.POST_PROBLEM_SUBMISSION_SUCCESS:return Object.assign({},e,{sendingSubmissionStatus:Gt.a.SUCCESS});default:return e}};const ob={user:void 0};var cb=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:ob};const lb=Object(E.createReducer)({sourceCodeMap:{}}).handleAction(Xd.FETCH_DETAILS_SUCCESS,(e,t)=>{const{file:s}=t.payload;return s&&s.sourceCode?Object.assign({},e,{sourceCodeMap:Object.assign({},e.sourceCodeMap,{[s.id]:{sourceCode:s.sourceCode,fetchError:null,fetchStatus:Gt.a.SUCCESS}})}):e}).handleAction(Km.request,(e,t)=>{const{fileId:s}=t.payload;let a=null;return s in e.sourceCodeMap&&({sourceCode:a}=e.sourceCodeMap[s]),Object.assign({},e,{sourceCodeMap:Object.assign({},e.sourceCodeMap,{[s]:{sourceCode:a,fetchError:null,fetchStatus:Gt.a.PENDING}})})}).handleAction(Km.success,(e,t)=>{const{fileId:s,sourceCode:a}=t.payload;return Object.assign({},e,{sourceCodeMap:Object.assign({},e.sourceCodeMap,{[s]:{sourceCode:a,fetchError:null,fetchStatus:Gt.a.SUCCESS}})})}).handleAction(Km.failure,(e,t)=>{const{fileId:s,error:a}=t.payload;let n=null;return s in e.sourceCodeMap&&({sourceCode:n}=e.sourceCodeMap[s]),Object.assign({},e,{sourceCodeMap:Object.assign({},e.sourceCodeMap,{[s]:{sourceCode:n,fetchError:a,fetchStatus:Gt.a.FAIL}})})});var ub=s(262);const db={code:"",isReadonly:!0};var mb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:db,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jm.SAVE_CODE:return Object.assign({},e,{code:t.payload});case jm.TOGGLE_READONLY:return Object.assign({},e,{isReadonly:t.payload});default:return e}};const pb={isEditing:!1,phone:"",city:void 0,venue:void 0,cityList:[],venueList:[],username:"",isSaving:!1,isCitiesLoading:!1,isVenuesLoading:!1,errors:{city:!1,phone:!1,venue:!1,name:!1}};var hb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pb,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qm.START_EDIT:return Object.assign({},e,{isEditing:!0,phone:t.phone,city:t.city||e.city,venue:t.venue||e.venue,username:t.username,isSaving:!1});case Qm.END_EDITING:return Object.assign({},e,{isEditing:!1,isSaving:!1});case Qm.SET_PHONE:return Object.assign({},e,{phone:t.phone});case Qm.SET_CITIES:return Object.assign({},e,{cityList:t.cities});case Qm.SET_VENUES:return Object.assign({},e,{venueList:t.venues});case Qm.CHANGE_CITY:return Object.assign({},e,{city:t.city});case Qm.CHANGE_VENUE:return Object.assign({},e,{venue:t.venue});case Qm.CHANGE_USERNAME:return Object.assign({},e,{username:t.username});case Qm.TOGGLE_CITIES_LOADING:return Object.assign({},e,{isCitiesLoading:t.isLoading});case Qm.TOGGLE_VENUES_LOADING:return Object.assign({},e,{isVenuesLoading:t.isLoading});case Qm.SET_VALIDATION_ERRORS:return Object.assign({},e,{isSaving:!1,errors:Object.assign({},e.errors,{},t.statusMap)});case Qm.SAVE_PROFILE:return Object.assign({},e,{isSaving:!0});default:return e}};const bb=Object(ee.combineReducers)({notifications:Oh,users:cb,courses:qp,courseDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ap,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(E.getType)(Go.request):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING});case Object(E.getType)(Go.success):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.SUCCESS,courseDetails:t.payload});case Object(E.getType)(Go.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL});case Object(E.getType)(Bo):return Object.assign({},Ap,{courseBanners:e.courseBanners});case Object(E.getType)(Ko):return Object.assign({},e,{courseBanners:t.payload});case Object(E.getType)(qo):return Object.assign({},e,{courseBanners:null});default:return e}},courseProgress:Vp,courseVariants:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(E.getType)(Ec.request):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING});case Object(E.getType)(Ec.success):{const{sortBy:s,sortOrder:a}=e,n=Object.assign({},t.payload,{studentIds:Bp(t.payload.studentsMap,s,a)});return Object.assign({},e,{},n,{fetchError:null,fetchStatus:Gt.a.SUCCESS})}case Object(E.getType)(Ec.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL});case Object(E.getType)(fc):return Wp;case Object(E.getType)(gc):{const s=Object.assign({},e.studentsMap);return t.payload.students.forEach(e=>{s[e.id].lessons=Object.assign({},s[e.id].lessons,{},e.lessons)}),Object.assign({},e,{studentsMap:s})}case Object(E.getType)(yc):{const{sortBy:s,sortOrder:a}=t.payload;return Object.assign({},e,{sortBy:s,sortOrder:a,studentIds:Bp(e.studentsMap,s,a)})}default:return e}},groups:Xp,lessons:dh,lessonProgress:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:th,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(E.getType)(_c.request):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING});case Object(E.getType)(_c.success):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.SUCCESS,lessonPreview:t.payload.lessonPreview,progressTable:Object.assign({},t.payload.progressTable,{studentIds:sh(t.payload.progressTable.studentsMap,e.tableSortOptions.field,e.tableSortOptions.order)}),referenceAttendance:eh(t.payload.progressTable)?Object.values(t.payload.progressTable.studentsMap).reduce((e,t)=>(e[t.id]=t.attendance,e),{}):null});case Object(E.getType)(_c.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL});case Object(E.getType)(xc):return e.progressTable?Object.assign({},e,{tableSortOptions:{field:t.payload.field,order:t.payload.order},progressTable:Object.assign({},e.progressTable,{studentIds:sh(e.progressTable.studentsMap,t.payload.field,t.payload.order)})}):e;case Object(E.getType)(Dc):return ah(e,t.payload);case Object(E.getType)(Pc):{if(!e.progressTable||!eh(e.progressTable)||!e.referenceAttendance)return e;const{studentId:s}=t.payload,a=Object.assign({},e.referenceAttendance);return a[s]=e.progressTable.studentsMap[s].attendance,Object.assign({},e,{referenceAttendance:a})}case Object(E.getType)(Rc):{if(!e.referenceAttendance)return e;const{studentId:s,eventId:a}=t.payload;return ah(e,{studentId:s,eventId:a,status:e.referenceAttendance[s]})}case Object(E.getType)(Mc):return th;default:return e}},lessonProgressPreview:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(E.getType)(Cc.request):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.PENDING});case Object(E.getType)(Cc.success):return Object.assign({},e,{fetchError:null,fetchStatus:Gt.a.SUCCESS,progressPreview:t.payload});case Object(E.getType)(Cc.failure):return Object.assign({},e,{fetchError:t.payload,fetchStatus:Gt.a.FAIL});case Object(E.getType)(jc):return Qp;default:return e}},schedule:Ch,materials:ph,solutions:eb,lessonElements:ib,filters:Jp,files:lb,comments:wp,submissions:ub.a,tableSettings:ab,notificationCenter:yh,codeEditor:mb,profileEditor:hb});const Eb=Object(a.createContext)(x.Student);class fb extends a.Component{render(){const{children:e,role:t}=this.props;return n.a.createElement(Eb.Provider,{value:t},e)}}function gb(e){return class extends a.Component{render(){return n.a.createElement(Eb.Consumer,null,t=>n.a.createElement(e,Object.assign({role:t},this.props)))}}}fb.displayName="UserCourseRoleProvider";class yb extends a.Component{static renderDefaultSpin(){return n.a.createElement(ye.a,{progress:!0,size:"l",position:"center"})}static renderErrorPage(e){return e?e instanceof k.a?n.a.createElement(fo,{statusCode:e.statusCode,errorCode:e.code}):n.a.createElement(go,null):null}render(){const{children:e,renderPending:t,renderSuccess:s,renderError:a,fetchError:n,fetchStatus:r}=this.props;return r&&r!==Gt.a.PENDING?r===Gt.a.FAIL?a?a(O.b.text(Object(O.a)(n))):yb.renderErrorPage(n):r===Gt.a.SUCCESS?e||(s?s():null):null:t?t():yb.renderDefaultSpin()}}yb.displayName="FetchHandler";var Sb=yb;const Ob={activation:new C.a("/api/invites/:inviteKey")},vb={get:new C.a("/api/invites/parent/:userId/"),activation:new C.a("/api/invites/parent/:inviteKey/activate")},Nb={get:new C.a("/api/invites/group/:groupId/"),activation:new C.a("/api/invites/group/:inviteKey/activate")};function Ib(){return(Ib=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}var kb=n.a.createElement("style",null,"\n    .st0,.st1,.st2,.st3,.st4{fill:#fff;stroke:#13110c;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}.st1,.st2,.st3,.st4{fill:#ffd33c;stroke:#000}.st2,.st3,.st4{fill:none;stroke:#13110c}.st3,.st4{fill:#ffd33c}.st4{fill:none;stroke:#000}.st5{fill:#ffd33c}.st6{fill:#13110c}.st7{fill:#fff;stroke:#000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10}\n  "),Tb=n.a.createElement("path",{className:"st0",d:"M214.2 269.3c-15.7-2-44.4-8.8-44.4-8.8s-5.2 1.5-10.8 2.5v150h99.5l-4.7-108.4c-16.2-8-29.9-20.3-39.6-35.3zM159 95v154.1c5.5 2.3 10.8 4.7 10.8 4.7s18.3-3.7 33.7-7c-3.3-9.8-5-20.3-5-31.2v-2.9c9 0 16.4-7.3 16.4-16.4 0-6.9-4.2-12.7-10.2-15.2 14-37.8 50.5-64.7 93.3-64.7 4.5 0 8.9.3 13.2.9V95H159z"}),Cb=n.a.createElement("path",{className:"st1",d:"M264.8 230.4c-.1.4-.3.9-.4 1.3.1-.4.3-.8.4-1.3zM253.5 250.2zM259.8 241.4l-.1.1.1-.1zM254.7 248.7s0 .1 0 0c0 .1 0 0 0 0zM252.3 251.6c0 .1 0 .1 0 0 0 .1 0 .1 0 0zM251 253.1c-8.4 9.2-19.4 16.8-30 16.8-1.7 0-4.1-.2-6.8-.6 9.7 15 23.4 27.3 39.6 35.3l-1.8-41.9c-.7-1.7-1-5.1-1-9.6zM297.8 116.4c-42.8 0-79.2 26.9-93.3 64.7 6 2.4 10.2 8.3 10.2 15.2 0 9-7.3 16.3-16.4 16.4v2.9c0 10.9 1.8 21.4 5 31.2 10.6-2.3 19.8-4.4 20.4-5 3-1.3 27.1-50.1 32.9-62 .8-1.6 2.4-2.6 4.2-2.6h3.9l46.3-.2v-59.7c-4.3-.5-8.7-.9-13.2-.9zM263.7 233.7c-.1.3-.2.5-.3.8 0-.2.2-.5.3-.8zM263 235.2c-.1.3-.2.5-.3.8.1-.3.2-.5.3-.8zM264.2 232.2l-.3.9.3-.9zM262.3 236.7c-.1.2-.2.5-.3.7.1-.2.2-.4.3-.7zM260.7 239.8c-.1.2-.2.3-.3.5.1-.2.2-.3.3-.5zM261.6 238.2l-.3.6c0-.1.2-.3.3-.6z"}),jb=n.a.createElement("path",{className:"st0",d:"M347 116h95v89h-95z"}),wb=n.a.createElement("path",{className:"st2",d:"M355 132h79v34h-79z"}),Ab=n.a.createElement("path",{className:"st3",d:"M355 172.8h20V196h-20zM385 172.8h20V196h-20zM414 172.8h20V196h-20z"}),_b=n.a.createElement("path",{className:"st4",d:"M355 124h79M364.8 413H456M274.9 413h74.4M117.8 413h140.7M54 413h22.6"}),Mb=n.a.createElement("path",{className:"st5",d:"M254.2 315c-7.7-5.7-17.2-9.1-27.6-9.1-25.5 0-46.1 20.6-46.1 46s20.6 46 46.1 46c11.8 0 22.5-4.4 30.7-11.6l-3.1-71.3z"}),xb=n.a.createElement("path",{d:"M254.7 314.1c-20.1-14.5-48.6-11.4-64.5 7.9-14.3 17.3-14.1 43 .4 60.2 15.8 18.7 44.4 22 64.1 7.3 1.7-1.3 3.2-2.1 3.5-4.1.3-1.8-.2-4-.2-5.8-.3-7.4-.6-14.7-1-22.1-.6-14.2-1.2-28.4-1.8-42.5-.1-1.3-2.1-1.3-2 0 1 22.5 1.9 44.9 2.9 67.4 0 1 .4 2.6.2 3.5-.3 1-3.2 2.4-4.4 3.2-3 2-6.2 3.7-9.5 4.9-11.7 4.3-25 3.6-36.1-2.1-20.9-10.7-30.4-36.5-20.9-58.1 11.6-26.5 45.2-34.7 68.4-18 1 .8 2-.9.9-1.7z"}),Db=n.a.createElement("path",{className:"st2",d:"M149 273c-5.5 0-10-4.5-10-10.1v-17.8c0-5.6 4.5-10.1 10-10.1M235.2 323c0 2.8-2.3 5.1-5.1 5.1s-5.1-2.3-5.1-5.1 2.3-5.1 5.1-5.1 5.1 2.3 5.1 5.1zM226.7 382.8c0 1.6-1.3 2.9-3 2.9-1.6 0-3-1.3-3-2.9s1.3-2.9 3-2.9c1.6 0 3 1.3 3 2.9zM224.2 344c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9 7.1.1 12.9 5.8 12.9 12.9zM254.8 354.6c0 4.3-3.5 7.8-7.7 7.8-4.3 0-7.7-3.5-7.7-7.8s3.5-7.8 7.7-7.8 7.7 3.5 7.7 7.8zM184.1 369.6c4.2-2.7 12.9 5.7 8.2 12.1"}),Pb=n.a.createElement("path",{className:"st5",d:"M283.7 107.1c0 3-2.4 5.5-5.5 5.5-3 0-5.5-2.4-5.5-5.5 0-3 2.4-5.5 5.5-5.5 3 0 5.5 2.5 5.5 5.5z"}),Rb=n.a.createElement("path",{d:"M282.7 107.1c-.3 5.7-8.9 5.8-8.9 0s8.6-5.7 8.9 0c.1 1.3 2.1 1.3 2 0-.2-3.5-2.8-6.5-6.5-6.5-3.5 0-6.5 2.9-6.5 6.5 0 3.4 2.8 6.3 6.2 6.4 3.8.2 6.6-2.8 6.8-6.4.1-1.3-1.9-1.3-2 0z"}),Lb=n.a.createElement("path",{className:"st6",d:"M196.7 119.9c-.5-.3-1.1-.2-1.4.3l-4.6 7.2c.7.1 1.3.5 1.7 1.1l4.6-7.2c.3-.5.2-1.1-.3-1.4zM187.8 131.8l-4.6 7.2c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.2c-.6-.2-1.2-.6-1.6-1.1zM188.6 127.7l-7.5-5.2c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l7.4 5.2c.2-.7.6-1.3 1.2-1.7zM199.5 135.3l-6.6-4.6c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.5.2-1.1-.2-1.4z"}),Fb=n.a.createElement("path",{className:"st1",d:"M304.5 279H347v-47h-35.2c-4.1 19.4-8.2 37.3-9.7 40.7l2.4 6.3z"}),zb=n.a.createElement("path",{className:"st6",d:"M177.2 302.6l-4.6 7.2c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l4.6-7.2c-.6-.2-1.2-.6-1.6-1.1zM186.1 290.7c-.5-.3-1.1-.2-1.4.3l-4.6 7.2c.7.1 1.3.5 1.7 1.1l4.6-7.2c.3-.5.2-1.1-.3-1.4z"}),Ub=n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M188.8 306.1l-6.6-4.6c-.1.7-.5 1.3-1.1 1.7l6.5 4.5c.2.1.4.2.6.2.3 0 .6-.2.8-.4.4-.5.3-1.1-.2-1.4zM177.9 298.5l-7.5-5.2c-.5-.3-1.1-.2-1.4.3s-.2 1.1.3 1.4l7.4 5.2c.2-.7.7-1.3 1.2-1.7z"})),Hb=n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M239.7 165.8l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.1-1.2-.5-1.6-1.1zM246.6 157.1c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M240.5 161.8l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.4 1.2-1.7zM248.2 167.2l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.6.2-1.2-.3-1.5z"}))),Vb=n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M175.2 397.1l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.1-1.2-.5-1.6-1.1zM182.1 388.4c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M176 393.1l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.4 1.2-1.7zM183.7 398.4l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.3-.5.2-1.1-.3-1.5z"}))),Gb=n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M178.1 233.5l-2.6 4c-.3.5-.2 1.1.3 1.4.2.1.4.2.5.2.3 0 .6-.2.8-.5l2.6-4c-.6-.2-1.1-.6-1.6-1.1zM185 224.7c-.5-.3-1.1-.2-1.4.3l-2.6 4c.7.1 1.3.5 1.7 1.1l2.6-4c.3-.5.2-1.1-.3-1.4z"}),n.a.createElement("g",null,n.a.createElement("path",{className:"st6",d:"M178.9 229.4l-3.4-2.3c-.5-.3-1.1-.2-1.4.3-.3.5-.2 1.1.3 1.4l3.3 2.3c.2-.8.6-1.3 1.2-1.7zM186.7 234.8l-3.4-2.4c-.1.7-.5 1.3-1.1 1.7l3.4 2.4c.2.1.4.2.6.2.3 0 .6-.2.8-.4.2-.6.1-1.2-.3-1.5z"}))),Bb=n.a.createElement("path",{className:"st0",d:"M112.6 286.1l16.9 12.7-29.1 25.5zM54.3 322.5l12.8-16.9 25.4 29.1z"}),Wb=n.a.createElement("path",{className:"st2",d:"M100.7 324.3L94 336.2V356"}),Kb=n.a.createElement("path",{className:"st0",d:"M92.5 298.8l-17.3-25.5 17.8-5.2z"}),qb=n.a.createElement("g",null,n.a.createElement("path",{className:"st7",d:"M308.6 246.5c0-.2.1-.4.1-.6 0 .2 0 .4-.1.6zM309 244.9c.1-.2.1-.5.2-.7-.1.2-.2.5-.2.7zM308.3 248.1c0-.1.1-.3.1-.4-.1.1-.1.3-.1.4zM309.4 243.1c.1-.2.1-.5.2-.7-.1.3-.2.5-.2.7zM306.9 254c0-.1.1-.2.1-.3 0 .1 0 .2-.1.3zM306.6 255.5c0-.2.1-.4.1-.5 0 .2-.1.4-.1.5zM309.8 241.4c.1-.3.1-.5.2-.8-.1.3-.2.5-.2.8zM307.6 251.2v-.2.2zM307.9 249.8c0-.2.1-.3.1-.5 0 .2-.1.3-.1.5zM310.1 239.7c.1-.3.1-.6.2-.8-.1.2-.1.5-.2.8zM302 272.7c.1-.1.1-.2.2-.4-.1.2-.1.3-.2.4zM302.3 272.2c0-.1.1-.2.1-.3-.1.1-.1.2-.1.3zM304.5 279l-2.5-6.3 5 12.7c5.2-1.5 14.3-4.2 21.1-6.5h-23.6zM310.5 237.8c.1-.2.1-.5.2-.7-.1.2-.1.4-.2.7zM310.9 236c.1-.3.1-.5.2-.8-.1.3-.1.5-.2.8zM311.3 234.1c.1-.3.1-.5.2-.8-.1.3-.1.6-.2.8zM311.8 232h20c-3.9-23.5-8.5-48.6-9.3-52.8v.4c-1.5 7.7-6.2 31.2-10.8 52.8 0-.2 0-.3.1-.4zM303.3 268.8c0-.2.1-.3.1-.5 0 .2 0 .4-.1.5zM303.1 269.7c0-.1.1-.3.1-.4 0 .1-.1.2-.1.4zM303.6 267.9c0-.2.1-.3.1-.5 0 .2-.1.4-.1.5zM302.4 271.7c0-.1.1-.2.1-.3 0 .1 0 .2-.1.3zM303.8 267c0-.2.1-.3.1-.5 0 .1 0 .3-.1.5zM302.9 270.4c0-.1.1-.3.1-.4-.1.2-.1.3-.1.4zM302.7 271.1c0-.1.1-.2.1-.4-.1.2-.1.3-.1.4zM306.3 257c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6zM304.1 265.9c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM305.9 258.5c0-.2.1-.4.1-.6 0 .2 0 .4-.1.6zM305.3 261.2c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6zM305.6 259.8c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM304.4 264.8c0-.2.1-.4.1-.6 0 .3-.1.5-.1.6zM304.7 263.7c.1-.2.1-.4.2-.6-.1.2-.2.4-.2.6zM305 262.5c0-.2.1-.4.1-.6 0 .2-.1.4-.1.6z"})),Yb=n.a.createElement("path",{className:"st0",d:"M92.5 298.8l1.2 37.4"}),Jb=n.a.createElement("path",{className:"st7",d:"M320.2 254.5c0 2.8-2.3 5-5 5s-5-2.3-5-5c0-2.8 2.3-5 5-5s5 2.2 5 5zM295.4 167.4c-.2-.2-.5-.4-.6-.9-.4-1.4-.6-1.9-.6-1.9s-.4-1.1.5-1.5c.8-.4 1-.6 1-.6s.9-.8 1-1.8c0-1 .2-5.2.3-6.2 0-1-1.4-.9-1.4-.9s-1.5.6-2.7 1c-1.2.4-1.4-.7-1.4-.7l-1.2-4.8s-.1-1-2-1.5c-1.8-.4-8.6-1.9-8.6-1.9h-.4l-6.5 13.1s-.8 1.6.8 2c1.6.4 2.6.7 2.6.7s.7.2.7.9-.2 3-.4 5.4c-.1 2.4 3.1 2.9 3.1 2.9s1.8.1 2.8.1c1 0 1.1 1.1 1.1 1.1l.7 5h12.2l-1-9.2v-.3z"}),Zb=n.a.createElement("path",{d:"M282.6 153.6c-.3.3-.3.8 0 1.1.3.3.8.3 1.1 0 .3-.3.3-.8 0-1.1-.3-.3-.8-.3-1.1 0z",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10}),Xb=n.a.createElement("path",{className:"st7",d:"M252.8 442h-11.1s-1.7 3.2 0 3.8c1.7.6 19.1 7.2 21.9 8 2.8.8 5.4-1.1 5.4-1.1l-1-10.7h-15.2zM355.6 430h-11.8s-1.8 3.2 0 3.8c1.8.6 20.5 7.2 23.4 8 3 .8 5.8-1.1 5.8-1.1l-1.1-10.7h-16.3z"}),Qb=n.a.createElement("g",null,n.a.createElement("path",{className:"st7",d:"M346.4 369.4c-5-11.8-11-11.8-11-11.8L302 272.7c-.1.1-.1.2-.1.3-3.3 5.9-44.5-2.7-49.6-9.6-.1-.2-.3-.4-.4-.7l7.8 179.3h8.6s8.4-36.4 13-58c4.6-21.5-4.1-29.6-4.1-29.6l6.7-34.5L361.3 430h10.6s-20.5-48.8-25.5-60.6z"})),$b=n.a.createElement("path",{className:"st0",d:"M283.8 319.9l-6.7 34.5s8.7 8.1 4.1 29.6c-1.8 8.4-4.1 19.1-6.4 29h36.4v-54l-27.4-39.1z"}),eE=n.a.createElement("path",{className:"st7",d:"M289.5 293.4l-5.7 26.7"}),tE=n.a.createElement("path",{className:"st1",d:"M296.4 167.6l3.3-.4s2.2-1.7 2.4-4.3c.1-1.3.8-23.3.2-24.9-.5-1.6-2.4-1.8-2.4-1.8s-22.2-.7-24.1-.8c-3.4-.2-5.7.1-5.9 1.7-.2 1.6 1.1 4.7 2.5 7.2.9 1.6 7.1 1.4 7.1 1.4s6.8 1.4 8.6 1.9c1.8.4 2 1.5 2 1.5l1.2 4.8s.2 1.2 1.4.7c1.2-.4 2.7-1 2.7-1s1.4-.1 1.4.9-.2 5.2-.3 6.2c0 1-1 1.8-1 1.8s-.2.2-1 .6c-.8.4-.5 1.5-.5 1.5s.2.5.6 1.9c.6 1.4 1.8 1.1 1.8 1.1z"}),sE=n.a.createElement("path",{className:"st0",d:"M214.8 196.3c0 9-7.3 16.4-16.4 16.4-9.1 0-16.4-7.3-16.4-16.4 0-9 7.3-16.4 16.4-16.4 9 .1 16.4 7.4 16.4 16.4z"}),aE=n.a.createElement("path",{className:"st7",d:"M264.8 177.2s5.2 34.3 0 53.2c-1.8 6.5-6.9 15.2-13.8 22.7 0 5.3.4 9.1 1.3 10.3 5 6.9 46.2 15.5 49.6 9.6 3-5.3 17.7-78.7 20.6-93.5.3-1.3-.8-2.6-2.1-2.6l-55.6.3z"}),nE=n.a.createElement("path",{className:"st7",d:"M169.8 260.4v-6.6s52.7-10.6 54-12c3-1.3 27.1-50.1 32.9-62 .8-1.6 2.4-2.6 4.2-2.6h3.9s5.2 34.3 0 53.2c-4 14.6-24.6 39.5-43.8 39.4-11.6 0-51.2-9.4-51.2-9.4z"}),rE=n.a.createElement("g",null,n.a.createElement("path",{className:"st0",d:"M159 249.1V95h-10v150.5c2.5.6 6.3 2.1 10 3.6zM149 263.8V413h10V262.9c-3.6.7-7.4 1.2-10 .9z"})),iE=n.a.createElement("g",null,n.a.createElement("path",{d:"M169.8 253.8s-20.7-9.6-23.3-8.6c-2.6 1-3.8 14.9 0 17.9 3.8 2.9 23.3-2.6 23.3-2.6v-6.7z",fill:"#fff"}),n.a.createElement("path",{d:"M170.3 253c-5.7-2.6-11.5-5.2-17.4-7.3-1.7-.6-5-2.2-6.9-1.3-2.1 1-2.5 4.7-2.7 6.6-.7 6-.4 13.7 7 13.9 6.6.2 13.5-1.7 19.8-3.5.4-.1.7-.5.7-1v-6.6c0-1.3-2-1.3-2 0v3.8c0 .6-.2 1.4 0 2 .3 1.1-.2.5.7-.1-1.5 1-4.3 1.1-6 1.5-3.6.8-7.4 1.6-11.1 1.8-4.6.3-6.6-.9-7.2-5.6-.3-2.3-.8-9.4 1.5-10.8 1.6-1 6.1 1.4 7.7 2 5 1.9 10 4.1 14.9 6.3 1.1.5 2.1-1.2 1-1.7z"})),oE=n.a.createElement("path",{className:"st7",d:"M311 284.3v11.2l-4-10z"}),cE=n.a.createElement("path",{className:"st0",d:"M68.7 357l8.9 70h36.8l8.9-70z"});const lE=e=>n.a.createElement("svg",Ib({id:"Layer_1",viewBox:"0 0 500 500"},e),kb,Tb,Cb,jb,wb,Ab,_b,Mb,xb,Db,Pb,Rb,Lb,Fb,zb,Ub,Hb,Vb,Gb,Bb,Wb,Kb,qb,Yb,Jb,Zb,Xb,Qb,$b,eE,tE,sE,aE,nE,rE,iE,oE,cE);s.p,s(317);const uE=Object(le.a)("invite-activation"),dE={fetchError:null,fetchStatus:null};let mE;!function(e){e.DEFAULT_INVITE="default",e.GROUP_INVITE="group"}(mE||(mE={}));const pE=Object(I.k)(e=>{let{match:t,inviteType:s}=e;const{inviteKey:r}=t.params,[i,o]=Object(a.useState)(dE);let l="";switch(s){case mE.DEFAULT_INVITE:l=Ob.activation.build({inviteKey:r});break;case mE.GROUP_INVITE:l=Nb.activation.build({inviteKey:r});break;default:l=Ob.activation.build({inviteKey:r})}Object(a.useEffect)(()=>{(async()=>{try{const e=await Object(Do.a)(l);o({response:e,fetchError:null,fetchStatus:Gt.a.SUCCESS})}catch(e){o({fetchError:e,fetchStatus:Gt.a.FAIL})}})()},[r,l]);const{response:u,fetchError:d,fetchStatus:m}=i;let p,h,b;const E=O.b.text({id:"invite-activation",keyset:"page-titles"});if("default"===s&&u&&function(e){return 1===e.organizations.length&&1===e.organizations[0].courses.length&&1===e.organizations[0].courses[0].groups.length}(u)){const{organizations:e}=u,[t]=e,[s]=t.courses,[a]=s.groups;p=w.courseDetails.build({courseId:s.id.toString(),groupId:a.id.toString()}),h=O.b.text({id:"welcome-to-organization",keyset:"invites",params:{organization:t.name}}),b=O.b.text({id:"invite-course-group",keyset:"invites",params:{course:s.title,group:a.name}})}else p=w.root.build(),h=O.b.text({id:"welcome-to-lyceum",keyset:"invites"});const f=Object(a.useCallback)(e=>{e.preventDefault(),window.location.assign(p)},[p]),g=Object(a.useCallback)(()=>n.a.createElement("div",{className:uE("progress")},n.a.createElement(ye.a,{progress:!0,size:"l"}),n.a.createElement("span",{className:uE("progress-text")},O.b.text({id:"profile-activation",keyset:"invites"}))),[]),y=Object(a.useCallback)(()=>n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement("article",{className:uE()},n.a.createElement("section",{className:uE("greeting")},n.a.createElement(lE,{className:uE("greeting-image"),width:500,height:500}),n.a.createElement(Oa,{smaller:!0,className:uE("greeting-heading"),level:1},h),b&&n.a.createElement("p",{className:uE("invite-info")},b),n.a.createElement(Se.a,{className:uE("guide-button"),type:"link",url:p,size:"l",view:"lyceum",theme:"action",onClick:f},O.b.text({id:"start-learning",keyset:"invites"})))))),[p,f,h,b]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,E),n.a.createElement("meta",{name:"title",content:E})),n.a.createElement(yb,{fetchError:d,fetchStatus:m,renderPending:g,renderSuccess:y}))});function hE(e){return class extends a.Component{render(){return n.a.createElement(S,{renderFallback:yo},n.a.createElement(e,this.props))}}}var bE=s(1108),EE=s(1111);s(619);const fE=d.a.with("group-list");class gE extends a.Component{render(){const{courseId:e,groups:t}=this.props;return n.a.createElement("ul",{className:fE()},t.map(t=>n.a.createElement("li",{key:t.id,className:fE("item"),title:t.name},n.a.createElement(o.b,{className:fE("link"),to:w.courseDetails.build({courseId:e,groupId:t.id.toString()})},n.a.createElement("span",{className:fE("link-text")},t.name)))))}}gE.displayName="GroupList";var yE=gE;s(620);const SE=4,OE=d.a.with("course-card");class vE extends a.Component{constructor(){super(...arguments),this.renderTitle=e=>n.a.createElement("h4",{className:OE("title"),title:e},e),this.renderPopup=(e,t)=>n.a.createElement(Ks.a,{cls:OE("popup"),target:"anchor",view:"default"},n.a.createElement("ul",{className:OE("group-list")},t.map(t=>n.a.createElement("li",{key:t.id,className:OE("group"),title:t.name},n.a.createElement(o.b,{className:OE("link"),to:w.courseDetails.build({courseId:e.toString(),groupId:t.id.toString()})},n.a.createElement("span",{className:OE("link-text")},t.name)))))),this.renderSwitcher=()=>n.a.createElement(bE.a,{cls:OE("button"),size:"m",theme:"normal"},n.a.createElement("span",{className:OE("placeholder")},O.b.text({id:"group-selection"})))}render(){const{course:e,groupMap:t}=this.props;if(e.role===x.Student){const[t]=e.groups;return n.a.createElement(o.b,{className:OE({type:"link"}),to:w.courseDetails.build({courseId:e.id.toString(),groupId:t.toString()})},this.renderTitle(e.title))}const s=e.groups.map(e=>t[e]);return n.a.createElement("div",{className:OE()},this.renderTitle(e.title),n.a.createElement("div",{className:OE("groups-wrapper")},s.length>SE?n.a.createElement(EE.a,{hasTick:!0,cls:OE("dropdown"),popup:this.renderPopup(e.id,s),size:"m",switcher:this.renderSwitcher(),theme:"normal"}):n.a.createElement(yE,{courseId:e.id.toString(),groups:s})))}}vE.displayName="CourseCard";var NE=vE;s(663);const IE=d.a.with("courses"),kE=e=>{let{courseList:t,groupMap:s}=e;const a=O.b.text({id:"courses",keyset:"page-titles"}),r=n.a.createElement("ul",{className:IE("list")},t.map(e=>n.a.createElement("li",{key:e.id,className:IE("list-item")},n.a.createElement(NE,{course:e,groupMap:s})))),i=n.a.createElement("p",{className:IE("message")},O.b.text({id:"empty-courses"}));return n.a.createElement("article",{className:IE()},n.a.createElement(c.a,null,n.a.createElement("title",null,a),n.a.createElement("meta",{name:"title",content:a})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement(Oa,{level:1,className:IE("heading")},O.b.text({id:"courses",keyset:"courses"})),t.length?r:i)))};kE.displayName="Courses";var TE=kE;var CE=hE(Object(b.b)(function(e){const{groups:{groupMap:t}}=e;return{courseList:ie(e),groupMap:t}})(TE));const jE=Boolean;function wE(e){return!jE(e)}function AE(e){const t="".concat(e.lastName," ").concat(e.firstName);return e.middleName?"".concat(t," ").concat(e.middleName):t}var _E;const ME=n.a.createContext(()=>{});let xE=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((_E=class extends a.PureComponent{constructor(){super(...arguments),this.state={profile:null,coursesSummary:null,placement:{city:null,venue:null},fetchStatus:null,fetchError:null}}componentDidMount(){this.fetchProfile()}componentDidUpdate(e){e.userId!==this.props.userId&&this.fetchProfile()}fetchProfile(){const{userId:e,withCoursesSummary:t,onlyActiveCourses:s,withParents:a,withChildren:n,withExpelled:r}=this.props,i={withCoursesSummary:t,onlyActiveCourses:s,withExpelled:r},o={withChildren:n,withParents:a};this.setState({profile:null,coursesSummary:null,fetchStatus:Gt.a.PENDING,fetchError:null},async()=>{const t=e?Xm.foreignProfile.build({userId:e},Object.assign({},o,{},i)):Xm.profile.build({},Object.assign({},o,{},i));try{const e=await Object(Do.a)(t);this.setState({profile:e.profile,coursesSummary:e.coursesSummary,placement:e.placement,fetchStatus:Gt.a.SUCCESS})}catch(e){this.setState({fetchError:e,fetchStatus:Gt.a.FAIL})}})}render(){return n.a.createElement(ME.Provider,{value:this.fetchProfile},this.props.children(Object.assign({},this.state,{refreshProfile:this.fetchProfile})))}}).prototype,"fetchProfile",[$.a],Object.getOwnPropertyDescriptor(_E.prototype,"fetchProfile"),_E.prototype),_E);xE.displayName="ProfileProvider";var DE=xE,PE=s(358),RE=s.n(PE),LE=s(1060),FE=s(1092),zE=s(1061),UE=s(1062);const HE=Object(he.compose)(Object(he.composeU)(LE.a,FE.f),Object(he.composeU)(zE.a,FE.d,FE.e),FE.c,UE.a)(FE.a),VE=e=>{const{cls:t,children:s,view:a="lyceum",readOnly:r=!1}=e,i=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["cls","children","view","readOnly"]);return n.a.createElement(HE,Object.assign({className:t,theme:"normal",readOnly:r,view:a},i),s)};VE.displayName="Textinput";const GE=d.a.with("profile-info"),BE=e=>{let{phone:t}=e;const s=Object(b.d)(np),r=Object(b.d)(rp),{phone:i}=Object(b.d)(pp),o=Object(b.d)(hp),c=Object(b.c)(),l=s?r:t,u=Object(a.useCallback)(e=>{const{value:t}=e.target,s=t.replace(/\s/g,"").replace(/_/g,"");c(function(e){return{type:Qm.SET_PHONE,phone:e}}(s)),i&&c(ap({phone:!1}))},[c,i]);return n.a.createElement("div",{className:GE("item")},n.a.createElement("div",{className:GE("item-label")},O.b.text({id:"userInfo.phone",keyset:"profile"})),n.a.createElement("div",{className:GE("item-content",{field:"phone"})},s?n.a.createElement(RE.a,{mask:"+7 999 999 99 99",value:l,onChange:u},e=>n.a.createElement("div",{className:GE("validation-wrapper",{error:i})},n.a.createElement(VE,Object.assign({},e,{disabled:o,id:"phone-number",cls:GE("input"),placeholder:O.b.text({id:"phonePlaceholder",keyset:"profile"}),size:"m",type:"text"})))):n.a.createElement("a",{href:"tel:".concat(l),className:GE("item-content",{field:"phone"})},n.a.createElement("b",null,l)),i&&n.a.createElement("div",{className:GE("validation-error")},O.b.text({id:"validationLabel.phone",keyset:"profile"}))))};BE.displayName="ProfileInfoFieldPhone";var WE=BE;const KE=d.a.with("profile-info"),qE=e=>{let{mail:t}=e;const s=Object(b.d)(np);return n.a.createElement("div",{className:KE("item")},n.a.createElement("div",{className:KE("item-label")},O.b.text({id:"userInfo.email",keyset:"profile"})),s?n.a.createElement(VE,{disabled:!0,id:"profile-mail",cls:KE("input"),size:"m",type:"text",value:t}):n.a.createElement("a",{href:"mailto:".concat(t),className:KE("item-content",{field:"email"})},n.a.createElement("b",null,t)))};qE.displayName="ProfileInfoFieldMail";var YE=qE,JE=s(1093);const ZE=d.a.with("profile-info"),XE=e=>{let{city:t}=e;const s=Object(b.d)(np),r=Object(b.d)(ip),i=Object(b.d)(lp),o=Object(b.d)(dp),{city:c}=Object(b.d)(pp),l=Object(b.c)(),u=s?r:t,d=Object(a.useCallback)(e=>{let[t]=e;const s=i.find(e=>{let{id:s}=e;return s===t});s&&l(function(e){return{type:Qm.CHANGE_CITY,city:e}}(s)),c&&l(ap({city:!1}))},[c,i,l]);return n.a.createElement("div",{className:ZE("item")},n.a.createElement("div",{className:ZE("item-label")},O.b.text({id:"userInfo.city",keyset:"profile"})),n.a.createElement("div",{className:ZE("item-content",{field:"city"})},s?n.a.createElement("div",{className:ZE("validation-wrapper",{error:c})},n.a.createElement(JE.a,{val:r?r.id:void 0,disabled:o,theme:"normal",type:"radio",size:"m",view:"classic",placeholder:O.b.text({id:"chooseCityPlaceholder",keyset:"profile"}),onChange:d},i.map(e=>n.a.createElement(JE.a.Item,{key:e.id,val:e.id},e.name)))):u,c&&n.a.createElement("div",{className:ZE("validation-error")},O.b.text({id:"validationLabel.city",keyset:"profile"}))))};XE.displayName="ProfileInfoFieldCity";var QE=XE;const $E=d.a.with("profile-info"),ef=e=>{let{venueName:t}=e;const s=Object(b.d)(np),r=Object(b.d)(cp),i=Object(b.d)(up),o=Object(b.d)(mp),{venue:c}=Object(b.d)(pp),l=Object(b.c)(),u=Object(a.useCallback)(e=>{let[t]=e;const s=i.find(e=>{let{id:s}=e;return s===t});s&&l(ep(s)),c&&l(ap({venue:!1}))},[i,c,l]);return n.a.createElement("div",{className:$E("item")},n.a.createElement("div",{className:$E("item-label")},O.b.text({id:"userInfo.venue",keyset:"profile"})),n.a.createElement("div",{className:$E("item-content",{field:"venue"})},s?n.a.createElement("div",{className:$E("validation-wrapper",{error:c})},n.a.createElement(JE.a,{val:r?r.id:void 0,disabled:o,theme:"normal",type:"radio",size:"m",view:"classic",placeholder:O.b.text({id:"chooseVenuePlaceholder",keyset:"profile"}),onChange:u},i.map(e=>n.a.createElement(JE.a.Item,{key:e.id,val:e.id},e.name)))):t,c&&n.a.createElement("div",{className:$E("validation-error")},O.b.text({id:"validationLabel.venue",keyset:"profile"}))))};ef.displayName="ProfileInfoFieldVenue";var tf=ef;s(718);const sf=d.a.with("profile-info"),af=e=>{const{cls:t,profile:s,placement:r}=e,i=Object(b.d)(np),o=Object(b.c)(),c=Object(a.useContext)(ME),l=Object(b.d)(hp);if([s.email,s.phone,s.city,s.birthDate,s.school,s.schoolClass].every(wE))return null;let u=null,d=null;s.birthDate&&(d=Te.DateTime.fromISO(s.birthDate),u=Number(Te.Interval.fromDateTimes(d,Te.DateTime.local()).toDuration().toFormat("yy")));const m=s.isEditable,p=O.b.text({id:"editDisabledLabel",keyset:"profile"});return n.a.createElement("section",{className:Object(le.b)(t,sf())},n.a.createElement("div",{className:sf("contacts")},s.email&&n.a.createElement(YE,{mail:s.email}),r.city&&n.a.createElement(QE,{city:r.city.name}),n.a.createElement(WE,{phone:s.phone}),r.venue&&n.a.createElement(tf,{venueName:r.venue.name}),s.birthDate&&n.a.createElement("div",{className:sf("item")},n.a.createElement("div",{className:sf("item-label")},O.b.text({id:"userInfo.birthday",keyset:"profile"})),n.a.createElement("div",{className:sf("item-content",{field:"birthday"})},n.a.createElement("time",{dateTime:s.birthDate,className:sf("contacts-item",{field:"birth-date"})},Te.DateTime.fromISO(s.birthDate).toFormat("d MMMM yyyy"),v,"(".concat(O.b.text({id:"N-years",keyset:"profile",params:{count:u,n:u}}),")"))))),m&&!i&&n.a.createElement(ve,{enabled:!m,content:p},n.a.createElement("span",null,n.a.createElement(Se.a,{view:"lyceum",disabled:!m,size:"l",theme:"normal",onClick:()=>{o(function(e,t,s,a){return{type:Qm.START_EDIT,phone:e,city:t,venue:s,username:a}}(s.phone,r.city,r.venue,AE(s)))}},O.b.text({id:"editProfileButton",keyset:"profile"})))),m&&i&&n.a.createElement(Se.a,{view:"lyceum",size:"l",theme:"action",onClick:()=>{o(function(e){return{type:Qm.SAVE_PROFILE,callback:e}}(c))},disabled:l},O.b.text({id:"saveProfileButton",keyset:"profile"})))};af.displayName="ProfileInfo";var nf=af;s(719);const rf=d.a.with("user"),of=e=>{let{userId:t,node:s,className:a}=e;if(!t)return s;const r=Ls.profile.build({userId:t.toString()});return n.a.createElement(Ln.a,{className:a,to:r},s)};of.displayName="wrapInProfileLink";const cf=Object(a.forwardRef)((e,t)=>{const{addonAfter:s,addonBefore:a,className:r,size:i="m",avatar:o,displayName:c,renderDisplayName:l,userId:u,avatarOutlineColor:d,withAvatarOutline:m,withStrikedName:p}=e,h=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["addonAfter","addonBefore","className","size","avatar","displayName","renderDisplayName","userId","avatarOutlineColor","withAvatarOutline","withStrikedName"]);return n.a.createElement("div",Object.assign({ref:t,className:Object(le.b)(r,rf({size:i}))},h),of({userId:u,node:n.a.createElement(Ds,{className:rf("avatar",{outlined:m}),style:{borderColor:d},size:i,avatarId:o,userId:u})}),n.a.createElement("div",{className:rf("info")},a,l?l({className:rf("name",{striked:p})}):of({userId:u,node:n.a.createElement("span",{className:rf("name",{striked:p})},c)}),s))});function lf(e,t){return e.groups.groupMap[t]}function uf(e){return e.charAt(0).toUpperCase()+e.slice(1)}function df(e){return e.items.map(e=>{let{dayOfWeek:t,startTime:s}=e;return uf(Te.DateTime.fromISO(s).set({weekday:t}).toFormat("ccc".concat(v,"HH:mm")))}).join(", ")}const mf={certificateCheck:new C.a("/certificate/check/")};s(720);const pf=d.a.with("student-profile-course-card"),hf=e=>"".concat(e.substr(0,4)," ").concat(e.substr(4,5)),bf=e=>{const{certificateId:t,certificateNumber:s,eventsCount:a,group:r,schedulePlan:i,status:c,title:l,rating:u,visitedAttendancesCount:d,profile:m}=e,p=void 0!==d&&void 0!==a;return n.a.createElement("section",{className:pf({status:c})},n.a.createElement(Oa,{level:4,className:pf("course-title"),title:l},(e=>{let{enableLinks:t,id:s,group:a,title:r}=e;return t?n.a.createElement(o.b,{className:pf("course-link"),to:w.courseDetails.build({courseId:s.toString(),groupId:a.id.toString()})},r):r})(e)),c!==xp.Enrolled&&n.a.createElement("p",{className:pf("status",{type:c})},n.a.createElement("strong",{className:pf("status-text")},O.b.text({id:"status-".concat(c),keyset:"students"}))),n.a.createElement("div",{className:pf("info")},n.a.createElement("main",{className:pf("main")},n.a.createElement("p",{className:pf("group-name"),title:r.name},r.name),!t&&i&&n.a.createElement("p",{className:pf("schedule")},df(i)),t&&s&&n.a.createElement(Ln.a,{className:pf("check-certificate-link"),behavior:"external",href:mf.certificateCheck.build({},{certNumber:s,lastName:m.lastName})},n.a.createElement("span",{className:pf("check-certificate-label")},O.b.text({id:"check-certificate",keyset:"certificates"})))),n.a.createElement("aside",{className:pf("summary")},n.a.createElement("p",{className:pf("rating")},O.b.text({id:"rating-N",keyset:"profile",params:{n:0===u?0:u.toFixed(2)}})),t&&s?n.a.createElement("div",{className:pf("certificate-number")},O.b.text({id:"certificate-number",keyset:"certificates",params:{number:hf(s)}})):p&&n.a.createElement("p",{className:pf("visits")},O.b.element({id:"N/M-visits",keyset:"profile",params:{n:n.a.createElement("b",{className:pf("count")},d),m:a}})))),n.a.createElement("footer",{className:pf("footer")},(e=>{let{enableLinks:t,teachersList:s}=e;return s?s.map(e=>n.a.createElement(cf,{className:pf("teacher"),avatar:e.avatar,displayName:e.displayName,userId:t?e.id:void 0,addonAfter:n.a.createElement("p",{className:pf("teacher-caption")},O.b.text({id:"role-teacher",keyset:"profile"}))})):null})(e)))};bf.displayName="StudentProfileCourseCard";var Ef=Object(b.b)(function(e,t){return{enableLinks:oe(e,t.id.toString())&&lf(e,t.group.id.toString())}})(bf);s(721);const ff=d.a.with("teacher-profile-course-card"),gf=e=>{const{group:t,schedulePlan:s,title:a,endedEvents:r}=e;return n.a.createElement("section",{className:ff()},n.a.createElement(Oa,{level:4,className:ff("course-title"),title:a},yf(e)),n.a.createElement("div",{className:ff("info")},n.a.createElement("main",{className:ff("main")},n.a.createElement("p",{className:ff("group-name"),title:t.name},t.name),s&&n.a.createElement("p",{className:ff("schedule")},df(s))),n.a.createElement("aside",{className:ff("summary")},n.a.createElement("p",{className:ff("finished-lessons")},O.b.element({id:"finished-lessons-N",keyset:"profile",params:{n:n.a.createElement("b",null,r)}})))),n.a.createElement("footer",{className:ff("footer")},Sf(e)))};gf.displayName="TeacherProfileCourseCard";const yf=e=>{let{enableLinks:t,id:s,group:a,title:r}=e;return t?n.a.createElement(o.b,{className:ff("course-link"),to:_.courseProgress.build({courseId:s.toString(),groupId:a.id.toString()})},r):r},Sf=e=>{let{enableLinks:t,bestStudent:s}=e;if(!s)return null;const a=n.a.createElement("p",{className:ff("best-student-caption")},O.b.element({id:"best-student-RATING",keyset:"profile",params:{rating:n.a.createElement("b",{className:ff("student-rating",{positive:!0})},0===s.rating?0:s.rating.toFixed(2))}}));return n.a.createElement(cf,{className:ff("best-student"),avatar:s.avatar,displayName:s.displayName,userId:t?s.id:void 0,addonAfter:a})};Sf.displayName="renderBestStudent";var Of=Object(b.b)(function(e,t){return{enableLinks:oe(e,t.id.toString())&&lf(e,t.group.id.toString())}})(gf);s(722);const vf=d.a.with("user-info"),Nf=e=>{let{cls:t,user:s}=e;const a=n.a.createElement("a",{className:vf("email"),href:"mailto:".concat(s.email)},s.email);return n.a.createElement(cf,{size:"l",className:Object(le.b)(t,vf()),userId:s.id,avatar:s.avatar,displayName:s.displayName,addonAfter:a})};Nf.displayName="UserInfo";var If=Nf;s(723);const kf=d.a.with("profile-info"),Tf=e=>{const{relatives:t,type:s}=e;return t&&t.length?n.a.createElement("section",{className:kf("relatives")},n.a.createElement("div",{className:kf("item-label")},O.b.text({id:s,keyset:"profile"})),t.map(e=>n.a.createElement(If,{key:e.id,user:e}))):null};Tf.displayName="ProfileRelatives";var Cf=Tf;s(724);const jf=d.a.with("user-tag"),wf=e=>{let{children:t,color:s}=e;return n.a.createElement("span",{className:jf(),style:{backgroundColor:s}},t)};wf.displayName="UserTag";var Af=wf;s(725);const _f=d.a.with("user-profile"),Mf=e=>{let{profile:t}=e;const s=Object(b.d)(np),r=Object(b.d)(op),{name:i}=Object(b.d)(pp),o=Object(b.c)(),c=Object(a.useCallback)(e=>{const{value:t}=e.target;o(function(e){return{type:Qm.CHANGE_USERNAME,username:e}}(t)),i&&o(ap({name:!1}))},[o,i]);return n.a.createElement("section",{className:_f("user-section")},n.a.createElement(Ds,{className:_f("avatar"),alt:t.displayName,avatarId:t.avatar,userId:t.id,size:"xl"}),n.a.createElement("div",{className:_f("name-and-tags")},s?n.a.createElement("div",{className:_f("validation-wrapper",{error:i})},n.a.createElement(VE,{id:"user-fullname-input",cls:_f("input"),size:"l",type:"text",value:r,onChange:c})):n.a.createElement(Oa,{level:1},AE(t)),i&&n.a.createElement("div",{className:_f("validation-error")},O.b.text({id:"validationLabel.name",keyset:"profile"})),n.a.createElement("div",{className:_f("tags")},t.tags.map(e=>n.a.createElement(Af,{key:e.id,color:e.color},e.name)))))};Mf.displayName="ProfileUserSection";var xf=Mf;s(726);const Df=d.a.with("foreign-profile");class Pf extends a.Component{renderPage(e,t,s){return()=>{if(!e||!s)return null;const a=O.b.text({id:"profile",keyset:"page-titles",params:{user:e.displayName}});return n.a.createElement("article",{className:Df()},n.a.createElement(c.a,null,n.a.createElement("title",null,a),n.a.createElement("meta",{name:"title",content:a})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement(xf,{profile:e}),n.a.createElement(nf,{cls:Df("contacts-section"),profile:e,placement:s}),n.a.createElement("div",{className:Df("relatives-section")},n.a.createElement(Cf,{relatives:e.children,type:"children"}),n.a.createElement(Cf,{relatives:e.parents,type:"parents"})),this.renderCourseSection(t,e))))}}renderCourseSection(e,t){if(!e)return null;const s=0!==e.student.length,a=0!==e.teacher.length;return[s,a].every(wE)?null:n.a.createElement("section",{className:Df("course-section")},n.a.createElement(Oa,{level:2},O.b.text({id:"courses",keyset:"courses"})),a&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{className:Df("course-sub-heading")},O.b.text({id:"role-teacher",keyset:"profile"})),this.renderCourseList(x.Teacher,e.teacher,t)),s&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{className:Df("course-sub-heading")},O.b.text({id:"role-student",keyset:"profile"})),this.renderCourseList(x.Student,e.student,t)))}renderCourseList(e,t,s){return n.a.createElement("ul",{className:Df("course-list")},t.map(t=>{const a="".concat(t.id,"-").concat(t.group.id);return n.a.createElement("li",{key:a,className:Df("course-item")},(()=>{switch(e){case x.Student:return n.a.createElement(Ef,Object.assign({},t,{profile:s}));case x.Teacher:case x.Methodist:return n.a.createElement(Of,t);default:throw new T("Role not supported",{role:e})}})())}))}render(){const e=Number(this.props.match.params.userId);return n.a.createElement(DE,{withCoursesSummary:!0,onlyActiveCourses:!0,withChildren:!0,withParents:!0,withExpelled:!0,userId:e},e=>{let{profile:t,coursesSummary:s,fetchStatus:a,fetchError:r,placement:i}=e;return n.a.createElement(Sb,{fetchError:r,fetchStatus:a,renderSuccess:this.renderPage(t,s,i)})})}}Pf.displayName="ForeignProfilePage";var Rf=hE(Object(I.k)(Pf)),Lf=s(103),Ff=s.n(Lf);s(730);const zf=d.a.with("parent-invite");var Uf=e=>{let{parentInvite:t}=e;const s=Object(b.c)(),r=Object(a.useCallback)(()=>{s(Object(sn.a)({i18n:{id:"copy-link-success-message",keyset:"common"},type:an.b.SUCCESS}))},[s]);return t&&t.url?n.a.createElement("div",{className:zf()},n.a.createElement("div",{className:zf("wrapper")},n.a.createElement("div",{className:zf("heading")},n.a.createElement("b",{className:zf("subtitle")},O.b.text({id:"parent-invite",keyset:"invites"})),n.a.createElement(VE,{view:"classic",size:"l",className:zf("input"),value:t.url||""}),n.a.createElement(Ff.a,{text:t.url||"",onCopy:r},n.a.createElement(Se.a,{className:zf("control-button"),theme:"action",view:"lyceum",size:"l",title:O.b.text({id:"copy",keyset:"common"})},O.b.text({id:"copy",keyset:"common"})))),n.a.createElement("p",{className:zf("description")},O.b.text({id:"parent-invite-description",keyset:"invites"})))):null};s(731);const Hf=d.a.with("own-profile");class Vf extends a.Component{renderPage(e,t,s){return()=>{if(!e||!s)return null;const a=O.b.text({id:"profile",keyset:"page-titles",params:{user:e.displayName}});return n.a.createElement("article",{className:Hf()},n.a.createElement(c.a,null,n.a.createElement("title",null,a),n.a.createElement("meta",{name:"title",content:a})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement(xf,{profile:e}),n.a.createElement(nf,{cls:Hf("contacts-section"),profile:e,placement:s}),n.a.createElement("div",{className:Hf("relatives-section")},n.a.createElement(Cf,{relatives:e.children,type:"children"}),n.a.createElement(Cf,{relatives:e.parents,type:"parents"})),n.a.createElement(Uf,{parentInvite:e.invite}),this.renderCourseSection(t,e))))}}renderCourseSection(e,t){if(!e)return null;const s=0!==e.student.length,a=0!==e.teacher.length;return[s,a].every(wE)?null:n.a.createElement("section",{className:Hf("course-section")},n.a.createElement(Oa,{level:2},O.b.text({id:"courses",keyset:"courses"})),a&&n.a.createElement(n.a.Fragment,null,s&&n.a.createElement("h3",{className:Hf("course-sub-heading")},O.b.text({id:"role-teacher",keyset:"profile"})),this.renderCourseList(x.Teacher,e.teacher,t)),s&&n.a.createElement(n.a.Fragment,null,a&&n.a.createElement("h3",{className:Hf("course-sub-heading")},O.b.text({id:"role-student",keyset:"profile"})),this.renderCourseList(x.Student,e.student,t)))}renderCourseList(e,t,s){return n.a.createElement("ul",{className:Hf("course-list")},t.map(t=>{const a="".concat(t.id,"-").concat(t.group.id);return n.a.createElement("li",{key:a,className:Hf("course-item")},n.a.createElement("div",{className:Hf("course-card")},(()=>{switch(e){case x.Student:return n.a.createElement(Ef,Object.assign({},t,{profile:s}));case x.Teacher:case x.Methodist:return n.a.createElement(Of,t);default:throw new T("Role not supported",{role:e})}})()))}))}render(){return n.a.createElement(DE,{withCoursesSummary:!0,onlyActiveCourses:!0,withChildren:!0,withParents:!0,withExpelled:!0},e=>{let{profile:t,coursesSummary:s,placement:a,fetchStatus:r,fetchError:i}=e;return n.a.createElement(Sb,{fetchError:i,fetchStatus:r,renderSuccess:this.renderPage(t,s,a)})})}}Vf.displayName="OwnProfilePage";var Gf=hE(Object(I.k)(Vf)),Bf=s(1063),Wf=s(1134),Kf=s(1064);s(732);const qf=d.a.with("achievement"),Yf=()=>n.a.createElement("span",{className:qf()},n.a.createElement(ge.a,{size:"l",type:"thumbs-up"}));Yf.displayName="Achievement";var Jf=Yf;s(733);const Zf=d.a.with("progress-bar");class Xf extends a.Component{render(){const{percentage:e,size:t="auto",theme:s="light"}=this.props,a={width:"".concat(e,"%")};return n.a.createElement("div",{className:Zf({size:t,theme:s})},e?n.a.createElement("div",{className:Zf("fill"),style:a}):null)}}Xf.displayName="ProgressBar";var Qf=Xf;s(734);const $f=d.a.with("lesson-card");class eg extends a.Component{constructor(e){super(e),this.isOverDeadline=!1,this.isNearDeadline=!1,this.daysBeforeDeadline=null,this.numTotal=void 0,this.renderLessonInfo=()=>{const{deadline:e,role:t}=this.props;let s;switch(t){case x.Student:break;case x.Teacher:case x.Methodist:s=this.renderTasksInfo();break;default:throw new T("Role not supported",{role:t})}return n.a.createElement("ul",{className:$f("lesson-info")},s&&n.a.createElement("li",{className:$f("info-item")},s),Boolean(e)&&n.a.createElement("li",{className:$f("info-item")},this.renderDeadlineInfo()))},this.renderCaptions=()=>{const{numPassed:e,role:t}=this.props,{numTotal:s}=this,a=$f("current-count",{"non-zero":Boolean(e)});let r;switch(t){case x.Student:r="N/M-tasks-passed";break;case x.Teacher:case x.Methodist:r="N/M-passes";break;default:throw new T("Role not supported",{role:t})}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:$f("brief-caption")},n.a.createElement("span",{className:a},e),v,"/",s),n.a.createElement("span",{className:$f("full-caption")},O.b.element({id:r,params:{m:s,n:n.a.createElement("span",{className:a},e)}})))},this.renderTasksInfo=()=>{const{numTasks:e}=this.props;return e?O.b.element({id:"N-tasks",params:{count:e,n:n.a.createElement("b",{className:$f("tasks-count")},e)}}):null},this.renderDeadlineInfo=()=>{const{deadline:e}=this.props,{isOverDeadline:t}=this;return e?n.a.createElement("span",{className:$f("deadline")},t&&n.a.createElement(n.a.Fragment,null,n.a.createElement(ge.a,{cls:$f("deadline-icon"),size:"s",type:"deadline"}),v),O.b.text({id:"before-DATE",params:{date:Ce.fromISO(e).toFormat("d MMM HH:mm")}}),this.renderDeadlineMessage()):null},this.renderDeadlineMessage=()=>{const{daysBeforeDeadline:e,isOverDeadline:t,isNearDeadline:s}=this;if(!s||null===e)return null;const a=t?O.b.text({id:"deadline-over"}):n.a.createElement("span",{className:$f("warning")},e>0&&O.b.text({id:"N-days-left",params:{n:e,count:e}}));return n.a.createElement("span",{className:$f("deadline-message")},v,"—",v,a)};const{deadline:t,numTasks:s,numStudents:a,role:r}=this.props;switch(r){case x.Student:this.numTotal=s;break;case x.Teacher:case x.Methodist:this.numTotal=a}const i=t?Ce.fromISO(t):null,o=i?i.diffNow("days").days:null;null!==o&&(this.isOverDeadline=o<0,this.isNearDeadline=o<7,this.daysBeforeDeadline=Math.ceil(o))}render(){const{isOverDeadline:e,numTotal:t}=this,{title:s,isHidden:a,numPassed:r,hasAchievement:i,narrow:o}=this.props,c=t?Math.floor(r/t*100):0;return n.a.createElement("div",{className:$f({"hidden-lesson":a,narrow:o})},n.a.createElement("div",{className:$f("lesson")},n.a.createElement("h4",{className:$f("lesson-title")},s),this.renderLessonInfo()),n.a.createElement("div",{className:$f("progress")},n.a.createElement(Qf,{percentage:c,size:o?"small":"medium",theme:e?"dark":"light"}),n.a.createElement("span",{className:$f("percentage",{"non-zero":Boolean(r)})},c," %"),this.renderCaptions()),n.a.createElement("ul",{className:$f("indicator-list")},e&&n.a.createElement("li",{className:$f("indicator-item")},n.a.createElement(Ke,{size:"large",type:Ve.Finished})),i&&n.a.createElement("li",{className:$f("indicator-item")},n.a.createElement(Jf,null))),a&&n.a.createElement(ve,{content:O.b.text({id:"lesson-hidden"})},n.a.createElement("span",{className:$f("visibility-indicator")},n.a.createElement(ge.a,{cls:$f("eye-icon"),size:"l",type:"eye-closed"}))))}}eg.displayName="LessonCard";var tg=eg;s(735);const sg=d.a.with("link-list");class ag extends a.Component{render(){const{items:e,itemType:t,listType:s}=this.props;let a;switch(t){case"link":a=e=>n.a.createElement(o.b,Object.assign({className:sg("link")},e),e.children);break;case"navlink":a=e=>n.a.createElement(o.c,Object.assign({exact:!0,activeClassName:sg("link_active"),className:sg("link")},e),e.children)}return n.a.createElement("ul",{className:sg({type:s})},e.map(e=>n.a.createElement("li",{key:e.id,className:sg("item")},n.a.createElement(a,{to:e.url},e.component))))}}ag.displayName="LinkList";var ng=ag;s(286);const rg=d.a.with("lessons-dashboard"),ig=e=>{let{fetchError:t,fetchStatus:s,role:r,lessons:i,courseId:o,groupId:c}=e;const l=Object(a.useCallback)(()=>n.a.createElement("div",{className:rg("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"})),[]),u=Object(a.useCallback)(e=>n.a.createElement("p",{className:rg("message",{error:!0})},e),[]),d=Object(a.useCallback)(()=>{if(!i.length)return n.a.createElement("p",{className:rg("message")},O.b.text({id:"no-lessons-message-".concat(r),keyset:"lessons"}));const e=i.map(e=>({id:e.id,component:n.a.createElement(tg,Object.assign({},e,{role:r})),url:w.lessonDetails.build({courseId:o,groupId:c,lessonId:e.id.toString()})}));return n.a.createElement(ng,{items:e,itemType:"link",listType:"main"})},[r,i,o,c]);return n.a.createElement("div",{className:rg("content-wrapper")},n.a.createElement(Sb,{fetchError:t,fetchStatus:s,renderPending:l,renderError:u,renderSuccess:d}))};ig.displayName="LessonsDashboard";const og=d.a.with("lessons-dashboard"),cg=e=>{let{fetchStatus:t,fetchError:s,courseId:a,groupId:r,role:i,lessons:o,clearLessonsAction:c,fetchStudentLessonsAction:l}=e;return Object(Bf.a)(function(){t!==Gt.a.SUCCESS&&l({courseId:Number(a),groupId:Number(r)})}),Object(Wf.a)(()=>(l({courseId:Number(a),groupId:Number(r)}),()=>{c()}),[a,r]),Object(Kf.a)(()=>{c()}),n.a.createElement("section",{className:og()},n.a.createElement(Oa,{level:2},O.b.text({id:"lessons"})),n.a.createElement(ig,{fetchStatus:t,fetchError:s,courseId:a,groupId:r,role:i,lessons:o}))};cg.displayName="LessonsDashboardWrapper";const lg=Object(b.b)(function(e){return{lessons:sl(e),fetchError:rl(e),fetchStatus:il(e)}},function(e){return Object(ee.bindActionCreators)({fetchStudentLessonsAction:Jc.request,clearLessonsAction:Xc},e)})(cg);s(736);const ug=d.a.with("aside-section");class dg extends a.Component{render(){const{cls:e,title:t,body:s,tabName:a,tabUrl:r}=this.props;return n.a.createElement("section",{className:Object(le.b)(e,ug())},n.a.createElement(Oa,{smallerOnDesktop:!0,level:2},t),n.a.createElement("div",{className:ug("body")},s),r&&a&&n.a.createElement(da,{wideOnMobile:!0,to:r,view:"button"},a))}}dg.displayName="AsideSection";var mg=dg;s(737);const pg=d.a.with("solution-status");class hg extends a.Component{renderStatus(){const{scoreMax:e,score:t,type:s,waitingCount:a=1}=this.props;switch(s){case Ze.Accepted:case Ze.AcceptedAfterDeadline:{const a=n.a.createElement("span",{className:pg("text")},O.b.text({id:"task-status-pass"}));return n.a.createElement(n.a.Fragment,null,s===Ze.Accepted?a:n.a.createElement(ve,{content:O.b.text({id:"status-accepted-after-deadline",keyset:"solutions"})},a),n.a.createElement("span",{className:pg("score")}," ",t," "),n.a.createElement("span",{className:pg("max-score")},"/",e))}case Ze.PartialAccepted:return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:pg("text")},O.b.text({id:"task-status-pass"})),n.a.createElement("span",{className:pg("score")}," ",t," "),n.a.createElement("span",{className:pg("max-score")},"/",e));case Ze.NotSolved:return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:pg("text")},O.b.text({id:"problem-status-not-solved"})),n.a.createElement("span",{className:pg("score")}," ",t," "),n.a.createElement("span",{className:pg("max-score")},"/",e));case Ze.Wrong:return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:pg("text")},O.b.text({id:"task-status-wrong"})),n.a.createElement("span",{className:pg("score")}," ",t," "),n.a.createElement("span",{className:pg("max-score")},"/",e));case Ze.Rework:return n.a.createElement("span",{className:pg("text")},O.b.text({id:"task-status-redo"}));case Ze.Review:case Ze.AutoReview:return n.a.createElement(n.a.Fragment,null,O.b.text({id:"task-status-waiting",params:{count:a}}),a>1&&n.a.createElement(n.a.Fragment,null," ",a));default:return null}}render(){const{type:e}=this.props;return n.a.createElement("div",{className:pg({type:e})},this.renderStatus())}}hg.displayName="SolutionStatus";var bg=hg;s(738);const Eg=d.a.with("student-task");class fg extends a.Component{render(){const{solution:e,scoreMax:t,title:s,lesson:a,hasManualCheck:r}=this.props.task;return n.a.createElement("div",{className:Eg()},n.a.createElement(it,{isTaskManuallyChecked:r,taskTitle:s,lesson:a,scoreMax:t,score:e?e.score:void 0,solutionStatus:e?e.status.type:void 0}),e&&n.a.createElement("span",{className:Eg("status")},n.a.createElement(bg,{scoreMax:t,score:e.score,type:e.status.type})))}}fg.displayName="StudentTask";var gg=fg;class yg extends a.Component{render(){return n.a.createElement(mg,{title:O.b.text({id:"tasks"}),body:this.renderTasksList()})}renderTasksList(){const{courseId:e,groupId:t,tasks:s}=this.props,a=s.map(s=>({id:s.id,component:n.a.createElement(gg,{key:s.id,task:s}),url:A.taskDetails.build({courseId:e,groupId:t,lessonId:s.lesson.id.toString(),taskId:s.id.toString()})}));return n.a.createElement(ng,{items:a,itemType:"link",listType:"aside"})}}yg.displayName="TasksDashboard";var Sg,Og=yg;function vg(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let Ng=(vg((Sg=class e extends a.Component{componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.courseId!==e.courseId&&this.fetchData()}fetchData(){const{courseId:e,groupId:t}=this.props;this.props.fetchStudentTasks({courseId:Number(e),limit:6}),this.props.fetchStudentTasksUnsolved({courseId:Number(e),groupId:Number(t),limit:6})}renderError(e){return e}static renderNothing(){return null}renderTasksDashboard(){const{courseId:e,groupId:t,unsolvedTasks:s}=this.props;return s.length?n.a.createElement(Og,{courseId:e,groupId:t,tasks:s}):null}render(){const{unsolvedTasksFetchError:t,unsolvedTasksFetchStatus:s}=this.props;return n.a.createElement(Sb,{fetchError:t,fetchStatus:s,renderError:this.renderError,renderPending:e.renderNothing,renderSuccess:this.renderTasksDashboard})}}).prototype,"renderError",[$.a],Object.getOwnPropertyDescriptor(Sg.prototype,"renderError"),Sg.prototype),vg(Sg.prototype,"renderTasksDashboard",[$.a],Object.getOwnPropertyDescriptor(Sg.prototype,"renderTasksDashboard"),Sg.prototype),Sg);Ng.displayName="TasksDashboardContainer";var Ig=Object(b.b)(function(e){return{unsolvedTasks:Hl(e),unsolvedTasksFetchError:Gl(e),unsolvedTasksFetchStatus:Vl(e)}},function(e){return Object(ee.bindActionCreators)({fetchStudentTasks:Ra,fetchStudentTasksUnsolved:La},e)})(Ng);function kg(e){return e.courseDetails.courseDetails}function Tg(e){return e.courseDetails.fetchStatus}function Cg(e){return e.courseDetails.fetchError}function jg(e){return e.courseDetails.courseBanners}function wg(e,t,s){return s||(s=Object.keys(e)),s.some(s=>!Object.is(e[s],t[s]))}class Ag extends a.PureComponent{componentDidMount(){this.props.fetchStatus!==Gt.a.SUCCESS&&this.fetchCourseDetails()}componentDidUpdate(e){(null===this.props.fetchStatus||wg(this.props,e,["courseId","groupId"]))&&this.fetchCourseDetails()}componentWillUnmount(){this.props.clearCourseDetails()}render(){return this.props.children({fetchError:this.props.fetchError,fetchStatus:this.props.fetchStatus,courseDetails:this.props.courseDetails})}fetchCourseDetails(){const{courseId:e,groupId:t}=this.props;this.props.fetchCourseDetailsStart({courseId:Number(e),groupId:Number(t)})}}Ag.displayName="CourseDetailsProvider";var _g=Object(b.b)(function(e){return{fetchError:Cg(e),fetchStatus:Tg(e),courseDetails:kg(e)}},function(e){return Object(ee.bindActionCreators)({fetchCourseDetailsStart:Go.request,clearCourseDetails:Bo},e)})(Ag);s(739);const Mg=d.a.with("details"),xg=e=>{let{className:t,summary:s,content:a}=e;return n.a.createElement("details",{className:Object(le.b)(Mg(),t)},n.a.createElement("summary",{className:Mg("summary")},s),a)};xg.displayName="Details";s(740);const Dg=d.a.with("html-content");class Pg extends a.Component{render(){const{content:e}=this.props;return e?n.a.createElement("div",{className:Dg(),dangerouslySetInnerHTML:{__html:e}}):null}}Pg.displayName="HtmlContent";var Rg=Pg;s(741);const Lg=d.a.with("teacher-info"),Fg=e=>{let{cls:t,users:s}=e;return n.a.createElement("section",{className:Object(le.b)(t,Lg())},n.a.createElement(Oa,{level:2,className:Lg("heading")},O.b.text({id:"role-teacher",keyset:"profile"})),s.map(e=>n.a.createElement(If,{cls:Lg("content"),user:e,key:e.id})))};Fg.displayName="TeacherInfo";var zg=Fg;s(330);const Ug=d.a.with("course-details");class Hg extends a.Component{constructor(){super(...arguments),this.renderPage=(e,t)=>()=>{if(!e)return null;const s=O.b.text({id:"course-details-student",keyset:"page-titles",params:{course:e.title}});return n.a.createElement("article",{className:Ug()},n.a.createElement(c.a,null,n.a.createElement("title",null,s),n.a.createElement("meta",{name:"title",content:s})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Top,null,n.a.createElement("div",{className:Ug("top")},n.a.createElement("main",{className:Ug("top-main")},n.a.createElement(Oa,{level:1},e.title),e.description&&n.a.createElement(xg,{className:Ug("description"),summary:O.b.text({id:"course-description",keyset:"courses"}),content:n.a.createElement(Rg,{content:e.description})})),n.a.createElement("aside",{className:Ug("top-aside")},e.teachersList&&n.a.createElement(zg,{users:e.teachersList})))),n.a.createElement(Rn.Main,null,n.a.createElement(lg,{courseId:e.id.toString(),groupId:t,role:e.role})),n.a.createElement(Rn.Aside,null,n.a.createElement(Ig,{courseId:e.id.toString(),groupId:t}))))}}render(){const{courseId:e,groupId:t}=this.props.match.params;return n.a.createElement(_g,{courseId:e,groupId:t},e=>{let{fetchError:s,fetchStatus:a,courseDetails:r}=e;return n.a.createElement(Sb,{fetchError:s,fetchStatus:a,renderSuccess:this.renderPage(r,t)})})}}Hg.displayName="CourseDetails";var Vg=hE(Hg);function Gg(e){return e.materials.materials}function Bg(e){return e.materials.materialsFetchStatus}function Wg(e){return e.materials.materialsFetchError}function Kg(e){return e.materials.detailedMaterialInfo}function qg(e){return e.materials.detailsFetchStatus}function Yg(e){return e.materials.detailsFetchError}let Jg;!function(e){e.Textbook="textbook",e.Guide="guide",e.Presentation="presentation",e.Solutions="solutions",e.Other="other",e.Teacherbook="teacherbook"}(Jg||(Jg={}));s(742);const Zg=d.a.with("material-list");class Xg extends a.PureComponent{constructor(){super(...arguments),this.renderBody=()=>{const{fetchError:e,fetchStatus:t}=this.props;return n.a.createElement("div",{className:Zg()},n.a.createElement(yb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderMaterialList,renderError:this.renderError}))},this.renderSpin=()=>n.a.createElement("div",{className:Zg("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"})),this.renderError=e=>n.a.createElement("div",{className:Zg("message",{error:!0})},e),this.renderMaterialList=()=>{const{materials:e}=this.props;return 0===e.length?n.a.createElement("div",{className:Zg("message")},O.b.text({id:"empty-material-list",keyset:"materials"})):n.a.createElement("ul",{className:Zg("list")},e.map(e=>n.a.createElement("li",{key:e.id,className:Zg("item")},this.renderMaterial(e))))},this.renderMaterial=e=>{let{id:t,type:s,title:a,url:r}=e;const i=n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{"aria-hidden":!0,className:Zg("icon",{type:s})}),n.a.createElement("div",{className:Zg("material-title")},a));return function(e){return e===Jg.Textbook||e===Jg.Teacherbook}(s)?n.a.createElement(o.b,{className:Zg("material-link"),to:this.getMaterialUrl(t)},i):n.a.createElement(N,{className:Zg("material-link"),href:r||this.getDownloadUrl(t)},i)},this.getMaterialUrl=e=>{const{pathParams:t}=this.props;return w.lessonMaterial.build(Object.assign({},t,{materialId:e.toString()}))},this.getDownloadUrl=e=>{const{lessonId:t}=this.props.pathParams;return Po.downloadMaterial.build({materialId:e},{lessonId:Number(t)})}}render(){return n.a.createElement(mg,{body:this.renderBody(),title:O.b.text({id:"materials"})})}}Xg.displayName="MaterialList";var Qg=Xg;class $g extends a.Component{componentDidMount(){const{fetchStatus:e,pathParams:{lessonId:t}}=this.props;e!==Gt.a.SUCCESS&&this.props.fetchMaterials({lessonId:Number(t)})}componentWillUnmount(){this.props.clearMaterials()}render(){const{materials:e,fetchError:t,fetchStatus:s,pathParams:a}=this.props;return n.a.createElement(Qg,{fetchError:t,fetchStatus:s,materials:e,pathParams:a})}}$g.displayName="MaterialListContainer";var ey=Object(b.b)(function(e){return{materials:Gg(e),fetchError:Wg(e),fetchStatus:Bg(e)}},function(e){return Object(ee.bindActionCreators)({clearMaterials:Fu,fetchMaterials:Lu},e)})($g);s(743);const ty=d.a.with("lesson-header");class sy extends a.Component{constructor(){super(...arguments),this.renderSpin=()=>n.a.createElement("div",{className:ty("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"})),this.renderError=e=>n.a.createElement("p",{className:ty("error")},e),this.renderLessonDetails=()=>{const{lesson:e,progress:t,testStart:s,visibilityButton:a}=this.props,{title:r,description:i,deadline:o,daysBeforeDeadline:c}=e;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Oa,{level:1,className:ty("heading")},r),n.a.createElement("div",{className:ty("status-bar")},o&&this.renderDeadline(Ce.fromISO(o),c),a),this.renderDescription(i),t&&n.a.createElement("div",{className:ty("progress")},t),s&&n.a.createElement("div",{className:ty("test-start")},s))}}render(){const{detailsFetchError:e,detailsFetchStatus:t,lessonsUrl:s}=this.props;return n.a.createElement("header",{className:ty()},n.a.createElement(da,{back:!0,exact:!0,to:s},O.b.text({id:"lessons"})),n.a.createElement(Sb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderLessonDetails,renderError:this.renderError}))}renderDescription(e){return e?n.a.createElement("div",{className:ty("description")},n.a.createElement(Rg,{content:e})):null}renderDeadline(e,t){return n.a.createElement("span",{className:ty("deadline")},O.b.text({id:"deadline",keyset:"lessons"}),v,n.a.createElement("span",{className:ty("deadline-time")},e.toFormat("d MMMM HH:mm")),t&&t<=0?" (".concat(O.b.text({id:"deadline-in-past",keyset:"lessons"}),")"):null)}}sy.displayName="LessonHeader";var ay=sy;s(744);const ny=d.a.with("student-lesson-progress");class ry extends a.Component{render(){const{daysBeforeDeadline:e,numTasks:t,numPassed:s}=this.props,a=t?Math.floor(s/t*100):0;return n.a.createElement("div",{className:ny()},n.a.createElement(Qf,{percentage:a,size:"large",theme:e&&e<=0?"dark":"light"}),n.a.createElement("span",{className:ny("percentage",{"non-zero":a>0})},a," %"),this.renderProgressCounts())}renderProgressCounts(){const{numTasks:e,numPassed:t,score:s}=this.props;return n.a.createElement("div",{className:ny("counts")},null!==e&&n.a.createElement("span",{className:ny("tasks")},O.b.element({id:"N/M-tasks-passed",params:{m:e,n:t>0?n.a.createElement("span",{className:ny("tasks-current")},t,v):t}})),null!==s&&n.a.createElement("span",{className:ny("score")},O.b.element({id:"N-points",params:{count:s,n:n.a.createElement("span",{className:ny("score-count")},s)}})))}}ry.displayName="StudentLessonProgress";var iy=ry;function oy(e){return e.lessons.test.startingStatus}s(745);const cy=d.a.with("test-start");class ly extends a.Component{constructor(){super(...arguments),this.state={isModalOpened:!1},this.startTest=()=>{this.togglePopup();const{courseId:e,lesson:t,groupId:s}=this.props;this.props.startTest({courseId:Number(e),lessonId:t.id,groupId:Number(s)})},this.togglePopup=()=>{this.setState(e=>({isModalOpened:!e.isModalOpened}))}}render(){const{lesson:e,fetchStatus:t}=this.props,{isModalOpened:s}=this.state;if(e.type!==tl.Test||e.isTestStarted)return null;const a=e.manualVariantsAssignment&&!e.hasAssignedVariant;return n.a.createElement("div",{className:cy()},e.duration&&n.a.createElement("time",{className:cy("time")},Te.Duration.fromObject({minutes:e.duration}).toFormat("hh:mm:ss")),n.a.createElement(Se.a,{className:cy("button"),disabled:a||t===Gt.a.PENDING,theme:"action",size:"l",view:"lyceum",onClick:this.togglePopup},O.b.text({id:"start-test",keyset:"lessons"})),a&&n.a.createElement("p",{className:cy("error-message")},O.b.text({id:"no-variant-assigned",keyset:"lessons"})),n.a.createElement(Ia,{visible:s,title:O.b.text({id:"start-test-dialog-title",keyset:"lessons"}),okText:O.b.text({id:"start-test-dialog-ok",keyset:"lessons"}),cancelText:O.b.text({id:"start-test-dialog-cancel",keyset:"lessons"}),content:O.b.text({id:"start-test-dialog-content",keyset:"lessons"}),onOkClick:this.startTest,onCancelClick:this.togglePopup,onCloseClick:this.togglePopup}))}}ly.displayName="TestStart";var uy=Object(b.b)(function(e){return{fetchStatus:oy(e)}},function(e){return Object(ee.bindActionCreators)({startTest:ja.request},e)})(ly);function dy(e){return e.lessons.details.lessonDetails}function my(e){return e.lessons.details.lessonDetailsFetchError}function py(e){return e.lessons.details.lessonDetailsFetchStatus}function hy(e){return e.lessons.details.visibilityFetchStatus}class by extends a.Component{constructor(){super(...arguments),this.renderTestStart=()=>{const{course:e,lesson:t,groupId:s}=this.props;return t?n.a.createElement(uy,{groupId:s,courseId:e.id.toString(),lesson:t}):null}}componentDidMount(){this.props.detailsFetchStatus!==Gt.a.SUCCESS&&this.fetchData()}componentDidUpdate(e){e.course.id!==this.props.course.id&&this.fetchData()}componentWillUnmount(){this.props.clearLessonDetails()}render(){const{course:e,groupId:t,lesson:s,detailsFetchError:a,detailsFetchStatus:r}=this.props;let i;s&&(i=O.b.text({id:"lesson-details-student",keyset:"page-titles",params:{course:e.title,lesson:s.title}}));const o=w.courseDetails.build({courseId:e.id.toString(),groupId:t});return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,i),n.a.createElement("meta",{name:"title",content:i})),n.a.createElement(ay,{lesson:s,lessonsUrl:o,detailsFetchError:a,detailsFetchStatus:r,progress:s?n.a.createElement(iy,s):null,testStart:this.renderTestStart()}))}fetchData(){const{course:e,groupId:t,lessonId:s}=this.props;this.props.fetchStudentLessonDetails({lessonId:Number(s),courseId:e.id,groupId:Number(t)})}}by.displayName="LessonHeaderContainer";var Ey=Object(b.b)(function(e){return{lesson:dy(e),detailsFetchError:my(e),detailsFetchStatus:py(e)}},function(e){return Object(ee.bindActionCreators)({clearLessonDetails:Gc,fetchStudentLessonDetails:Hc},e)})(by),fy=s(1099);s(746);const gy=d.a.with("task-tag"),yy=Object(a.forwardRef)((e,t)=>{const{className:s,type:a=et.Another,size:r="m"}=e;return n.a.createElement("span",{ref:t,className:Object(le.b)(gy({type:a,size:r}),s)})});s(747);const Sy=d.a.with("task-group-header"),Oy=e=>{let{type:t}=e;return n.a.createElement("header",{className:Sy()},n.a.createElement(yy,{className:Sy("icon"),type:t}),n.a.createElement(Oa,{level:3,className:Sy("heading")},O.b.text({id:t,keyset:"task-tags"})))};Oy.displayName="TaskGroupHeader";var vy;s(748);function Ny(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const Iy=d.a.with("student-task-list"),ky=e=>"problem"in e;let Ty=(Ny((vy=class e extends a.Component{static renderSpin(){return n.a.createElement("div",{className:Iy("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"}))}static renderError(e){return n.a.createElement("p",{className:Iy("error")},e)}getLinkFromLessonElement(e){const{courseId:t,groupId:s,lessonId:a}=this.props;return ky(e)?A.lessonProblem.build({courseId:t,groupId:s,lessonId:a,problemLinkId:e.id}):A.taskDetails.build({courseId:t,groupId:s,lessonId:a,taskId:e.id.toString()})}renderTaskGroups(){const{taskGroups:e}=this.props;return e.length?n.a.createElement(fy.a,{items:e.map(e=>{const t=e.tasks||e.problems||[];return{id:e.id.toString(),title:n.a.createElement(Oy,{type:e.type}),items:t.map(e=>({id:e.id.toString(),content:()=>this.renderItem(e)}))}}).filter(Boolean)}):O.b.text({id:"no-tasks-message",keyset:"tasks"})}renderItem(e){const{solution:t,scoreMax:s}=e,a=this.getLinkFromLessonElement(e);return n.a.createElement(o.b,{className:Iy("task"),to:a},n.a.createElement("div",{className:Iy("left")},n.a.createElement("span",{className:Iy("indicator")},n.a.createElement(at,{scoreMax:s,score:t&&t.score,solutionStatus:t&&t.status.type})),n.a.createElement(Oa,{level:4,className:Iy("task-heading")},e.title,!ky(e)&&e.hasManualCheck&&n.a.createElement(Je,null))),t&&n.a.createElement("div",{className:Iy("right")},n.a.createElement("span",{className:Iy("status")},n.a.createElement(bg,{scoreMax:e.scoreMax,score:t.score,type:t.status.type}))))}render(){const{fetchError:t,fetchStatus:s}=this.props;return n.a.createElement("div",{className:Iy()},n.a.createElement(Oa,{level:2,className:Iy("heading")},O.b.text({id:"student-tasks-title",keyset:"lessons"})),n.a.createElement(yb,{fetchError:t,fetchStatus:s,renderPending:e.renderSpin,renderSuccess:this.renderTaskGroups,renderError:e.renderError}))}}).prototype,"renderTaskGroups",[$.a],Object.getOwnPropertyDescriptor(vy.prototype,"renderTaskGroups"),vy.prototype),Ny(vy.prototype,"renderItem",[$.a],Object.getOwnPropertyDescriptor(vy.prototype,"renderItem"),vy.prototype),vy);Ty.displayName="StudentTaskList";var Cy=Ty;class jy extends a.Component{componentDidMount(){if(this.props.fetchStatus===Gt.a.SUCCESS)return;const{lesson:e}=this.props;e&&e.type===tl.Normal&&this.fetchData()}componentDidUpdate(e){const{lesson:t}=this.props;null===e.lesson&&null!==t&&(t.type===tl.Normal&&this.fetchData(),t.type===tl.Test&&t.isTestStarted&&this.fetchData())}componentWillUnmount(){this.props.clearTaskGroups()}fetchData(){const{courseId:e,lessonId:t}=this.props;this.props.fetchTaskGroups({lessonId:Number(t),courseId:Number(e)})}render(){const{fetchError:e,fetchStatus:t,courseId:s,groupId:a,lessonId:r,taskGroups:i}=this.props;return t&&n.a.createElement(Cy,{courseId:s,groupId:a,fetchError:e,fetchStatus:t,lessonId:r,taskGroups:i})}}jy.displayName="StudentTaskListContainer";var wy=Object(b.b)(function(e){const t=Zl(e),s=Xl(e);return{lesson:dy(e),taskGroups:Jl(e),fetchError:t,fetchStatus:s}},function(e){return Object(ee.bindActionCreators)({clearTaskGroups:Ka,fetchTaskGroups:Va},e)})(jy);const Ay=d.a.with("lesson-details");class _y extends a.Component{render(){const{course:e,groupId:t,lessonId:s}=this.props;return n.a.createElement("article",{className:Ay()},n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Top,null,n.a.createElement(Ey,{course:e,groupId:t,lessonId:s})),n.a.createElement(Rn.Main,null,n.a.createElement(wy,{courseId:e.id.toString(),groupId:t,lessonId:s})),n.a.createElement(Rn.Aside,null,n.a.createElement(ey,{pathParams:{courseId:e.id.toString(),groupId:t,lessonId:s}})),n.a.createElement(Rn.ActiveArea,null)))}}_y.displayName="LessonDetails";var My=_y;var xy,Dy=hE(Object(b.b)(function(e,t){const{params:s}=t.match;return{course:oe(e,s.courseId),groupId:s.groupId,lessonId:s.lessonId}})(My));s(753);function Py(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const Ry=d.a.with("lesson-material"),Ly=Object(a.lazy)(()=>Promise.all([s.e(0),s.e(4)]).then(s.bind(null,1141)).then(e=>{let{Material:t}=e;return{default:t}}));let Fy=(Py((xy=class extends a.Component{renderError(e){return n.a.createElement("p",{className:Ry("error")},e)}renderMaterial(){const{lessonUrl:e,detailedMaterialInfo:t,lessonId:s,role:r,course:i,group:o}=this.props;if(!t)return null;const{detailedMaterial:{content:l,id:u,url:d,title:m},lesson:p}=t,h=O.b.text({id:"lesson-material-".concat(r),keyset:"page-titles",params:{material:m,lesson:p.title,course:i?i.title:"",group:o?o.name:""}});return n.a.createElement("div",{className:Ry("wrapper")},n.a.createElement(c.a,null,n.a.createElement("title",null,h),n.a.createElement("meta",{name:"title",content:h})),n.a.createElement(da,{back:!0,exact:!0,to:e},O.b.text({id:"lesson-TITLE",keyset:"tasks",params:{title:p.shortTitle}})),n.a.createElement("section",{className:Ry("content")},l?n.a.createElement(a.Suspense,{fallback:n.a.createElement("p",{className:Ry("message")},O.b.text({id:"loading-material",keyset:"materials"}))},n.a.createElement(Ly,{htmlContent:l})):this.renderMaterialLink(u,s,d)))}renderMaterialLink(e,t,s){const a=Po.downloadMaterial.build({materialId:e},{lessonId:Number(t)});return n.a.createElement(Se.a,{target:"_blank",rel:"noopener noreferrer",theme:"action",size:"m",view:"lyceum",type:"link",url:s||a},O.b.text({id:"download-material",keyset:"materials"}))}render(){const{fetchError:e,fetchStatus:t}=this.props;return n.a.createElement("div",{className:Ry()},n.a.createElement(Rn,{fixed:!0,type:"narrow"},n.a.createElement(Rn.Main,null,n.a.createElement(yb,{fetchError:e,fetchStatus:t,renderSuccess:this.renderMaterial,renderError:this.renderError}))))}}).prototype,"renderError",[$.a],Object.getOwnPropertyDescriptor(xy.prototype,"renderError"),xy.prototype),Py(xy.prototype,"renderMaterial",[$.a],Object.getOwnPropertyDescriptor(xy.prototype,"renderMaterial"),xy.prototype),xy);Fy.displayName="LessonMaterial";var zy=gb(Fy);class Uy extends a.Component{componentDidMount(){const{group:e,match:{params:t}}=this.props,{lessonId:s,materialId:a}=t;this.props.fetchMaterialDetails({groupId:e.id,lessonId:Number(s),materialId:Number(a)})}componentWillUnmount(){this.props.clearMaterialDetails()}render(){const{match:e,course:t,group:s,detailedMaterialInfo:a,fetchError:r,fetchStatus:i}=this.props,{params:{courseId:o,groupId:c,lessonId:l}}=e,u=w.lessonDetails.build({courseId:o,groupId:c,lessonId:l});return n.a.createElement(zy,{course:t,group:s,lessonId:l,lessonUrl:u,fetchError:r,fetchStatus:i,detailedMaterialInfo:a})}}Uy.displayName="StudentLessonMaterial";var Hy=hE(Object(b.b)(function(e,t){const{match:{params:s}}=t,a=oe(e,s.courseId),[n]=a.groups;return{course:a,group:lf(e,n.toString()),detailedMaterialInfo:Kg(e),fetchError:Yg(e),fetchStatus:qg(e)}},function(e){return Object(ee.bindActionCreators)({fetchMaterialDetails:Uu,clearMaterialDetails:Hu},e)})(Uy)),Vy=s(266),Gy=s(361),By=s.n(Gy);const Wy=Object(le.a)(By.a.taskGroupNavigation),Ky=Object(Vy.a)(o.c),qy=e=>{let{taskGroups:t,urlData:s}=e;const a=e=>A.taskDetails.build(Object.assign({},s,{taskId:e.toString()})),r=e=>A.lessonProblem.build(Object.assign({},s,{problemLinkId:e}));return n.a.createElement("nav",{className:Wy()},n.a.createElement("ul",{className:Wy("groups")},t.map(e=>n.a.createElement("li",{key:e.id,className:Wy("group")},n.a.createElement(ve,{className:Wy("tooltip"),content:O.b.text({id:e.type,keyset:"task-tags"})},n.a.createElement(yy,{className:Wy("tag"),size:"l",type:e.type})),n.a.createElement("ul",{className:Wy("tasks")},e.tasks&&e.tasks.map(e=>n.a.createElement("li",{key:e.id,className:Wy("task")},n.a.createElement(ve,{content:e.title},n.a.createElement(Ky,{className:Wy("link"),activeClassName:Wy("link_checked"),to:a(e.id)},n.a.createElement(at,Object.assign({scoreMax:e.scoreMax},e.solution&&{score:e.solution.score,solutionStatus:e.solution.status.type})))))),e.problems&&e.problems.map(e=>n.a.createElement("li",{key:e.id,className:Wy("task")},n.a.createElement(ve,{content:e.title},n.a.createElement(Ky,{className:Wy("link"),activeClassName:Wy("link_checked"),to:r(e.id)},n.a.createElement(at,{solutionStatus:e.solution.status.type,scoreMax:e.scoreMax}))))))))))};qy.displayName="TaskGroupNavigation";var Yy=s(362),Jy=s.n(Yy);const Zy=Object(le.a)(Jy.a.arrowNavigation),Xy=e=>{let{arrowClassName:t,leftArrowUrl:s,rightArrowUrl:a,className:r}=e;return n.a.createElement("nav",{className:Object(le.b)(Zy(),r)},s&&n.a.createElement(o.b,{className:Object(le.b)(Zy("arrow",{direction:"left"}),t&&d()(t,{direction:"left"})),to:s},n.a.createElement(ge.a,{type:"scroll",size:"l",direction:"left"})),a&&n.a.createElement(o.b,{className:Object(le.b)(Zy("arrow",{direction:"right"}),t&&d()(t,{direction:"right"})),to:a},n.a.createElement(ge.a,{type:"scroll",size:"l",direction:"right"})))};Xy.displayName="ArrowNavigation";var Qy=s(363),$y=s.n(Qy);const eS=Object(le.a)($y.a.taskHeader),tS=e=>{let{taskTitle:t,taskInfo:s,hasManualCheck:a}=e;return n.a.createElement("header",{className:eS()},n.a.createElement(Oa,{level:1,className:eS("heading")},t,a&&n.a.createElement(Je,{cls:eS("check-info")})),n.a.createElement("div",{className:eS("info")},s))};tS.displayName="TaskHeader";s(754);const sS=d.a.with("task-status-bar"),aS=e=>{let{size:t="medium",statistics:s}=e;const a=Object.values(Ze);return n.a.createElement("div",{className:sS({size:t})},a.map(e=>{const t={width:"".concat(nS(s[e],s.total),"%")};return n.a.createElement("span",{key:e,className:sS("fill",{status:e}),style:t})}))};function nS(e,t){return e?e/t*100:0}aS.displayName="TaskStatusBar";var rS=s(364),iS=s.n(rS);const oS=e=>Object.keys(Xe).filter(t=>!e.includes(t)).map(e=>Xe[e]),cS=[Ze.New];oS([Ze.New,Ze.Draft]),oS(cS);var lS=e=>!!e&&Object.keys(e).some(t=>![...cS,"total"].includes(t)&&e[t]>0);const uS=Object(le.a)(iS.a.taskInfo),dS=e=>{let{className:t,taskTag:s,taskDeadline:a,taskMaxScore:r,taskStatistics:i}=e;const o=s?s.type:et.Another;return n.a.createElement("div",{className:Object(le.b)(uS(),t)},n.a.createElement("div",{className:uS("tag")},n.a.createElement(yy,{type:o}),n.a.createElement("div",{className:uS("tag-name")},O.b.text({id:o,keyset:"task-tags"}))),n.a.createElement("div",{className:uS("max-score")},O.b.text({id:"max",keyset:"tasks"}),v,n.a.createElement("span",{className:uS("score")},O.b.text({id:"max-score",keyset:"tasks",params:{maxScore:r}}))),a&&n.a.createElement("div",{className:uS("deadline")},O.b.element({id:"deadline",keyset:"tasks",params:{date:n.a.createElement("span",{className:uS("deadline-time")},Ce.fromISO(a).toFormat("d MMM HH:mm"))}})),i&&lS(i)&&n.a.createElement("div",{className:uS("status-bar")},n.a.createElement(aS,{statistics:i})))};dS.displayName="TaskInfo";s(755);const mS=d.a.with("external-link-icon");class pS extends a.Component{render(){const{cls:e}=this.props;return n.a.createElement(N,Object.assign({className:Object(le.b)(e,mS())},this.props),n.a.createElement(ge.a,{cls:mS("icon"),type:"new-window",size:"l"}))}}pS.displayName="ExternalLinkIcon";var hS=pS,bS=s(365),ES=s.n(bS);const fS=Object(le.a)(ES.a.taskDescription),gS=e=>{let{taskTitle:t,className:s,content:r,taskUrl:i,hasManualCheck:o}=e;return Object(a.useEffect)(()=>{window.MathJax.Hub.Typeset()},[r]),n.a.createElement("section",{className:Object(le.b)(fS(),s)},t&&n.a.createElement("header",{className:fS("header")},n.a.createElement(Oa,{smaller:!0,level:1,className:fS("heading")},t,o&&n.a.createElement(Je,{cls:fS("check-info")})),i&&n.a.createElement(hS,{href:i})),n.a.createElement("div",{className:fS("content-wrapper")},r?n.a.createElement("article",{className:fS("content"),dangerouslySetInnerHTML:{__html:r}}):O.b.text({id:"no-description",keyset:"tasks"})))};gS.displayName="TaskDescription";var yS=s(366),SS=s.n(yS);const OS=Object(le.a)(SS.a.subLayout),vS=e=>{let{leftColumn:t,rightColumn:s,narrowLeft:a}=e;return n.a.createElement("div",{className:OS()},n.a.createElement("div",{className:OS("left-column",{narrow:a})},t),n.a.createElement("div",{className:OS("right-column")},s))};vS.displayName="SubLayout";var NS=s(367),IS=s.n(NS);const kS=Object(le.a)(IS.a.roundedWrapper),TS=e=>{let{children:t,border:s,all:a,topLeft:r,topRight:i}=e;return n.a.createElement("div",{className:kS(Object.assign({border:s,all:a},!a&&{"top-left":r,"top-right":i}))},t)};TS.displayName="RoundedWrapper";var CS=s(1065),jS=s(1107);s(756);const wS=d.a.with("sideblock"),AS=Object(he.compose)(CS.a,fe.a,Ee.a)(jS.a),_S={large:"close-thin",small:"close"},MS={dark:"-white",light:""},xS=e=>{let{children:t,size:s="large",iconTheme:a="light",visible:r,onClose:i}=e,o=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["children","size","iconTheme","visible","onClose"]);return n.a.createElement(AS,Object.assign({keepMounted:!1,visible:r,theme:"normal",onOutsideClick:i,onEscapeKeyDown:i},o),n.a.createElement("div",{className:wS({size:s})},n.a.createElement(Se.a,{className:wS("cross"),size:"l",theme:"clear",view:"lyceum",icon:e=>n.a.createElement(ge.a,{cls:e,size:"l",type:"".concat(_S[s]).concat(MS[a])}),onClick:i}),t))};xS.displayName="Sideblock";var DS=s(60);s(759);const PS=d.a.with("contest-logs");class RS extends a.Component{constructor(){super(...arguments),this.renderSpin=()=>n.a.createElement("div",{className:PS("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"})),this.renderError=e=>n.a.createElement("p",{className:PS("error")},e),this.renderLogs=()=>{const{contestLogs:e}=this.props;if(!e)return null;const{verdict:t,compileLog:s,usedTime:a,usedMemory:r,testInfo:i,testNumber:o}=e,c=a?"".concat(a,"ms"):"-",l=r?Cl()(r):"-";return n.a.createElement(n.a.Fragment,null,this.renderLog("verdict",O.b.text({id:t,keyset:"contest-verdicts"})),this.renderLog("compile-log",s),this.renderLog("time-and-memory","".concat(c," / ").concat(l)),this.renderLog("test-number",o),Object.keys(i).map(e=>this.renderLog(e,i[e])))},this.renderLog=(e,t)=>{if(!t)return null;const s=O.b.text({id:e,keyset:"submissions"});return n.a.createElement("section",{key:e,className:PS("log")},n.a.createElement("h3",{className:PS("log-title")},s),n.a.createElement("pre",{className:PS("log-text")},t))}}render(){const{fetchError:e,fetchStatus:t}=this.props;return n.a.createElement("section",{className:PS()},n.a.createElement(yb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderLogs,renderError:this.renderError}))}}RS.displayName="ContestLogs";const LS=e=>{let{submissionId:t}=e;const s=Object(b.c)(),r=Object(b.d)(DS.getContestLogsFetchResults)[t];if(Object(a.useEffect)(()=>{s(DS.fetchContestLogs.request({submissionId:t}))},[s,t]),!r)return null;const{contestLogs:i,fetchError:o,fetchStatus:c}=r;return n.a.createElement(RS,{contestLogs:i,fetchError:o,fetchStatus:c})};LS.displayName="ContestLogsContainer";var FS=s(9),zS=s(1100);const US=new FS.Registry({id:Object(zS.b)()});US.set("Button",Se.a);const HS=Object(FS.withRegistry)(US)(zS.a),VS=e=>e.solutions.drafts.entities;function GS(e){return e.solutions.send.fetchStatus}const BS=(e,t,s)=>{if(navigator&&navigator.msSaveBlob){const a=new Blob([e]);return a.lastModifiedDate=new Date,a.name="".concat(t).concat(s),a}return new File([e],"".concat(t).concat(s))};s(765);const WS=Object(le.a)("solution-sender"),KS=e=>{let{fileLimits:{fileSize:t},contestOptions:{fileExtensions:s},isFirstAttempt:r,isContestIntegrated:i,className:o,theme:c="normal",task:l}=e;const u=Object(b.d)(GS),d=Object(b.d)(VS);let m;l&&(m=d[l.id]);const p=Object(b.c)(),h=Object(I.i)(),E=l&&l.lesson.type===tl.Test&&l.lesson.isTestFinished,f=u===Gt.a.PENDING,g=E||f,y=Object(a.useCallback)(e=>{const{files:s}=e.target;if(!s||!s.length)return;const a=s.item(0);a&&(e.target.value="",p(wm({solutionId:l.solutionId,taskId:l.id,file:a,maxSize:t,sendWay:Cm.FROM_FILE,routeParams:h})))},[p,t,h,l.id,l.solutionId]),S=Object(a.useCallback)(()=>{if(m)try{const e=BS(m.content,"solution",".py");p(wm({solutionId:l.solutionId,taskId:l.id,file:e,maxSize:t}))}catch(e){p(Object(sn.a)(_l))}},[p,m,t,l.id,l.solutionId]);if(!m)return n.a.createElement(HS,{className:Object(le.b)(o,WS({type:"attach"})),view:"lyceum",disabled:g,size:"l",theme:c,accept:i?s.join():void 0,onChange:y,title:O.b.text({id:"upload-solution-file",keyset:"solutions"})},n.a.createElement(ge.a,{size:"m",type:"upload"}));const{isValid:v,message:N=""}=function(e,t){return e.length?e.length>t?{isValid:!1,message:O.b.text({id:"solution-too-long",keyset:"solutions"})}:{isValid:!0}:{isValid:!1,message:O.b.text({id:"solution-is-empty",keyset:"solutions"})}}(m.content,t);return n.a.createElement(ve,{enabled:Boolean(N),content:N},n.a.createElement("span",null,n.a.createElement(Se.a,{className:Object(le.b)(o,WS({type:"button"})),view:"lyceum",disabled:g||!v,size:"l",theme:"action",onClick:S},O.b.text({id:"".concat(r?"send":"resend","-solution"),keyset:"tasks"}))))};KS.displayName="SolutionSenderBase";const qS=kn(jn(KS));function YS(e){return e.codeEditor.code}function JS(e){return e.codeEditor.isReadonly}var ZS=s(273),XS=s.n(ZS);const QS=Object(le.a)(XS.a.comments),$S=[Ze.New,Ze.Draft],eO=[...$S,Ze.Rework],tO=e=>{let{solutionStatus:t,isContestIntegrated:s=!1,fileLimits:{fileSize:r}}=e;const i=Object(b.c)(),o=Object(I.i)(),c=Object(b.d)(Bl),l=Object(b.d)(YS),u=Object(b.d)(Wl),d=Object(b.d)(GS)===Gt.a.PENDING,m=u||d,p=Object(a.useCallback)(()=>{try{const e=BS(l,"solution",".py");i(wm({solutionId:c.solutionId,taskId:c.id,file:e,maxSize:r,shouldDisableReadonly:!0,shouldShowSuccessMessage:!0,sendWay:Cm.FROM_EDITOR,routeParams:o}))}catch(e){i(Object(sn.a)(_l))}},[l,i,r,o,c.id,c.solutionId]);return n.a.createElement("header",{className:QS("header")},o.solutionId?n.a.createElement(Se.a,{onClick:p,className:QS("link"),theme:"action",view:"lyceum",size:"l",disabled:m||!l},O.b.text({id:"send-code",keyset:"solutions"})):n.a.createElement(Se.a,{className:QS("link"),theme:"action",view:"lyceum",size:"l",type:"link",url:_.taskSolutions.build({courseId:o.courseId.toString(),groupId:o.groupId.toString(),lessonId:o.lessonId.toString(),taskId:o.taskId.toString()}),disabled:m},O.b.text({id:"open-editor",keyset:"solutions"})),n.a.createElement(qS,{isContestIntegrated:s,isFirstAttempt:$S.includes(t),theme:eO.includes(t)?"action":"normal",task:c}))};tO.displayName="CommentsHeaderBase";const sO=kn(jn(tO));var aO=s(392);var nO;s(766);function rO(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const iO=d.a.with("comments");let oO=(rO((nO=class extends a.Component{constructor(){super(...arguments),this.textarea=null,this.focus=()=>{this.textarea&&this.textarea.focus()},this.formRef=e=>{e&&(this.textarea=e.getElementsByClassName("comments__textarea")[0])}}handleSubmit(e){e.preventDefault();const{value:t,onSubmit:s,uploadStatus:a}=this.props;t&&a!==Gt.a.PENDING&&s()}handleChange(e){const{onChange:t}=this.props;t(e.target.value)}handleKeyDown(e){13!==e.keyCode||e.shiftKey||this.handleSubmit(e)}render(){const{uploadStatus:e,isEditing:t,onBlur:s,onReset:a,value:r}=this.props,i=e===Gt.a.PENDING;return n.a.createElement("form",{ref:this.formRef,className:iO("form",{editing:t}),onSubmit:this.handleSubmit},t&&n.a.createElement("div",{className:iO("editing-title")},n.a.createElement("span",{className:iO("editing-heading")},O.b.text({id:"edit-comment",keyset:"tasks"})),n.a.createElement(Se.a,{icon:e=>n.a.createElement(ge.a,{cls:e,size:"m",type:"close-thin"}),size:"m",theme:"clear",view:"lyceum",onClick:a})),n.a.createElement("div",{className:iO("controls")},n.a.createElement("div",{className:"comments__textarea-wrapper"},n.a.createElement(aO.a,{className:"comments__textarea",placeholder:O.b.text({id:"add-comment",keyset:"tasks"}),value:r,onBlur:s,onChange:this.handleChange,onKeyDown:this.handleKeyDown,minRows:1}),n.a.createElement("div",{className:"comments__textarea-box"})),n.a.createElement(Se.a,{progress:i,size:"m",theme:"clear",view:"lyceum",type:"submit",checked:i,icon:e=>n.a.createElement(ge.a,{cls:e,size:"m",type:"arrow-enter"}),onClick:this.handleSubmit})))}}).prototype,"handleSubmit",[$.a],Object.getOwnPropertyDescriptor(nO.prototype,"handleSubmit"),nO.prototype),rO(nO.prototype,"handleChange",[$.a],Object.getOwnPropertyDescriptor(nO.prototype,"handleChange"),nO.prototype),rO(nO.prototype,"handleKeyDown",[$.a],Object.getOwnPropertyDescriptor(nO.prototype,"handleKeyDown"),nO.prototype),nO);oO.displayName="CommentsForm";var cO=oO;let lO;!function(e){e.Unresolved="unresolved",e.Confirmed="confirmed",e.Declined="declined"}(lO||(lO={}));var uO=s(368),dO=s(369),mO=s(370),pO=s.n(mO);const hO=Object(le.a)(pO.a.plagiaryStatusIndicator),bO={m:uO.a,l:dO.a},EO=e=>{let{size:t="m",color:s,className:a}=e;const r=bO[t];return n.a.createElement(r,{className:Object(le.b)(a,hO({color:s}))})};EO.displayName="PlagiaryStatusIndicator";var fO=s(371),gO=s.n(fO);const yO=Object(le.a)(gO.a.plagiaryMarkerViewer),SO={[lO.Declined]:"grey",[lO.Confirmed]:"red",[lO.Unresolved]:"yellow"},OO=e=>{let{className:t,plagiarism:s,size:a="m",compact:r=!1}=e;const i=O.b.text({id:"status-".concat(s.status),keyset:"antiplagiary"}),o=Math.ceil(100*s.similarity);let c=i,l=null;return s.status===lO.Unresolved&&(r?c=n.a.createElement(n.a.Fragment,null,c,".",n.a.createElement("br",null),O.b.text({id:"plagiary-probability",keyset:"antiplagiary",params:{n:o}})):l="".concat(o,"%")),n.a.createElement(ve,{content:c},n.a.createElement("span",{className:Object(le.b)(t,yO({size:a,full:!r}))},n.a.createElement(EO,{className:yO("indicator"),color:SO[s.status],size:a})," ",l))};let vO;function NO(e,t){return e.comments.commentMap[t]}function IO(e){return e.comments.commentMap}OO.displayName="PlagiaryMarkerViewer",function(e){e.Text="text",e.Score="score",e.Status="status",e.Contest="contest",e.Rejudge="rejudge",e.Error="error"}(vO||(vO={}));const kO=Object(ne.a)([NO],e=>e?e.filter(e=>e.submission):null);function TO(e){return e.comments.downloadStatus}function CO(e){return e.comments.downloadStatusError}function jO(e){return e.comments.uploadStatus}var wO;s(767);function AO(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const _O=d.a.with("comments");let MO=(AO((wO=class extends a.Component{constructor(){super(...arguments),this.commentRefs=this.props.comments.reduce((e,t)=>{const s=t.submission&&this.getRunIdFromSubmission(t.submission);return s&&(e[s]={commentId:t.id,ref:Object(a.createRef)()}),e},{}),this.commentRenderers={[vO.Text]:(e,t)=>{const{readonly:s,userId:a,activeCommentId:r}=this.props;if("wrong_file_submitted"===e.data&&e.files.length){const[s]=e.files;return n.a.createElement("div",{className:_O("comment-group")},n.a.createElement("div",{className:_O("comment-text",{"after-deadline":t})},O.b.element({id:"file-not-sent",keyset:"solutions",params:{filename:n.a.createElement(Ln.a,{href:s.url,behavior:"external"},s.name)}})),n.a.createElement("div",{className:_O("comment-text",{"after-deadline":t})},O.b.text({id:e.data,keyset:"solutions"})))}if(e.submission){const s=e.data,{file:a}=e.submission;return n.a.createElement("div",{className:_O("comment-group"),"submission-id":a.id},this.renderSubmissionInfo(e.submission,t,O.b.text({id:"id",keyset:"tasks",params:{id:a.runId||a.id}})),n.a.createElement("div",{className:_O("comment-text",{"after-deadline":t})},O.b.text({id:s,keyset:"solutions"})))}const i=e.data,o=e.author.id===a,c=e.id===r;return n.a.createElement("div",{className:_O("editable-comment-text",{own:o})},!s&&o&&n.a.createElement(Se.a,{className:_O("edit-button"),theme:"clear",size:"xs",view:"lyceum",checked:c,icon:e=>n.a.createElement(ge.a,{cls:e,size:"m",type:"edit"}),onClick:this.handleEditClick(e)}),n.a.createElement("div",{className:_O("comment-text",{"after-deadline":t}),dangerouslySetInnerHTML:{__html:i}}))},[vO.Status]:(e,t)=>{const s=e.data;return n.a.createElement("div",{className:_O("comment-text",{"after-deadline":t})},O.b.text({id:"status-changed",keyset:"tasks",params:{status:O.b.text({id:"status-".concat(s),keyset:"solutions"})}}))},[vO.Score]:(e,t)=>{const s=e.data;return n.a.createElement("div",{className:_O("comment-text",{"after-deadline":t&&!e.forceScore})},O.b.text({id:"score-set",keyset:"tasks",params:{score:s}}))},[vO.Contest]:(e,t)=>{const s=e.data;return n.a.createElement("button",{type:"button",className:_O("show-log",{"after-deadline":t}),onClick:this.handleContestVerdictClick(e.id)},O.b.text({id:"verdict",keyset:"submissions"}),":"," ",O.b.text({id:s,keyset:"contest-verdicts"}))},[vO.Rejudge]:(e,t)=>{let{data:s,submission:a}=e,r=null,i=null;const{submissionsMap:o}=this.props,c=a&&a.isRejudgementOfId;if(o){const e=o.findIndex(e=>e.submission&&e.submission.id===c);-1!==e&&(i=o[e].submission)&&(r=this.getRunIdFromSubmission(i))}return n.a.createElement("div",{className:_O("comment-group")},n.a.createElement("button",{type:"button",className:_O("comment-text",{type:"rejudged-submission","after-deadline":t}),onClick:this.handleRedjudgedSubmissionClick(i)},r?O.b.text({id:"".concat(s,"-ID"),keyset:"solutions",params:{id:r}}):O.b.text({id:s,keyset:"solutions"})),a&&this.renderSubmissionInfo(a,t,O.b.text({id:"ID-rejudgement",keyset:"solutions",params:{id:this.getRunIdFromSubmission(a)}})))},[vO.Error]:(e,t)=>n.a.createElement("div",{className:_O("comment-text",{"after-deadline":t})},O.b.text({id:e.data,keyset:"comments"}))}}render(){const{comments:e,listRef:t,onScroll:s}=this.props;return n.a.createElement("ul",{ref:t,className:_O("list"),onScroll:s},n.a.createElement(ke.TransitionGroup,{component:null},e.map(this.renderComment)))}shouldComponentUpdate(e){return wg(e,this.props,["comments","selectedSubmission"])}renderComment(e,t,s){const{id:r,submission:i,updateTime:o,author:c,isChanged:l}=e,u=Ce.fromISO(e.addedTime),d=this.props.deadline?Ce.fromISO(this.props.deadline):null,m=null!==d&&u>d,p=i&&this.commentRefs[this.getRunIdFromSubmission(i)],h=n.a.createElement(ke.CSSTransition,{key:r,timeout:500,classNames:"fade"},n.a.createElement("li",{ref:p&&p.ref,className:_O("comment",this.getCommentMods(e))},n.a.createElement(ve,{content:c.displayName},n.a.createElement(Ds,{className:_O("user-icon"),avatarId:c.avatar,userId:c.id,size:"s"})),n.a.createElement("div",{className:_O("comment-content")},this.commentRenderers[e.type](e,m),n.a.createElement("div",{className:_O("comment-date")},l&&"".concat(O.b.text({id:"comment-edited",keyset:"tasks"})).concat(v),Ce.fromISO(o).toFormat("d MMM HH:mm")))));if(!d)return h;const b=s[t-1],E=0===t&&this.isEveryCommentExpired(s.slice(t),d)||b&&u>d&&Ce.fromISO(b.addedTime)<d;return n.a.createElement(a.Fragment,{key:r},E&&n.a.createElement("li",{key:"".concat(r,"-deadline"),className:_O("deadline")},n.a.createElement("span",{className:_O("deadline-inner")},O.b.text({id:"deadline-{date}",keyset:"solutions",params:{date:d.toFormat("d MMM HH:mm")}}))),h)}renderSubmissionInfo(e,t,s){const{selectedSubmission:a}=this.props;return n.a.createElement("span",{className:_O("file-wrapper")},n.a.createElement(N,{className:_O("file-link",{active:a&&a.id===e.id,"after-deadline":t}),href:e.file.url,title:e.file.name,onClick:this.handleSubmissionClick(e)},s),e.plagiarism&&n.a.createElement(OO,{compact:!0,plagiarism:e.plagiarism,size:"m"}))}getRunIdFromSubmission(e){return(e.runId||e.file.runId||e.file.id).toString()}isEveryCommentExpired(e,t){return e.every(e=>Ce.fromISO(e.addedTime)>t)}getCommentMods(e){const{activeCommentId:t,userId:s}=this.props;return{editing:e.id===t,own:e.author.id===s,type:e.type}}handleSubmissionClick(e){return t=>{t.preventDefault(),this.props.onSubmissionClick(e)}}handleEditClick(e){return()=>{this.props.onEditClick(e)}}handleContestVerdictClick(e){return()=>{this.props.onContestVerdictClick(e)}}handleRedjudgedSubmissionClick(e){return()=>{if(!e)return;const t=this.getRunIdFromSubmission(e),{ref:s}=this.commentRefs[t];this.scrollToComment(s),this.props.onSubmissionClick(e)}}scrollToComment(e){const{current:t}=e;t&&t.parentElement&&(t.parentElement.scrollTop=t.offsetTop-t.parentElement.offsetTop-10)}}).prototype,"renderComment",[$.a],Object.getOwnPropertyDescriptor(wO.prototype,"renderComment"),wO.prototype),AO(wO.prototype,"handleSubmissionClick",[$.a],Object.getOwnPropertyDescriptor(wO.prototype,"handleSubmissionClick"),wO.prototype),AO(wO.prototype,"handleEditClick",[$.a],Object.getOwnPropertyDescriptor(wO.prototype,"handleEditClick"),wO.prototype),AO(wO.prototype,"handleContestVerdictClick",[$.a],Object.getOwnPropertyDescriptor(wO.prototype,"handleContestVerdictClick"),wO.prototype),wO);MO.displayName="CommentsList";var xO,DO=Object(b.b)(function(e,t){return{submissionsMap:kO(e,t.solutionId)}})(MO);function PO(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const RO=Object(le.a)(XS.a.comments);let LO=(PO((xO=class extends a.Component{constructor(){super(...arguments),this.state={hasScroll:!1,commentText:"",activeCommentId:null,verdictOfSubmission:null},this.formRef=Object(a.createRef)(),this.listRef=Object(a.createRef)()}componentDidMount(){const e=this.listRef.current;if(!e)return;const t=e.scrollHeight>e.clientHeight;t&&(e.scrollTop=e.scrollHeight),this.setState({hasScroll:t})}getSnapshotBeforeUpdate(e){const t=this.listRef.current;if(t)return e.comments.length<this.props.comments.length?t.scrollHeight-t.scrollTop:null}componentDidUpdate(e,t,s){this.fixScrollPosition(s),e.uploadStatus===Gt.a.PENDING&&this.props.uploadStatus===Gt.a.SUCCESS&&this.handleCommentTextReset()}render(){const{uploadStatus:e,comments:t,role:s,selectedSubmission:a,deadline:r,userId:i,solutionStatus:o,isContestIntegrated:c,onSelectSubmission:l,solutionId:u}=this.props,{commentText:d,activeCommentId:m,hasScroll:p,verdictOfSubmission:h}=this.state,b=![x.Student,x.Teacher].includes(s);return n.a.createElement("section",{className:RO({"has-scroll":p})},s===x.Student&&o&&n.a.createElement(sO,{solutionStatus:o,isContestIntegrated:c}),n.a.createElement("h2",{className:RO("title")},O.b.text({id:"solutions-history",keyset:"tasks"})),n.a.createElement(DO,{readonly:b,comments:t,solutionId:u,deadline:r,listRef:this.listRef,activeCommentId:m,selectedSubmission:a,userId:i,onEditClick:this.handleEditClick,onSubmissionClick:l,onContestVerdictClick:this.openSideblockWithLog,onScroll:this.updateScroll}),!b&&n.a.createElement(cO,{ref:this.formRef,value:d,uploadStatus:e,isEditing:null!==m,onBlur:this.handleCommentTextBlur,onChange:this.handleCommentTextChange,onReset:this.handleCommentTextReset,onSubmit:this.handleCommentTextSubmit}),h&&n.a.createElement(xS,{visible:null!==h,onClose:this.closeSideblockWithLog},n.a.createElement(LS,{submissionId:h.id})))}fixScrollPosition(e){const t=this.listRef.current;t&&null!==e&&(t.scrollTop=t.scrollHeight-e)}updateScroll(){const e=this.listRef.current;if(!e)return;const t=0!==e.scrollTop;this.state.hasScroll!==t&&this.setState({hasScroll:t})}handleEditClick(e){const t=this.formRef.current;t&&t.focus();let s=e.data;const a=new Map([[/<br ?\/?>/g,"\n"],[/&lt;/g,"<"],[/&gt;/g,">"]]);for(const[e,t]of a.entries())s=s.replace(e,t);this.setState({commentText:s,activeCommentId:e.id})}handleCommentTextBlur(){const{commentText:e}=this.state;e||this.setState({activeCommentId:null})}handleCommentTextChange(e){this.setState({commentText:e})}handleCommentTextReset(){const e=this.formRef.current;e&&e.focus(),this.setState({commentText:"",activeCommentId:null})}handleCommentTextSubmit(){const{commentText:e,activeCommentId:t}=this.state;null!==t?this.props.onEditComment(e,t):this.props.onAddComment(e)}openSideblockWithLog(e){const{comments:t}=this.props,s=t.findIndex(t=>t.id===e),{verdictOfSubmission:a}=t[s];this.setState({verdictOfSubmission:a})}closeSideblockWithLog(){this.setState({verdictOfSubmission:null})}}).prototype,"updateScroll",[$.a],Object.getOwnPropertyDescriptor(xO.prototype,"updateScroll"),xO.prototype),PO(xO.prototype,"handleEditClick",[$.a],Object.getOwnPropertyDescriptor(xO.prototype,"handleEditClick"),xO.prototype),PO(xO.prototype,"handleCommentTextBlur",[$.a],Object.getOwnPropertyDescriptor(xO.prototype,"handleCommentTextBlur"),xO.prototype),PO(xO.prototype,"handleCommentTextChange",[$.a],Object.getOwnPropertyDescriptor(xO.prototype,"handleCommentTextChange"),xO.prototype),PO(xO.prototype,"handleCommentTextReset",[$.a],Object.getOwnPropertyDescriptor(xO.prototype,"handleCommentTextReset"),xO.prototype),PO(xO.prototype,"handleCommentTextSubmit",[$.a],Object.getOwnPropertyDescriptor(xO.prototype,"handleCommentTextSubmit"),xO.prototype),PO(xO.prototype,"openSideblockWithLog",[$.a],Object.getOwnPropertyDescriptor(xO.prototype,"openSideblockWithLog"),xO.prototype),PO(xO.prototype,"closeSideblockWithLog",[$.a],Object.getOwnPropertyDescriptor(xO.prototype,"closeSideblockWithLog"),xO.prototype),xO);function FO(e,t){const[s,n]=Object(a.useState)(!1),r=Object(a.useCallback)(()=>{n(document.hidden)},[]);Object(a.useEffect)(()=>(document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r)}),[r]),function(e,t){const s=Object(a.useRef)(()=>{});Object(a.useEffect)(()=>{s.current=e},[e]),Object(a.useEffect)(()=>{if(null===t)return;const e=setInterval(function(){s.current()},t);return()=>{clearInterval(e)}},[t])}(e,s?null:t)}function zO(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,a=s;null!==s&&t&&(t.statusCode===wn.b||Object(wn.f)(t.statusCode))&&(a=3e5),FO(e,a)}LO.displayName="Comments";const UO=e=>{let{task:t}=e;const s=Object(I.j)(),r=Object(I.g)(),i=Object(b.c)(),o=Boolean(t.latestSubmission),c=Boolean(t.solutionId);Object(a.useEffect)(()=>{s&&o&&r.replace("".concat(s.url,"/solutions/").concat(t.solutionId))},[s,r,o,t.solutionId]),Object(a.useEffect)(()=>{c&&i(To({solutionId:t.solutionId}))},[i,c,t.solutionId]);const l=Object(b.d)(IO)[t.solutionId]||[];zO(()=>{c&&i(To({solutionId:t.solutionId}))},Object(b.d)(CO),l.length?1e4:null);const u=Object(a.useCallback)(e=>{i(Ao({solutionId:t.solutionId,text:e}))},[i,t.solutionId]),d=Object(a.useCallback)((e,s)=>{i(Mo({solutionId:t.solutionId,commentId:s,text:e}))},[i,t.solutionId]),m=Object(b.d)(jO),p=Object(b.d)(q);return s?n.a.createElement(vS,{narrowLeft:!0,leftColumn:n.a.createElement(gS,{content:t.description}),rightColumn:n.a.createElement(TS,{all:!0,border:!0},n.a.createElement(LO,{userId:p,role:x.Student,solutionId:t.solutionId,deadline:t.deadline,isContestIntegrated:t.isContestIntegrated,solutionStatus:Ze.New,comments:l,uploadStatus:m,onAddComment:u,onEditComment:d,selectedSubmission:null,onSelectSubmission:()=>{}}))}):null};UO.displayName="StudentRootRoute";var HO=s(372),VO=s.n(HO);const GO=Object(le.a)(VO.a.taskDescriptionOpener),BO=e=>{let{taskDescription:t,taskTitle:s,taskUrl:r,taskHasManualCheck:i}=e;const[o,c]=Object(a.useState)(!1),l=Object(a.useCallback)(e=>{e.preventDefault(),c(!0)},[]),u=Object(a.useCallback)(()=>{c(!1)},[]);return n.a.createElement("div",{className:GO()},n.a.createElement(da,{exact:!0,to:r,view:"button",onClick:l},O.b.text({id:"task-description",keyset:"tasks"})),n.a.createElement(xS,{visible:o,onClose:u},n.a.createElement("div",{className:GO("sideblock")},n.a.createElement(gS,{taskTitle:s,hasManualCheck:i,content:t}))))};BO.displayName="TaskDescriptionOpener";var WO=s(373),KO=s.n(WO);const qO=Object(le.a)(KO.a.message),YO=e=>{let{children:t,className:s,type:a="normal",align:r="left"}=e;return n.a.createElement("p",{className:Object(le.b)(s,qO({type:a,align:r}))},t)};function JO(e,t){return e.solutions.details.detailsMap[t]}function ZO(e){return e.solutions.details.detailsMap}function XO(e){return e.solutions.details.fetchStatus}function QO(e){return e.solutions.details.fetchError}YO.displayName="Message";var $O,ev=s(299);let tv=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}(($O=class extends a.Component{triggerRerender(){this.forceUpdate()}render(){const{code:e,onCopy:t,className:s,btnTitle:a}=this.props;return n.a.createElement(Ff.a,{text:e||"",onCopy:t,options:{format:"text/plain"}},n.a.createElement(Se.a,{className:s,icon:e=>n.a.createElement(ge.a,{cls:e,size:"l",type:"editor-copy"}),title:a,onMouseOver:this.triggerRerender}))}}).prototype,"triggerRerender",[$.a],Object.getOwnPropertyDescriptor($O.prototype,"triggerRerender"),$O.prototype),$O);tv.displayName="CopyToClipboardControl";var sv,av=tv;s(768);const nv=d.a.with("code-editor"),rv=Object(a.lazy)(()=>Promise.all([s.e(0),s.e(3)]).then(s.bind(null,1139)));let iv=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((sv=class extends a.Component{constructor(){super(...arguments),this.renderLoadingMessage=()=>this.renderCenteredMessage(O.b.text({id:"loading-code"})),this.renderErrorMessage=()=>{const e=O.b.text({id:"something-went-wrong",keyset:"errors"});return this.renderCenteredMessage(e)},this.renderCenteredMessage=e=>n.a.createElement("div",{className:nv("message-wrapper")},n.a.createElement("p",{className:nv("message")},e)),this.showCopySuccessMessage=()=>{this.props.addNotification({i18n:{id:"copy-success-message",keyset:"common"},type:an.b.SUCCESS})},this.handleCodeChange=e=>{const{onChange:t,code:s}=this.props;t&&e!==s&&t(e)}}componentWillUnmount(){this.props.setEditorReadonlyState(!0)}handleReadOnly(){const{setEditorReadonlyState:e,isReadonly:t}=this.props,{userUid:s}=this.props,a=Object.assign({},this.props.match.params);F("ButtonEdit",{uid:s,course_id:Number(a.courseId),group_id:Number(a.groupId),lesson_id:Number(a.lessonId),tasks_id:Number(a.taskId),solutions_id:Number(a.solutionId)}),e(!t)}render(){const{className:e,downloadUrl:t,code:s,isReadonly:r,role:i,isToggleReadOnlyButtonVisible:o}=this.props,c=O.b.text({id:"copy"}),l=O.b.text({id:"edit"}),u=O.b.text({id:"editing"}),d=i===x.Student;return n.a.createElement("div",{className:Object(le.b)(nv(),e)},n.a.createElement("div",{className:nv("content")},n.a.createElement(S,{renderFallback:this.renderErrorMessage},n.a.createElement(a.Suspense,{fallback:this.renderLoadingMessage()},n.a.createElement("div",{className:nv("controls")},d&&o&&n.a.createElement(Se.a,{className:nv("control-button",{active:!r}),icon:e=>n.a.createElement(ge.a,{cls:e,size:"l",type:"editor-edit"}),title:r?l:u,onClick:this.handleReadOnly,disabled:!r}),n.a.createElement(av,{code:s,onCopy:this.showCopySuccessMessage,className:nv("control-button"),btnTitle:c}),t&&n.a.createElement(Se.a,{className:nv("control-button"),icon:e=>n.a.createElement(ge.a,{cls:e,size:"l",type:"editor-download"}),title:O.b.text({id:"download"}),target:"_blank",rel:"noopener noreferrer",type:"link",url:t})),n.a.createElement(rv,{language:ev.a.PYTHON,onChange:this.handleCodeChange,value:s,options:{readOnly:r}})))))}}).prototype,"handleReadOnly",[$.a],Object.getOwnPropertyDescriptor(sv.prototype,"handleReadOnly"),sv.prototype),sv);iv.displayName="CodeEditorBase";const ov=Object(b.b)(function(e){return{code:YS(e),isReadonly:JS(e),userUid:Y(e)}},function(e){return Object(ee.bindActionCreators)({addNotification:sn.a,setEditorReadonlyState:Mm},e)})(gb(Object(I.k)(iv))),cv=e=>e.files.sourceCodeMap,lv=1024;function uv(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100*lv;return!(!t||t>s)&&(e.startsWith("text")||"application/x-python-code"===e)}s(769);const dv=d.a.with("source-code-viewer"),mv=e=>{let{fileMetadata:t,fileLimits:s}=e;const{id:r,size:i,mimeType:o,url:c}=t,{displayableFileSize:l}=s,u=Object(b.c)(),d=Object(b.d)(cv)[r],{sourceCode:m=null,fetchError:p=null,fetchStatus:h=null}=d||{},E=Object(b.d)(Wl),f=Object(a.useCallback)(e=>{u(_m(e))},[u]);Object(a.useEffect)(()=>{uv(o,i)&&(h||u(Km.request({fileId:r.toString()})))},[u,r,o,i,h]),Object(a.useEffect)(()=>{f(m)},[f,m]);const g=Object(a.useCallback)(()=>n.a.createElement("div",{className:dv("placeholder")},n.a.createElement(ye.a,{progress:!0,size:"s"})),[]),y=Object(a.useCallback)(e=>n.a.createElement("div",{className:dv("placeholder")},e),[]);return uv(o,i,l)?d?n.a.createElement("div",{className:dv()},n.a.createElement(yb,{fetchError:p,fetchStatus:h,renderPending:g,renderError:y},n.a.createElement(ov,{downloadUrl:c,language:o.includes("python")?"python":void 0,onChange:f,isToggleReadOnlyButtonVisible:!E}))):n.a.createElement("div",{className:dv()},g()):n.a.createElement("div",{className:dv()},n.a.createElement("div",{className:dv("placeholder")},O.b.text({id:"undisplayable-submission",keyset:"tasks"}),".",n.a.createElement("br",null),n.a.createElement(Ln.a,{className:dv("download-link"),href:c,behavior:"external"},O.b.text({id:"download-submission",keyset:"tasks"}))))};mv.displayName="SourceCodeViewerBase";const pv=jn(mv);class hv extends a.Component{constructor(){super(...arguments),this.keys={[x.Student]:Qe,[x.Teacher]:$e,[x.Methodist]:$e}}render(){const{role:e,status:t}=this.props,s=this.keys[e];return t===Ze.AcceptedAfterDeadline?n.a.createElement(ve,{content:O.b.text({id:s[Ze.AcceptedAfterDeadline],keyset:"solutions"})},n.a.createElement("span",null,O.b.text({id:s[Ze.Accepted],keyset:"solutions"}))):O.b.text({id:s[t],keyset:"solutions"})}}hv.displayName="SolutionStatusText";var bv=gb(hv);s(770);const Ev=d.a.with("solution-status-viewer");class fv extends a.Component{render(){const{solution:e}=this.props,{status:t,teacher:s,student:a,updateTime:r}=e;return n.a.createElement("section",{className:Ev({status:t.type})},n.a.createElement("div",{className:Ev("info")},n.a.createElement(cf,Object.assign({size:"s"},this.isOnStudentSide()?{avatar:a.avatar,userId:a.id}:s&&{avatar:s.avatar,userId:s.id})),n.a.createElement(Oa,{className:Ev("status-text"),level:4},n.a.createElement(bv,{status:t.type}),this.hasScore()&&this.renderScore())),this.hasDate()&&n.a.createElement("time",{className:Ev("updated-at")},Ce.fromISO(r).toFormat("d MMM HH:mm")))}renderScore(){const{solution:e}=this.props,{task:t,score:s}=e,a=O.b.text({id:"N-points",params:{count:t.scoreMax,n:"".concat(s,"/").concat(t.scoreMax)}});return n.a.createElement("span",{className:Ev("score-info"),title:a},O.b.element({id:"N-points",params:{count:t.scoreMax,n:n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:Ev("score")}," ",s," "),n.a.createElement("span",{className:Ev("max-score")},"/",t.scoreMax," "))}}))}isOnStudentSide(){const{status:e}=this.props.solution;return[Ze.New,Ze.Draft].includes(e.type)}hasDate(){const{status:e}=this.props.solution;return![Ze.Review,Ze.AutoReview].includes(e.type)}hasScore(){const{status:e}=this.props.solution;return[Ze.Accepted,Ze.AcceptedAfterDeadline].includes(e.type)}}fv.displayName="SolutionStatusViewer";var gv=fv;s(771);const yv=d.a.with("submission-header-viewer");class Sv extends a.Component{render(){const{selectedFile:{addedTime:e,id:t,runId:s},solution:a}=this.props,{status:r}=a;return n.a.createElement("header",{className:yv({status:r.type})},n.a.createElement("div",{className:yv("info")},n.a.createElement(Oa,{className:yv("id"),level:4},O.b.text({id:"id",keyset:"tasks",params:{id:s||t}})),n.a.createElement("time",{className:yv("date")},Ce.fromISO(e).toFormat("d MMM HH:mm"))),n.a.createElement("div",{className:yv("solution-status")},n.a.createElement(gv,{solution:a})))}}Sv.displayName="SubmissionHeaderViewer";const Ov=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),vv=/^(?=.+)(?:[1-9]\d*|0)?(?:\.\d+)?$/;var Nv;s(772);function Iv(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const kv=d.a.with("scoring-block"),Tv={large:"l",medium:"m"};let Cv=(Iv((Nv=class extends a.PureComponent{constructor(){super(...arguments),this.state={value:(this.props.score||this.props.maxScore).toString()},this.scoreInput=n.a.createRef()}componentDidMount(){Ov&&window.requestAnimationFrame(()=>{this.scoreInput.current&&this.scoreInput.current.focus()})}handleChange(e){const{value:t}=e.target,{precision:s}=this.props;if(void 0!==s){const[e,a]=t.split(/[.,]/);if(0===s)return void this.setState({value:e});if(a&&a.length>s)return void this.setState({value:"".concat(e,".").concat(a.substr(0,s))})}this.setState({value:t})}isValid(){const{score:e,maxScore:t}=this.props,{value:s}=this.state,a=Number(s);return a!==e&&vv.test(s)&&a<=t}handleSubmit(e){this.isValid()&&(e.preventDefault(),this.props.onSetScore(Number(this.state.value)))}render(){const{maxScore:e,size:t,theme:s="action",precision:a,setScoreButtonText:r="OK"}=this.props,{value:i}=this.state,o=n.a.createElement(Se.a,{disabled:!this.isValid(),size:Tv[t],view:"lyceum",type:"submit",theme:s},r);return n.a.createElement("form",{className:kv(),onSubmit:this.handleSubmit},n.a.createElement(VE,{controlRef:this.scoreInput,cls:kv("input",{size:t}),value:i,type:"number",onChange:this.handleChange,size:Tv[t]}),n.a.createElement("span",{className:kv("max-score")},"/",e),o)}}).prototype,"handleChange",[$.a],Object.getOwnPropertyDescriptor(Nv.prototype,"handleChange"),Nv.prototype),Iv(Nv.prototype,"handleSubmit",[$.a],Object.getOwnPropertyDescriptor(Nv.prototype,"handleSubmit"),Nv.prototype),Nv);Cv.displayName="ScoringBlock";s(773);const jv=d.a.with("grading-block");class wv extends a.Component{render(){return n.a.createElement("div",{className:jv()},this.props.fetchStatus===Gt.a.PENDING?this.renderSpinner():this.renderBlock())}renderSpinner(){return n.a.createElement("div",{className:jv("spin")},n.a.createElement(ye.a,{progress:!0,size:"m"}))}renderBlock(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:jv("scoring-block")},n.a.createElement(Cv,{size:"large",theme:"approve",maxScore:this.props.maxScore,setScoreButtonText:O.b.text({id:"mark-ok",keyset:"tasks"}),onSetScore:this.props.setAcceptedGrade})),n.a.createElement(Se.a,{className:jv("reject-button"),size:"l",theme:"reject",view:"lyceum",onClick:this.props.setReworkGrade},O.b.text({id:"mark-redo-brief",keyset:"tasks"})))}}wv.displayName="GradingBlock";var Av,_v=wv;s(774);function Mv(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const xv=d.a.with("grading-popup");let Dv=(Mv((Av=class extends a.Component{handleAccept(e){this.props.closePopup(),this.props.setAcceptedGrade(e)}handleRework(){this.props.closePopup(),this.props.setReworkGrade()}handleRejudge(){this.props.closePopup(),this.props.rejudge()}render(){const{maxScore:e,score:t,canRejudge:s}=this.props,a=Boolean(t)||0===t;return n.a.createElement("div",{className:xv()},n.a.createElement("span",{className:xv("caption")},O.b.text({id:"".concat(a?"change-score":"set-score"),keyset:"tasks"})),n.a.createElement(Cv,{size:"medium",theme:"approve",score:t,maxScore:e,setScoreButtonText:O.b.text({id:"mark-ok",keyset:"tasks"}),onSetScore:this.handleAccept}),n.a.createElement("div",{className:xv("control-block")},a&&n.a.createElement("button",{type:"button",className:xv("button",{type:"redo"}),onClick:this.handleRework},O.b.text({id:"mark-redo-full",keyset:"tasks"})),s&&n.a.createElement("button",{type:"button",className:xv("button"),onClick:this.handleRejudge},O.b.text({id:"rejudge",keyset:"tasks"}))))}}).prototype,"handleAccept",[$.a],Object.getOwnPropertyDescriptor(Av.prototype,"handleAccept"),Av.prototype),Mv(Av.prototype,"handleRework",[$.a],Object.getOwnPropertyDescriptor(Av.prototype,"handleRework"),Av.prototype),Mv(Av.prototype,"handleRejudge",[$.a],Object.getOwnPropertyDescriptor(Av.prototype,"handleRejudge"),Av.prototype),Av);Dv.displayName="GradingPopup";var Pv;s(775);const Rv=d.a.with("solution-status-editor");let Lv=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((Pv=class extends a.Component{constructor(){super(...arguments),this.state={isPopupVisible:!1},this.editButtonRef=n.a.createRef(),this.popupDirections=["bottom-center","bottom-right"]}render(){return n.a.createElement("section",{className:Rv()},this.renderStatusEditor(),this.hasPopup()&&this.renderPopup())}renderStatusEditor(){const{gradingStatus:e,solution:t,gradeAsAccepted:s,gradeAsRework:a}=this.props;switch(t.status.type){case Ze.Review:case Ze.AutoReview:return n.a.createElement(_v,{fetchStatus:e,maxScore:t.task.scoreMax,setAcceptedGrade:s,setReworkGrade:a});case Ze.Accepted:case Ze.AcceptedAfterDeadline:return this.renderStatusDescription(!0);case Ze.Rework:return this.renderStatusDescription();default:return null}}renderPopup(){const{isPopupVisible:e}=this.state,{solution:t,gradeAsRework:s,gradeAsAccepted:a,rejudge:r}=this.props,{status:i,score:o}=t;return n.a.createElement(ca,{autoclosable:!0,cls:Rv("popup"),theme:"normal",target:"anchor",directions:this.popupDirections,anchor:this.editButtonRef.current,visible:e,onOutsideClick:this.togglePopup},n.a.createElement(Dv,{canRejudge:this.canRejudge(),closePopup:this.togglePopup,maxScore:t.task.scoreMax,score:i.type===Ze.Rework?void 0:o,setAcceptedGrade:a,setReworkGrade:s,rejudge:r}))}renderStatusDescription(e){const{solution:t,gradingStatus:s,rejudgeStatus:a}=this.props,{status:r,teacher:i,updateTime:o}=t,c=a===Gt.a.PENDING||s===Gt.a.PENDING;return n.a.createElement("div",{className:Rv("description",{status:r.type})},n.a.createElement("div",{className:Rv("info")},n.a.createElement(cf,Object.assign({size:"s"},i&&{avatar:i.avatar,userId:i.id})),n.a.createElement("div",{className:Rv("status-text")},n.a.createElement("h4",{className:Rv("status-name")},n.a.createElement(bv,{status:r.type})),n.a.createElement("span",{className:Rv("score-info-wrapper")},e&&this.renderScore(),c?this.renderSpinner():this.renderEditButton()))),n.a.createElement("time",{className:Rv("updated-at")},Ce.fromISO(o).toFormat("d MMM HH:mm")))}renderScore(){const{solution:e}=this.props,{score:t,task:s}=e,a=O.b.text({id:"N-points",params:{count:s.scoreMax,n:"".concat(t,"/").concat(s.scoreMax)}});return n.a.createElement("span",{className:Rv("score-info"),title:a},O.b.element({id:"N-points",params:{count:s.scoreMax,n:n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:Rv("score")}," ",t," "),n.a.createElement("span",{className:Rv("max-score")},"/",s.scoreMax))}}))}renderSpinner(){return n.a.createElement(ye.a,{progress:!0,size:"xs"})}renderEditButton(){const{isPopupVisible:e}=this.state;return this.canEdit()?n.a.createElement(Se.a,{innerRef:this.editButtonRef,theme:"clear",size:"xs",view:"lyceum",checked:e,icon:e=>n.a.createElement(ge.a,{cls:e,size:"l",type:"edit"}),onClick:this.togglePopup}):null}togglePopup(){this.setState(e=>({isPopupVisible:!e.isPopupVisible}))}hasPopup(){const{status:e}=this.props.solution;return![Ze.Review,Ze.AutoReview].includes(e.type)}canEdit(){return!0}canRejudge(){const{isUserSuperuser:e,solution:t}=this.props;return e&&!t.task.hasManualCheck}}).prototype,"togglePopup",[$.a],Object.getOwnPropertyDescriptor(Pv.prototype,"togglePopup"),Pv.prototype),Pv);Lv.displayName="SolutionStatusEditor";var Fv,zv=Lv;function Uv(e){return e.solutions.grade.fetchStatus}function Hv(e){return e.solutions.rejudge.fetchStatus}function Vv(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let Gv=(Vv((Fv=class extends a.Component{render(){return n.a.createElement(zv,{role:this.props.role,isUserSuperuser:this.props.isSuperuser,solution:this.props.solution,gradingStatus:this.props.gradingStatus,rejudgeStatus:this.props.rejudgeStatus,gradeAsAccepted:this.gradeAsAccepted,gradeAsRework:this.gradeAsRework,rejudge:this.rejudge})}gradeAsAccepted(e){const{solution:t,match:s}=this.props;this.props.gradeSolution({solutionId:t.id,status:Ze.Accepted,groupId:Number(s.params.groupId),score:e})}gradeAsRework(){const{solution:e,match:t}=this.props;this.props.gradeSolution({solutionId:e.id,status:Ze.Rework,groupId:Number(t.params.groupId)})}rejudge(){const{solution:e}=this.props;this.props.rejudgeSolution({solutionId:e.id})}}).prototype,"gradeAsAccepted",[$.a],Object.getOwnPropertyDescriptor(Fv.prototype,"gradeAsAccepted"),Fv.prototype),Vv(Fv.prototype,"gradeAsRework",[$.a],Object.getOwnPropertyDescriptor(Fv.prototype,"gradeAsRework"),Fv.prototype),Vv(Fv.prototype,"rejudge",[$.a],Object.getOwnPropertyDescriptor(Fv.prototype,"rejudge"),Fv.prototype),Fv);Gv.displayName="SolutionStatusEditorContainer";var Bv=Object(b.b)(function(e){return{isSuperuser:J(e),gradingStatus:Uv(e),rejudgeStatus:Hv(e)}},function(e){return Object(ee.bindActionCreators)({gradeSolution:rm,rejudgeSolution:Nm.request},e)})(gb(Object(I.k)(Gv)));s(776);const Wv=d.a.with("submission-header-editor"),Kv=e=>{let{runId:t}=e;return n.a.createElement(B.Consumer,null,e=>n.a.createElement(N,{className:Wv("link"),href:M.contestAdminRunReport.build({tld:e.tld},{id:t})},n.a.createElement("div",{className:Wv("id")},O.b.text({id:"id",keyset:"tasks",params:{id:t}}))))};Kv.displayName="RunReportLink";const qv=e=>{let{id:t}=e;return n.a.createElement("div",{className:Wv("id")},O.b.text({id:"id",keyset:"tasks",params:{id:t}}))};qv.displayName="FileId";const Yv=e=>{let{submission:{file:t,plagiarism:s},solution:a}=e;return n.a.createElement("header",{className:Wv({status:a.status.type})},n.a.createElement("div",{className:Wv("info")},n.a.createElement(Oa,{className:Wv("heading"),level:4},t.runId?n.a.createElement(Kv,{runId:t.runId}):n.a.createElement(qv,{id:t.id}),s&&n.a.createElement(OO,{className:Wv("plagiarism"),plagiarism:s,size:"l"})),n.a.createElement("time",{className:Wv("date"),dateTime:t.addedTime},Ce.fromISO(t.addedTime).toFormat("d MMM HH:mm"))),n.a.createElement("div",{className:Wv("solution-status")},n.a.createElement(Bv,{solution:a})))};Yv.displayName="SubmissionHeaderEditor";const Jv={submissionsComparison:new C.a("".concat(j,"/lessons/:lessonId/tasks/:taskId/submissions/compare/:firstSubmissionId/:secondSubmissionId"))};var Zv=s(374),Xv=s.n(Zv);const Qv=Object(le.a)(Xv.a.submission),$v=e=>{let{solution:t,submission:s,onSubmissionSelect:r,role:i}=e;const o=Object(I.j)(),{pathname:c}=Object(I.h)(),{latestSubmission:l}=t;if(!l)throw new k.e("Solution ".concat(t.id," has no submission"));const u=Object(a.useCallback)(()=>{r(l)},[l,r]),d=Ce.fromISO(s.file.addedTime)<Ce.fromISO(l.file.addedTime);return n.a.createElement("section",{className:Qv()},n.a.createElement("div",{className:Qv("header-wrapper")},i===x.Student?n.a.createElement(Sv,{selectedFile:s.file,solution:t}):n.a.createElement(Yv,{submission:s,solution:t})),s.plagiarism&&n.a.createElement("div",{className:Qv("warning")},s.plagiarism.status===lO.Unresolved?O.b.text({id:"plagiary-probability",keyset:"antiplagiary",params:{n:Math.ceil(100*s.plagiarism.similarity)}}):O.b.text({id:"status-".concat(s.plagiarism.status),keyset:"antiplagiary"}),".",v,o&&n.a.createElement(Ln.a,{to:{pathname:Jv.submissionsComparison.build({courseId:o.params.courseId,groupId:o.params.groupId,lessonId:t.task.lesson.id.toString(),taskId:t.task.id.toString(),firstSubmissionId:s.id.toString(),secondSubmissionId:s.plagiarism.submissionId.toString()}),state:{previousPath:c}}},O.b.text({id:"compare-solutions",keyset:"antiplagiary"}))),d&&n.a.createElement("div",{className:Qv("warning")},O.b.text({id:"old-submission-warning",keyset:"tasks"}),".",v,n.a.createElement(Ln.a,{pseudo:!0,behavior:"external",href:l.file.url,onClick:u},O.b.text({id:"last-submission-link",keyset:"tasks"}))),n.a.createElement("div",{className:Qv("file")},n.a.createElement(pv,{fileMetadata:s.file})))};$v.displayName="SubmissionBase";const eN=gb($v),tN=()=>{const{taskId:e,solutionId:t}=Object(I.i)(),s=Object(b.c)(),r=Object(b.d)(ZO)[t],i=Object(b.d)(QO),o=Object(b.d)(XO),c=Object(b.d)(Wl);Object(a.useEffect)(()=>{s(function(e){return{type:Xd.FETCH_STUDENT_DETAILS_START,payload:e}}({solutionId:Number(t)}))},[s,t]);const l=Object(b.d)(IO)[t]||[];zO(()=>{s(To({solutionId:Number(t)}))},Object(b.d)(CO),1e4);const u=Object(a.useCallback)(e=>{s(Ao({solutionId:Number(t),text:e}))},[s,t]),d=Object(a.useCallback)((e,a)=>{s(Mo({solutionId:Number(t),commentId:a,text:e}))},[s,t]),m=Object(a.useCallback)(e=>{s(Lo(e))},[s]),p=Object(a.useCallback)(e=>{s(_m(e))},[s]),h=Object(b.d)(jO),E=Object(b.d)(Dm),f=Object(b.d)(q);return n.a.createElement(yb,{fetchError:i,fetchStatus:o,renderError:e=>n.a.createElement(YO,null,e)},r&&r.task.id===Number(e)&&n.a.createElement(vS,{leftColumn:n.a.createElement(TS,{topLeft:!0},r.latestSubmission&&E?n.a.createElement(eN,{solution:r,submission:E,onSubmissionSelect:m}):n.a.createElement(ov,{language:"python",onChange:p,isToggleReadOnlyButtonVisible:!c})),rightColumn:n.a.createElement(TS,{topRight:!0,border:!0},n.a.createElement(LO,{userId:f,role:x.Student,solutionId:r.id,solutionStatus:r.status.type,isContestIntegrated:r.task.isContestIntegrated,comments:l,deadline:r.deadline,selectedSubmission:E,uploadStatus:h,onAddComment:u,onEditComment:d,onSelectSubmission:m}))}))};tN.displayName="StudentSolutionIdRoute";const sN=e=>{let{task:t}=e;const s=Object(I.j)(),a=Object(I.i)();return s?n.a.createElement(n.a.Fragment,null,t.description&&n.a.createElement(BO,{taskUrl:A.taskDetails.build(a),taskTitle:t.title,taskDescription:t.description,taskHasManualCheck:t.hasManualCheck}),n.a.createElement(I.d,null,n.a.createElement(I.b,{path:"".concat(s.path,"/:solutionId")},n.a.createElement(tN,null)),n.a.createElement(I.a,{to:"".concat(s.url,"/").concat(t.solutionId)}))):null},aN=e=>{let{taskUrlBuilder:t}=e;const s=Object(I.j)(),r=Object(I.i)(),{courseId:i,groupId:o,taskId:l}=r,u=Object(b.d)(Yl),d=Object(b.d)(ql),m=Object(b.d)(Bl),p=Object(b.d)(re)[i],h=Object(b.d)($l)(Number(l)),E=Object(b.c)();let f;Object(a.useEffect)(()=>(E(Ua({groupId:Number(o),taskId:Number(l)})),()=>{E(Fa())}),[E,o,l]);let g=null,y=null;if(h){const{previousTask:e,nextTask:s}=h;g=e&&t(e.id),y=s&&t(s.id)}return p&&m&&(f=O.b.text({id:"task-details-student",keyset:"page-titles",params:{task:m.title,lesson:m.lesson.title,course:p.title}})),s?n.a.createElement(yb,{fetchError:d,fetchStatus:u},n.a.createElement(c.a,null,n.a.createElement("title",null,f),n.a.createElement("meta",{name:"title",content:f})),n.a.createElement(Xy,{leftArrowUrl:g,rightArrowUrl:y}),m&&m.id===Number(l)&&n.a.createElement(n.a.Fragment,null,n.a.createElement(tS,{taskTitle:m.title,hasManualCheck:m.hasManualCheck,taskInfo:n.a.createElement(dS,{taskDeadline:m.deadline,taskMaxScore:m.scoreMax,taskTag:m.tag})}),n.a.createElement(I.d,null,n.a.createElement(I.b,{exact:!0,path:s.path},n.a.createElement(UO,{task:m})),n.a.createElement(I.b,{path:"".concat(s.path,"/solutions")},n.a.createElement(sN,{task:m}))))):null};aN.displayName="StudentTaskIdRoute";const nN=()=>{const e=Object(I.j)(),{courseId:t,groupId:s,lessonId:r}=Object(I.i)(),i=Object(b.c)();Object(a.useEffect)(()=>(i(Va({courseId:Number(t),lessonId:Number(r)})),()=>{i(Ka())}),[i,t,r]);const o=Object(b.d)(Xl),c=Object(b.d)(Zl),l=Object(b.d)(Jl);return e?n.a.createElement(yb,{fetchError:c,fetchStatus:o},l.length>0&&n.a.createElement(Pn,{type:"narrow"},n.a.createElement(Pn.ActiveArea,null,n.a.createElement(qy,{taskGroups:l,urlData:{courseId:t,groupId:s,lessonId:r}})),n.a.createElement(Pn.Main,null,n.a.createElement(da,{back:!0,exact:!0,to:w.lessonDetails.build({courseId:t,groupId:s,lessonId:r})},O.b.text({id:"lesson-TITLE",keyset:"tasks",params:{title:l[0].tasks&&l[0].tasks[0].lesson.shortTitle}})),n.a.createElement(I.d,null,n.a.createElement(I.b,{path:"".concat(e.path,"/:taskId")},n.a.createElement(aN,{taskUrlBuilder:t=>"".concat(e.url,"/").concat(t)})))))):null};nN.displayName="StudentTasksRoute";const rN=e=>{let{code:t,children:s}=e;return n.a.createElement(I.b,{render:e=>{let{staticContext:a}=e;return a&&(a.statusCode=t),s}})};rN.displayName="Status";const iN=e=>{let{code:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["code"]);return n.a.createElement(rN,{code:t},n.a.createElement(I.b,s))};iN.displayName="RouteWithStatus";var oN=s(375),cN=s.n(oN),lN=s(376),uN=s.n(lN);const dN=["chooseimage","macaroni"];function mN(e){const t=e.markup.layout.reduce((e,t)=>("marker"===t.kind&&(e[t.content.id]=t),e),{}),s={};for(const[a,n]of Object.entries(e.markup.answers)){if(void 0===t[a])continue;"inline"===t[a].content.type?s[a]=uN()(n,(e,t,s)=>{e[s]=Array.isArray(t)?t[0]:t},{}):dN.includes(t[a].content.type)?s[a]=n[0]:s[a]=n}return s}var pN=s(87);const hN=e=>{let{text:t,mdState:s}=e;return n.a.createElement("div",{className:"problem-block_kind_text"},n.a.createElement(pN.a,{state:s},t))};hN.displayName="ProblemBlockKindText";var bN=hN,EN=s(1106),fN=s(396),gN=s(377),yN=s(264),SN=s(277),ON=s(29),vN=s(386),NN=s(1131),IN=s(1069),kN=s(1110),TN=s(1070),CN=s(1066),jN=s(1067);const wN=Object(he.compose)(CN.b,fe.a,jN.a)(CN.a);var AN=s(1095),_N=s(1068);const MN=Object(he.compose)(AN.c,Object(he.composeU)(AN.d,AN.e),_N.a,AN.b)(AN.a);var xN=s(59);const DN=Object(he.withBemMod)(Object(xN.b)(),{glyph:"carets-v"},e=>t=>{let{className:s}=t,a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["className"]);return n.a.createElement(e,Object.assign({},a,{className:Object(xN.b)({hasGlyph:!0},[s])}),n.a.createElement("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg"},n.a.createElement("path",{d:"M4.77573 7.0625C4.43096 7.64583 3.56904 7.64583 3.22427 7.0625L0.121343 1.8125C-0.223426 1.22917 0.207536 0.5 0.897075 0.5L7.10293 0.5C7.79247 0.5 8.22343 1.22917 7.87866 1.8125L4.77573 7.0625Z"})))}),PN=Object(he.compose)(DN)(xN.a);var RN=s(1096),LN=s(1132);const FN=Object(he.compose)(RN.b,LN.a,RN.c)(RN.a);var zN=s(1112),UN=s(1123);const HN=Object(he.compose)(Object(he.composeU)(zN.a,UN.a),UE.a,FE.d,FE.b)(FE.a),VN=e=>n.a.createElement(wN,Object.assign({forceRender:!0},e));VN.displayName="MountedPopup";const GN=new FS.Registry({id:Object(vN.b)()}).set("Trigger",MN).set("Popup",Object(Ee.a)(VN)).set("Menu",FN).set("Icon",PN).set("Textinput",HN),BN=Object(he.compose)(Object(FS.withRegistry)(GN),NN.a,IN.a,kN.a,TN.a,vN.c)(vN.a);function WN(e){return"field"===e.type}function KN(e){return"rational"===e.type}var qN=s(1129),YN=s(1071),JN=s(1128);const ZN=new FS.Registry({id:Object(qN.b)()});ZN.set("Textinput",HN);const XN=Object(he.compose)(Object(FS.withRegistry)(ZN),YN.a,JN.a)(qN.a);function QN(e){return{value:e,content:arguments.length>1&&void 0!==arguments[1]?arguments[1]:e}}const $N=[1,2,3,4,5,6,7,8,9,0].map(String).map(e=>QN(e)),eI=([">","<","=","≥","≤"].map(e=>QN(e)),QN("+"),QN("-","−"),QN("*","×"),QN("/","÷"),[{value:"Backspace",width:"wide",mode:"backspace"}]),tI=[{value:",",content:",",mode:"decimal"}],sI=[{value:"-",content:"-"}],aI=[QN("/")];let nI;!function(e){e.PRIMARY="primary",e.SECONDARY="secondary"}(nI||(nI={}));const rI=()=>void 0,iI={[nI.PRIMARY]:{handleKeyboardArrow:rI,handleTrackKeypress:rI,setRef:rI,shouldShowKeyboard:!1,shouldDisableNativeMobileKeyboard:!1,keyboardAllowed:!1},[nI.SECONDARY]:{handleKeyboardArrow:rI,handleTrackKeypress:rI,setRef:rI,shouldShowKeyboard:!1,shouldDisableNativeMobileKeyboard:!1,keyboardAllowed:!1},show:()=>({hide:rI,render:rI}),refs:{}};var oI=n.a.createContext(iI),cI=s(378),lI=s.n(cI);function uI(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.addEventListener(t,function n(){e.removeEventListener(t,n,a),s(...arguments)},a)}var dI=function(e){class t extends n.a.Component{constructor(){var e;super(...arguments),e=this,this.state={active:!1},this.displayName="withActiveClassWrapper",this.handleMouseDown=function(){const{onMouseDown:t}=e.props;t(...arguments),e.setState({active:!0}),uI(document,"mouseup",()=>{e.setState({active:!1})})},this.handleTouchStart=function(){const{onTouchStart:t}=e.props;t(...arguments),e.setState({active:!0}),uI(document,"touchend",()=>{e.setState({active:!1})})}}render(){const{className:t}=this.props,{active:s}=this.state;return n.a.createElement(e,Object.assign({},this.props,{className:Object(le.b)(t,s?"active":void 0),onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart}))}}return t.defaultProps={onMouseDown:()=>{},onTouchStart:()=>{}},t.displayName="WithActiveClass",t};s(855);const mI=dI("button"),pI=e=>{const{disabled:t=!1,mode:s,mix:a,isSelected:r,onPress:i,width:o,content:c}=e;return n.a.createElement(mI,{className:Object(le.b)(a,d()("keyboard","key",{width:o,mode:s,selected:r})),disabled:t,onClick:i},n.a.createElement("span",{className:"keyboard__key-content"},c))};pI.displayName="KeyboardKey";var hI=pI;const bI=e=>{let{keys:t,onPress:s}=e;return n.a.createElement("div",{className:"keyboard__block"},function(e,t){return e.map(e=>{return Object.assign({},e,{onPress:lI()(t,Object.assign({},e))})})}(t,s).map(e=>n.a.createElement(hI,Object.assign({},e,{key:"".concat(e.value)}))))};bI.displayName="KeyboardBlock";var EI=bI,fI=s(269);const gI="navigation-event-".concat(s.n(fI)()());class yI extends n.a.Component{constructor(){super(...arguments),this.state={controls:null}}componentDidMount(){const{show:e}=this.props;var t;e&&this.show(),t=this.hide,document.addEventListener(gI,t)}componentDidUpdate(e){const{show:t}=this.props;t!==e.show&&(t?this.show():this.hide())}componentWillUnmount(){var e;this.hide(),e=this.hide,document.removeEventListener(gI,e)}show(){const{keyboardType:e}=this.props;this.setState({controls:this.context.show(e)})}hide(){const{controls:e}=this.state;e&&e.hide&&e.hide()}handleMouseDown(e){e.preventDefault()}render(){const{children:e}=this.props,{controls:t}=this.state;if(t){return t.render(n.a.createElement("div",{className:"keyboard__content",onMouseDown:this.handleMouseDown},e))||null}return null}}yI.contextType=oI,yI.displayName="UseKeyboard";s(856);const SI=Object(ON.cn)("InlineInput"),OI=e=>{const{type:t,onChange:s,value:r}=e,i=SI({type:t}),o=e.readOnly||"initial"!==e.status,[c,l]=Object(a.useState)(!1),u=Object(a.useRef)(null),m=Object(a.useRef)(null),p=void 0!==r?r.toString():"",h=Object(a.useContext)(oI),{shouldDisableNativeMobileKeyboard:b,keyboardAllowed:E}=h[nI.PRIMARY],f=(WN(e)&&"number"===e.options.typeContent||KN(e))&&E,g=o||f&&b,y=Object(a.useCallback)((e,t)=>{c&&function(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){const s=e.createTextRange();return s.move("character",t),s.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}(e,t)},[c]),S=Object(a.useCallback)((e,t)=>{s(e),m.current=t},[s]);Object(a.useEffect)(()=>{const e=m.current;null!==e&&u.current&&(y(u.current,e),m.current=null)},[y,r]);const O=Object(a.useCallback)(e=>{const{value:t}=e;if(!u.current)return;const{selectionStart:s,selectionEnd:a}=u.current;if(null===s||null===a)return;const n=p.slice(0,s),r=p.slice(a,p.length);S(n+t+r,s+1)},[p,S]),v=Object(a.useCallback)(()=>{if(g||!u.current)return[p.length,p.length];const{selectionStart:e,selectionEnd:t}=u.current;return[e,t]},[g,p.length]),N=Object(a.useCallback)(()=>{if(!u.current)return;const[e,t]=v();if(null===e||null===t)return;let s=e;s===t&&(s-=1),s=Math.max(0,s);const a=p.slice(0,s),n=p.slice(t,p.length);S(a+n,s)},[p,v,S]),I=Object(a.useCallback)(()=>{if(function(e){return"choice"===e.type}(e))return n.a.createElement(BN,{baseline:!0,className:i,disabled:e.disabled,onChange:t=>e.onChange(Number(t.target.value)),options:e.options.choices.map((e,t)=>({value:t.toString(),content:e})),placeholder:e.options.placeholder,readOnly:o,size:"m",status:e.status,value:"number"==typeof e.value?e.value.toString():"",view:"platform",width:"synced"});if(WN(e)){const s=!o&&c&&f,a=!o&&f;return n.a.createElement(n.a.Fragment,null,n.a.createElement(XN,{className:SI({type:t,focusEnabled:a}),disabled:e.disabled,onChange:t=>e.onChange(t.target.value),maxLength:e.options.width,readOnly:g,size:"m",status:e.status,value:e.value||"",type:e.options.typeContent,view:"platform",width:"computed",controlRef:u,onFocus:()=>l(!0),onBlur:()=>l(!1)}),n.a.createElement(yI,{keyboardType:nI.PRIMARY,show:s},n.a.createElement(EI,{keys:$N,onPress:O}),n.a.createElement(EI,{keys:tI,onPress:O}),n.a.createElement(EI,{keys:sI,onPress:O}),n.a.createElement(EI,{keys:aI,onPress:O}),n.a.createElement(EI,{keys:eI,onPress:N})))}if(KN(e)){const s=!o&&c&&f,a=!o&&f;return n.a.createElement(n.a.Fragment,null,n.a.createElement(XN,{baseline:!0,className:SI({type:t,focusEnabled:a}),disabled:e.disabled,onChange:t=>e.onChange(t.target.value),maxLength:e.options.width,readOnly:g,size:"m",status:e.status,value:e.value||"",view:"platform",width:"computed",controlRef:u,onFocus:()=>l(!0),onBlur:()=>l(!1)}),n.a.createElement(yI,{keyboardType:nI.PRIMARY,show:s},n.a.createElement(EI,{keys:$N,onPress:O}),n.a.createElement(EI,{keys:tI,onPress:O}),n.a.createElement(EI,{keys:sI,onPress:O}),n.a.createElement(EI,{keys:aI,onPress:O}),n.a.createElement(EI,{keys:eI,onPress:N})))}return null},[i,N,O,c,o,f,e,g,t]);return n.a.createElement("div",{className:d()("inline-input",{type:t})},I())};OI.displayName="InlineInput";var vI=s(118),NI=s(1072);s(857);const II=new FS.Registry({id:Object(vI.b)()});II.set("Input",OI);const kI=Object(he.compose)(Object(FS.withRegistry)(II),NI.a)(vI.a),TI=/{input:(\d+)}/g,CI=e=>{const t=TI.test(e.code||"");return n.a.createElement(kI,Object.assign({},e,{hasInputs:t}))};CI.displayName="Formula";const jI=new FS.Registry({id:Object(fN.c)()});jI.set("Table",yN.a),jI.set("Formula",CI),jI.set("Input",OI);const wI=Object(he.compose)(Object(FS.withRegistry)(jI),EN.c,fN.f,fN.l,fN.m,fN.o,SN.a,gN.withRuleFormula)(fN.a);var AI=s(104);const _I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((e,t)=>(e[t]="correct",e),{})},MI=Object(he.withBemMod)(Object(AI.cnMarkerChoice)(),{statusMode:kl.correctAnswer},e=>t=>{let{inputs:s,children:a,correctAnswer:r=[]}=t,i=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["inputs","children","correctAnswer"]);return n.a.createElement(e,Object.assign({},i,{status:_I(r),inputs:s,value:r}),a)}),xI=new FS.Registry({id:Object(EN.b)()});xI.set("Input",OI),xI.set("Markdown",wI);const DI=MI(Object(FS.withRegistry)(xI)(EN.a));s(862);const PI=e=>{let{correctAnswer:t,statusMode:s,options:a,onChange:r,value:i={},mdState:o,readOnly:c}=e;return n.a.createElement("div",{className:"marker-inline"},n.a.createElement(DI,{statusMode:s,correctAnswer:t,inputs:a.inputs,onChange:e=>{let{target:{value:t}}=e;return r(t)},value:i,markdownState:o,readOnly:c},a.text))};PI.displayName="MarkerInline";const RI=()=>n.a.createElement("div",{className:"marker_type_fallback"},"Непоррерживаемый тип контента");RI.displayName="MarkerTypeFallback";var LI=RI,FI=s(1116),zI=s(1074),UI=s(1075),HI=s(1076),VI=s(1077),GI=s(1078),BI=s(1079),WI=s(1080),KI=s(1115),qI=s(1073);const YI=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.map((e,s)=>t.includes(s)?"correct":"initial")},JI=Object(he.withBemMod)(Object(AI.cnMarkerChoice)(),{statusMode:kl.correctAnswer},e=>t=>{let{options:s,correctAnswer:a=[]}=t,r=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["options","correctAnswer"]);return n.a.createElement(e,Object.assign({},r,{statuses:YI(s,a),options:s,value:a}))}),ZI=Object(KI.a)(qI.a),XI=new FS.Registry({id:Object(FI.b)()});XI.set("Option",ZI);const QI=JI(Object(he.compose)(Object(FS.withRegistry)(XI),Object(he.composeU)(zI.a,UI.a),Object(he.composeU)(HI.a,VI.a,GI.a,BI.a),WI.a)(FI.a));s(872);const $I=e=>{const{correctAnswer:t=[],statusMode:s,options:{choices:a,typeDisplay:r,flavor:i="checkbox"},value:o=[],onChange:c,readOnly:l}=e;return n.a.createElement("div",{className:"marker-choice"},n.a.createElement(QI,{correctAnswer:t,statusMode:s,type:i,flavor:"pumpkin",layout:r,options:a,value:o,onChange:e=>{let{target:{value:t}}=e;return c(t)},readOnly:l}))};$I.displayName="MarkerChoice";var ek=s(81),tk=s.n(ek),sk=s(1118),ak=s(1082),nk=s(1119),rk=s(1120),ik=s(1104),ok=s(1081),ck=s(1117);const lk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(e=>t.includes(e.id)?"correct":"initial")},uk=Object(he.withBemMod)(Object(AI.cnMarkerChoice)(),{statusMode:kl.correctAnswer},e=>t=>{let{correctAnswer:s=[],hitAreas:a}=t,r=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["correctAnswer","hitAreas"]);return n.a.createElement(e,Object.assign({},r,{hitAreas:a,statuses:lk(a,s),value:s}))}),dk=Object(he.compose)(ok.a)(ck.a),mk=new FS.Registry({id:Object(sk.b)()});mk.set("StatusBadge",dk);const pk=Object(he.compose)(Object(FS.withRegistry)(mk),ak.a,Object(he.composeU)(nk.a,rk.a))(sk.a),hk=new FS.Registry({id:Object(ik.b)()});hk.set("HitArea",pk);const bk=uk(Object(he.compose)(Object(FS.withRegistry)(hk))(ik.a)),Ek=e=>{let{statusMode:t,correctAnswer:s,options:a,onChange:r,value:i=[],mdState:o,readOnly:c}=e;const{hitAreaBadgeAlignment:l,hitAreas:u,imageFile:d}=a,m=tk()(o,["resources",d,"url"]),p=Boolean(l);return n.a.createElement("div",{className:"marker-chooseimage"},n.a.createElement(bk,{statusMode:t,correctAnswer:s,backgroundSrc:m,badgeAlignment:l,flavor:p?"blueberry":"banana",hasBadge:p,hitAreas:u,onChange:e=>{let{target:{value:t}}=e;return r(t)},readOnly:c,value:i}))};Ek.displayName="MarkerChooseImage";var fk=Ek,gk=s(1091),yk=s(1125),Sk=s(1083),Ok=s(1122),vk=s(1084),Nk=s(1085),Ik=s(388),kk=s(1124),Tk=s(1086),Ck=s(380),jk=s(52);const wk=e=>e.map(()=>"correct"),Ak=Object(he.withBemMod)(Object(jk.b)(),{statusMode:kl.correctAnswer},e=>t=>{let{correctAnswer:s=[]}=t,a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["correctAnswer"]);return n.a.createElement(e,Object.assign({},a,{statuses:wk(s),value:s}))}),_k=new FS.Registry({id:Object(gk.b)()}),Mk=Object(he.compose)(Sk.a,Ok.a,gk.c)(vk.a),xk=Object(he.compose)(Nk.a,gk.d)(Ik.a),Dk=Object(he.compose)(kk.a)(qI.a),Pk=Object(he.compose)(Tk.a)(Ck.a);_k.fill({Line:Mk,List:xk,Option:Dk,Pin:Pk});const Rk=Ak(Object(he.compose)(Object(FS.withRegistry)(_k),yk.a)(gk.a)),Lk=e=>{let{correctAnswer:t,statusMode:s,options:a,onChange:r,value:i=[],readOnly:o}=e;const{left:c,right:l}=a;return n.a.createElement("div",{className:"marker-macaroni"},n.a.createElement(Rk,{correctAnswer:t,flavor:"blueberry",lineShape:"z",value:i,lists:{left:c,right:l},readOnly:o,statusMode:s,onChange:e=>{let{target:{value:t}}=e;return r(t)}}))};Lk.displayName="MarkerMacaroni";var Fk=Lk;s(907);const zk={inline:PI,choice:$I,chooseimage:fk,macaroni:Fk},Uk=[kl.correctAnswer],Hk=e=>{const{type:t,onAnswerChange:s,userAnswer:a,statusMode:r,disabled:i}=e,o=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["type","onAnswerChange","userAnswer","statusMode","disabled"]),c=(e=>zk[e]||LI)(t),l=i||r&&Uk.includes(r);return n.a.createElement("div",{className:"marker"},n.a.createElement(c,Object.assign({value:a,onChange:s,statusMode:r,readOnly:l},o)))};Hk.displayName="Marker";var Vk=Hk;const Gk=e=>{const{type:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["type"]);return n.a.createElement("div",{className:d()("problem-block",{kind:"marker",type:t})},n.a.createElement(Vk,Object.assign({type:t},s)))};Gk.displayName="ProblemBlockKindMarker";var Bk=Gk;s(908);const Wk=e=>{let{disabled:t,statusMode:s,block:a,setAnswer:r,userAnswer:i,correctAnswer:o,mdState:c}=e;if("text"===a.kind)return n.a.createElement(bN,Object.assign({mdState:c},a.content));const l=a.content.id;return n.a.createElement(Bk,Object.assign({disabled:t,correctAnswer:o[l],statusMode:s,mdState:c,userAnswer:i[l],onAnswerChange:e=>r(l,e)},a.content))};Wk.displayName="ProblemBlock";var Kk=Wk,qk=s(265);s(909);const Yk=e=>{let{problem:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["problem"]);const r=Object(a.useMemo)(()=>Object(qk.a)(t),[t]);return n.a.createElement("div",{className:"problem"},t.markup.layout.map((e,t)=>n.a.createElement(Kk,Object.assign({key:t,block:e,mdState:r},s))))};Yk.displayName="Problem";var Jk=Yk;const Zk=[Ze.Accepted,Ze.PartialAccepted,Ze.Wrong,Ze.NotSolved,Ze.Rework],Xk=e=>{let{status:t}=e;const s=Zk.includes(t)?"#fff":"#000";return n.a.createElement("svg",{fill:s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},n.a.createElement("path",{d:"M20.8 6.15a1.21 1.21 0 0 1 .85.36 1.19 1.19 0 0 1 0 1.69L12 17.85 2.35 8.21a1.2 1.2 0 0 1 1.7-1.7l8 8 7.94-8a1.17 1.17 0 0 1 .81-.36z"}))};Xk.displayName="ProblemBarArrow";var Qk=Xk;s(288);const $k=[Ze.Wrong,Ze.Accepted],eT=d.a.with("problem-bar"),tT=e=>{let{toggleCorrectAnswer:t,shouldShowCorrectAnswer:s,attemptsCount:a,attemptsMax:r,status:i,counter:c,scoreMax:l,score:u,innerRef:d}=e;const m=r-a,p=i===Ze.Wrong||i===Ze.NotSolved||i===Ze.PartialAccepted&&a===r,h=!($k.includes(i)||0===r),{courseId:E,lessonId:f,groupId:g,problemLinkId:y}=Object(I.i)(),S=Number(y),v=Object(b.d)(e=>iu(e,{problemLinkId:S})),{previousProblem:N,nextProblem:k}=v,T=N&&A.lessonProblem.build({lessonId:f,courseId:E,groupId:g,problemLinkId:N.id}),C=k&&A.lessonProblem.build({lessonId:f,courseId:E,groupId:g,problemLinkId:k.id});return n.a.createElement("div",{className:eT({status:i}),ref:d},T&&n.a.createElement(o.b,{className:eT("arrow",{direction:"left"}),to:T},n.a.createElement(Qk,{status:i})),n.a.createElement("div",{className:eT("content")},n.a.createElement("div",{className:eT("info")},c&&n.a.createElement(Oa,{className:eT("counter",{status:i}),level:4},O.b.text({id:"problemsCounter",keyset:"problems",params:{currentProblemNumber:c[0],problemsTotal:c[1]}}))),p&&n.a.createElement("div",{className:eT("switch")},n.a.createElement(Se.a,{className:eT("switch-button",{active:!s,status:i}),onClick:()=>t(!1),view:"lyceum",size:"m"},O.b.text({id:"answerSwitch.userSolution",keyset:"problems"})),n.a.createElement(Se.a,{className:eT("switch-button",{active:s,status:i}),onClick:()=>t(!0),view:"lyceum",size:"m"},O.b.text({id:"answerSwitch.correctAnswer",keyset:"problems"}))),n.a.createElement("div",{className:eT("solution-status")},n.a.createElement(Oa,{className:eT("verdict",{status:i}),level:4},O.b.text({id:"statusLabel.".concat(i),keyset:"problems",params:{score:null===u?"-":u,scoreMax:l}})),h&&n.a.createElement("div",{className:eT("attempts",{status:i})},O.b.text({id:"attemptsCounter",keyset:"problems",params:{attemptsLeft:m,attemptsTotal:r,count:m}})))),C&&n.a.createElement(o.b,{className:eT("arrow",{direction:"right"}),to:C},n.a.createElement(Qk,{status:i})))};tT.displayName="ProblemBarViewStudent";var sT=tT;const aT={[xp.Enrolled]:"transparent",[xp.Expelled]:"transparent",[xp.Graduated]:"#ffc100"},nT=Object(a.forwardRef)((e,t)=>{const{status:s=xp.Enrolled}=e,a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["status"]);return n.a.createElement(cf,Object.assign({ref:t},a,{avatarOutlineColor:aT[s],withStrikedName:s===xp.Expelled||s===xp.ToBeExpelled,withAvatarOutline:s===xp.Graduated}))}),rT=d.a.with("problem-bar"),iT=e=>{let{toggleCorrectAnswer:t,shouldShowCorrectAnswer:s,user:a}=e;return n.a.createElement("div",{className:rT()},n.a.createElement("div",{className:rT("info")},a&&n.a.createElement(nT,{className:rT("student"),avatar:a.avatar,displayName:a.displayName,userId:a.id})),n.a.createElement("div",{className:rT("teacher-switch")},n.a.createElement(Se.a,{className:rT("switch-button",{active:!s}),onClick:()=>t(!1),view:"lyceum",size:"m"},O.b.text({id:"answerSwitch.studentSolution",keyset:"problems"})),n.a.createElement(Se.a,{className:rT("switch-button",{active:s}),onClick:()=>t(!0),view:"lyceum",size:"m"},O.b.text({id:"answerSwitch.correctAnswer",keyset:"problems"}))))};iT.displayName="ProblemBarViewTeacher";var oT=iT;const cT=e=>{let{view:t}=e,s=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["view"]);return"student"===t?n.a.createElement(sT,s):n.a.createElement(oT,s)};cT.displayName="ProblemBar";var lT=cT,uT=(s(910),s(86));s(912);const dT=e=>{let{mix:t,show:s}=e;const r=Object(a.useContext)(oI),{setRef:i}=r[nI.PRIMARY],o=Object(a.useCallback)(()=>{document&&document.activeElement&&document.activeElement.blur()},[]),c=Object(a.useCallback)(e=>{e.preventDefault()},[]);return uT.isMobile?n.a.createElement("div",{className:"keyboard__wrapper"},n.a.createElement(ke.CSSTransition,{classNames:"keyboard__animation",in:s,mountOnEnter:!0,timeout:300,unmountOnExit:!0},n.a.createElement("div",{className:Object(le.b)("keyboard",t),onMouseDown:c},n.a.createElement("div",{className:"keyboard__portal",ref:i}),n.a.createElement("div",{className:"keyboard__close-button",onClick:o})))):null};dT.displayName="KeyboardTypePrimary";var mT=dT;class pT extends n.a.Component{constructor(e){super(e),this.keyboardUser={},this.setRef=(e,t)=>{const{refs:s}=this.state;if(s[t]!==e&&e){const a=Object.assign({},s,{[t]:e});this.setState({refs:a})}},this.show=e=>{const t=Symbol("unique keyboard user");return this.keyboardUser[e]=t,this.toggleKeyboardVisibility(e,!0),{hide:()=>setTimeout(()=>{this.keyboardUser[e]===t&&this.toggleKeyboardVisibility(e,!1)},10),render:s=>{if(this.keyboardUser[e]!==t)return null;const{refs:a}=this.state;return a[e]?i.a.createPortal(s,a[e]):null}}},this.toggleKeyboardVisibility=(e,t)=>{this.setState(s=>Object.assign({},s,{[e]:Object.assign({},s[e],{shouldShowKeyboard:t})}))},this.state={[nI.PRIMARY]:{shouldShowKeyboard:!1,shouldDisableNativeMobileKeyboard:!0,keyboardAllowed:uT.isMobile,setRef:e=>this.setRef(e,nI.PRIMARY)},show:this.show,refs:{}}}render(){return n.a.createElement(oI.Provider,{value:this.state},this.props.children)}}pT.displayName="KeyboardContextProvider";var hT=pT;const bT=e=>e===Ze.Accepted||e===Ze.Wrong?"actionButton.nextProblem":e===Ze.Rework?"actionButton.sendAgain":"actionButton.sendSolution",ET=e=>{let{answer:t,mode:s="student",problem:r,solution:i,attemptsMax:o,user:c,problemLinkId:l,scoreMax:u}=e;const d=Object(b.c)(),m=i?i.status.type:Ze.Draft,{courseId:p,lessonId:h,groupId:E}=Object(I.i)(),f=Object(a.useMemo)(()=>mN(r),[r]),g=Object(b.d)(e=>bu(e,{problemLinkId:l})),y=Object(b.d)(e=>nu(e,{problemLinkId:l})),S=Object(b.d)(e=>ou(e,{problemLinkId:l})),v=Object(b.d)(fu),[N,k]=Object(a.useState)(!1),[T,C]=Object(a.useState)({}),j=Object(I.g)(),w=Object(b.d)(du),_=Object(a.useRef)(null);Object(a.useEffect)(()=>{C(t)},[t,C]);const M=Object(a.useCallback)((e,t)=>{const s=Object.assign({},T,{[e]:t});cN()(t)&&delete s[e],C(s)},[T]),x=i&&!i.isClosed,D="teacher"===s||!x;let P,R;return"student"===s&&(P=g(T,t),R=!S),n.a.createElement(hT,null,n.a.createElement("div",{className:"problem-run"},n.a.createElement(oI.Consumer,null,e=>{const{shouldShowKeyboard:t}=e[nI.PRIMARY];return n.a.createElement(mT,{mix:"problem-bar__keyboard",show:t})}),n.a.createElement(lT,{counter:y,shouldShowCorrectAnswer:N,toggleCorrectAnswer:k,status:m,attemptsCount:w,attemptsMax:o,view:s,user:c,scoreMax:u,score:i?i.score:null,innerRef:_}),n.a.createElement("div",{className:"problem-run__problem"},n.a.createElement(Jk,{disabled:D,correctAnswer:f,statusMode:N?kl.correctAnswer:void 0,problem:r,userAnswer:T,setAnswer:M})),"student"===s&&n.a.createElement("div",{className:"problem-run__bottom-block"},x?n.a.createElement(Se.a,{onClick:()=>{i&&i.id&&d(function(e,t,s,a,n){return{type:_a.POST_PROBLEM_SUBMISSION,solutionId:e,userAnswer:t,courseId:s,lessonId:a,onSuccess:n}}(i.id,T,p,h,()=>{_.current&&_.current.scrollIntoView({behavior:"smooth"})}))},disabled:P||v,view:"lyceum",theme:"action",size:"l"},O.b.text({id:bT(m),keyset:"problems"})):n.a.createElement(Se.a,{onClick:()=>{if(S){const e=A.lessonProblem.build({lessonId:h,courseId:p,groupId:E,problemLinkId:Number(S.id)});j.push(e)}},disabled:R,view:"lyceum",theme:"action",size:"l"},O.b.text({id:"actionButton.nextProblem",keyset:"problems"})))))};ET.displayName="ProblemRun";var fT=ET;const gT=()=>n.a.createElement("div",{className:"problem-run_stub"},n.a.createElement("div",{className:"problem-run__stub-header"}),n.a.createElement("div",{className:"problem-run__stub-body"},n.a.createElement(pN.a,null,O.b.text({id:"controlWorkStub",keyset:"problems"}))),n.a.createElement("div",{className:"problem-run__stub-footer"}));gT.displayName="ProblemRunControlWorkStub";var yT=gT,ST=s(1087),OT=s(1088),vT=s(1133),NT=s(382);s(913);const IT=e=>{let{children:t}=e;const s=Object(ST.a)("(max-width: 768px)"),r=Object(OT.a)(),[i,o]=Object(vT.a)(4e3),c=Object(NT.a)(),l=Object(a.useCallback)(()=>{c(),o()},[o,c]),u=!0===i()||null===i(),d="portrait-primary"===r.type||"portrait-secondary"===r.type||0===r.angle,m="undefined"!=typeof window&&uT.isMobile&&s&&d&&!u;return n.a.createElement("div",{className:"mobile-orientation-wrapper"},t,m&&n.a.createElement("div",{className:"mobile-orientation-wrapper__content"},n.a.createElement("div",{className:"mobile-orientation-wrapper__wrapper",onClick:l},n.a.createElement("div",{className:"mobile-orientation-wrapper__phone"}),n.a.createElement("div",{className:"mobile-orientation-wrapper__text"},O.b.markdown({id:"suggestLandscapeOrientation",keyset:"problems"})))))};IT.displayName="MobileOrientationWrapper";var kT=IT;s(914);const TT=()=>{const e=Object(b.d)(Jl),{courseId:t,lessonId:s,groupId:r,problemLinkId:i}=Object(I.i)(),o=Number(i),c=Object(b.d)(e=>su(e,{problemLinkId:o})),l=Object(b.d)(mu),u=Object(b.d)(uu),d=Object(b.d)(e=>iu(e,{problemLinkId:o})),m=Object(b.d)(lu),p=Object(b.d)(Eu),h=Object(b.c)();Object(a.useEffect)(function(){return h(function(e){let{problemLinkId:t,courseId:s,lessonId:a}=e;return{type:_a.OPEN_PROBLEM,problemLinkId:t,courseId:s,lessonId:a}}({problemLinkId:o,courseId:Number(t),lessonId:Number(s)})),()=>{h(Ka())}},[h,t,s,o]);const{previousProblem:E,nextProblem:f}=d,g=E&&A.lessonProblem.build({lessonId:s,courseId:t,groupId:r,problemLinkId:E.id}),y=f&&A.lessonProblem.build({lessonId:s,courseId:t,groupId:r,problemLinkId:f.id});return n.a.createElement(kT,null,n.a.createElement(Pn,{type:"narrow",className:"problem-details"},n.a.createElement(Xy,{arrowClassName:"problem-details__arrow",className:"problem-details__navigation",leftArrowUrl:g,rightArrowUrl:y}),n.a.createElement(Pn.ActiveArea,{className:"problem-details__layout-active-area"},n.a.createElement(qy,{urlData:{courseId:t,lessonId:s,groupId:r},taskGroups:e})),n.a.createElement(Pn.Main,{className:"problem-details__main-area"},n.a.createElement(da,{back:!0,exact:!0,to:w.lessonDetails.build({courseId:t,groupId:r,lessonId:s})},O.b.text({id:"backToLesson",keyset:"problems"})),c&&n.a.createElement(tS,{taskTitle:c.title,hasManualCheck:!1,taskInfo:n.a.createElement(dS,{taskDeadline:null,taskMaxScore:c.scoreMax,taskTag:c.tag})}),p?n.a.createElement(yT,null):c&&l&&n.a.createElement(fT,{answer:m,key:c.id,problem:l,solution:u,problemLinkId:c.id,attemptsMax:c.attemptsMax,scoreMax:c.scoreMax}))))};TT.displayName="ProblemDetails";var CT=TT;s(915);const jT=d.a.with("course-banners"),wT=()=>{const e=Object(b.c)(),{courseId:t}=Object(I.i)(),s=Object(b.d)(jg),a=null!==s,r=void 0!==t;return Object(Bf.a)(()=>{!a&&r&&e(Wo(Number(t)))}),Object(Wf.a)(()=>{r&&e(Wo(Number(t)))},[t,e]),Object(Kf.a)(()=>{e(qo())}),n.a.createElement("div",{className:jT()},s&&s.map(e=>n.a.createElement("div",{className:jT("banner"),key:e.id},n.a.createElement(pN.a,null,e.text))))};wT.displayName="CourseBanners";var AT=wT;var _T=hE(()=>n.a.createElement(n.a.Fragment,null,n.a.createElement(AT,null),n.a.createElement(I.d,null,n.a.createElement(I.b,{exact:!0,component:Vg,path:w.courseDetails.template}),n.a.createElement(I.b,{exact:!0,component:Dy,path:w.lessonDetails.template}),n.a.createElement(I.b,{exact:!0,component:CT,path:A.lessonProblem.template}),n.a.createElement(I.b,{component:Hy,path:w.lessonMaterial.template}),n.a.createElement(I.b,{path:A.lessonTasks.template},n.a.createElement(nN,null)),n.a.createElement(iN,{code:wn.d,component:So})))),MT=s(1094),xT=s(1109);const DT=Object(he.compose)(Object(he.composeU)(MT.c,MT.d),Object(he.composeU)(MT.e,MT.f),Object(he.composeU)(MT.g,xT.a),MT.b)(MT.a),PT=e=>{const{cls:t,children:s,view:a="lyceum"}=e,r=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["cls","children","view"]);return n.a.createElement(DT,Object.assign({className:t,label:s,view:a,theme:"normal"},r))};PT.displayName="Checkbox";const RT=d.a.with("lessons-dashboard"),LT=e=>{let{fetchStatus:t,fetchError:s,courseId:r,groupId:i,role:o,fetchTeacherLessonsAction:c,setListFilterAction:l,clearLessonsAction:u,lessons:d,lessonFilter:m}=e;Object(a.useEffect)(()=>(c({courseId:Number(r),groupId:Number(i)}),()=>{u()}),[u,r,c,i]);const p=Object(a.useCallback)(e=>{const t=e.target.checked?el.ShowPublished:el.ShowAll;l({filter:t,groupId:Number(i)})},[i,l]);return n.a.createElement("section",{className:RT()},n.a.createElement(Oa,{level:2,controls:n.a.createElement(PT,{cls:RT("checkbox"),size:"m",checked:m===el.ShowPublished,onChange:p},O.b.text({id:"hide-unpublished",keyset:"lessons"}))},O.b.text({id:"lessons"})),n.a.createElement(ig,{fetchStatus:t,fetchError:s,courseId:r,groupId:i,role:o,lessons:d}))};LT.displayName="LessonsDashboardWrapper";const FT=Object(b.b)(function(e){return{lessons:nl(e),lessonFilter:al(e),fetchStatus:il(e),fetchError:rl(e)}},function(e){return Object(ee.bindActionCreators)({fetchTeacherLessonsAction:Zc.request,setListFilterAction:Qc,clearLessonsAction:Xc},e)})(LT);s(941);const zT=d.a.with("solutions-dashboard");class UT extends a.Component{render(){const{student:e,status:t,score:s,task:a,updateTime:r,sentAfterDeadline:i,hasActivityAfterDeadline:o}=this.props,{lesson:c}=a,l=c.deadline?Ce.fromISO(c.deadline):null;return n.a.createElement(nT,{size:"m",className:zT("item",{expired:i}),avatar:e.avatar,status:e.status,renderDisplayName:r=>{let{className:i}=r;return n.a.createElement("div",{className:zT("student-info")},n.a.createElement("span",{className:Object(le.b)(zT("student-name"),i),title:e.displayName},e.displayName),n.a.createElement("span",{className:zT("status")},n.a.createElement(bg,{type:t.type,score:s,scoreMax:a.scoreMax})))},addonAfter:n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:zT("task-title"),title:a.title},a.title,a.hasManualCheck&&n.a.createElement(Je,{cls:zT("task-check-info")})),n.a.createElement("div",{className:zT("info")},n.a.createElement("div",{className:zT("lesson")},l&&n.a.createElement("span",{className:zT("lesson-indicator")},n.a.createElement(Ke,{size:"small",type:l>Ce.local()?Ve.InProgress:Ve.Finished})),n.a.createElement("span",{className:zT("lesson-title"),title:c.title},c.title)),n.a.createElement("div",{className:zT("update-time")},Ce.fromISO(r).toFormat("d MMM HH:mm"),o&&n.a.createElement(ge.a,{cls:zT("deadline-marker"),type:"clock",size:"xs"}))))})}}UT.displayName="SolutionsDashboardItem";var HT,VT=UT;s(942);const GT=d.a.with("solutions-dashboard");let BT=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((HT=class extends a.Component{render(){const{courseId:e,groupId:t,solutions:s}=this.props;return n.a.createElement(mg,{body:this.renderBody(),tabName:s.length?O.b.text({id:"all-solutions",keyset:"solutions"}):"",tabUrl:_.courseSolutions.build({courseId:e,groupId:t}),title:O.b.text({id:"solutions",keyset:"solutions"})})}renderBody(){const{fetchError:e,fetchStatus:t}=this.props;return n.a.createElement("div",{className:GT()},n.a.createElement(Sb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderSolutionList,renderError:this.renderError}))}renderSpin(){return n.a.createElement("div",{className:GT("spin")},n.a.createElement(ye.a,{progress:!0,size:"s"}))}renderError(e){return n.a.createElement("p",{className:GT("placeholder",{error:!0})},e)}renderSolutionList(){const{solutions:e,courseId:t,groupId:s}=this.props;if(0===e.length)return this.renderEmptyListMessage();const a=e.map(e=>({id:e.id,component:n.a.createElement(VT,e),url:_.taskSolutions.build({courseId:t,groupId:s,lessonId:e.task.lesson.id.toString(),taskId:e.task.id.toString(),solutionId:e.id.toString()})}));return n.a.createElement(ng,{items:a,itemType:"link",listType:"aside"})}renderEmptyListMessage(){return n.a.createElement("p",{className:GT("placeholder")},O.b.text({id:"no-solutions-to-review",keyset:"solutions"}))}}).prototype,"renderSolutionList",[$.a],Object.getOwnPropertyDescriptor(HT.prototype,"renderSolutionList"),HT.prototype),HT);BT.displayName="SolutionsDashboard";var WT=BT;function KT(e){return e.solutions.list.list}function qT(e){return e.solutions.list.fetchStatus}function YT(e){return e.solutions.list.fetchError}class JT extends a.Component{componentDidMount(){this.fetchSolutions()}componentDidUpdate(e){this.props.courseId===e.courseId&&this.props.groupId===e.groupId||this.fetchSolutions()}componentWillUnmount(){this.props.clearSolutions()}render(){const{courseId:e,groupId:t,solutions:s,fetchError:a,fetchStatus:r}=this.props;return n.a.createElement(WT,{courseId:e,groupId:t,solutions:s,fetchError:a,fetchStatus:r})}fetchSolutions(){const{courseId:e,groupId:t}=this.props;this.props.fetchSolutions({courseId:Number(e),groupId:Number(t),limit:6,solutionStatusId:Xe[Ze.Review]})}}JT.displayName="SolutionsDashboardContainer";var ZT=Object(b.b)(function(e){return{solutions:KT(e),fetchStatus:qT(e),fetchError:YT(e)}},function(e){return Object(ee.bindActionCreators)({clearSolutions:cm,fetchSolutions:om},e)})(JT);s(943);const XT=d.a.with("invite-details"),QT=e=>{let{invite:{url:t,usesLimit:s,usesCount:r}}=e;const i=Object(b.c)(),o=Object(a.useCallback)(()=>{i(Object(sn.a)({i18n:{id:"copy-link-success-message",keyset:"common"},type:an.b.SUCCESS}))},[i]),c=Object(a.useCallback)(()=>{const e={};return t&&(e.width="".concat(t.length,"ch")),e},[t]);return n.a.createElement("div",{className:XT()},n.a.createElement("div",{className:XT("controls")},n.a.createElement(VE,{style:c(),className:XT("input"),value:t||""}),n.a.createElement(Ff.a,{text:t||"",onCopy:o},n.a.createElement(Se.a,{className:XT("control-button"),theme:"action",view:"lyceum",size:"s",title:O.b.text({id:"copy",keyset:"common"})},O.b.text({id:"copy",keyset:"common"})))),n.a.createElement("div",{className:XT("info")},n.a.createElement("table",{className:XT("table")},n.a.createElement("tbody",null,void 0!==s&&n.a.createElement("tr",{className:XT("table-row")},n.a.createElement("td",{className:XT("table-key")},O.b.text({id:"group-invite-total",keyset:"invites"}),":"),n.a.createElement("td",{className:XT("table-value")},n.a.createElement("strong",null,s))),void 0!==r&&n.a.createElement("tr",{className:XT("table-row")},n.a.createElement("td",{className:XT("table-key")},O.b.text({id:"group-invite-used",keyset:"invites"}),":"),n.a.createElement("td",{className:XT("table-value")},n.a.createElement("strong",null,r)))))))};QT.displayName="InviteDetails";var $T,eC=Object(b.b)(function(e,t){return{group:lf(e,t.groupId)}})(e=>{let{children:t,group:s}=e;return t({group:s})});const tC=d.a.with("course-details");let sC=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}(($T=class extends a.PureComponent{renderPage(e,t){return()=>{if(!e)return null;const{courseId:s,groupId:a}=this.props.match.params,r=O.b.text({id:"course-details-teacher",keyset:"page-titles",params:{course:e.title,group:t.name}}),i=e.invite&&void 0!==e.invite.url&&void 0!==e.invite.usesCount&&void 0!==e.invite.usesLimit;return n.a.createElement("article",{className:tC()},n.a.createElement(c.a,null,n.a.createElement("title",null,r),n.a.createElement("meta",{name:"title",content:r})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Top,null,n.a.createElement("div",{className:tC("top")},n.a.createElement("main",{className:tC("top-main")},n.a.createElement(Oa,{level:1},e.title),e.description&&n.a.createElement(xg,{className:tC("description"),summary:O.b.text({id:"course-description",keyset:"courses"}),content:n.a.createElement(Rg,{content:e.description})}),n.a.createElement(Oa,{level:2,className:tC("group-name")},O.b.text({id:"group-NAME",keyset:"courses",params:{name:t.name}})),i&&n.a.createElement(xg,{className:tC("description"),summary:O.b.text({id:"share-link",keyset:"invites"}),content:n.a.createElement(QT,{invite:e.invite})})),n.a.createElement("div",{className:tC("top-aside")},n.a.createElement(zg,{users:e.teachersList})))),n.a.createElement(Rn.Main,null,n.a.createElement(FT,{courseId:s,groupId:a,role:e.role})),n.a.createElement(Rn.Aside,null,n.a.createElement(ZT,{courseId:s,groupId:a}))))}}render(){const{courseId:e,groupId:t}=this.props.match.params;return n.a.createElement(_g,{courseId:e,groupId:t},e=>{let{fetchError:s,fetchStatus:a,courseDetails:r}=e;return n.a.createElement(eC,{groupId:t},e=>{let{group:t}=e;return n.a.createElement(Sb,{fetchError:s,fetchStatus:a,renderSuccess:this.renderPage(r,t)})})})}}).prototype,"renderPage",[$.a],Object.getOwnPropertyDescriptor($T.prototype,"renderPage"),$T.prototype),$T);sC.displayName="CourseDetails";var aC=sC;let nC;!function(e){e.Absent="not-visited",e.Present="visited"}(nC||(nC={}));s(944);const rC=d.a.with("attendance-switch"),iC={[nC.Absent]:"cross-red",[nC.Present]:"tick-green"};class oC extends a.PureComponent{constructor(){super(...arguments),this.changeStatus=e=>{this.props.onStatusChange(e.target.value)}}render(){const{cls:e,disabled:t}=this.props;return n.a.createElement("span",{className:Object(le.b)(e,rC({disabled:t}))},this.renderStatus(nC.Absent),this.renderStatus(nC.Present))}renderStatus(e){const t=this.props.status===e;return n.a.createElement("label",{className:rC("status",{current:t})},n.a.createElement("input",{checked:t,type:"radio",value:e,onChange:this.changeStatus}),n.a.createElement(ge.a,{size:"s",type:iC[e]}))}}oC.displayName="AttendanceSwitch";var cC=oC;s(945);const lC=d.a.with("bonus-score-button"),uC=e=>{let{onClick:t,score:s,isActive:r,isDisabled:i}=e;const o=Object(a.createRef)();return n.a.createElement("button",{ref:o,type:"button",disabled:i,className:lC({active:r,set:Boolean(s)}),onClick:()=>t(o.current)},s)};uC.displayName="BonusScoreButton";const dC=0;s(946);const mC=d.a.with("bonus-score-popup"),pC={openItem:null,currentStudentId:null,currentStudentBonusScore:null};s(947);const hC=d.a.with("expel-student-button"),bC=e=>{const{className:t,isVisible:s=!0,courseTitle:a,groupName:r,studentName:i}=e,o=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["className","isVisible","courseTitle","groupName","studentName"]);return n.a.createElement(ve,{content:O.b.text({id:"expel",keyset:"students"})},n.a.createElement("button",Object.assign({},o,{type:"button","aria-label":O.b.text({id:"expel-action-description",keyset:"students",params:{course:a,group:r,student:i}}),className:Object(le.b)(hC({hidden:!s}),t)})))};bC.displayName="ExpelStudentButton";const EC=e=>{let{isVisible:t,student:s,courseTitle:a,groupName:r,expelStudent:i,closeModal:o}=e;return n.a.createElement(Ia,{isDangerous:!0,visible:t,title:O.b.text({id:"are-you-sure"}),content:s?O.b.element({id:s.gender===_e.Unspecified?"student-expel-confirmation":"".concat(s.gender,"-student-expel-confirmation"),keyset:"students",params:{student:n.a.createElement("b",null,s.displayName),course:n.a.createElement("b",null,a),group:n.a.createElement("b",null,r)}}):null,cancelText:O.b.text({id:"cancel"}),okText:O.b.text({id:"expel",keyset:"students"}),onCancelClick:o,onCloseClick:o,onOkClick:i})};EC.displayName="ExpelStudentModal";const fC=["lesson","event"].join(", "),gC="slot should contain at least one of the following properties: ".concat(fC);s(948);const yC=d.a.with("left-progress-table"),SC=e=>{let{activeRow:t,rowControl:s,headings:a,rows:r}=e;return n.a.createElement("table",{className:yC()},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:yC("cell",{type:"head"})}),a.map((e,t)=>{const[s,a]=e;return n.a.createElement("th",{key:t,className:yC("cell",{type:"head"})},n.a.createElement("div",{className:yC("column-heading")},s),a)}))),n.a.createElement("tbody",null,r.map((e,a)=>{const r=t===a+1;return n.a.createElement("tr",{key:a,"data-index":a+1,className:yC("row",{active:r})},n.a.createElement("td",{className:yC("cell",{type:"body"})},n.a.createElement("div",{className:yC("row-control")},s?s({isActive:r,rowIndex:a}):a+1)),e.map((e,t)=>n.a.createElement("td",{key:t,className:yC("cell",{type:"body"})},e)))})))};SC.displayName="LeftProgressTable";s(949);const OC=d.a.with("with-shadows");function vC(e){return class extends a.Component{constructor(){super(...arguments),this.state={hasLeftShadow:!1,hasRightShadow:!1},this.container=n.a.createRef(),this.setShadows=()=>{!function(e,t,s){if(!e.current)return;const{clientWidth:a,scrollWidth:n,scrollLeft:r}=e.current,i=a===n,o=0===r,c=a+r-n,l=Math.abs(c)<5;i?t():s(!o,!l)}(this.container,this.removeShadows,this.updateShadows)},this.removeShadows=()=>{this.setState({hasLeftShadow:!1,hasRightShadow:!1})},this.updateShadows=(e,t)=>{this.state.hasLeftShadow!==e&&this.setState({hasLeftShadow:e}),this.state.hasRightShadow!==t&&this.setState({hasRightShadow:t})}}componentDidMount(){window.addEventListener("resize",this.setShadows),this.setShadows()}componentWillUnmount(){window.removeEventListener("resize",this.setShadows)}render(){const{hasLeftShadow:t,hasRightShadow:s}=this.state;return n.a.createElement("div",{className:OC()},n.a.createElement("div",{className:OC("container",{"has-left-shadow":t,"has-right-shadow":s}),ref:this.container,onScroll:this.setShadows},n.a.createElement(e,Object.assign({},this.props,{setShadows:this.setShadows}))))}}}s(950);const NC=d.a.with("right-progress-table"),IC=e=>{let{activeRow:t,headings:s,rows:a}=e;return n.a.createElement("table",{className:NC()},n.a.createElement("thead",{className:NC("head")},n.a.createElement("tr",null,s.map((e,t)=>n.a.createElement("th",{key:t,className:NC("cell")},e)))),n.a.createElement("tbody",{className:NC("body")},a.map((e,s)=>n.a.createElement("tr",{key:s,"data-index":s+1,className:NC("row",{active:t===s+1})},e.map((e,t)=>n.a.createElement("td",{key:t,className:NC("cell")},e))))))};IC.displayName="Table";const kC=vC(IC);var TC;s(951);function CC(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const jC=d.a.with("progress-table");let wC=(CC((TC=class extends a.PureComponent{constructor(){super(...arguments),this.state={activeRow:0}}render(){const{activeRow:e}=this.state,{leftTableRows:t,leftTableHeadings:s,rightTableHeadings:a,rightTableRows:r,rowControl:i}=this.props;return n.a.createElement("div",{className:jC(),onMouseOver:this.handleHover,onMouseLeave:this.resetActiveRow},n.a.createElement("div",{className:jC("left")},n.a.createElement(SC,{rowControl:i,activeRow:e,headings:s,rows:t})),n.a.createElement("div",{className:jC("right")},n.a.createElement(kC,{activeRow:e,headings:a,rows:r})))}handleHover(e){const t=e.target.closest("tr");if(!t)return;const s=t.dataset.index;s?this.setActiveRow(Number(s)):this.resetActiveRow()}resetActiveRow(){this.setActiveRow(0)}setActiveRow(e){this.setState(t=>({activeRow:t.activeRow===e?t.activeRow:e}))}}).prototype,"handleHover",[$.a],Object.getOwnPropertyDescriptor(TC.prototype,"handleHover"),TC.prototype),CC(TC.prototype,"resetActiveRow",[$.a],Object.getOwnPropertyDescriptor(TC.prototype,"resetActiveRow"),TC.prototype),TC);wC.displayName="ProgressTable";s(952);const AC=d.a.with("score-badge"),_C=Object(a.forwardRef)((e,t)=>{const{cls:s,score:a,color:r}=e;return n.a.createElement("span",{ref:t,style:{backgroundColor:r},className:Object(le.b)(AC(),s)},a)});s(953);const MC=d.a.with("sort-switch"),xC={[Dp.ASCENDING]:"top",[Dp.DESCENDING]:"bottom"};class DC extends a.PureComponent{constructor(){super(...arguments),this.orders=[Dp.ASCENDING,Dp.DESCENDING],this.changeOrder=e=>{this.props.onOrderChange(e.target.value)}}render(){const{active:e}=this.props;return n.a.createElement("span",{className:MC({active:e})},this.orders.map(e=>this.renderArrow(e)))}renderArrow(e){const{active:t,activeOrder:s}=this.props,a=t&&s===e;return n.a.createElement("label",{key:e,className:MC("arrow",{active:a})},n.a.createElement("input",{checked:a,type:"radio",value:e,onChange:this.changeOrder}),n.a.createElement(ge.a,{direction:xC[e],size:"s",type:"arrow-sort"}))}}DC.displayName="SortSwitch";var PC=DC;var RC;s(954);function LC(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const FC=d.a.with("course-progress-table");let zC=(LC((RC=class extends a.PureComponent{constructor(){super(...arguments),this.renderSlot=e=>{const{lesson:t}=e,s=this.renderSlotInner(e);if(!t)return n.a.createElement("div",{className:FC("slot")},s);const{courseId:a,groupId:r}=this.props;return n.a.createElement(ve,{content:t.title},n.a.createElement("span",null,n.a.createElement(o.b,{className:Object(le.b)(FC("slot"),FC("lesson-link")),to:_.lessonProgress.build({courseId:a,groupId:r,lessonId:t.id.toString()})},s)))}}render(){const{courseProgress:e,studentIds:t,renderExpelButton:s}=this.props;return t.length?n.a.createElement("div",{className:FC()},n.a.createElement(wC,{rowControl:s,leftTableHeadings:this.renderStudentHeadings(),rightTableHeadings:e.slots.map(this.renderSlot),leftTableRows:t.map(this.renderStudentRow),rightTableRows:t.map(this.renderStudentProgress)})):O.b.text({id:"no-students",keyset:"progress"})}renderStudentHeadings(){const{studentIds:e,sortBy:t,sortOrder:s,courseProgress:a}=this.props,{slots:r,maxRating:i,maxBonusScore:o,useBonusScore:c}=a,l=[[n.a.createElement(n.a.Fragment,null,O.b.text({id:"students",keyset:"progress"}),n.a.createElement(PC,{active:t===Qo.NAME,activeOrder:s,onOrderChange:this.changeOrder(Qo.NAME)})),e.length],[n.a.createElement(n.a.Fragment,null,O.b.text({id:"rating",keyset:"progress"}),n.a.createElement(PC,{active:t===Qo.RATING,activeOrder:s,onOrderChange:this.changeOrder(Qo.RATING)})),O.b.element({id:"max-RATING",keyset:"progress",params:{rating:n.a.createElement("b",null,i)}})]];if(Lp(r)){const e=[n.a.createElement(ve,{key:"top",content:O.b.text({id:"attendance",keyset:"progress"})},n.a.createElement("span",null,n.a.createElement(ge.a,{size:"m",type:"calendar"}))),n.a.createElement("b",{key:"bottom"},r.length)];l.push(e)}if(c){const e=[n.a.createElement(ve,{key:"top",content:O.b.text({id:"bonus-score",keyset:"progress"})},n.a.createElement("span",null,n.a.createElement(ge.a,{size:"m",type:"present"}))),n.a.createElement(n.a.Fragment,null,"+",n.a.createElement("b",{className:FC("bonus-score")},o))];l.push(e)}return l}renderStudentRow(e){const{courseProgress:t}=this.props,{id:s,avatar:a,displayName:r,status:i,rating:o,bonusScore:c}=t.students[e],l=[n.a.createElement(nT,{className:FC("student"),userId:s,avatar:a,displayName:r,status:i}),n.a.createElement("b",{className:FC("rating")},o)];if(Fp(t)){const{attendance:s}=t.students[e],a=Object.values(s).filter(e=>e===nC.Present).length,r=n.a.createElement("b",{className:FC("attendance",{"non-zero":Boolean(a)})},a);l.push(r)}if(t.useBonusScore){const e=this.renderStudentBonusScore(s,c);l.push(e)}return l}renderSlotInner(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:FC("slot-title")},n.a.createElement("b",null,function(e){if(Pp(e)){const{event:t,lesson:s}=e;return s?s.shortTitle:O.b.text({id:t.type,keyset:"schedule"})}if(Rp(e)){const{lesson:t}=e;return t.shortTitle}throw new k.e(gC)}(e))),n.a.createElement("span",{className:FC("event-info")},Pp(e)&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:FC("event-date")},Ce.fromISO(e.event.date).toFormat("d MMM")),this.renderNumberOfEventAttendances(e.event))))}renderNumberOfEventAttendances(e){const{studentIds:t,courseProgress:s}=this.props;if(!Fp(s))return null;const{students:a}=s,r=t.filter(t=>a[t].attendance[e.id]===nC.Present).length;return n.a.createElement("span",{className:FC("event-attendance",{"non-zero":0!==r})},n.a.createElement(ge.a,{size:"m",type:"person"}),n.a.createElement("b",null,r))}renderStudentProgress(e){const{courseProgress:t,readonly:s}=this.props;return Fp(t)?t.slots.map(a=>{const r=t.students[e],i=n.a.createElement(cC,{disabled:s,cls:FC("student-attendance"),status:t.students[e].attendance[a.event.id],onStatusChange:this.changeAttendanceStatus(r.id,a.event.id)});return this.renderStudentSlotProgress(a,r,i)}):t.slots.map(s=>this.renderStudentSlotProgress(s,t.students[e]))}renderStudentSlotProgress(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=function(e){if(Pp(e))return e.event.id;if(Rp(e))return e.lesson.id;throw new k.e(gC)}(e);return n.a.createElement("div",{key:a,className:FC("student-data")},e.lesson&&this.renderLessonProgress(e.lesson,t.scores[e.lesson.id]),s)}renderStudentBonusScore(e,t){const{setOpenItem:s,currentStudentId:a}=this.props;return n.a.createElement(uC,{isActive:a===e,score:t,onClick:a=>{s({node:a,bonusScore:t,studentId:e})}})}renderLessonProgress(e,t){const{tags:s}=this.props.courseProgress;if(!t)return null;const a=Object.values(t).reduce((e,t)=>e+t,0),r=n.a.createElement(ve,{content:O.b.text({id:"total-score",keyset:"progress"})},n.a.createElement("div",{className:FC("total-score")},a));return e.type===tl.Test?n.a.createElement("div",{className:FC("lesson-progress")},r):n.a.createElement("div",{className:FC("lesson-progress")},r,n.a.createElement("div",{className:FC("scores")},e.tags.map(e=>{const a=e in t?s[e].color:"#b3b3b3";return n.a.createElement(ve,{key:e,content:O.b.text({id:s[e].type,keyset:"task-tags"})},n.a.createElement(_C,{cls:FC("score-badge"),color:a,score:t[e]||0}))})))}changeAttendanceStatus(e,t){return s=>{this.props.changeAttendanceStatus({eventId:t,studentId:e,status:s})}}changeOrder(e){return t=>{this.props.changeSort({sortBy:e,sortOrder:t})}}}).prototype,"renderStudentRow",[$.a],Object.getOwnPropertyDescriptor(RC.prototype,"renderStudentRow"),RC.prototype),LC(RC.prototype,"renderStudentProgress",[$.a],Object.getOwnPropertyDescriptor(RC.prototype,"renderStudentProgress"),RC.prototype),RC);zC.displayName="CourseProgressTable";var UC,HC=function(e){return class extends a.Component{constructor(){super(...arguments),this.state={isModalVisible:!1,currentStudent:null},this.renderExpelButton=e=>{let{isActive:t,rowIndex:s}=e;const{students:a,course:r,group:i}=this.props,o=a[s],c=o.status!==xp.Expelled;return n.a.createElement(n.a.Fragment,null,t&&c?null:s+1,c&&n.a.createElement(bC,{isVisible:t,courseTitle:r.title,groupName:i.name,studentName:o.displayName,onClick:this.openModal(o)}))},this.openModal=e=>()=>{this.setState({isModalVisible:!0,currentStudent:e})},this.closeModal=()=>{this.setState({isModalVisible:!1})},this.expelStudent=()=>{const{currentStudent:e}=this.state,{course:t,group:s,expelStudent:a}=this.props;e&&this.setState({isModalVisible:!1},()=>{a({courseId:t.id,groupId:s.id,studentId:e.id,status:e.status})})}}render(){const{isSuperUser:t,course:s,group:a}=this.props,{isModalVisible:r,currentStudent:i}=this.state;return t?n.a.createElement(n.a.Fragment,null,n.a.createElement(e,Object.assign({},this.props,{renderExpelButton:this.renderExpelButton})),n.a.createElement(EC,{isVisible:r,student:i,courseTitle:s.title,groupName:a.name,closeModal:this.closeModal,expelStudent:this.expelStudent})):n.a.createElement(e,this.props)}}}((UC=zC,class extends a.Component{constructor(){super(...arguments),this.state=pC,this.popupDirection=["right-center"],this.setOpenItem=e=>{let{node:t,bonusScore:s,studentId:a}=e;!function(e,t){return!(!e||!t)&&e.compareDocumentPosition(t)===dC}(this.state.openItem,t)?this.setState({openItem:t,currentStudentId:a,currentStudentBonusScore:s}):this.resetOpenItem()},this.resetOpenItem=()=>{this.setState(pC)},this.setBonusScore=e=>{const{courseId:t,setBonusScore:s}=this.props,{currentStudentId:a,currentStudentBonusScore:n}=this.state;this.setState(pC,()=>{s({courseId:Number(t),studentId:a,oldScore:n,newScore:e})})}}render(){const{useBonusScore:e,maxBonusScore:t}=this.props,{openItem:s,currentStudentId:a,currentStudentBonusScore:r}=this.state,i=n.a.createElement(UC,Object.assign({},this.props,{setOpenItem:this.setOpenItem,currentStudentId:a}));return e?n.a.createElement(n.a.Fragment,null,i,n.a.createElement(ca,{hasTail:!0,cls:mC(),anchor:s||void 0,target:"anchor",onOutsideClick:this.resetOpenItem,visible:Boolean(s),directions:this.popupDirection,tailSize:17},n.a.createElement("div",{className:mC("inner")},n.a.createElement("p",{className:mC("caption")},O.b.text({id:"assign-bonus-score",keyset:"progress"})),s&&n.a.createElement(Cv,{key:a,maxScore:t,precision:1,score:r,size:"medium",onSetScore:this.setBonusScore})))):i}}));function VC(e){const{maxRating:t,maxBonusScore:s,useBonusScore:a,students:n,slots:r,attendance:i,tags:o}=e.courseProgress;return{maxRating:t,maxBonusScore:s,useBonusScore:a,students:n,slots:r,attendance:i,tags:o}}function GC(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{students:s,sortedStudentIds:a}=e.courseProgress;return t?a:a.filter(e=>s[e].status!==xp.Expelled)}const BC=Object(ne.a)([function(e){return e.courseProgress.students},GC],(e,t)=>t.map(t=>e[t]));var WC;let KC=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((WC=class extends a.Component{componentDidMount(){const{courseId:e,groupId:t}=this.props;this.props.fetchCourseProgress({courseId:Number(e),groupId:Number(t)})}componentWillUnmount(){this.props.clearCourseProgress()}render(){const{fetchStatus:e,fetchError:t}=this.props;return n.a.createElement(Sb,{fetchError:t,fetchStatus:e,renderSuccess:this.renderCourseProgressTable})}renderCourseProgressTable(){const e=this.props,{course:t,courseId:s,role:a}=e,r=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["course","courseId","role"]);if(!t)throw new k.e("No course data",{courseId:s});return n.a.createElement(HC,Object.assign({},r,{courseId:s,course:t,readonly:a===x.Methodist,useBonusScore:this.props.courseProgress.useBonusScore,maxBonusScore:this.props.courseProgress.maxBonusScore}))}}).prototype,"renderCourseProgressTable",[$.a],Object.getOwnPropertyDescriptor(WC.prototype,"renderCourseProgressTable"),WC.prototype),WC);KC.displayName="CourseProgressTableContainer";var qC=Object(b.b)(function(e,t){const{fetchStatus:s,fetchError:a,sortBy:n,sortOrder:r}=e.courseProgress;return{studentIds:GC(e,t.showExpelled),courseProgress:VC(e),isSuperUser:J(e),course:oe(e,t.courseId),group:lf(e,t.groupId),students:BC(e,t.showExpelled),fetchStatus:s,fetchError:a,sortBy:n,sortOrder:r}},function(e){return Object(ee.bindActionCreators)({changeAttendanceStatus:ac,changeSort:nc,clearCourseProgress:sc,fetchCourseProgress:tc,setBonusScore:rc.request,expelStudent:ec.request},e)})(gb(KC));let YC;!function(e){e.NotAssigned="not_assigned",e.NotSolved="not_solved",e.IsSolving="is_solving",e.HasSolved="has_solved"}(YC||(YC={}));s(955);const JC=d.a.with("variant-badge"),ZC={[YC.NotAssigned]:"not-assigned",[YC.NotSolved]:"not-solved",[YC.IsSolving]:"is-solving",[YC.HasSolved]:"has-solved"};let XC;!function(e){e.Normal="normal",e.Button="button"}(XC||(XC={}));class QC extends a.PureComponent{render(){const{cls:e,title:t,index:s,status:a,type:r,disabled:i,onClick:o}=this.props;if(r===XC.Button&&!o)throw new k.d("Badge with type Button should have onClick handler",{argName:"onClick",argValue:o});return r===XC.Button?n.a.createElement("button",{className:Object(le.b)(JC({disabled:i,type:XC.Button,status:ZC[a]}),e),type:"button",title:t,disabled:i,onClick:o},s):n.a.createElement("span",{className:Object(le.b)(JC({status:ZC[a],type:XC.Normal}),e),title:t},s)}}QC.defaultProps={type:XC.Normal,disabled:!1},QC.displayName="VariantBadge";var $C=QC;function ej(e,t){const s={};if(Object.values(e).some(e=>e===YC.IsSolving)){for(const t of Object.keys(e))s[t]={isAssigningPossible:!1,disablingReason:"test_is_solving"};return s}for(const[a,n]of Object.entries(e))n===YC.NotAssigned||n===YC.NotSolved||n===YC.HasSolved&&t?s[a]={isAssigningPossible:!0}:s[a]={isAssigningPossible:!1,disablingReason:"variant_is_assigned_before"};return s}s(956);const tj=d.a.with("variant-picker");class sj extends a.PureComponent{constructor(){super(...arguments),this.state={fetchStatus:null,statuses:this.props.statuses}}static changeStatus(e,t,s){const a={};for(const[t,s]of Object.entries(e))s===YC.NotSolved?a[t]=YC.NotAssigned:a[t]=s;return a[t]=s,a}componentDidUpdate(e){e.statuses!==this.props.statuses&&wg(this.state.statuses,this.props.statuses)&&this.setState({statuses:this.props.statuses})}checkIfNeedsAssignment(){return!this.props.isAutoAssigned&&Object.values(this.state.statuses).every(e=>e===YC.NotAssigned)}assignVariant(e){const t=this.state.statuses;let s;s=t[e]===YC.HasSolved?YC.HasSolved:t[e]===YC.NotSolved?YC.NotAssigned:YC.NotSolved;const a=sj.changeStatus(t,e,s);this.setState({fetchStatus:Gt.a.PENDING,statuses:a},async()=>{const a=Po.apiAssignVariant.build({variantId:e,lessonId:this.props.lessonId},{studentId:this.props.studentId,groupId:this.props.groupId});try{await Object(Do.a)(a,{method:s===YC.NotAssigned?"DELETE":"POST"}),this.setState({fetchStatus:Gt.a.SUCCESS})}catch(e){this.setState({fetchStatus:Gt.a.FAIL,statuses:t}),this.props.addNotification({i18n:Object(O.a)(e),type:an.b.ERROR})}})}render(){const{cls:e,variants:t,isShufflePending:s,isReassigningAllowed:a}=this.props,{statuses:r,fetchStatus:i}=this.state,o=ej(r,a);return n.a.createElement("div",{className:Object(le.b)(e,tj())},t.map(e=>{let{isAssigningPossible:t}=o[e.id];const a=o[e.id].disablingReason||"";return i===Gt.a.PENDING&&(t=!1),n.a.createElement($C,{key:e.id,cls:tj("badge",{pending:i===Gt.a.PENDING||s,"needs-assignment":this.checkIfNeedsAssignment()}),index:e.index,type:XC.Button,disabled:!t,status:r[e.id],title:O.b.text({id:a,keyset:"lessons"}),onClick:()=>this.assignVariant(e.id)})}))}}sj.displayName="VariantPicker";var aj=Object(b.b)(null,function(e){return Object(ee.bindActionCreators)({addNotification:sn.a},e)})(gb(sj));const nj=e=>e.courseVariants.maxRating,rj=Object(ne.a)([e=>e.courseVariants.studentsMap,e=>e.courseVariants.studentIds],(e,t)=>t.map(t=>e[t])),ij=Object(ne.a)([rj],e=>e.filter(e=>e.status!==xp.Expelled)),oj=e=>e.courseVariants.slots,cj=e=>e.courseVariants.fetchStatus,lj=e=>e.courseVariants.fetchError;s(957);function uj(e){return e.status===YC.NotAssigned&&e.isActive?YC.NotSolved:e.status}const dj=d.a.with("problem-variant-picker"),mj=e=>{const{cls:t,variants:s,statuses:r,userId:i,groupId:o,courseId:c}=e,l=Object(b.c)(),[u,m]=Object(a.useState)(null),p=Object(a.useCallback)(async e=>{m(Gt.a.PENDING);const t=Po.apiAssignProblemVariant.build({},{variantId:e,userId:i,groupId:o,courseId:c});try{const e=await Object(Do.a)(t,{method:"POST"});l(Ec.success(e)),m(Gt.a.SUCCESS)}catch(e){m(Gt.a.FAIL),l(Object(sn.a)({i18n:Object(O.a)(e),type:an.b.ERROR}))}},[c,l,o,i]),h=!(u===Gt.a.PENDING);return n.a.createElement("div",{className:Object(le.b)(t,dj())},s.map(e=>n.a.createElement($C,{key:e.id,cls:d()("variant-picker","badge"),index:e.index,type:XC.Button,disabled:!h,status:uj(r[e.id]),title:h?O.b.text({id:"variant.alreadyAssigned",keyset:"problem"}):void 0,onClick:()=>p(e.id)})))};mj.displayName="ProblemVariantPicker";var pj,hj=mj;const bj=d.a.with("course-variants-table");let Ej=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((pj=class e extends a.Component{constructor(){super(...arguments),this.state={lessonShuffleStatuses:{}}}componentDidMount(){const{courseId:e,groupId:t}=this.props;this.props.fetchCourseVariantsStart({courseId:Number(e),groupId:Number(t)})}componentWillUnmount(){this.props.clearCourseVariants()}changeOrder(e){return t=>{this.props.changeSort({sortBy:e,sortOrder:t})}}isReassignmentAllowed(){return this.props.isSuperuser}isShufflePending(e){return this.state.lessonShuffleStatuses[e]===Gt.a.PENDING}isShuffleDisabled(e){if(this.isShufflePending(e.id))return!0;const t=this.isReassignmentAllowed();return!this.props.students.map(s=>ej(s.lessons[e.id].tasks,t)).some(e=>Object.values(e).some(e=>e.isAssigningPossible))}shuffleVariants(e){return()=>{const{courseId:t,groupId:s}=this.props;this.isShufflePending(e)||this.setState({lessonShuffleStatuses:Object.assign({},this.state.lessonShuffleStatuses,{[e]:Gt.a.PENDING})},async()=>{const a=Po.apiShuffleVariants.build({lessonId:e},{courseId:Number(t),groupId:Number(s)});try{const t=await Object(Do.a)(a,{method:"POST"});this.props.updateLessonVariants(t),this.setState({lessonShuffleStatuses:Object.assign({},this.state.lessonShuffleStatuses,{[e]:Gt.a.SUCCESS})})}catch(t){this.setState({lessonShuffleStatuses:Object.assign({},this.state.lessonShuffleStatuses,{[e]:Gt.a.FAIL})}),this.props.addNotification({i18n:Object(O.a)(t),type:an.b.ERROR})}})}}renderTable(){const{students:e}=this.props;return e.length?n.a.createElement(wC,{leftTableHeadings:this.renderLeftHeadings(),leftTableRows:this.renderLeftRows(),rightTableHeadings:this.renderRightHeadings(),rightTableRows:this.renderRightRows()}):O.b.text({id:"no-students",keyset:"progress"})}renderLeftHeadings(){const{students:e,maxRating:t,sortBy:s,sortOrder:a}=this.props;return[[n.a.createElement(n.a.Fragment,null,O.b.text({id:"students",keyset:"progress"}),n.a.createElement(PC,{active:s===Gp.NAME,activeOrder:a,onOrderChange:this.changeOrder(Gp.NAME)})),e.length],[n.a.createElement(n.a.Fragment,null,O.b.text({id:"rating",keyset:"progress"}),n.a.createElement(PC,{active:s===Gp.RATING,activeOrder:a,onOrderChange:this.changeOrder(Gp.RATING)})),O.b.element({id:"max-RATING",keyset:"progress",params:{rating:n.a.createElement("b",null,t)}})]]}renderLeftRows(){const{students:e}=this.props;return e.map(e=>{return[n.a.createElement(nT,{className:bj("student"),userId:e.id,avatar:e.avatar,displayName:e.displayName,status:e.status}),n.a.createElement("div",{className:bj("rating")},n.a.createElement("b",null,e.rating))]})}renderRightHeadings(){const{courseId:t,groupId:s,slots:a}=this.props;return a.map(a=>{let{lesson:r}=a;return n.a.createElement("div",{key:r.id,className:bj("lesson-heading")},n.a.createElement(ve,{content:r.title},n.a.createElement("span",null,n.a.createElement(o.b,{className:Object(le.b)(bj("lesson"),bj("lesson-link")),to:_.lessonProgress.build({courseId:t,groupId:s,lessonId:r.id.toString()})},n.a.createElement("b",{className:bj("lesson-title")},r.shortTitle),n.a.createElement(ge.a,{cls:bj("visibility-icon"),size:"l",type:r.isHidden?"eye-closed":"eye-open"})))),r.manualVariantsAssignment?this.renderShuffleButton(r):e.renderAutoAssignmentMessage())})}renderRightRows(){const{slots:e,groupId:t,students:s,courseId:a}=this.props;return s.map(s=>e.map(e=>{let{lesson:r}=e;const i=1===r.variants.length&&r.problemVariants.length>0;return n.a.createElement(n.a.Fragment,null,!i&&n.a.createElement(aj,{key:"".concat(s.id,"-").concat(r.id,"-task"),cls:bj("variant-picker"),isShufflePending:this.isShufflePending(r.id),isReassigningAllowed:this.isReassignmentAllowed(),isAutoAssigned:!r.manualVariantsAssignment,studentId:s.id,lessonId:r.id,groupId:Number(t),variants:r.variants,statuses:s.lessons[r.id].tasks}),n.a.createElement(hj,{userId:s.id,key:"".concat(s.id,"-").concat(r.id,"-problem"),cls:bj("variant-picker"),isShufflePending:this.isShufflePending(r.id),isReassigningAllowed:this.isReassignmentAllowed(),isAutoAssigned:!r.manualVariantsAssignment,studentId:s.id,lessonId:r.id,courseId:Number(a),groupId:Number(t),variants:r.problemVariants,statuses:s.lessons[r.id].problems}))}))}static renderAutoAssignmentMessage(){return n.a.createElement("span",{className:bj("lesson-info")},O.b.text({id:"auto-assignment",keyset:"lessons"}))}renderShuffleButton(e){return n.a.createElement("button",{type:"button",className:bj("shuffle-button"),disabled:this.isShuffleDisabled(e),onClick:this.shuffleVariants(e.id)},n.a.createElement(ge.a,{size:"s",type:"shuffle"}),O.b.text({id:"shuffle-variants",keyset:"lessons"}))}render(){const{fetchStatus:e,fetchError:t}=this.props;return n.a.createElement("div",{className:bj()},n.a.createElement(yb,{fetchError:t,fetchStatus:e,renderSuccess:this.renderTable}))}}).prototype,"renderTable",[$.a],Object.getOwnPropertyDescriptor(pj.prototype,"renderTable"),pj.prototype),pj);Ej.displayName="CourseVariantsTable";var fj=Object(b.b)(function(e,t){const{sortBy:s,sortOrder:a}=e.courseVariants;return{maxRating:nj(e),slots:oj(e),students:t.showExpelled?rj(e):ij(e),fetchStatus:cj(e),fetchError:lj(e),isSuperuser:J(e),sortBy:s,sortOrder:a}},function(e){return Object(ee.bindActionCreators)({changeSort:yc,fetchCourseVariantsStart:Ec.request,clearCourseVariants:fc,updateLessonVariants:gc,addNotification:sn.a},e)})(Ej);function gj(e){let{students:t,initialValue:s=!1}=e;const[n,r]=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[t,s]=Object(a.useState)(e);return[t,function(){s(!t)}]}(s);let i=[];return t&&(i=n?t:t.filter(e=>e.status!==xp.Expelled)),{showExpelled:n,filteredStudents:i,toggleExpelledFilter:r}}const yj=e=>n.a.createElement(PT,Object.assign({size:"m"},e),O.b.text({id:"show-expelled",keyset:"students"}));yj.displayName="ExpelledFilterCheckbox";s(958);const Sj=d.a.with("course-progress"),Oj=e=>{let{course:t,group:s,history:r,location:i,match:o}=e;if(!t||!s)throw new k.e("Course or group are missing",{courseId:t?t.id:void 0,groupId:s?s.id:void 0});const l=t.id.toString(),u=s.id.toString();Object(a.useEffect)(()=>{i.pathname===o.url&&r.replace(Object.assign({},i,{pathname:_.courseAttendance.build({courseId:l,groupId:u})}))});const d=O.b.text({id:"course-progress-teacher",keyset:"page-titles",params:{course:t.title,group:s.name}}),{showExpelled:m,toggleExpelledFilter:p}=gj({});return n.a.createElement("article",{className:Sj()},n.a.createElement(c.a,null,n.a.createElement("title",null,d),n.a.createElement("meta",{name:"title",content:d})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement(Oa,{level:1,controls:n.a.createElement(yj,{cls:Sj("checkbox"),checked:m,onChange:p})},O.b.text({id:"course-progress",keyset:"courses"})),n.a.createElement("nav",{className:Sj("nav")},n.a.createElement("ul",{className:Sj("nav-list")},n.a.createElement("li",{className:Sj("nav-item")},n.a.createElement(da,{to:_.courseAttendance.build({courseId:l,groupId:u})},O.b.text({id:"records-and-attendance",keyset:"progress"}))),n.a.createElement("li",{className:Sj("nav-item")},n.a.createElement(da,{to:_.courseVariants.build({courseId:l,groupId:u})},O.b.text({id:"tests",keyset:"progress"}))))),n.a.createElement("section",{className:Sj("table")},n.a.createElement(I.d,null,n.a.createElement(I.b,{path:_.courseAttendance.template,render:()=>n.a.createElement(qC,{showExpelled:m,courseId:l,groupId:u})}),n.a.createElement(I.b,{path:_.courseVariants.template,render:()=>n.a.createElement(fj,{showExpelled:m,courseId:l,groupId:u})}))))))};Oj.displayName="CourseProgress";var vj=hE(Object(b.b)(function(e,t){const{params:s}=t.match;return{course:oe(e,s.courseId),group:lf(e,s.groupId)}})(Oj)),Nj=s(74),Ij=s.n(Nj);s(959);const kj=d.a.with("schedule-events");class Tj extends a.Component{render(){const{children:e,week:t}=this.props;return n.a.createElement("section",{className:kj("week")},n.a.createElement("div",{className:kj("week-index")},t+1),e)}}Tj.displayName="ScheduleEventsWeek";var Cj,jj=Tj;s(960);function wj(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const Aj=d.a.with("schedule-events");let _j=(wj((Cj=class extends a.Component{constructor(){super(...arguments),this.state={isEditPopupVisible:!1},this.editIconRef=Object(a.createRef)()}render(){const{readonlyMode:e,event:t,index:s,isEdited:a,isSelectedForSwap:r,isSwapInProgress:i,unassignedEvents:o}=this.props,{isEditPopupVisible:c}=this.state,l=Ce.fromISO(t.date)<Ce.local(),u=e||l;return n.a.createElement("div",{className:Aj("event-description",{type:t.type,edited:a,passed:l,editing:c})},n.a.createElement("div",{className:Aj("event-datetime")},n.a.createElement("time",{className:Aj("event-date")},Ce.fromISO(t.date).toFormat("d MMM")),n.a.createElement("time",{className:Aj("event-time")},Ce.fromISO(t.date).toFormat("EEE, HH:mm"))),n.a.createElement("div",{className:Aj("event")},n.a.createElement("div",{className:Aj("lesson-index")},s),u?n.a.createElement("div",{className:Aj("event-title",{type:t.type,readonly:u})},this.getEventTitle()):n.a.createElement(ve,{enabled:i,content:this.getSwapHint()},n.a.createElement("div",{className:Aj("event-title",{type:t.type,selected:r}),onClick:this.handleEventClick(t)},this.getEventTitle()))),!u&&n.a.createElement(Se.a,{innerRef:this.editIconRef,className:Aj("edit-event"),size:"s",theme:"clear",view:"lyceum",checked:c,icon:e=>n.a.createElement(ge.a,{cls:e,size:"m",type:"edit"}),onClick:t.type===vh.Skip?this.handleSkipReasonOpenClick:this.openEditPopup}),n.a.createElement(Ks.a,{autoclosable:!0,anchor:this.editIconRef.current,cls:Aj("edit-popup"),onOutsideClick:this.closeEditPopup,target:"anchor",theme:"normal",visible:c},t.type===vh.Reserve&&o.map(e=>n.a.createElement("div",{key:e.id,className:Aj("event-title",{type:e.type}),onClick:this.handleAssignClick(e)},e.title)),n.a.createElement("div",{className:Aj("event-title",{type:"skip"}),onClick:this.handleSkipClick},O.b.text({id:"skip",keyset:"schedule"}))))}closeEditPopup(){this.setState({isEditPopupVisible:!1})}openEditPopup(){const{isSwapInProgress:e,onSwapCancel:t}=this.props;e&&t(),this.setState({isEditPopupVisible:!0})}handleSkipClick(){const{event:e,onSkip:t}=this.props;t(e),this.closeEditPopup()}handleEventClick(e){return()=>{const{isSwapAllowed:t,isSwapInProgress:s,onSwapStart:a,onSwapEnd:n}=this.props;s?t&&n(e):a(e)}}handleAssignClick(e){return()=>{const{event:t,onAssign:s}=this.props;s(e,t),this.closeEditPopup()}}handleSkipReasonOpenClick(){const{isSwapInProgress:e,event:t,onSkipReasonOpen:s,onSwapCancel:a}=this.props;e&&a(),s(t)}getEventTitle(){const{event:e}=this.props;switch(e.type){case vh.Elective:case vh.Lesson:case vh.Test:return e.title;case vh.Skip:return e.title||O.b.text({id:"skip",keyset:"schedule"});case vh.Reserve:return O.b.text({id:"reserve",keyset:"schedule"});default:return""}}getSwapHint(){const{isSwapAllowed:e}=this.props;return e?O.b.text({id:"swap-to-day-hint",keyset:"schedule"}):O.b.text({id:"swap-with-lesson-hint",keyset:"schedule"})}}).prototype,"closeEditPopup",[$.a],Object.getOwnPropertyDescriptor(Cj.prototype,"closeEditPopup"),Cj.prototype),wj(Cj.prototype,"openEditPopup",[$.a],Object.getOwnPropertyDescriptor(Cj.prototype,"openEditPopup"),Cj.prototype),wj(Cj.prototype,"handleSkipClick",[$.a],Object.getOwnPropertyDescriptor(Cj.prototype,"handleSkipClick"),Cj.prototype),wj(Cj.prototype,"handleEventClick",[$.a],Object.getOwnPropertyDescriptor(Cj.prototype,"handleEventClick"),Cj.prototype),wj(Cj.prototype,"handleAssignClick",[$.a],Object.getOwnPropertyDescriptor(Cj.prototype,"handleAssignClick"),Cj.prototype),wj(Cj.prototype,"handleSkipReasonOpenClick",[$.a],Object.getOwnPropertyDescriptor(Cj.prototype,"handleSkipReasonOpenClick"),Cj.prototype),Cj);_j.displayName="ScheduleEventsEvent";var Mj=_j;s(961);const xj=d.a.with("schedule-events");class Dj extends a.Component{constructor(){super(...arguments),this.months=Te.Info.months()}render(){const{children:e,month:t}=this.props,s=uf(this.months[t-1]);return n.a.createElement("section",{className:xj("month")},n.a.createElement(Oa,{smaller:!0,level:2,className:xj("month-name")},s),e)}}Dj.displayName="ScheduleEventsMonth";var Pj=Dj;s(962);const Rj=d.a.with("schedule-events");class Lj extends a.Component{constructor(){super(...arguments),this.state={initialReason:this.props.initialReason,skipReason:this.props.initialReason||""},this.handleSkipReasonChange=e=>{const{value:t}=e.target;t.length<=255&&this.setState({skipReason:t})},this.handleSkipReasonCancel=()=>{const{onCancel:e}=this.props;this.setState({skipReason:""}),e()},this.handleSkipReasonSave=()=>{const{skipReason:e}=this.state,{onSave:t}=this.props;this.setState({skipReason:""}),t(e)}}static getDerivedStateFromProps(e,t){return t.initialReason!==e.initialReason?{initialReason:e.initialReason,skipReason:e.initialReason}:null}render(){const{visible:e}=this.props,{skipReason:t}=this.state;return n.a.createElement(Jt.a,{visible:e},n.a.createElement("div",{className:Rj("skip-reason-modal")},n.a.createElement("div",{className:Rj("skip-reason-modal-title")},O.b.text({id:"skip-reason",keyset:"schedule"})),n.a.createElement(VE,{size:"m",value:t,placeholder:O.b.text({id:"skip-reason",keyset:"schedule"}),onChange:this.handleSkipReasonChange}),n.a.createElement("div",{className:Rj("skip-reason-modal-controls")},n.a.createElement(Se.a,{className:Rj("skip-reason-control"),size:"m",theme:"pseudo",view:"lyceum",onClick:this.handleSkipReasonCancel},O.b.text({id:"cancel"})),n.a.createElement(Se.a,{className:Rj("skip-reason-control"),size:"m",theme:"action",view:"lyceum",onClick:this.handleSkipReasonSave},O.b.text({id:"save"})))))}}Lj.displayName="ScheduleEventsSkipReasonModal";var Fj=Lj;function zj(e){return e.reduce((e,t)=>{const s=Ce.fromISO(t.date),{year:a,month:n}=s,r=function(e){const t=Te.DateTime.local(e.year,e.month,1),s=1===e.month,a=s?1:t.weekNumber,n=e.year<e.weekYear,r=e.year>e.weekYear,i=t.year>t.weekYear;let o=e.weekNumber;return r&&s?0:(n&&(o=e.weeksInWeekYear-1),i&&(o+=1),o-a)}(s);e[a]||(e[a]={}),e[a][n]||(e[a][n]={});const i=e[a][n];return i[r]||(i[r]=[]),i[r].push(t),e},{})}var Uj;s(963);function Hj(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const Vj=d.a.with("schedule-events"),Gj={[vh.Lesson]:[vh.Reserve,vh.Elective,vh.Skip],[vh.Test]:[vh.Reserve,vh.Elective,vh.Skip],[vh.Reserve]:[vh.Lesson,vh.Test,vh.Reserve,vh.Elective,vh.Skip],[vh.Elective]:[vh.Lesson,vh.Test,vh.Reserve,vh.Elective,vh.Skip],[vh.Skip]:[vh.Lesson,vh.Test,vh.Reserve,vh.Elective,vh.Skip]};let Bj=(Hj((Uj=class extends a.Component{constructor(){super(...arguments),this.state={eventToSwap:void 0,isSkipReasonModalVisible:!1,changingSkipReasonFor:void 0},this.rootRef=Object(a.createRef)()}componentDidMount(){window.addEventListener("click",this.handleOutsideClick),window.addEventListener("keydown",this.handleEscPress)}componentWillUnmount(){window.removeEventListener("click",this.handleOutsideClick),window.removeEventListener("keydown",this.handleEscPress)}render(){const{changingSkipReasonFor:e,eventToSwap:t,isSkipReasonModalVisible:s}=this.state,{cls:a,readonlyMode:r,events:i,editedEventsIds:o,unassignedEvents:c}=this.props,l=Boolean(t),u=zj(i),d=Object.keys(u).map(Number).sort((e,t)=>e-t);return n.a.createElement("section",{ref:this.rootRef,className:Object(le.b)(a,Vj())},d.map(e=>{const s=u[e];return Object.keys(s).map(e=>{const a=s[e];return n.a.createElement(Pj,{key:e,month:Number(e)},Object.keys(a).map(e=>{const s=a[e];return n.a.createElement(jj,{key:e,week:Number(e)},s.map(e=>{const s=!!t&&t.id===e.id,a=this.hasIndex(e)?this.getLessonIndex(e.id):void 0,i=o.includes(e.id);return n.a.createElement(Mj,{key:e.id,readonlyMode:r,event:e,index:a,isEdited:i,isSelectedForSwap:s,isSwapAllowed:t&&this.isSwapAllowed(t,e),isSwapInProgress:l,unassignedEvents:c,onAssign:this.handleAssign,onSkip:this.handleSkip,onSkipReasonOpen:this.handleSkipReasonOpen,onSwapCancel:this.handleSwapCancel,onSwapEnd:this.handleSwapEnd,onSwapStart:this.handleSwapStart})}))}))})}),n.a.createElement(Fj,{initialReason:e&&e.title,visible:s,onCancel:this.handleSkipReasonCancel,onSave:this.handleSkipReasonSave}))}handleAssign(e,t){this.props.assignEvent(e.id,t.id)}handleSkip(e){this.props.skipEvent(e.id)}handleSwapStart(e){this.setState({eventToSwap:e})}handleSwapEnd(e){const{eventToSwap:t}=this.state;this.setState({eventToSwap:void 0}),t&&this.props.swapEvents(t.id,e.id)}handleSwapCancel(){this.setState({eventToSwap:void 0})}handleSkipReasonOpen(e){this.setState({changingSkipReasonFor:e,isSkipReasonModalVisible:!0})}handleSkipReasonCancel(){this.setState({changingSkipReasonFor:void 0,isSkipReasonModalVisible:!1})}handleSkipReasonSave(e){const{changingSkipReasonFor:t}=this.state;this.setState({changingSkipReasonFor:void 0,isSkipReasonModalVisible:!1}),t&&this.props.addSkipReason(t.id,e)}handleOutsideClick(e){let{target:t}=e;Boolean(this.state.eventToSwap)&&this.rootRef.current&&t&&!function(e,t){let s=e;do{if(s===t)return!0;s=s&&s.parentNode?s.parentNode:document}while(s!==document);return!1}(t,this.rootRef.current)&&this.handleSwapCancel()}handleEscPress(e){let{key:t}=e;Boolean(this.state.eventToSwap)&&"Escape"===t&&this.handleSwapCancel()}getLessonIndex(e){const{events:t}=this.props;return t.filter(e=>{let{type:t}=e;return t===vh.Lesson||t===vh.Test}).findIndex(t=>t.id===e)+1}hasIndex(e){return e.type===vh.Lesson||e.type===vh.Test}isSwapAllowed(e,t){if(this.props.isUserSuperuser)return!0;const s=this.props.events.findIndex(t=>t.id===e.id),a=this.props.events.findIndex(e=>e.id===t.id);return 1===Math.abs(s-a)&&Gj[e.type].includes(t.type)}}).prototype,"handleAssign",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleAssign"),Uj.prototype),Hj(Uj.prototype,"handleSkip",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleSkip"),Uj.prototype),Hj(Uj.prototype,"handleSwapStart",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleSwapStart"),Uj.prototype),Hj(Uj.prototype,"handleSwapEnd",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleSwapEnd"),Uj.prototype),Hj(Uj.prototype,"handleSwapCancel",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleSwapCancel"),Uj.prototype),Hj(Uj.prototype,"handleSkipReasonOpen",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleSkipReasonOpen"),Uj.prototype),Hj(Uj.prototype,"handleSkipReasonCancel",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleSkipReasonCancel"),Uj.prototype),Hj(Uj.prototype,"handleSkipReasonSave",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleSkipReasonSave"),Uj.prototype),Hj(Uj.prototype,"handleOutsideClick",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleOutsideClick"),Uj.prototype),Hj(Uj.prototype,"handleEscPress",[$.a],Object.getOwnPropertyDescriptor(Uj.prototype,"handleEscPress"),Uj.prototype),Uj);Bj.displayName="ScheduleEvents";var Wj=Object(b.b)(function(e){return{isUserSuperuser:J(e),events:wd(e),editedEventsIds:Td(e),unassignedEvents:zd(e)}},function(e){return Object(ee.bindActionCreators)({addSkipReason:yd,assignEvent:Sd,skipEvent:Od,swapEvents:vd},e)})(Bj);s(964);const Kj=d.a.with("timepicker"),qj=e=>"0".concat(e).slice(-2);class Yj extends a.Component{constructor(){super(...arguments),this.state=Object.assign({hours:"",minutes:""},this.parseDefaultValue()),this.minutesRef=Object(a.createRef)(),this.handleBlur=()=>{const{onChange:e}=this.props,{hours:t,minutes:s}=this.state,a=Ce.local().toFormat("ZZ");2===t.length&&2===s.length?e("".concat(t,":").concat(s).concat(a)):e()},this.handleHoursChange=e=>{const{value:t}=e.target;this.changeValue(t,{type:"hours",maxValue:23})},this.handleMinutesChange=e=>{const{value:t}=e.target;this.changeValue(t,{type:"minutes",maxValue:59})},this.changeValue=(e,t)=>{const{type:s}=t;e||this.setValue(s,e),this.isValueValid(e,t)&&this.setValue(s,e)},this.setValue=(e,t)=>{"hours"===e?this.setState({hours:t},this.continueEditing(e)):this.setState({minutes:t},this.continueEditing(e))},this.continueEditing=e=>()=>{this.minutesRef.current&&("hours"===e?2===this.state.hours.length&&this.minutesRef.current.focus():2===this.state.minutes.length&&this.minutesRef.current.blur())},this.isValueValid=(e,t)=>{let{maxValue:s,minValue:a=0}=t;return/^\d+$/.test(e)&&Number(e)>=a&&Number(e)<=s&&e.length<=s.toString().length}}parseDefaultValue(){const{defaultValue:e}=this.props;if(!e)return{};const t=Ce.fromISO(e);return t.invalidReason?(l.captureException(new Error('defaultValue should be in "HH:mm+ZZ" format')),{}):{hours:qj(t.hour.toString()),minutes:qj(t.minute.toString())}}render(){const{borderless:e,disabled:t}=this.props,{hours:s,minutes:a}=this.state;return n.a.createElement("div",{className:Kj({borderless:e})},n.a.createElement("input",{className:Kj("hours"),disabled:t,placeholder:"--",value:s,onBlur:this.handleBlur,onChange:this.handleHoursChange}),n.a.createElement("span",{className:Kj("colon")},":"),n.a.createElement("input",{ref:this.minutesRef,className:Kj("minutes"),disabled:t,placeholder:"--",value:a,onBlur:this.handleBlur,onChange:this.handleMinutesChange}))}}Yj.displayName="Timepicker";var Jj,Zj=Yj;s(965);function Xj(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const Qj=d.a.with("schedule-plan-form");let $j=(Xj((Jj=class extends a.Component{constructor(){super(...arguments),this.state=this.getInitialState()}static getDerivedStateFromProps(e,t){return wg(t.initialValue,e.plan)?{changedDays:e.plan,initialValue:e.plan}:null}getInitialState(){return{isModalOpened:!1,isFormChanged:!1,changedDays:this.props.plan,initialValue:this.props.plan}}handleTimeChange(e){return t=>{this.setState(s=>{const a=Object.assign({},s.changedDays);return t?a[e]=t:delete a[e],{changedDays:a,isFormChanged:!0}})}}handleGeneratePlan(){const{studyPeriodId:e,groupId:t}=this.props,{changedDays:s,initialValue:a}=this.state;this.setState({isFormChanged:!1}),a&&!Object.keys(a).length?this.props.generateSchedule({studyPeriodId:e,groupId:t,plan:s}):this.props.updateStudyPlan({studyPeriodId:e,groupId:t,plan:s}),this.closeModal()}openModal(e){e.preventDefault(),this.setState({isModalOpened:!0})}closeModal(){this.setState({isModalOpened:!1})}renderFormState(e){const{generateError:t}=this.props,{isFormChanged:s}=this.state;return t&&!s?n.a.createElement("span",{className:Qj("error")},O.b.text({id:t.code,keyset:"api-errors"})):n.a.createElement(n.a.Fragment,null,0!==e&&n.a.createElement("span",{className:Qj("days-left")},e>0?O.b.text({id:"template-days-left",keyset:"schedule",params:{count:e}}):O.b.text({id:"template-days-overflow",keyset:"schedule",params:{count:Math.abs(e)}})))}render(){const{cls:e,generateStatus:t,readonlyMode:s,lessonsPerWeek:a}=this.props,{isModalOpened:r,changedDays:i}=this.state,o=Object.keys(i).length,c=a-o;return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:Object(le.b)(e,Qj({readonly:s})),onSubmit:this.openModal},n.a.createElement("fieldset",{className:Qj("fieldset")},n.a.createElement("legend",{className:Qj("title")},O.b.text({id:"template-title",keyset:"schedule"})),n.a.createElement("div",{className:Qj("days")},[1,2,3,4,5,6,7].map(e=>{const t=Boolean(i[e]),r=!t&&o===a||s;return n.a.createElement("div",{key:e,className:Qj("day",{changed:t,disabled:r})},n.a.createElement("div",{className:Qj("day-name")},function(e){const t=new Date,s=e%7-t.getDay();return t.setDate(t.getDate()+s),Te.DateTime.fromJSDate(t).toLocaleString({weekday:"short"}).toUpperCase()}(e)),n.a.createElement(Zj,{key:i[e],borderless:!0,disabled:r,defaultValue:i[e],onChange:this.handleTimeChange(e)}))}))),n.a.createElement("div",{className:Qj("submit")},n.a.createElement(Se.a,{size:"l",view:"lyceum",type:"submit",theme:"action",disabled:0!==c||s,progress:t===Gt.a.PENDING},O.b.text({id:"save"})),this.renderFormState(c))),n.a.createElement(Ia,{visible:r,title:O.b.text({id:"study-plan-dialog-title",keyset:"schedule"}),okText:O.b.text({id:"study-plan-dialog-ok",keyset:"schedule"}),cancelText:O.b.text({id:"study-plan-dialog-cancel",keyset:"schedule"}),content:O.b.text({id:"study-plan-dialog-content",keyset:"schedule",params:{plan:(l=i,[1,2,3,4,5,6,7].reduce((e,t)=>{if(!l[t])return e;const s=Te.DateTime.fromISO(l[t]).set({weekday:t%7}).toFormat("ccc".concat(v,"HH:mm"));return[...e,uf(s)]},[]).join(", "))}}),onOkClick:this.handleGeneratePlan,onCancelClick:this.closeModal,onCloseClick:this.closeModal}));var l}}).prototype,"handleGeneratePlan",[$.a],Object.getOwnPropertyDescriptor(Jj.prototype,"handleGeneratePlan"),Jj.prototype),Xj(Jj.prototype,"openModal",[$.a],Object.getOwnPropertyDescriptor(Jj.prototype,"openModal"),Jj.prototype),Xj(Jj.prototype,"closeModal",[$.a],Object.getOwnPropertyDescriptor(Jj.prototype,"closeModal"),Jj.prototype),Jj);$j.displayName="SchedulePlanForm";var ew,tw=Object(b.b)(function(e){const t=Ad(e);return{plan:t?(s=t,s.items.reduce((e,t)=>{let{dayOfWeek:s,startTime:a}=t;return e[s]=a,e},{})):{},generateError:Fd(e),generateStatus:Ld(e)};var s},function(e){return Object(ee.bindActionCreators)({generateSchedule:ud,updateStudyPlan:dd},e)})($j);s(966);function sw(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const aw=d.a.with("course-schedule");let nw=(sw((ew=class extends a.Component{constructor(){super(...arguments),this.state={isEditingPlan:!1}}static getDerivedStateFromProps(e,t){return t.isEditingPlan&&e.generateStatus===Gt.a.SUCCESS?{isEditingPlan:!1}:null}render(){const{pageLoadStatus:e,pageLoadError:t}=this.props;return n.a.createElement("article",{className:aw()},n.a.createElement(yb,{fetchError:t,fetchStatus:e,renderSuccess:this.renderPageContent,renderError:this.renderError}))}renderError(){const{course:e,group:t}=this.props;let s;return e&&(s=O.b.text({id:"course-schedule-teacher",keyset:"page-titles",params:{course:e.title,group:t.name}})),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,s),n.a.createElement("meta",{name:"title",content:s})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Top,null,n.a.createElement("div",{className:aw("error-wrapper")},n.a.createElement("p",{className:aw("error-message")},O.b.text({id:"404_study_period_not_found",keyset:"api-errors"}))))))}renderPageContent(){const{scheduleLoadError:e,scheduleLoadStatus:t,course:s,group:a}=this.props,r=this.isReadonly();let i;return s&&(i=O.b.text({id:"course-schedule-teacher",keyset:"page-titles",params:{course:s.title,group:a.name}})),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,i),n.a.createElement("meta",{name:"title",content:i})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Top,null,this.renderHeader(),this.renderPlan(r)),n.a.createElement(yb,{fetchError:e,fetchStatus:t,renderSuccess:this.renderMain})))}isReadonly(){const{role:e}=this.props;switch(e){case x.Teacher:return!1;case x.Methodist:return!0;default:throw new T("Role not supported",{role:e})}}renderMain(){const{hasSchedule:e,isScheduleEdited:t,unassignedEvents:s}=this.props,a=this.isReadonly();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Rn.Main,null,e&&n.a.createElement(Wj,{cls:aw("events"),readonlyMode:a}),!a&&e&&t&&this.renderChangeActions()),s.length>0&&n.a.createElement(Rn.Aside,null,this.renderUnassignedEvents()))}renderHeader(){const{hasSchedule:e,needGenerate:t}=this.props;return n.a.createElement("header",{className:aw("header")},n.a.createElement(Oa,{level:1},O.b.text({id:"schedule",keyset:"schedule"})),t&&n.a.createElement("sub",{className:aw("announcement")},e?O.b.text({id:"need-regenerate",keyset:"schedule"}):O.b.text({id:"need-generate",keyset:"schedule"})),this.renderTabs())}renderTabs(){const{course:e,group:t}=this.props;return e&&n.a.createElement("nav",{className:aw("period-nav")},n.a.createElement("ul",{className:aw("period-tabs")},e.studyPeriods.map(s=>n.a.createElement("li",{key:s.id,className:aw("period-tabs-item")},n.a.createElement(da,{key:s.id,className:aw("period-tab"),isActive:this.checkIsTabActive(s.id),to:te.courseSchedule.build({courseId:e.id.toString(),groupId:t.id.toString()},{studyPeriod:s.id})},s.name)))))}checkIsTabActive(e){return()=>{const{currentStudyPeriod:t}=this.props;return!!t&&e===t.id}}renderPlan(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{isUserSuperuser:t,group:s,actualSchedulePlan:a,futureSchedulePlan:r,hasSchedule:i,needGenerate:o,currentStudyPeriod:c}=this.props,{isEditingPlan:l}=this.state;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:aw("plan")},i&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:aw("plan-description")},a&&O.b.text({id:"plan-description",keyset:"schedule",params:{plan:df(a)}}),!e&&!o&&n.a.createElement(Se.a,{className:aw("edit-plan"),theme:"clear",size:"xs",view:"lyceum",checked:l,icon:e=>n.a.createElement(ge.a,{cls:e,size:"m",type:"edit"}),onClick:this.handleEditPlanClick})),n.a.createElement("div",{className:aw("future-plan-description")},r&&O.b.text({id:"future-plan-description",keyset:"schedule",params:{startDate:Te.DateTime.fromISO(r.startDate).toFormat("d MMMM"),plan:df(r)}}))),!e&&(l||o)&&c&&n.a.createElement(tw,{cls:aw("plan-form"),groupId:s.id,studyPeriodId:c.id,lessonsPerWeek:c.lessonsPerWeek,readonlyMode:i&&!t})))}renderUnassignedEvents(){const{unassignedEvents:e}=this.props;return n.a.createElement("section",{className:aw("unassigned-events")},n.a.createElement(Oa,{smaller:!0,smallerOnDesktop:!0,level:2,className:aw("unassigned-events-heading")},O.b.text({id:"elective-themes",keyset:"schedule"})),n.a.createElement("ul",{className:aw("unassigned-events-list")},e.map(e=>n.a.createElement("li",{key:e.id,className:aw("unassigned-event")},e.title))))}renderChangeActions(){const{saveStatus:e,cancelChanges:t}=this.props;return n.a.createElement("div",{className:aw("change-actions")},n.a.createElement(Se.a,{className:aw("change-action"),size:"l",view:"lyceum",theme:"action",progress:e===Gt.a.PENDING,onClick:this.handleSaveSchedule},O.b.text({id:"save"})),n.a.createElement(Se.a,{className:aw("change-action"),size:"l",view:"lyceum",theme:"action",onClick:t},O.b.text({id:"cancel-changes",keyset:"schedule"})))}handleEditPlanClick(){this.props.resetScheduleGenerator(),this.setState(e=>({isEditingPlan:!e.isEditingPlan}))}handleSaveSchedule(){const{group:e,currentStudyPeriod:t}=this.props;null!==t&&this.props.saveSchedule({groupId:e.id,studyPeriodId:t.id})}}).prototype,"renderError",[$.a],Object.getOwnPropertyDescriptor(ew.prototype,"renderError"),ew.prototype),sw(ew.prototype,"renderPageContent",[$.a],Object.getOwnPropertyDescriptor(ew.prototype,"renderPageContent"),ew.prototype),sw(ew.prototype,"renderMain",[$.a],Object.getOwnPropertyDescriptor(ew.prototype,"renderMain"),ew.prototype),sw(ew.prototype,"handleEditPlanClick",[$.a],Object.getOwnPropertyDescriptor(ew.prototype,"handleEditPlanClick"),ew.prototype),sw(ew.prototype,"handleSaveSchedule",[$.a],Object.getOwnPropertyDescriptor(ew.prototype,"handleSaveSchedule"),ew.prototype),ew);nw.displayName="CourseSchedule";var rw=gb(nw);class iw extends a.Component{componentDidMount(){const{match:e,pageLoadStatus:t}=this.props,{groupId:s,courseId:a}=e.params,n=ow(this.props.location.search);this.redirectToStudyPeriod(n),t!==Gt.a.SUCCESS&&this.props.loadPageData({courseId:Number(a),groupId:Number(s),studyPeriodId:n})}componentDidUpdate(e){const{groupId:t,courseId:s}=this.props.match.params,a=ow(this.props.location.search);this.redirectToStudyPeriod(a),a&&e.currentStudyPeriod&&e.currentStudyPeriod.id!==a&&this.props.pageLoadStatus!==Gt.a.PENDING&&this.props.changeStudyPeriod({courseId:Number(s),groupId:Number(t),studyPeriodId:a})}componentWillUnmount(){this.props.clearSchedule()}redirectToStudyPeriod(e){const{history:t,location:s,currentStudyPeriod:a}=this.props;a&&void 0===e&&t.replace(Object.assign({},s,{search:Ij.a.stringify({studyPeriod:a.id})}))}render(){return n.a.createElement(rw,this.props)}}function ow(e){const{studyPeriod:t}=Ij.a.parse(e.slice(1));return t?Number(Array.isArray(t)?t[0]:t):void 0}iw.displayName="CourseScheduleContainer";var cw=hE(Object(b.b)(function(e,t){const{groupId:s}=t.match.params;return{isUserSuperuser:J(e),course:jd(e),group:lf(e,s),currentStudyPeriod:Cd(e),hasSchedule:Hd(e),needGenerate:Ud(e),isScheduleEdited:Vd(e),unassignedEvents:zd(e),actualSchedulePlan:Ad(e),futureSchedulePlan:_d(e),pageLoadError:xd(e),pageLoadStatus:Md(e),scheduleLoadError:Pd(e),scheduleLoadStatus:Dd(e),saveStatus:Rd(e),generateStatus:Ld(e)}},function(e){return Object(ee.bindActionCreators)({loadPageData:bd,changeStudyPeriod:Ed,clearSchedule:gd,saveSchedule:Id,cancelChanges:Nd,resetScheduleGenerator:hd},e)})(iw));function lw(e){return{type:tb.INITIALIZE_TABLE,payload:e}}function uw(e){return{type:tb.SET_PAGE_SIZE,payload:e}}function dw(e){return{type:tb.TOGGLE_COLUMN_VISIBILITY,payload:e}}function mw(){return{type:tb.CLEAR_SETTINGS}}function pw(e){return e.tableSettings.settings}function hw(e){return e.filters.filters}function bw(e){return e.filters.fetchStatus}function Ew(e){return e.filters.fetchError}s(967);const fw=d.a.with("filters");class gw extends a.Component{constructor(){super(...arguments),this.itemRef=Object(a.createRef)(),this.onClick=()=>{this.props.onClick(this.itemRef)}}render(){const{filterName:e,isActive:t}=this.props;return n.a.createElement("li",{ref:this.itemRef,className:fw("filter-menu-item",{active:t}),onClick:this.onClick},O.b.text({id:"name-".concat(e),keyset:"filters"}))}}function yw(e){return e.i18n?O.b.text(Object.assign({},e.i18n)):e.displayValue}gw.displayName="FilterMenuItem";s(968);const Sw=d.a.with("filters");class Ow extends a.Component{constructor(){super(...arguments),this.state={filterText:"",checkedValues:this.getInitialCheckedValues()},this.transformValues=Object(Rl.a)(e=>e.map(e=>({id:e.id,displayValue:yw(e)}))),this.onInputChange=e=>{const{value:t}=e.target;this.setState({filterText:t})},this.onApplyClick=()=>{const{checkedValues:e}=this.state;this.props.onFilterChange(this.props.filterName,Object.keys(e).filter(t=>e[t]))},this.onCheckedValuesChange=e=>{const t=e.currentTarget;this.setState(e=>{return{checkedValues:Object.assign({},e.checkedValues,{[t.value]:t.checked})}})},this.renderMessage=e=>n.a.createElement("p",{className:Sw("message")},e),this.renderValues=()=>{const{values:e}=this.props,{filterText:t,checkedValues:s}=this.state,a=this.transformValues(e),r=t.toLowerCase(),i=a.filter(e=>{let{displayValue:t}=e;return t&&t.toLowerCase().includes(r)});if(!i.length){const e=O.b.text({id:"no-values",keyset:"filters"});return this.renderMessage(e)}return n.a.createElement("ul",{className:Sw("values-list")},i.map(e=>n.a.createElement("li",{className:Sw("filter-value"),key:e.id},n.a.createElement(PT,{size:"m",checked:s[e.id],value:e.id,onChange:this.onCheckedValuesChange},e.displayValue))))}}shouldComponentUpdate(e,t){const s=this.state.filterText!==t.filterText,a=this.state.checkedValues!==t.checkedValues,n=this.props.filterName!==e.filterName;return s||a||n}getInitialCheckedValues(){const{appliedValues:e}=this.props;return e.reduce((e,t)=>(e[t]=!0,e),{})}isButtonActive(){const{appliedValues:e}=this.props,{checkedValues:t}=this.state,s=Object.keys(t).filter(e=>t[e]);return s.length===e.length&&s.every(t=>e.includes(t))}render(){const{filterText:e}=this.state;return n.a.createElement("div",{className:Sw("filter-values")},n.a.createElement("div",{className:Sw("search")},n.a.createElement(VE,{placeholder:O.b.text({id:"search",keyset:"filters"}),value:e,size:"m",onChange:this.onInputChange})),n.a.createElement("div",{className:Sw("values-list-wrapper")},this.renderValues()),n.a.createElement("div",{className:Sw("filter-controls")},n.a.createElement(Se.a,{size:"m",theme:"action",view:"lyceum",disabled:this.isButtonActive(),onClick:this.onApplyClick},O.b.text({id:"apply",keyset:"filters"}))))}}Ow.displayName="FilterValues";s(336);const vw=d.a.with("filters"),Nw=e=>{let{filters:t,appliedFilters:s,onFilterChange:r,menuPopupRef:i,itemPopupRef:o}=e;const[c,l]=Object(a.useState)({}),{openItemRef:u,openFilterName:d,openFilterValues:m}=c,[p,h,b,E]=la(!1,u?u.current:null,i.current);Object(a.useEffect)(()=>{p||l({})},[p]);const f=Object(a.useCallback)((e,t)=>{b(),r(e,t)},[b,r]),g=Object(a.useCallback)(e=>{const t=s.find(t=>t.filterName===e);return t?t.values:[]},[s]),y=Object(a.useCallback)((e,t)=>s=>{t&&(l({openItemRef:s,openFilterName:e,openFilterValues:t}),u&&u!==s?document.dispatchEvent(new Event("documentchange")):h())},[u,h]);return t?n.a.createElement("div",{className:vw("filter-menu")},n.a.createElement("ul",{className:vw("filter-menu-list")},Object.keys(t).map(e=>n.a.createElement(gw,{key:e,filterName:e,isActive:e===d,onClick:y(e,t[e])}))),n.a.createElement(ra,{hasTail:!0,innerRef:o,tailSize:17,anchor:u,target:"anchor",theme:"normal",visible:p,directions:["right-center","left-center"],onOutsideClick:E,onEscapeKeyDown:b},d&&m&&n.a.createElement(Ow,{key:d,filterName:d,appliedValues:g(d),values:m,onFilterChange:f}))):null};Nw.displayName="FilterMenu";const Iw=d.a.with("filters"),kw=e=>{let{fetchError:t,fetchStatus:s,filters:a}=e,r=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["fetchError","fetchStatus","filters"]);return n.a.createElement(yb,{fetchError:t,fetchStatus:s,renderSuccess:()=>n.a.createElement(Nw,Object.assign({filters:a},r)),renderError:e=>n.a.createElement("p",{className:Iw("error")},e),renderPending:()=>n.a.createElement("div",{className:Iw("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"}))})};kw.displayName="FilterMenuContainer";const Tw=Object(b.b)(function(e){return{filters:hw(e),fetchError:Ew(e),fetchStatus:bw(e)}})(kw);s(969);const Cw=d.a.with("filters"),jw=e=>{let{appliedFilters:t,onFilterChange:s}=e;const r=Object(a.useRef)(null),i=Object(a.useRef)(null),o=Object(a.useRef)(null),[c,l,u,d]=la(!1,r.current,o.current),m=Object(a.useCallback)((e,t)=>{u(),s(e,t)},[u,s]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Se.a,{className:Cw("add-button"),innerRef:r,pin:"circle-circle",theme:"pseudo",size:"xs",view:"default",icon:e=>n.a.createElement(ge.a,{cls:e,type:"plus",size:"s"}),onClick:l}),n.a.createElement(ra,{theme:"normal",view:"default",mainOffset:8,target:"anchor",anchor:r,innerRef:i,visible:c,directions:["bottom-center","bottom-left"],onEscapeKeyDown:u,onOutsideClick:d},n.a.createElement(Tw,{menuPopupRef:i,itemPopupRef:o,appliedFilters:t,onFilterChange:m})))};s(970);const ww=d.a.with("filters");class Aw extends a.Component{constructor(){super(...arguments),this.onCloserClick=()=>{this.props.onDelete()}}render(){const e=this.props,{theme:t,children:s}=e,a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["theme","children","onDelete"]);return n.a.createElement("span",Object.assign({},a,{className:ww("label",{theme:t})}),s,n.a.createElement(Se.a,{className:ww("label-closer"),size:"xs",theme:"clear",view:"lyceum",icon:e=>n.a.createElement(ge.a,{cls:e,type:"remove",size:"xs"}),onClick:this.onCloserClick}))}}Aw.displayName="Label";s(971);const _w=d.a.with("filters");class Mw extends a.Component{constructor(){super(...arguments),this.onDelete=()=>{this.props.onDelete(this.props.filterName)}}render(){const{filterName:e,values:t,fetchStatus:s}=this.props,a=O.b.text({id:"name-".concat(e),keyset:"filters"}),r=" ".concat(O.b.text({id:"separator-or",keyset:"filters"})," "),i=s===Gt.a.SUCCESS?this.getFilterValues(r):"...",o="".concat(a,": ").concat(t.join(r));return n.a.createElement(Aw,{theme:"filter",title:o,onDelete:this.onDelete},a,": ",i)}getFilterValues(e){const[t,...s]=this.props.values;return[t,s.map(t=>n.a.createElement(a.Fragment,{key:t},n.a.createElement("span",{className:_w("value-separator")},e),t))]}}Mw.displayName="AppliedFilter";class xw extends a.Component{render(){const{filterName:e,filterValues:t,fetchStatus:s,onDelete:a}=this.props;return n.a.createElement(Mw,{filterName:e,values:t,fetchStatus:s,onDelete:a})}}xw.displayName="AppliedFilterContainer";var Dw=Object(b.b)(function(e,t){const{filterName:s,appliedFilterValues:a}=t,n=function(e,t){const{filters:s}=e.filters;return s?s[t]:void 0}(e,s),r=bw(e);return n?{filterValues:n.filter(e=>a.includes(e.id.toString())).map(yw),fetchStatus:r}:{filterValues:[],fetchStatus:r}})(xw);s(972);const Pw=d.a.with("filters");class Rw extends a.Component{constructor(){super(...arguments),this.onFilterChange=(e,t)=>{this.props.onFilterChange({[e]:t})},this.onDeleteFilter=e=>{this.props.onFilterChange({[e]:[]})},this.onDeleteFilters=()=>{const e=this.props.appliedFilters.reduce((e,t)=>(e[t.filterName]=[],e),{});this.props.onFilterChange(e)},this.renderComponentTitle=()=>n.a.createElement("h5",{className:Pw("title")},n.a.createElement(ge.a,{cls:Pw("icon"),type:"filter",size:"m"}),O.b.text({id:"filters",keyset:"filters"})),this.renderControlsGroup=()=>n.a.createElement(n.a.Fragment,null,this.renderComponentTitle(),this.renderAddFilterButton()),this.renderAddFilterButton=()=>{const{appliedFilters:e}=this.props;return n.a.createElement(jw,{appliedFilters:e,onFilterChange:this.onFilterChange})},this.renderFilterListItem=(e,t)=>{const s=0===t,a=t===this.props.appliedFilters.length-1;return 0===e.values.length?null:n.a.createElement("div",{key:e.filterName,className:Pw("applied-filter")},s&&this.renderComponentTitle(),n.a.createElement(Dw,{filterName:e.filterName,appliedFilterValues:e.values,onDelete:this.onDeleteFilter}),a&&this.renderAddFilterButton())}}render(){const{appliedFilters:e}=this.props,t=e.length>0;return n.a.createElement("section",{className:Pw()},n.a.createElement("div",{className:Pw("left")},t?e.map(this.renderFilterListItem):this.renderControlsGroup()),t&&n.a.createElement("div",{className:Pw("right")},n.a.createElement(Aw,{theme:"clear",onDelete:this.onDeleteFilters},O.b.text({id:"clear",keyset:"filters"}))))}}Rw.displayName="Filters";class Lw extends a.Component{componentDidMount(){const{courseId:e,groupId:t}=this.props;this.props.fetchFilters({courseId:e,groupId:t})}componentWillUnmount(){this.props.clearFilters()}render(){const{appliedFilters:e,onFilterChange:t}=this.props;return n.a.createElement(Rw,{appliedFilters:e,onFilterChange:t})}}Lw.displayName="FiltersContainer";var Fw=Object(b.b)(null,function(e){return Object(ee.bindActionCreators)({clearFilters:Ic,fetchFilters:Nc},e)})(Lw),zw=s(1101);s(973);const Uw=d.a.with("pagination"),Hw=e=>{let{currentPage:t,totalPages:s,buildPageLink:a}=e;return n.a.createElement(zw.a,{className:Uw(),currentPage:t,totalPages:s,startItemTitle:O.b.text({id:"pagination-home"}),nextItemTitle:O.b.text({id:"pagination-forward"}).toLowerCase(),renderItem:e=>{let{page:t,title:s,className:r,isCurrent:i}=e;return i?n.a.createElement("span",{"aria-current":!0,className:Object(le.b)(Uw("current-item"),r)},s):n.a.createElement(Ln.a,{className:Object(le.b)(Uw("link"),r),to:a(t)},s)}})};Hw.displayName="Pagination";var Vw=s(94),Gw=s.n(Vw);s(977);const Bw=d.a.with("common-table");class Ww extends a.Component{shouldComponentUpdate(e){const{items:t,settings:s}=this.props;return t!==e.items||s!==e.settings}componentDidUpdate(e){e.settings!==this.props.settings&&this.props.setShadows()}render(){return n.a.createElement("table",{className:Bw()},this.renderHeader(),this.renderBody())}renderHeader(){const{columns:e,settings:{columnsSettings:t}}=this.props;return n.a.createElement("thead",{className:Bw("header")},n.a.createElement("tr",null,e.map(e=>n.a.createElement("th",{key:e,className:Bw("header-cell",{hidden:t[e].hidden})},n.a.createElement("div",{className:Bw("header-cell-content")},O.b.text({id:"column-".concat(e),keyset:"tables"}),this.renderSortingButton(e))))))}renderBody(){const{items:e,columns:t,columnRenderers:s,settings:{columnsSettings:a}}=this.props;return n.a.createElement("tbody",null,e.map(e=>n.a.createElement("tr",{key:e.id,className:e.modifier},t.map(t=>n.a.createElement("td",{key:"".concat(e.id,"-").concat(t),className:Bw("cell",{hidden:a[t].hidden})},s[t](e))))))}renderSortingButton(e){const{sortings:t}=this.props;if(!t||!t[e])return null;const{isActive:s,getOrder:a,onChange:r}=t[e];return n.a.createElement(PC,{active:s(),activeOrder:a(),onOrderChange:r})}}Ww.displayName="CommonTable";var Kw=Ww;function qw(e){return{settings:pw(e)}}class Yw extends a.Component{shouldComponentUpdate(){return!1}render(){const e=Object(b.b)(qw)(Kw);return n.a.createElement(e,this.props)}}Yw.displayName="ConnectedCommonTable";class Jw extends a.Component{shouldComponentUpdate(e){return this.props.items!==e.items}render(){const e=vC(Yw);return n.a.createElement(e,this.props)}}Jw.displayName="ShadowedCommonTable";var Zw=Jw;var Xw;s(978);const Qw=d.a.with("solution-preview");let $w=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((Xw=class extends a.Component{render(){const{fetchError:e,fetchStatus:t}=this.props;return n.a.createElement(yb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderError:this.renderError,renderSuccess:this.renderSolution})}renderSpin(){return n.a.createElement(ye.a,{progress:!0,size:"m",position:"center"})}renderError(e){return n.a.createElement("div",{className:Qw("error")},e)}renderSolution(){const{solution:e,selectedSubmission:t,onSubmissionSelect:s}=this.props;if(!e)return null;const{student:a,task:r}=e,i=n.a.createElement("div",{className:Qw("task-title")},r.title,r.hasManualCheck&&n.a.createElement(Je,{cls:Qw("task-check-info")}));return n.a.createElement("div",{className:Qw()},n.a.createElement("header",{className:Qw("header")},n.a.createElement(nT,{size:"l",avatar:a.avatar,displayName:a.displayName,userId:a.id,status:a.status,addonAfter:i}),n.a.createElement("div",{className:Qw("solution-id")},O.b.text({id:"solution-ID",keyset:"solutions",params:{id:e.id}}))),e.latestSubmission&&t?n.a.createElement(eN,{solution:e,submission:t,onSubmissionSelect:s}):n.a.createElement(YO,{align:"center"},O.b.text({id:"no-submission",keyset:"tasks"})))}}).prototype,"renderSolution",[$.a],Object.getOwnPropertyDescriptor(Xw.prototype,"renderSolution"),Xw.prototype),Xw);$w.displayName="SolutionPreview";var eA=$w;class tA extends a.Component{componentDidMount(){const{solutionId:e,groupId:t}=this.props;this.props.fetchDetails({solutionId:e,groupId:t})}componentWillUnmount(){this.props.clearDetails(this.props.solutionId)}render(){const{solution:e,fetchError:t,fetchStatus:s,selectedSubmission:a}=this.props;return n.a.createElement(eA,{solution:e,fetchError:t,fetchStatus:s,selectedSubmission:a,onSubmissionSelect:this.props.selectSubmission})}}tA.displayName="SolutionPreviewContainer";var sA=Object(b.b)(function(e,t){const{solutionId:s}=t;return{solution:JO(e,s),selectedSubmission:Dm(e),fetchError:QO(e),fetchStatus:XO(e)}},function(e){return Object(ee.bindActionCreators)({clearDetails:tm,fetchDetails:Qd,selectSubmission:Lo},e)})(tA);s(979);const aA=d.a.with("table-button");class nA extends a.Component{render(){const e=this.props,{children:t,withFilterIcon:s=!1,className:a}=e,r=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["children","withFilterIcon","className"]);return n.a.createElement(Ln.a,Object.assign({theme:"pseudo",as:"a",className:Object(le.b)(aA(),a)},r),n.a.createElement("span",{className:aA("text")},t),s&&n.a.createElement(ge.a,{cls:aA("filter-icon"),type:"filter",size:"xs"}))}}nA.displayName="Button";var rA=nA;class iA extends a.Component{componentDidMount(){const{taskId:e,groupId:t}=this.props;this.props.fetchDetails({taskId:Number(e),groupId:Number(t)})}componentWillUnmount(){this.props.clearDetails()}render(){const{description:e,taskTitle:t,taskUrl:s,hasManualCheck:a,fetchStatus:r,fetchError:i}=this.props;return n.a.createElement(yb,{fetchStatus:r,fetchError:i},n.a.createElement(gS,{content:e,taskTitle:t,taskUrl:s,hasManualCheck:a}))}}iA.displayName="TaskDescriptionContainer";var oA=gb(Object(b.b)(function(e){return{description:Kl(e),fetchError:ql(e),fetchStatus:Yl(e)}},function(e,t){const{role:s}=t;let a;switch(s){case x.Student:a=Ua;break;case x.Teacher:case x.Methodist:a=Ha;break;default:throw new T("Role not supported",{role:s})}return Object(ee.bindActionCreators)({clearDetails:Fa,fetchDetails:a},e)})(iA));const cA=[20,40,80],lA=[ll.Student,ll.Solution,ll.Task,ll.Tag,ll.Lesson,ll.Variant,ll.Status,ll.UpdatedAt];let uA;!function(e){e.Student="studentId",e.Task="taskId",e.Tag="taskTagId",e.Lesson="lessonId",e.Status="solutionStatusId",e.Plagiarism="plagiarismStatuses"}(uA||(uA={}));var dA;s(980);function mA(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const pA=d.a.with("solutions-table");let hA;!function(e){e.StudentFullName="student_full_name",e.UpdateTime="update_time"}(hA||(hA={}));let bA=(mA((dA=class e extends a.Component{constructor(t){super(t),this.state={selectedSolution:null,selectedTask:null},this.sortings=void 0,this.renderers=void 0,this.getTimesMap=Object(Rl.a)(e=>{const t={};return e&&e.forEach(e=>{t[e.id]=Ce.fromISO(e.updateTime).toFormat("d MMM HH:mm")}),t}),this.renderers={[ll.Lesson]:this.renderLessonCell,[ll.Variant]:e.renderVariantCell,[ll.Solution]:this.renderSolutionCell,[ll.Status]:this.renderStatusCell,[ll.Student]:this.renderStudentCell,[ll.Tag]:this.renderTagCell,[ll.Task]:this.renderTaskCell,[ll.UpdatedAt]:this.renderUpdatedAtCell},this.sortings={[ll.Student]:{isActive:this.isSortingActive(hA.StudentFullName),getOrder:this.getSortingOrder(hA.StudentFullName),onChange:this.changeSorting(hA.StudentFullName)},[ll.UpdatedAt]:{isActive:this.isSortingActive(hA.UpdateTime),getOrder:this.getSortingOrder(hA.UpdateTime),onChange:this.changeSorting(hA.UpdateTime)}}}render(){const{solutions:e,groupId:t}=this.props,{selectedSolution:s,selectedTask:a}=this.state;if(!e)return null;const r=e;for(const e of r)e.modifier=pA("row",{expired:e.sentAfterDeadline});return n.a.createElement("div",{className:pA()},n.a.createElement(Zw,{items:r,columns:lA,sortings:this.sortings,columnRenderers:this.renderers}),n.a.createElement(xS,{visible:Boolean(s)||Boolean(a),onClose:this.clearSelected,onOutsideClick:this.onOutsideClick},s&&n.a.createElement(sA,{solutionId:s.id,groupId:Number(t)}),a&&this.renderTaskDescription(a)))}renderTaskDescription(e){const{groupId:t}=this.props;if(!e)return null;const s=this.buildTaskUrl(e.lesson.id,e.id);return n.a.createElement("div",{className:pA("task-description-wrapper")},n.a.createElement(oA,{taskId:e.id.toString(),groupId:t,taskTitle:e.title,hasManualCheck:e.hasManualCheck,taskUrl:s}))}renderStudentCell(e){let{student:t}=e;return n.a.createElement(nT,{size:"s",avatar:t.avatar,userId:t.id,status:t.status,renderDisplayName:e=>{let{className:s}=e;return n.a.createElement(rA,{withFilterIcon:!0,className:s,title:O.b.text({id:"apply-filter",keyset:"filters"}),onClick:this.onSetFilter(uA.Student,t.id)},t.displayName)}})}renderSolutionCell(t){const{task:s,plagiarism:a}=t,{lesson:r}=s;if(!r||!s||!t)return null;const i=this.buildTaskUrl(r.id,s.id,t.id);return n.a.createElement("span",{className:pA("details")},e.renderExternalLinkIcon(i),n.a.createElement(ve,{key:t.id,content:O.b.text({id:"show-solution",keyset:"solutions"})},n.a.createElement("span",{className:pA("details-tooltip-wrapper")},n.a.createElement(rA,{onClick:this.selectSolution(t)},t.id))),a&&n.a.createElement(OO,{compact:!0,className:pA("plagiarism-icon"),plagiarism:a}))}renderTaskCell(t){const{task:s}=t,{lesson:a}=s;if(!s||!a)return null;const r=this.buildTaskUrl(a.id,s.id);return n.a.createElement("span",{className:pA("details")},e.renderExternalLinkIcon(r),n.a.createElement(ve,{key:s.id,content:O.b.text({id:"show-description",keyset:"tasks"})},n.a.createElement("span",{className:pA("details-tooltip-wrapper")},n.a.createElement(rA,{onClick:this.selectTask(s)},s.title,s.hasManualCheck&&n.a.createElement(Je,{cls:pA("task-check-info")})))))}renderTagCell(e){const{tag:t}=e.task;return t?n.a.createElement(rA,{withFilterIcon:!0,title:O.b.text({id:"apply-filter",keyset:"filters"}),onClick:this.onSetFilter(uA.Tag,t.id)},O.b.text({id:t.type,keyset:"task-tags"})):n.a.createElement("span",{className:pA("tag")},O.b.text({id:et.Another,keyset:"task-tags"}))}renderLessonCell(e){const{lesson:t}=e.task;return t?n.a.createElement(rA,{withFilterIcon:!0,title:O.b.text({id:"apply-filter",keyset:"filters"}),onClick:this.onSetFilter(uA.Lesson,t.id)},t.title):null}static renderVariantCell(e){const{task:{lesson:t,variant:s}}=e;return t&&s?n.a.createElement("span",{className:pA("variant")},t.type===tl.Test?s.index:"-"):null}renderStatusCell(e){const{teacher:t,status:s,task:a,score:r}=e;return[s,a,r].some(Gw.a)?null:n.a.createElement(n.a.Fragment,null,t&&n.a.createElement(cf,Object.assign({size:"s"},t&&{avatar:t.avatar,userId:t.id})),n.a.createElement(rA,{withFilterIcon:!0,onClick:this.onSetFilter(uA.Status,s.id)},n.a.createElement(bg,{type:s.type,scoreMax:a.scoreMax,score:r})))}static renderExternalLinkIcon(e){return n.a.createElement(N,{className:pA("external-link"),href:e},n.a.createElement(ge.a,{cls:pA("external-link-icon"),size:"m",type:"new-window"}))}renderUpdatedAtCell(e){const t=this.getTimesMap(this.props.solutions);return n.a.createElement("div",{className:pA("update-time")},n.a.createElement("time",null,t[e.id]),e.hasActivityAfterDeadline&&n.a.createElement("span",{className:pA("deadline-activity"),title:O.b.text({id:"has-activity-after-deadline",keyset:"solutions"})},n.a.createElement(ge.a,{type:"clock",size:"xs"})))}buildTaskUrl(e,t,s){const{courseId:a,groupId:n}=this.props;return _.taskSolutions.build({courseId:a,groupId:n,lessonId:e.toString(),taskId:t.toString(),solutionId:s?s.toString():void 0})}selectSolution(e){return()=>{this.setState({selectedSolution:e})}}selectTask(e){return()=>{this.setState({selectedTask:e})}}clearSelected(){this.setState({selectedSolution:null,selectedTask:null})}onOutsideClick(e){e.target instanceof Element&&function(e){let{target:t,legacy:s=!1}=e;const a=s?ia():Object(na.b)();return null!==t.closest(".".concat(a))}({target:e.target,legacy:!0})||this.clearSelected()}isSortingActive(e){return()=>this.props.appliedSortings.some(t=>t.field===e)}onSetFilter(e,t){return()=>{this.props.onChangeParams({[e]:t.toString()})}}getSortingOrder(e){return()=>{const t=this.props.appliedSortings.find(t=>t.field===e);return t?t.order:Dp.ASCENDING}}changeSorting(e){return t=>{this.props.onSortingChange({order:t,field:e})}}}).prototype,"renderStudentCell",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"renderStudentCell"),dA.prototype),mA(dA.prototype,"renderSolutionCell",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"renderSolutionCell"),dA.prototype),mA(dA.prototype,"renderTaskCell",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"renderTaskCell"),dA.prototype),mA(dA.prototype,"renderTagCell",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"renderTagCell"),dA.prototype),mA(dA.prototype,"renderLessonCell",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"renderLessonCell"),dA.prototype),mA(dA.prototype,"renderStatusCell",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"renderStatusCell"),dA.prototype),mA(dA.prototype,"renderUpdatedAtCell",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"renderUpdatedAtCell"),dA.prototype),mA(dA.prototype,"clearSelected",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"clearSelected"),dA.prototype),mA(dA.prototype,"onOutsideClick",[$.a],Object.getOwnPropertyDescriptor(dA.prototype,"onOutsideClick"),dA.prototype),dA);bA.displayName="SolutionsTable";var EA;s(981);function fA(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const gA=d.a.with("table-settings");let yA=(fA((EA=class extends a.Component{constructor(){super(...arguments),this.state={isPopupVisible:!1},this.popupDirection=["bottom-right"],this.settingsButtonRef=n.a.createRef()}render(){const{settings:e}=this.props,{isPopupVisible:t}=this.state;return n.a.createElement("div",{className:gA()},n.a.createElement(JE.a,{val:e?e.pageSize:void 0,cls:gA("select"),theme:"normal",type:"radio",size:"s",placeholder:O.b.text({id:"table-page-SIZE",keyset:"tables",params:{size:"--"}}),onChange:this.handleSelectChange},cA.map(e=>n.a.createElement(JE.a.Item,{key:"size-".concat(e),val:e},O.b.text({id:"table-page-SIZE",keyset:"tables",params:{size:e}})))),n.a.createElement(Se.a,{className:gA("button"),innerRef:this.settingsButtonRef,theme:"clear",size:"xs",view:"lyceum",checked:t,icon:e=>n.a.createElement(ge.a,{cls:e,type:"settings",size:"l"}),onClick:this.togglePopup}),e&&n.a.createElement(ca,{hasTail:!0,cls:gA("popup"),visible:t,anchor:this.settingsButtonRef.current,directions:this.popupDirection,mainOffset:0,secondaryOffset:0,onOutsideClick:this.togglePopup},this.renderAdvancedSettings(e)))}renderAdvancedSettings(e){const{columnsSettings:t}=e,s=Object.keys(t);return n.a.createElement("section",{className:gA("advanced-settings")},n.a.createElement("h4",{className:gA("title")},O.b.text({id:"table-settings",keyset:"tables"})),n.a.createElement("ul",{className:gA("list")},s.map(t=>n.a.createElement("li",{key:t,className:gA("list-item")},this.renderColumnSettings(t,e)))))}renderColumnSettings(e,t){const{columnsSettings:s}=t,{hidden:a,alwaysVisible:r}=s[e];return n.a.createElement(PT,{size:"m",cls:gA("checkbox"),checked:!a,disabled:r,onChange:this.handleCheckboxChange(e)},O.b.text({id:"column-".concat(e),keyset:"tables"}))}handleCheckboxChange(e){return()=>{this.props.toggleColumnVisibility(e)}}handleSelectChange(e){let t=e;Array.isArray(e)&&([t]=e),this.props.setPageSize(Number(t))}togglePopup(){this.setState(e=>({isPopupVisible:!e.isPopupVisible}))}}).prototype,"handleSelectChange",[$.a],Object.getOwnPropertyDescriptor(EA.prototype,"handleSelectChange"),EA.prototype),fA(EA.prototype,"togglePopup",[$.a],Object.getOwnPropertyDescriptor(EA.prototype,"togglePopup"),EA.prototype),EA);yA.displayName="TableSettings";var SA=Object(b.b)(function(e){return{settings:pw(e)}},function(e){return Object(ee.bindActionCreators)({setPageSize:uw,toggleColumnVisibility:dw},e)})(yA);const OA=/^-?\w+$/;function vA(e){const t=e.order===Dp.DESCENDING?"-":"";return"".concat(t).concat(e.field)}var NA;s(982);function IA(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}function kA(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const TA=d.a.with("course-solutions");let CA=(kA((NA=class extends a.Component{constructor(e){super(e),this.filterList=[uA.Student,uA.Task,uA.Tag,uA.Lesson,uA.Status,uA.Plagiarism],"undefined"!=typeof window&&e.initializeTable(cl.Solutions)}componentDidMount(){this.props.queryParams.ordering||this.changeSortingParam({field:hA.UpdateTime,order:Dp.DESCENDING})}componentDidUpdate(e){const{location:{search:t},pageSize:s}=this.props;(e.location.search!==t||e.pageSize!==s)&&this.fetchSolutions()}componentWillUnmount(){this.props.clearSolutions(),this.props.clearSettings()}render(){const{course:e,group:t,fetchError:s,fetchStatus:a}=this.props,r=this.getAppliedFilters(),i=O.b.text({id:"course-solutions-teacher",keyset:"page-titles",params:{course:e.title,group:t.name}});return n.a.createElement("article",{className:TA()},n.a.createElement(c.a,null,n.a.createElement("title",null,i),n.a.createElement("meta",{name:"title",content:i})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement(Oa,{level:1,controls:n.a.createElement(yj,{cls:TA("checkbox"),checked:this.getExpelledFilterValue(),onChange:this.toggleExpelledFilter})},O.b.text({id:"solutions",keyset:"solutions"})),n.a.createElement("div",{className:TA("filters-wrapper")},n.a.createElement(Fw,{courseId:e.id,groupId:t.id,appliedFilters:r,onFilterChange:this.changeParams})),n.a.createElement(SA,null),n.a.createElement(yb,{fetchError:s,fetchStatus:a,renderSuccess:this.renderTable(r),renderError:this.renderError}))))}getExpelledFilterValue(){return"true"===this.props.queryParams.withExpelled}toggleExpelledFilter(){const e=this.getExpelledFilterValue();this.changeParams({withExpelled:(!e).toString()})}renderError(e){return this.renderMessage(e,!0)}renderTable(e){return()=>{const{solutions:t,solutionCount:s,totalPages:a,queryParams:{page:r},match:{params:i}}=this.props,{courseId:o,groupId:c}=i;if(!s){const t=e.length>0?O.b.text({id:"no-solutions-found",keyset:"solutions"}):O.b.text({id:"no-sent-solutions",keyset:"solutions"});return this.renderMessage(t)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(bA,{courseId:o,groupId:c,solutionCount:s,solutions:t,appliedSortings:this.getAppliedSortings(),onChangeParams:this.changeParams,onSortingChange:this.changeSortingParam}),n.a.createElement(Hw,{currentPage:r?Number(r):1,totalPages:a,buildPageLink:this.buildPageUrl}))}}renderMessage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.a.createElement("p",{className:TA("message",{error:t})},e)}getAppliedFilters(){const{}=this.props,e=IA(this.props.queryParams,["page","ordering"]);return Object.keys(e).reduce((t,s)=>{const a=e[s];return this.filterList.includes(s)&&a&&t.push({filterName:s,values:Array.isArray(a)?a.map(e=>e.toString()):[a.toString()]}),t},[])}getAppliedSortings(){const{queryParams:{ordering:e}}=this.props;return function(e){return e?e.split(",").reduce((e,t)=>OA.test(t)?(t.startsWith("-")?e.push({field:t.substring(1),order:Dp.DESCENDING}):e.push({field:t,order:Dp.ASCENDING}),e):e,[]):[]}(e)}changeSortingParam(e){let t;const s=this.getAppliedSortings(),a=s.findIndex(t=>t.field===e.field);-1!==a&&s[a].order===Dp.DESCENDING||(t=function(e){return Array.isArray(e)?e.map(vA).toString():vA(e)}(e)),this.changeParams({ordering:t})}changeParams(e){const{history:t,location:{pathname:s},queryParams:a}=this.props,n=Object.assign({},a,{},e,{page:1});t.push({pathname:s,search:Ij.a.stringify(n,{encode:!1})})}fetchSolutions(){const e=this.props,{match:{params:t},queryParams:{page:s,ordering:a},pageSize:n}=e,r=IA(e.queryParams,["page","ordering","withExpelled"]),{courseId:i,groupId:o}=t;this.props.fetchSolutions(Object.assign({},r,{courseId:Number(i),groupId:Number(o),limit:n,offset:s&&n?n*(Number(s)-1):0,ordering:a,withExpelled:this.getExpelledFilterValue()}))}buildPageUrl(e){const{match:{params:t},queryParams:s}=this.props,{courseId:a,groupId:n}=t;return _.courseSolutions.build({courseId:a,groupId:n},Object.assign({},s,{page:e}))}}).prototype,"getExpelledFilterValue",[$.a],Object.getOwnPropertyDescriptor(NA.prototype,"getExpelledFilterValue"),NA.prototype),kA(NA.prototype,"toggleExpelledFilter",[$.a],Object.getOwnPropertyDescriptor(NA.prototype,"toggleExpelledFilter"),NA.prototype),kA(NA.prototype,"renderError",[$.a],Object.getOwnPropertyDescriptor(NA.prototype,"renderError"),NA.prototype),kA(NA.prototype,"renderTable",[$.a],Object.getOwnPropertyDescriptor(NA.prototype,"renderTable"),NA.prototype),kA(NA.prototype,"changeSortingParam",[$.a],Object.getOwnPropertyDescriptor(NA.prototype,"changeSortingParam"),NA.prototype),kA(NA.prototype,"changeParams",[$.a],Object.getOwnPropertyDescriptor(NA.prototype,"changeParams"),NA.prototype),kA(NA.prototype,"buildPageUrl",[$.a],Object.getOwnPropertyDescriptor(NA.prototype,"buildPageUrl"),NA.prototype),NA);CA.displayName="CourseSolutions";var jA=Object(I.k)(CA);const wA=(e,t)=>(function(e){const t=Number(e);return Number.isInteger(t)&&t>0})(e)&&(!t||Number(e)<=t);var AA=hE(Object(b.b)(function(e,t){const{history:s,location:{pathname:a,search:n},match:{params:r}}=t,i=Ij.a.parse(n),o=function(e){return e.solutions.list.count}(e),c=function(e){const{settings:t}=e.tableSettings;return t?t.pageSize:void 0}(e),l=o&&c?Math.ceil(o/c):0;return i.page&&!wA(i.page,l)&&s.push({pathname:a,search:Ij.a.stringify(Object.assign({},i,{page:1}))}),{course:oe(e,r.courseId),group:lf(e,r.groupId),solutions:KT(e),solutionCount:o,fetchError:YT(e),fetchStatus:qT(e),pageSize:c,queryParams:i,totalPages:l}},function(e){return Object(ee.bindActionCreators)({fetchSolutions:om,clearSolutions:cm,initializeTable:lw,clearSettings:mw},e)})(jA));function _A(e){return e.lessonProgressPreview.progressPreview}function MA(e){return e.lessonProgressPreview.fetchStatus}function xA(e){return e.lessonProgressPreview.fetchError}var DA;s(983);const PA=d.a.with("lesson-progress-dashboard");let RA=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((DA=class extends a.Component{componentDidMount(){const{lessonId:e,groupId:t,fetchStatus:s}=this.props;s!==Gt.a.SUCCESS&&this.props.fetchLessonProgressPreview({lessonId:Number(e),groupId:Number(t)})}componentWillUnmount(){this.props.clearLessonProgressPreview()}render(){const{courseId:e,groupId:t,lessonId:s,progressPreview:a}=this.props,r=a&&a.students.length;return n.a.createElement(mg,{cls:PA("container"),body:this.renderBody(),title:O.b.text({id:"progress",keyset:"progress"}),tabUrl:_.lessonProgress.build({courseId:e,groupId:t,lessonId:s}),tabName:r?O.b.text({id:"all-students",keyset:"progress"}):""})}renderBody(){const{fetchError:e,fetchStatus:t}=this.props;return n.a.createElement("div",{className:PA()},n.a.createElement(Sb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderError:this.renderError,renderSuccess:this.renderStudentsProgress}))}renderSpin(){return n.a.createElement("div",{className:PA("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"}))}renderError(e){return n.a.createElement("div",{className:PA("error")},e)}renderStudentsProgress(){const{progressPreview:e}=this.props;return e?n.a.createElement("table",{className:PA("progress-table")},n.a.createElement("tbody",null,e.students.map(t=>n.a.createElement("tr",{key:t.id,className:PA("student-row")},n.a.createElement("td",null,n.a.createElement(nT,{className:PA("student"),avatar:t.avatar,displayName:t.displayName,userId:t.id,status:t.status})),n.a.createElement("td",null,n.a.createElement("div",{className:PA("score-badges")},e.tags.map(e=>n.a.createElement(ve,{key:e.id,content:O.b.text({id:e.type,keyset:"task-tags"})},n.a.createElement(_C,{cls:PA("score-badge"),color:e.color,score:t.summary[e.id]||0}))))))))):null}}).prototype,"renderStudentsProgress",[$.a],Object.getOwnPropertyDescriptor(DA.prototype,"renderStudentsProgress"),DA.prototype),DA);RA.displayName="LessonProgressDashboard";var LA=Object(b.b)(function(e){return{progressPreview:_A(e),fetchError:xA(e),fetchStatus:MA(e)}},function(e){return Object(ee.bindActionCreators)({fetchLessonProgressPreview:Cc.request,clearLessonProgressPreview:jc},e)})(RA);function FA(e){return e.solutions.info.info}function zA(e){return e.solutions.info.fetchStatus}function UA(e){return e.solutions.info.fetchError}function HA(e){return e.solutions.studentsWithoutSolutions.studentsWithoutSolutions}s(984);const VA=d.a.with("solution-status-counts");class GA extends a.Component{render(){const{type:e,count:t=0}=this.props;return n.a.createElement("span",{className:VA({type:e})},O.b.element({id:"status-".concat(e),keyset:"tasks",params:{total:n.a.createElement("span",{className:VA("count")},t)}}))}}GA.displayName="SolutionStatusCounts";var BA=GA;s(985);const WA=d.a.with("task-solutions");class KA extends a.PureComponent{render(){const{solution:{id:e,student:t,score:s,status:a,updateTime:r,plagiarism:i},scoreMax:c,solutionUrl:l,children:u}=this.props;return n.a.createElement("div",{className:WA("solution")},n.a.createElement(nT,{className:WA("student"),avatar:t.avatar,displayName:t.displayName,userId:t.id,status:t.status}),n.a.createElement("div",{className:WA("solution-content")},n.a.createElement(o.b,{className:WA("link"),to:l},n.a.createElement(ge.a,{type:"new-window",size:"m"}),n.a.createElement("div",{className:WA("id")},e),i&&n.a.createElement(OO,{compact:!0,plagiarism:i})),n.a.createElement("div",{className:WA("solution-status")},n.a.createElement(bg,{scoreMax:c,score:s,type:a.type})),u,r&&n.a.createElement("div",{className:WA("date")},Te.DateTime.fromISO(r).toFormat("d MMM HH:mm"))))}}KA.displayName="Solution";var qA=KA;var YA,JA,ZA;s(986);function XA(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let QA=(ZA=JA=class e extends a.Component{static countNoSolutionsHeight(t){const{noSolutionHeight:s,noSolutionsMarginBottom:a,headerHeight:n,noSolutionsRowCount:r,gap:i}=e,o=Math.ceil(t/r);return s*o+o*a+n+i}getNoSolutionsMinHeight(){const t=function(e){const t=Object.values(e).reduce((e,t)=>e+t,0);return e.total-(t-e.total)}(this.props.taskStatistics);return t>0?e.countNoSolutionsHeight(t):0}renderSpin(){const e=this.getNoSolutionsMinHeight();return n.a.createElement("div",{className:n_("spin"),style:{minHeight:"".concat(e,"px")}},n.a.createElement(ye.a,{progress:!0,size:"l"}))}renderStudents(){const{studentsWithoutSolutions:e}=this.props;if(!e)return null;const{results:t,count:s}=e;return n.a.createElement(n.a.Fragment,null,t.length>0&&n.a.createElement("section",{className:n_("solutions")},n.a.createElement("header",{className:n_("solutions-header")},n.a.createElement("div",{className:n_("solutions-title")},O.b.element({id:"not-passed",keyset:"tasks",params:{total:n.a.createElement("span",{className:n_("solutions-count")},v,s)}}))),n.a.createElement("ul",{className:n_("no-solution-list")},t.map(e=>n.a.createElement("li",{key:e.id,className:n_("no-solution-wrapper")},n.a.createElement(nT,{className:n_("student"),avatar:e.avatar,displayName:e.displayName,userId:e.id,status:xp.Enrolled}))))))}renderError(e){const t=this.getNoSolutionsMinHeight();return n.a.createElement("div",{className:n_("error"),style:{minHeight:"".concat(t,"px")}},e)}render(){const{studentsWithoutSolutionsFetchError:e,studentsWithoutSolutionsFetchStatus:t}=this.props;return n.a.createElement(Sb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderStudents,renderError:this.renderError})}},JA.headerHeight=40,JA.noSolutionHeight=36,JA.gap=8,JA.noSolutionsMarginBottom=10,JA.noSolutionsRowCount=3,XA((YA=ZA).prototype,"renderSpin",[$.a],Object.getOwnPropertyDescriptor(YA.prototype,"renderSpin"),YA.prototype),XA(YA.prototype,"renderStudents",[$.a],Object.getOwnPropertyDescriptor(YA.prototype,"renderStudents"),YA.prototype),XA(YA.prototype,"renderError",[$.a],Object.getOwnPropertyDescriptor(YA.prototype,"renderError"),YA.prototype),YA);QA.displayName="StudentsWithoutSolutions";var $A,e_,t_,s_=QA;function a_(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const n_=d.a.with("task-solutions");let r_=(t_=e_=class e extends a.PureComponent{static countSolutionsHeight(t){const{solutionHeight:s,solutionsMarginBottom:a,headerHeight:n,borderWidth:r}=e;return n+s*t+r*(t+1)+a}getMinHeight(){const t=(s=this.props.taskStatistics,Object.values(s).reduce((e,t)=>e+t,0)-s.total);var s;return t>0?e.countSolutionsHeight(t):0}static getCounters(e){return[{type:"waiting",count:e[Ze.Review]+e[Ze.AutoReview]},{type:"ok",count:e[Ze.Accepted]+(e[Ze.AcceptedAfterDeadline]||0)},{type:"redo",count:e[Ze.Rework]}]}buildSolutionUrl(e,t){const{courseId:s,groupId:a,lessonId:n}=this.props;return _.taskSolutions.build({courseId:s,groupId:a,lessonId:n,taskId:e,solutionId:t})}renderTaskSolutions(){const{solutionsInfo:t,scoreMax:s,taskId:a,taskStatistics:{total:r}}=this.props;if(!t)return null;const{solutions:i,statusCounter:o}=t,c=Object.assign({total:r},o),l=e.getCounters(o);return n.a.createElement(n.a.Fragment,null,0!==i.length&&n.a.createElement("section",{className:n_("solutions")},n.a.createElement("header",{className:n_("solutions-header")},n.a.createElement("div",{className:n_("solutions-title")},O.b.element({id:"solutions",keyset:"tasks",params:{total:n.a.createElement("span",{className:n_("solutions-count")},v,i.length)}})),n.a.createElement("div",{className:n_("solutions-progress")},n.a.createElement(aS,{statistics:c}),n.a.createElement("div",{className:n_("solutions-counters")},l.map(e=>n.a.createElement("span",{key:e.type,className:n_("solutions-counter")},n.a.createElement(BA,{type:e.type,count:e.count})))))),n.a.createElement("ul",{className:n_("solution-list")},i.map(e=>n.a.createElement("li",{key:e.id,className:n_("solution-wrapper")},n.a.createElement(qA,{scoreMax:s,solution:e,solutionUrl:this.buildSolutionUrl(a,e.id.toString())}))))))}renderError(e){const t=this.getMinHeight();return n.a.createElement("div",{className:n_("error"),style:{minHeight:"".concat(t,"px")}},e)}renderSpin(){const e=this.getMinHeight();return n.a.createElement("div",{className:n_("spin"),style:{minHeight:"".concat(e,"px")}},n.a.createElement(ye.a,{progress:!0,size:"l"}))}render(){const{fetchError:e,fetchStatus:t,studentsWithoutSolutionsFetchError:s,studentsWithoutSolutionsFetchStatus:a,taskStatistics:r,studentsWithoutSolutions:i}=this.props;return n.a.createElement("div",{className:n_()},n.a.createElement(Sb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderTaskSolutions,renderError:this.renderError}),n.a.createElement(s_,{studentsWithoutSolutions:i,studentsWithoutSolutionsFetchStatus:a,studentsWithoutSolutionsFetchError:s,taskStatistics:r}))}},e_.headerHeight=40,e_.solutionHeight=48,e_.borderWidth=1,e_.solutionsMarginBottom=24,a_(($A=t_).prototype,"renderTaskSolutions",[$.a],Object.getOwnPropertyDescriptor($A.prototype,"renderTaskSolutions"),$A.prototype),a_($A.prototype,"renderError",[$.a],Object.getOwnPropertyDescriptor($A.prototype,"renderError"),$A.prototype),a_($A.prototype,"renderSpin",[$.a],Object.getOwnPropertyDescriptor($A.prototype,"renderSpin"),$A.prototype),$A);r_.displayName="TaskSolutions";var i_=r_;class o_ extends a.Component{componentDidMount(){const{groupId:e,taskId:t,courseId:s,lessonId:a}=this.props;this.props.fetchSolutionsInfo({groupId:Number(e),taskId:Number(t)}),this.props.fetchStudentsWithoutSolutions({courseId:Number(s),lessonId:Number(a),groupId:Number(e),taskId:Number(t)})}componentWillUnmount(){this.props.clearSolutionsInfo(),this.props.clearStudentsWithoutSolutions()}render(){const{courseId:e,fetchError:t,fetchStatus:s,noSolutionFetchError:a,noSolutionFetchStatus:r,groupId:i,lessonId:o,scoreMax:c,solutionsInfo:l,studentsWithoutSolutions:u,taskId:d,taskStatistics:m}=this.props;return n.a.createElement(i_,{courseId:e,fetchError:t,fetchStatus:s,studentsWithoutSolutionsFetchStatus:r,studentsWithoutSolutionsFetchError:a,groupId:i,lessonId:o,scoreMax:c,solutionsInfo:l,studentsWithoutSolutions:u,taskStatistics:m,taskId:d})}}o_.displayName="TaskSolutionsContainer";var c_=Object(b.b)(function(e){return{solutionsInfo:FA(e),studentsWithoutSolutions:HA(e),fetchStatus:zA(e),fetchError:UA(e),noSolutionFetchStatus:zA(e),noSolutionFetchError:UA(e)}},function(e){return Object(ee.bindActionCreators)({fetchSolutionsInfo:mm,fetchStudentsWithoutSolutions:fm,clearSolutionsInfo:pm,clearStudentsWithoutSolutions:gm},e)})(o_);s(987);const l_=d.a.with("visibility-button"),u_=e=>{let{isHidden:t,children:s,onClick:r}=e;const i=Object(a.useCallback)(e=>n.a.createElement(ge.a,{cls:e,size:"l",type:t?"eye-open":"eye-closed"}),[t]);return n.a.createElement(Se.a,{className:l_(),iconLeft:i,size:"l",theme:"clear",view:"lyceum",onClick:r},s)};u_.displayName="VisibilityButton";var d_,m_=u_;let p_=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((d_=class extends a.Component{componentDidMount(){this.props.detailsFetchStatus!==Gt.a.SUCCESS&&this.fetchData()}componentDidUpdate(e){wg(e,this.props,["courseId","groupId","lessonId"])&&this.fetchData()}componentWillUnmount(){this.props.clearLessonDetails()}render(){const{course:e,group:t,lesson:s,detailsFetchError:a,detailsFetchStatus:r}=this.props;if(!e)return null;let i;s&&(i=O.b.text({id:"lesson-details-teacher",keyset:"page-titles",params:{course:e.title,lesson:s.title,group:t.name}}));const o=w.courseDetails.build({courseId:e.id.toString(),groupId:t.id.toString()});return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,i),n.a.createElement("meta",{name:"title",content:i})),n.a.createElement(ay,{lesson:s,lessonsUrl:o,detailsFetchError:a,detailsFetchStatus:r,visibilityButton:this.renderVisibilityButton(e.passType)}))}renderVisibilityButton(e){const{lesson:t,visibilityFetchStatus:s}=this.props;if(e!==D.Schedule)return null;if(!t)return null;const{isHidden:a}=t;return s===Gt.a.PENDING?n.a.createElement(ye.a,{progress:!0,size:"xs"}):n.a.createElement(m_,{isHidden:a,onClick:this.toggleVisibility},a?O.b.text({id:"show-lesson",keyset:"lessons"}):O.b.text({id:"hide-lesson",keyset:"lessons"}))}fetchData(){const{courseId:e,groupId:t,lessonId:s}=this.props;this.props.fetchTeacherLessonDetails({courseId:Number(e),groupId:Number(t),lessonId:Number(s)})}toggleVisibility(){const{group:e,lesson:t}=this.props;t&&this.props.changeLessonVisibility({group:e,lesson:t})}}).prototype,"toggleVisibility",[$.a],Object.getOwnPropertyDescriptor(d_.prototype,"toggleVisibility"),d_.prototype),d_);p_.displayName="TeacherLessonHeaderContainer";var h_,b_=Object(b.b)(function(e,t){return{course:oe(e,t.courseId),group:lf(e,t.groupId),lesson:dy(e),detailsFetchError:my(e),detailsFetchStatus:py(e),visibilityFetchStatus:hy(e)}},function(e){return Object(ee.bindActionCreators)({changeLessonVisibility:Bc,clearLessonDetails:Gc,fetchTeacherLessonDetails:Vc},e)})(p_);s(337);function E_(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const f_=d.a.with("teacher-task-list");let g_=(E_((h_=class e extends a.PureComponent{constructor(){super(...arguments),this.canOpen=()=>this.hasNonZeroStats()&&"minimized"===this.props.view}onTaskClick(){const{task:e,toggleTask:t}=this.props;this.canOpen()&&t(e.id)}toggleTask(){const{task:e,toggleTask:t}=this.props;t(e.id)}buildTaskUrl(e){const{courseId:t,groupId:s,lessonId:a}=this.props;return _.taskSolutions.build({courseId:t,groupId:s,lessonId:a,taskId:e.toString()})}static renderTaskTitle(e){return n.a.createElement(n.a.Fragment,null,e.title,e.hasManualCheck&&n.a.createElement(Je,null))}hasNonZeroStats(){const{task:{statistics:e}}=this.props;return Object.keys(e).some(t=>![...cS,"total"].includes(t)&&e[t]>0)}renderMinimizedTask(){const{task:t}=this.props,{statistics:s}=t,a=s[Ze.Review]+s[Ze.AutoReview],r=this.buildTaskUrl(t.id);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:f_("left")},n.a.createElement(o.b,{className:f_("link-icon"),to:r},n.a.createElement(ge.a,{type:"new-window",size:"s"})),n.a.createElement("h4",{className:f_("title")},e.renderTaskTitle(t))),n.a.createElement("div",{className:f_("right")},this.hasNonZeroStats()&&n.a.createElement(aS,{statistics:s}),a>0&&n.a.createElement("div",{className:f_("waiting")},n.a.createElement(bg,{type:Ze.Review,waitingCount:a}))))}renderOpenedTask(){const{task:t,renderOpenedTask:s}=this.props,a=this.buildTaskUrl(t.id);return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:f_("task-header")},n.a.createElement(o.b,{className:f_("link-icon"),to:a},n.a.createElement(ge.a,{type:"new-window",size:"l"})),n.a.createElement("h2",{className:f_("title")},n.a.createElement(o.b,{className:f_("link"),to:a},e.renderTaskTitle(t)))),s(t))}render(){const{view:e="minimized"}=this.props;return n.a.createElement("section",{className:f_("task",{view:e,disabled:!this.canOpen()}),onClick:this.onTaskClick},this.hasNonZeroStats()&&n.a.createElement(Se.a,{className:f_("toggle-button"),checked:"opened"===e,size:"xs",theme:"clear",view:"lyceum",icon:t=>n.a.createElement(ge.a,{cls:Object(le.b)(t,f_("arrow-icon")),direction:"minimized"===e?"bottom":"top",size:"m",type:"scroll"}),onClick:this.toggleTask}),n.a.createElement("div",{className:f_("content")},"minimized"===e?this.renderMinimizedTask():this.renderOpenedTask()))}}).prototype,"onTaskClick",[$.a],Object.getOwnPropertyDescriptor(h_.prototype,"onTaskClick"),h_.prototype),E_(h_.prototype,"toggleTask",[$.a],Object.getOwnPropertyDescriptor(h_.prototype,"toggleTask"),h_.prototype),h_);g_.displayName="Task";var y_=g_;function S_(e){return e.solutions.problemDetails.solutionInfo}function O_(e){return e.solutions.problemDetails.fetchError}function v_(e){return e.solutions.problemDetails.fetchStatus}function N_(e){return e.solutions.problemDetails.problemDetails}const I_=Object(ne.a)(N_,e=>{const t={};return e?0===e.submissions.length?t:e.submissions[e.submissions.length-1].submission:t});const k_=Object(ne.a)([S_,(e,t)=>t.solutionId],(e,t)=>{if(!e)return;const s=e.solutions.find(e=>e.id===t);return s?s.user:void 0}),T_=e=>{let{attempts:t,attemptsMax:s}=e;return n.a.createElement("div",{className:"problem-attempts"},O.b.text({id:"solutionList.attempts",keyset:"problems",params:{attempts:t,attemptsMax:s}}))};T_.displayName="ProblemAttempts";var C_=T_;const j_=e=>{let{problem:t}=e;const s=Object(b.d)(S_),{courseId:a,lessonId:r,groupId:i}=Object(I.i)();if(!s)return null;const{scoreMax:o}=t,{solutions:c,usersNotPassed:l}=s,u=(e=>[{type:"ok",count:e[Ze.Accepted]||0},{type:"wrong",count:e[Ze.Wrong]||0}])(s.statistics);return n.a.createElement("div",{className:"problem-solution__content"},n.a.createElement(n.a.Fragment,null,0!==c.length&&n.a.createElement("section",{className:n_("solutions")},n.a.createElement("header",{className:n_("solutions-header")},n.a.createElement("div",{className:n_("solutions-title")},O.b.element({id:"solutions",keyset:"tasks",params:{total:n.a.createElement("span",{className:n_("solutions-count")},v,c.length)}})),n.a.createElement("div",{className:n_("solutions-progress")},n.a.createElement(aS,{statistics:s.statistics}),n.a.createElement("div",{className:n_("solutions-counters")},u.map(e=>n.a.createElement("span",{key:e.type,className:n_("solutions-counter")},n.a.createElement(BA,{type:e.type,count:e.count})))))),n.a.createElement("ul",{className:n_("solution-list")},c.map(e=>{const t={id:e.id,student:e.user,score:e.score,status:e.status,updateTime:e.lastAttempt},s=_.problemSolution.build({courseId:a,lessonId:r,groupId:i,problemLinkId:e.problemLinkId,solutionId:e.id});return n.a.createElement("li",{key:e.id,className:n_("solution-wrapper")},n.a.createElement(qA,{scoreMax:o,solution:t,solutionUrl:s},n.a.createElement("div",{className:n_("attempts")},n.a.createElement(C_,{attempts:e.attempts,attemptsMax:e.attemptsMax}))))}))),l.length>0&&n.a.createElement("section",{className:n_("solutions")},n.a.createElement("header",{className:n_("solutions-header")},n.a.createElement("div",{className:n_("solutions-title")},O.b.element({id:"not-passed",keyset:"tasks",params:{total:n.a.createElement("span",{className:n_("solutions-count")},v,l.length)}}))),n.a.createElement("ul",{className:n_("no-solution-list")},l.map(e=>n.a.createElement("li",{key:e.id,className:n_("no-solution-wrapper")},n.a.createElement(nT,{className:n_("student"),avatar:e.avatar,displayName:e.displayName,userId:e.id,status:xp.Enrolled})))))))};j_.displayName="ProblemSolutionsContent";var w_=j_;const A_=e=>{let{problem:t}=e;const s=Object(b.c)(),{groupId:r}=Object(I.i)(),i=Object(b.d)(v_),o=Object(b.d)(O_);return Object(a.useEffect)(function(){s(Fm(t.id,Number(r)))},[s,r,t]),n.a.createElement(Sb,{fetchError:o,fetchStatus:i,renderPending:()=>n.a.createElement(ye.a,{progress:!0,size:"l"}),renderSuccess:()=>n.a.createElement(w_,{problem:t})})};A_.displayName="ProblemSolutions";var __,M_=A_;function x_(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const D_=d.a.with("teacher-task-list");let P_=(x_((__=class extends a.PureComponent{constructor(){super(...arguments),this.canOpen=()=>"minimized"===this.props.view}onProblemClick(){const{problem:e,toggleTask:t}=this.props;this.canOpen()&&t(e.id)}toggleProblem(){const{problem:e,toggleTask:t}=this.props;t(e.id)}buildProblemUrl(e){const{courseId:t,groupId:s,lessonId:a,problemVariantIndex:n}=this.props;return _.problemSolution.build({courseId:t,groupId:s,lessonId:a,problemLinkId:e},{variant:n?n.toString():void 0})}renderOpenedTask(){const{problem:e}=this.props,t=this.buildProblemUrl(e.id);return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:D_("task-header")},n.a.createElement(o.b,{className:D_("link-icon"),to:t},n.a.createElement(ge.a,{type:"new-window",size:"l"})),n.a.createElement("h2",{className:D_("title")},n.a.createElement(o.b,{className:D_("link"),to:t},e.title))),n.a.createElement(M_,{problem:e}))}renderMinimizedTask(){const{problem:e}=this.props,t=this.buildProblemUrl(e.id);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:D_("left")},n.a.createElement(o.b,{className:D_("link-icon"),to:t},n.a.createElement(ge.a,{type:"new-window",size:"s"})),n.a.createElement("h4",{className:D_("title")},e.title)),n.a.createElement("div",{className:D_("right")},n.a.createElement(aS,{statistics:e.statistics})))}render(){const{view:e="minimized"}=this.props;return n.a.createElement("section",{className:D_("task",{view:e,disabled:!this.canOpen()}),onClick:this.onProblemClick},n.a.createElement(Se.a,{className:D_("toggle-button"),checked:"opened"===e,size:"xs",theme:"clear",view:"lyceum",icon:t=>n.a.createElement(ge.a,{cls:Object(le.b)(t,D_("arrow-icon")),direction:"minimized"===e?"bottom":"top",size:"m",type:"scroll"}),onClick:this.toggleProblem}),n.a.createElement("div",{className:D_("content")},"minimized"===e?this.renderMinimizedTask():this.renderOpenedTask()))}}).prototype,"onProblemClick",[$.a],Object.getOwnPropertyDescriptor(__.prototype,"onProblemClick"),__.prototype),x_(__.prototype,"toggleProblem",[$.a],Object.getOwnPropertyDescriptor(__.prototype,"toggleProblem"),__.prototype),__);P_.displayName="ProblemItem";var R_,L_=P_;s(988);function F_(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const z_=d.a.with("teacher-task-list");let U_=(F_((R_=class e extends a.PureComponent{constructor(){super(...arguments),this.state={lessonVariantIndex:tk()(this.props.lessonVariants,"0.index"),problemVariantIndex:tk()(this.props.problemVariants,"0.index")}}get lessonVariantsIndex(){return this.state.lessonVariantIndex||tk()(this.props.lessonVariants,"0.index")}get problemVariantIndex(){const{problemVariants:e,lessonType:t}=this.props;if(t===tl.Test)return Gw()(this.state.problemVariantIndex)?tk()(e,"0.index"):this.state.problemVariantIndex}static renderSpin(){return n.a.createElement("div",{className:z_("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"}))}static renderError(e){return n.a.createElement("p",{className:z_("error")},e)}updateLessonContent(){const{fetchTaskGroups:e,lessonId:t,groupId:s}=this.props,a=this.lessonVariantsIndex,{problemVariantIndex:n}=this;e({lessonId:Number(t),groupId:Number(s),variantIndex:a,problemVariantIndex:n})}handleLessonVariantChange(e){let t=e;Array.isArray(e)&&([t]=e),this.state.lessonVariantIndex!==t&&this.setState({lessonVariantIndex:Number(t)},this.updateLessonContent)}handleProblemVariantChange(e){let t=e;Array.isArray(e)&&([t]=e),this.state.problemVariantIndex!==t&&this.setState({problemVariantIndex:Number(t)},this.updateLessonContent)}renderLessonVariantsSelect(){const{lessonType:e,lessonVariants:t}=this.props;if(e===tl.Test&&t.length>1){const[e]=t,s=this.state.lessonVariantIndex||e.index;return n.a.createElement(JE.a,{val:s,cls:z_("select"),theme:"normal",type:"radio",size:"m",onChange:this.handleLessonVariantChange},t.map(e=>n.a.createElement(JE.a.Item,{key:e.id,val:e.index},"".concat(O.b.text({id:"variants-select",keyset:"lessons"})," ").concat(e.index))))}return null}renderProblemVariantsSelect(){const{lessonType:e,problemVariants:t}=this.props;if(e===tl.Test&&t.length>1){const[e]=t,s=Gw()(this.state.problemVariantIndex)?e.index:this.state.problemVariantIndex;return n.a.createElement(JE.a,{val:s,cls:z_("select"),theme:"normal",type:"radio",size:"m",onChange:this.handleProblemVariantChange},t.map(e=>n.a.createElement(JE.a.Item,{key:e.id,val:e.index},"".concat(O.b.text({id:"problem-variants-select",keyset:"lessons"})," ").concat(e.index))))}return null}renderProblemItem(e,t,s){const{courseId:a,groupId:r,lessonId:i,renderOpenedTask:o}=this.props;return n.a.createElement(L_,{courseId:a,groupId:r,lessonId:i,problemVariantIndex:this.problemVariantIndex,problem:e,view:t?"opened":"minimized",toggleTask:s,renderOpenedTask:o})}renderTaskItem(e,t,s){const{courseId:a,groupId:r,lessonId:i,renderOpenedTask:o}=this.props;return n.a.createElement(y_,{courseId:a,groupId:r,lessonId:i,task:e,view:t?"opened":"minimized",toggleTask:s,renderOpenedTask:o})}renderTaskGroups(){const{taskGroups:e}=this.props;return e.length?n.a.createElement(fy.a,{items:e.map(e=>{const t=e.tasks||e.problems||[];return{id:e.id.toString(),title:n.a.createElement(Oy,{type:e.type}),items:t.map(e=>({id:e.id.toString(),content:t=>{let{isOpen:s,toggle:a}=t;return(e=>!("problem"in e))(e)?this.renderTaskItem(e,s,a):this.renderProblemItem(e,s,a)}}))}})}):O.b.text({id:"no-tasks-message",keyset:"tasks"})}render(){const{fetchError:t,fetchStatus:s}=this.props;return n.a.createElement("div",{className:z_()},n.a.createElement("div",{className:z_("title-wrapper")},n.a.createElement(Oa,{level:2},O.b.text({id:"teacher-tasks-title",keyset:"lessons"})),n.a.createElement("div",{className:z_("variant-controls")},this.renderLessonVariantsSelect(),this.renderProblemVariantsSelect())),n.a.createElement(yb,{fetchError:t,fetchStatus:s,renderPending:e.renderSpin,renderError:e.renderError,renderSuccess:this.renderTaskGroups}))}}).prototype,"handleLessonVariantChange",[$.a],Object.getOwnPropertyDescriptor(R_.prototype,"handleLessonVariantChange"),R_.prototype),F_(R_.prototype,"handleProblemVariantChange",[$.a],Object.getOwnPropertyDescriptor(R_.prototype,"handleProblemVariantChange"),R_.prototype),F_(R_.prototype,"renderLessonVariantsSelect",[$.a],Object.getOwnPropertyDescriptor(R_.prototype,"renderLessonVariantsSelect"),R_.prototype),F_(R_.prototype,"renderProblemVariantsSelect",[$.a],Object.getOwnPropertyDescriptor(R_.prototype,"renderProblemVariantsSelect"),R_.prototype),F_(R_.prototype,"renderProblemItem",[$.a],Object.getOwnPropertyDescriptor(R_.prototype,"renderProblemItem"),R_.prototype),F_(R_.prototype,"renderTaskItem",[$.a],Object.getOwnPropertyDescriptor(R_.prototype,"renderTaskItem"),R_.prototype),F_(R_.prototype,"renderTaskGroups",[$.a],Object.getOwnPropertyDescriptor(R_.prototype,"renderTaskGroups"),R_.prototype),R_);U_.displayName="TeacherTaskList";var H_=U_;class V_ extends a.Component{componentDidMount(){const{fetchStatus:e}=this.props;e!==Gt.a.SUCCESS&&this.fetchTaskList()}componentDidUpdate(e){null===e.lesson&&this.props.lesson&&this.fetchTaskList()}componentWillUnmount(){this.props.clearTaskGroups()}fetchTaskList(){const{fetchTaskGroups:e,lessonId:t,groupId:s,lesson:a}=this.props;if(!a)return;let n={lessonId:Number(t),groupId:Number(s)};switch(a.type){case tl.Normal:e(n);break;case tl.Test:{const[t]=a.variants,[s]=a.problemVariants;t&&(n=Object.assign({},n,{variantIndex:t.index})),s&&(n=Object.assign({},n,{problemVariantIndex:s.index})),e(n);break}default:throw new k.f("Lesson type not supported",{type:a.type})}}render(){const{courseId:e,groupId:t,lessonId:s,lesson:a,taskGroups:r,fetchTaskGroups:i,fetchError:o,fetchStatus:c,renderOpenedTask:l}=this.props;let u=null,d=[],m=[];return a&&(u=a.type,d=a.variants,m=a.problemVariants),n.a.createElement(H_,{courseId:e,groupId:t,lessonId:s,lessonType:u,lessonVariants:d,problemVariants:m,taskGroups:r,fetchTaskGroups:i,fetchError:o,fetchStatus:c,renderOpenedTask:l})}}V_.displayName="TeacherTaskListContainer";var G_,B_=Object(b.b)(function(e){return{lesson:dy(e),taskGroups:Jl(e),fetchStatus:Xl(e),fetchError:Zl(e)}},function(e){return Object(ee.bindActionCreators)({clearTaskGroups:Ka,fetchTaskGroups:Ga},e)})(V_);const W_=d.a.with("lesson-details");let K_=(function(e,t,s,a,n){var r={};Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null)}((G_=class extends a.Component{render(){const{courseId:e,groupId:t,lessonId:s}=this.props.match.params,a=O.b.text({id:"lesson-details",keyset:"lessons"});return n.a.createElement("article",{className:W_()},n.a.createElement(c.a,null,n.a.createElement("title",null,a),n.a.createElement("meta",{name:"title",content:a})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Top,null,n.a.createElement(b_,{courseId:e,groupId:t,lessonId:s})),n.a.createElement(Rn.Main,null,n.a.createElement(B_,{courseId:e,groupId:t,lessonId:s,renderOpenedTask:this.renderOpenedTask(e,t,s)})),n.a.createElement(Rn.Aside,null,n.a.createElement(LA,{courseId:e,groupId:t,lessonId:s}),n.a.createElement(ey,{pathParams:{courseId:e,groupId:t,lessonId:s}})),n.a.createElement(Rn.ActiveArea,null)))}renderOpenedTask(e,t,s){return a=>n.a.createElement(c_,{courseId:e,groupId:t,lessonId:s,taskId:a.id.toString(),scoreMax:a.scoreMax,taskStatistics:a.statistics})}}).prototype,"renderOpenedTask",[$.a],Object.getOwnPropertyDescriptor(G_.prototype,"renderOpenedTask"),G_.prototype),G_);K_.displayName="LessonDetails";var q_=hE(K_);class Y_ extends a.Component{componentDidMount(){const{match:{params:e}}=this.props,{groupId:t,lessonId:s,materialId:a}=e;this.props.fetchMaterialDetails({groupId:Number(t),lessonId:Number(s),materialId:Number(a)})}componentWillUnmount(){this.props.clearMaterialDetails()}render(){const{match:e,course:t,group:s,detailedMaterialInfo:a,fetchError:r,fetchStatus:i}=this.props,{params:{courseId:o,groupId:c,lessonId:l}}=e,u=w.lessonDetails.build({courseId:o,groupId:c,lessonId:l});return n.a.createElement(zy,{course:t,group:s,lessonId:l,lessonUrl:u,fetchError:r,fetchStatus:i,detailedMaterialInfo:a})}}Y_.displayName="TeacherLessonMaterial";var J_=hE(Object(b.b)(function(e,t){const{match:{params:s}}=t;return{course:oe(e,s.courseId),group:lf(e,s.groupId),detailedMaterialInfo:Kg(e),fetchError:Yg(e),fetchStatus:qg(e)}},function(e){return Object(ee.bindActionCreators)({fetchMaterialDetails:zu,clearMaterialDetails:Hu},e)})(Y_));function Z_(e){return e.lessonProgress.lessonPreview}function X_(e){return e.lessonProgress.progressTable}function Q_(e){return e.lessonProgress.fetchStatus}function $_(e){return e.lessonProgress.fetchError}function eM(e){return e.lessonProgress.tableSortOptions}function tM(e){const{progressTable:t}=e.lessonProgress;return t?t.studentIds.map(e=>t.studentsMap[e]):[]}var sM;s(989);function aM(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const nM=d.a.with("lesson-progress-table");let rM=(aM((sM=class e extends a.Component{changeSortField(e){return t=>{this.props.changeSortOptions({field:e,order:t})}}changeAttendanceStatus(e,t){return s=>{this.props.changeAttendanceStatus({eventId:t,studentId:e,status:s})}}renderLeftHeadings(){const{students:e,data:t,sortOptions:s}=this.props,a=[[n.a.createElement(n.a.Fragment,null,O.b.text({id:"students",keyset:"progress"}),n.a.createElement(PC,{active:s.field===$p.NAME,activeOrder:s.order,onOrderChange:this.changeSortField($p.NAME)})),e.length],[n.a.createElement(n.a.Fragment,null,O.b.text({id:"rating",keyset:"progress"}),n.a.createElement(PC,{active:s.field===$p.RATING,activeOrder:s.order,onOrderChange:this.changeSortField($p.RATING)})),O.b.element({id:"max-RATING",keyset:"progress",params:{rating:n.a.createElement("b",null,t.maxRating)}})]];if(eh(t)){const t=e.filter(e=>e.attendance===nC.Present).length,s=[n.a.createElement(ge.a,{key:"calendar-icon",size:"m",type:"calendar"}),n.a.createElement("div",{key:"total-attendance",className:nM("students-attendance")},n.a.createElement(ge.a,{size:"m",type:"person"}),n.a.createElement("b",{className:nM("total-attendance",{"non-zero":Boolean(t)})},t))];a.push(s)}return a}renderLeftRows(){const{students:e,data:t}=this.props;return e.map(e=>{const s=[n.a.createElement(nT,{avatar:e.avatar,displayName:e.displayName,userId:e.id,status:e.status}),n.a.createElement("div",{className:nM("rating")},n.a.createElement("b",null,e.rating))];if(eh(t)){const a=n.a.createElement(cC,{status:t.studentsMap[e.id].attendance,onStatusChange:this.changeAttendanceStatus(e.id,t.eventId)});s.push(a)}return s})}renderRightHeadings(){const{data:e,lessonType:t}=this.props;return[...t===tl.Normal?this.renderTagHeadings(e.taskGroups):this.renderVariantHeadings(e.taskGroups),n.a.createElement("div",{className:nM("passes-heading")},n.a.createElement("div",{className:nM("passes-title")},O.b.text({id:"passes",keyset:"progress"})),O.b.element({id:"max-PASSES",keyset:"progress",params:{passes:n.a.createElement("b",null,e.maxPassesCount)}})),n.a.createElement("div",{className:nM("scores-heading")},n.a.createElement("div",{className:nM("scores-title")},O.b.text({id:"tag-scores",keyset:"progress"})),O.b.element({id:"max-TAG-SCORES",keyset:"progress",params:{tagScores:n.a.createElement("b",null,e.maxTagsScore)}}))]}renderTagHeadings(e){const{courseId:t,groupId:s,lessonId:a}=this.props;return e.map(e=>n.a.createElement("div",{key:e.id,className:nM("tag-heading")},n.a.createElement("div",{className:nM("tag-title")},n.a.createElement(yy,{className:nM("tag-indicator"),type:e.type}),n.a.createElement("div",{className:nM("tag-name")},O.b.text({id:e.type,keyset:"task-tags"}))),n.a.createElement("span",{className:nM("tag-tasks")},e.tasks.map((e,r)=>{const i="task"===e.type?_.taskSolutions.build({courseId:t,groupId:s,lessonId:a,taskId:e.id.toString()}):_.problemSolution.build({courseId:t,groupId:s,lessonId:a,problemLinkId:e.id});return n.a.createElement(ve,{key:e.id,content:e.title},n.a.createElement("div",{className:nM("tag-task")},n.a.createElement(N,{href:i,className:nM("tag-task-number")},r+1)))}))))}renderVariantHeadings(e){const{courseId:t,groupId:s,lessonId:a}=this.props;return e.map(e=>n.a.createElement("div",{key:e.id,className:nM("variant-heading")},n.a.createElement("div",{className:nM("variant-name")},O.b.text({id:"variant {index}",keyset:"lessons",params:{index:e.index}})),n.a.createElement("span",{className:nM("variant-tasks")},e.tasks.map((r,i)=>{const o="task"===r.type?_.taskSolutions.build({courseId:t,groupId:s,lessonId:a,taskId:r.id.toString()}):_.problemSolution.build({courseId:t,groupId:s,lessonId:a,problemLinkId:r.id},{variant:e.index.toString()});return n.a.createElement(ve,{key:r.id,content:r.title},n.a.createElement("div",{className:nM("variant-task")},n.a.createElement(N,{href:o,className:nM("variant-task-number")},i+1)))}))))}renderRightRows(){const{students:t,data:s,courseId:a,groupId:r,lessonId:i}=this.props;return t.map(t=>{return[...s.taskGroups.map(e=>n.a.createElement("div",{key:e.id,className:nM("task-progress")},e.tasks.map(e=>{const s=t.progress.tasks[e.id],o=t.progress.problems[e.id];if(!s&&!o)return n.a.createElement("div",{key:e.id,className:nM("solution-status")},n.a.createElement(at,{scoreMax:e.scoreMax}));if(o&&cS.includes(o.status))return n.a.createElement("div",{key:e.id,className:nM("solution-status")},n.a.createElement(at,{scoreMax:e.scoreMax}));if(s){const t=_.taskSolutions.build({courseId:a,groupId:r,lessonId:i,taskId:e.id.toString(),solutionId:s.taskSolutionId.toString()}),o=null!==s.deadline&&Ce.fromISO(s.addedTime)>Ce.fromISO(s.deadline);return n.a.createElement(N,{key:e.id,href:t,className:nM("solution-status")},n.a.createElement(at,{scoreMax:e.scoreMax,score:s.score,solutionStatus:s.status.type,sentAfterDeadline:o,hasActivityAfterDeadline:s.hasActivityAfterDeadline}))}const c=_.problemSolution.build({courseId:a,groupId:r,lessonId:i,problemLinkId:o.problemId});return n.a.createElement(N,{key:e.id,href:c,className:nM("solution-status")},n.a.createElement(at,{scoreMax:e.scoreMax,solutionStatus:o.status}))}))),e.renderPasses(t),this.renderScores(s,t)]})}static renderPasses(e){return n.a.createElement("div",{className:nM("passes")},n.a.createElement(_C,{cls:nM("score-badge",{color:"dark-green"}),score:e.passesCount}))}renderScores(e,t){if(this.props.lessonType===tl.Test)return n.a.createElement("div",{className:nM("scores",{type:tl.Test})},n.a.createElement("span",{className:nM("total-score",{type:tl.Test}),title:O.b.text({id:"total-score",keyset:"progress"})},t.scoresSum));const s=e.taskGroups;return n.a.createElement("div",{className:nM("scores")},n.a.createElement("span",{className:nM("total-score"),title:O.b.text({id:"total-score",keyset:"progress"})},t.scoresSum),n.a.createElement("div",{className:nM("tag-scores")},s.map(e=>n.a.createElement(ve,{key:e.id,content:O.b.text({id:e.type,keyset:"task-tags"})},n.a.createElement(_C,{cls:nM("score-badge"),color:e.color,score:t.summary[e.id]||0})))))}render(){const{students:e}=this.props;return e.length?n.a.createElement("div",{className:nM()},n.a.createElement(wC,{leftTableHeadings:this.renderLeftHeadings(),leftTableRows:this.renderLeftRows(),rightTableHeadings:this.renderRightHeadings(),rightTableRows:this.renderRightRows()})):O.b.text({id:"no-students",keyset:"progress"})}}).prototype,"changeSortField",[$.a],Object.getOwnPropertyDescriptor(sM.prototype,"changeSortField"),sM.prototype),aM(sM.prototype,"changeAttendanceStatus",[$.a],Object.getOwnPropertyDescriptor(sM.prototype,"changeAttendanceStatus"),sM.prototype),sM);rM.displayName="LessonProgressTable";var iM=Object(b.b)(function(e){return{sortOptions:eM(e)}},function(e){return Object(ee.bindActionCreators)({changeSortOptions:xc,changeAttendanceStatus:Dc},e)})(rM);s(990);const oM=d.a.with("lesson-progress"),cM=e=>{const{fetchStatus:t,fetchError:s,lessonPreview:r,lessonProgress:i,students:o,course:l,group:u,match:{params:d},fetchLessonProgressRequest:m,clearLessonProgressStore:p}=e,{courseId:h,groupId:b,lessonId:E}=d;if(!l)throw new k.e("No course",{courseId:h});let f;Object(a.useEffect)(()=>(m({lessonId:Number(E),groupId:Number(b)}),()=>{p()}),[E,b,m,p]),r&&(f=O.b.text({id:"lesson-progress-teacher",keyset:"page-titles",params:{course:l.title,group:u.name,lesson:r.title}}));const{showExpelled:g,toggleExpelledFilter:y,filteredStudents:S}=gj({students:o});return n.a.createElement("article",{className:oM()},n.a.createElement(c.a,null,n.a.createElement("title",null,f),n.a.createElement("meta",{name:"title",content:f})),n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement(yb,{fetchStatus:t,fetchError:s,renderPending:lM,renderError:uM,renderSuccess:()=>{if(!r||!i)throw new k.e("No lesson data",{lessonId:E});return n.a.createElement(n.a.Fragment,null,n.a.createElement(da,{back:!0,exact:!0,to:w.lessonDetails.build(d)},O.b.text({id:"lesson-TITLE",keyset:"lessons",params:{title:r.shortTitle}})),n.a.createElement(Oa,{level:1,className:oM("heading"),controls:n.a.createElement(yj,{cls:oM("checkbox"),checked:g,onChange:y})},O.b.text({id:"lesson-progress",keyset:"lessons"})),n.a.createElement("section",{className:oM("table")},n.a.createElement(iM,Object.assign({},d,{data:i,lessonType:r.type,students:S}))))}}))))};cM.displayName="LessonProgress";const lM=()=>n.a.createElement("div",{className:oM("spin")},n.a.createElement(ye.a,{progress:!0,size:"l",position:"center"}));lM.displayName="renderLoader";const uM=e=>n.a.createElement("p",{className:oM("error")},e);uM.displayName="renderError";var dM=hE(Object(b.b)(function(e,t){let{match:{params:s}}=t;return{course:oe(e,s.courseId),group:lf(e,s.groupId),fetchError:$_(e),fetchStatus:Q_(e),lessonProgress:X_(e),lessonPreview:Z_(e),students:tM(e)}},function(e){return Object(ee.bindActionCreators)({fetchLessonProgressRequest:_c.request,clearLessonProgressStore:Mc},e)})(cM));s(991);const mM=d.a.with("solution-list");class pM extends a.Component{render(){const{solution:e}=this.props,{student:t,task:s}=e;return n.a.createElement(nT,{size:"m",className:mM("solution",{expired:e.sentAfterDeadline}),avatar:t.avatar,status:t.status,renderDisplayName:a=>{let{className:r}=a;return n.a.createElement("div",{className:mM("student-info")},n.a.createElement("span",{className:Object(le.b)(mM("student-name"),r),title:t.displayName},t.displayName),n.a.createElement("div",{className:mM("status")},n.a.createElement(bg,{type:e.status.type,score:e.score,scoreMax:s.scoreMax})))},addonAfter:n.a.createElement("time",{className:mM("updated-at")},Ce.fromISO(e.updateTime).toFormat("d MMM HH:mm"),e.hasActivityAfterDeadline&&n.a.createElement(ge.a,{cls:mM("deadline-marker"),type:"clock",size:"xs"}))})}}pM.displayName="Solution";var hM=pM;s(992);const bM=d.a.with("solution-list");class EM extends a.Component{constructor(){super(...arguments),this.renderSpin=()=>n.a.createElement("div",{className:bM("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"})),this.renderError=e=>n.a.createElement("div",{className:bM("message",{error:!0})},e),this.renderSolutionList=()=>{const{solutions:e,courseId:t,groupId:s}=this.props,a=e.map(e=>({id:e.id,component:n.a.createElement(hM,{solution:e}),url:_.taskSolutions.build({courseId:t,groupId:s,lessonId:e.task.lesson.id.toString(),taskId:e.task.id.toString(),solutionId:e.id.toString()})})),r=a.length>0;return n.a.createElement("div",{className:bM("list",{"has-shadow":r})},0!==a.length?n.a.createElement("div",{className:bM("link-list-wrapper")},n.a.createElement(ng,{items:a,itemType:"navlink",listType:"aside"})):null)}}render(){const{fetchStatus:e,fetchError:t}=this.props;return n.a.createElement("div",{className:bM()},n.a.createElement(Sb,{fetchError:t,fetchStatus:e,renderPending:this.renderSpin,renderSuccess:this.renderSolutionList,renderError:this.renderError}))}}EM.displayName="SolutionList";var fM=EM;const gM=e=>{const{solutions:t,fetchError:s,fetchStatus:r,courseId:i,groupId:o,taskId:c,lessonId:l,fetchSolutions:u,clearSolutions:d}=e;return Object(a.useEffect)(()=>(u({courseId:Number(i),groupId:Number(o),taskId:c?Number(c):void 0,lessonId:l?Number(l):void 0}),()=>{d()}),[i,o,c,l,u,d]),n.a.createElement(fM,{courseId:i,groupId:o,solutions:t,fetchError:s,fetchStatus:r})};gM.displayName="SolutionListContainer";var yM=Object(b.b)(function(e){return{solutions:KT(e),fetchStatus:qT(e),fetchError:YT(e)}},function(e){return Object(ee.bindActionCreators)({clearSolutions:cm,fetchSolutions:om},e)})(gM);class SM extends a.Component{componentDidMount(){const{groupId:e,taskId:t,fetchDetails:s}=this.props;s({taskId:Number(t),groupId:Number(e)})}componentDidUpdate(e){const{groupId:t,taskId:s,fetchDetails:a}=this.props;s!==e.taskId&&a({taskId:Number(s),groupId:Number(t)})}componentWillUnmount(){const{clearDetails:e}=this.props;e()}renderTaskHeader(e){const{fetchError:t,fetchStatus:s,lessonUrl:a}=this.props;return n.a.createElement(yb,{fetchError:t,fetchStatus:s},n.a.createElement(da,{back:!0,exact:!0,to:a},O.b.text({id:"lesson-TITLE",keyset:"tasks",params:{title:e.lesson.shortTitle}})),n.a.createElement(tS,{taskTitle:e.title,hasManualCheck:e.hasManualCheck,taskInfo:n.a.createElement(dS,{taskTag:e.tag,taskDeadline:e.deadline,taskMaxScore:e.scoreMax,taskStatistics:e.statistics})}),e.description&&n.a.createElement(BO,{taskUrl:"/",taskDescription:e.description,taskTitle:e.title,taskHasManualCheck:e.hasManualCheck}))}render(){const{task:e,course:t,group:s}=this.props;if(!e)return null;const a=O.b.text({id:"task-solutions-teacher",keyset:"page-titles",params:{task:e.title,lesson:e.lesson.title,course:t.title,group:s.name}});return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,a),n.a.createElement("meta",{name:"title",content:a})),this.renderTaskHeader(e))}}SM.displayName="TeacherTaskHeader";var OM,vM=Object(b.b)(function(e,t){const{courseId:s,groupId:a}=t;return{course:oe(e,s),group:lf(e,a),task:Bl(e),fetchError:ql(e),fetchStatus:Yl(e)}},function(e){return Object(ee.bindActionCreators)({clearDetails:Fa,fetchDetails:Ha},e)})(SM);function NM(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let IM=(NM((OM=class extends a.Component{constructor(){super(...arguments),this.timer=0,this.POLL_DELAY=1e4}componentDidMount(){this.timer=setTimeout(this.pollComments,this.POLL_DELAY)}componentWillUnmount(){const{solutionId:e}=this.props;clearTimeout(this.timer),this.props.clearComments(e)}render(){const{uploadStatus:e,comments:t,solutionId:s,deadline:a,role:r,userId:i,selectedSubmission:o,onSubmissionSelect:c}=this.props;return t&&0!==t.length?n.a.createElement(LO,{role:r,userId:i,comments:t,selectedSubmission:o,solutionId:s,deadline:a,uploadStatus:e,onAddComment:this.addComment,onEditComment:this.editComment,onSelectSubmission:c}):null}fetchComments(){const{solutionId:e}=this.props;this.props.fetchTeacherComments(e)}pollComments(){const{downloadStatus:e,downloadStatusError:t}=this.props;let s=this.POLL_DELAY;t&&t.statusCode===wn.b&&(s=3e5),e!==Gt.a.PENDING&&this.fetchComments(),this.timer=setTimeout(this.pollComments,s)}addComment(e){const{solutionId:t}=this.props;this.props.addTeacherComment({solutionId:t,text:e})}editComment(e,t){const{solutionId:s}=this.props;this.props.editTeacherComment({solutionId:s,commentId:t,text:e})}}).prototype,"pollComments",[$.a],Object.getOwnPropertyDescriptor(OM.prototype,"pollComments"),OM.prototype),NM(OM.prototype,"addComment",[$.a],Object.getOwnPropertyDescriptor(OM.prototype,"addComment"),OM.prototype),NM(OM.prototype,"editComment",[$.a],Object.getOwnPropertyDescriptor(OM.prototype,"editComment"),OM.prototype),OM);IM.displayName="CommentsContainer";var kM=Object(b.b)(function(e,t){return{comments:NO(e,t.solutionId),downloadStatus:TO(e),downloadStatusError:CO(e),uploadStatus:jO(e),userId:q(e)}},function(e){return Object(ee.bindActionCreators)({addTeacherComment:_o,clearComments:wo,editTeacherComment:xo,fetchTeacherComments:Co},e)})(gb(IM));s(993);const TM=d.a.with("teacher-solution-header");class CM extends a.Component{render(){const{solution:e}=this.props,{student:t}=e;return n.a.createElement("header",{className:TM("solution-header")},n.a.createElement("h4",{className:TM("student")},n.a.createElement(nT,{size:"l",avatar:t.avatar,displayName:t.displayName,userId:t.id,status:t.status})),n.a.createElement("div",{className:TM("solution-id")},O.b.text({id:"solution-ID",keyset:"solutions",params:{id:e.id}})))}}CM.displayName="TeacherSolutionHeader";var jM,wM=CM;s(994);function AM(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const _M=d.a.with("teacher-solution");let MM=(AM((jM=class extends a.Component{render(){const{fetchError:e,fetchStatus:t}=this.props;return n.a.createElement("div",{className:_M()},n.a.createElement(yb,{fetchError:e,fetchStatus:t,renderPending:this.renderSpin,renderSuccess:this.renderSolution,renderError:this.renderError}))}renderSpin(){return n.a.createElement("div",{className:_M("spin")},n.a.createElement(ye.a,{progress:!0,size:"l"}))}renderError(e){return n.a.createElement("div",{className:_M("error")},e)}renderSolution(){const{solution:e,selectedSubmission:t,selectSubmission:s}=this.props;return e?n.a.createElement("section",{className:_M()},n.a.createElement(wM,{solution:e}),n.a.createElement("div",{className:_M("info")},n.a.createElement("div",{className:_M("submission-wrapper")},e.latestSubmission&&t?n.a.createElement(eN,{solution:e,submission:t,onSubmissionSelect:s}):n.a.createElement(YO,{align:"center"},O.b.text({id:"no-submission",keyset:"tasks"}))),n.a.createElement("div",{className:_M("comments-wrapper")},n.a.createElement(kM,{solutionId:e.id,deadline:e.deadline,selectedSubmission:t,onSubmissionSelect:s})))):null}}).prototype,"renderSpin",[$.a],Object.getOwnPropertyDescriptor(jM.prototype,"renderSpin"),jM.prototype),AM(jM.prototype,"renderError",[$.a],Object.getOwnPropertyDescriptor(jM.prototype,"renderError"),jM.prototype),AM(jM.prototype,"renderSolution",[$.a],Object.getOwnPropertyDescriptor(jM.prototype,"renderSolution"),jM.prototype),jM);MM.displayName="TeacherSolution";var xM=MM;class DM extends a.Component{componentDidMount(){const{solutionId:e,groupId:t}=this.props;this.props.fetchTeacherSolutionDetails({solutionId:e,groupId:t})}componentDidUpdate(e){const{solutionId:t,groupId:s}=this.props;t!==e.solutionId&&(this.props.clearSolutionDetails(e.solutionId),this.props.fetchTeacherSolutionDetails({solutionId:t,groupId:s}))}componentWillUnmount(){const{solutionId:e}=this.props;this.props.clearSolutionDetails(e)}render(){const{solution:e,fetchError:t,fetchStatus:s,groupId:a,selectedSubmission:r}=this.props;return n.a.createElement(xM,{solution:e,fetchError:t,fetchStatus:s,groupId:a,selectedSubmission:r,selectSubmission:this.props.selectSubmission})}}DM.displayName="TeacherSolutionContainer";var PM=Object(b.b)(function(e,t){const{solutionId:s}=t;return{solution:JO(e,s),fetchError:QO(e),fetchStatus:XO(e),selectedSubmission:Dm(e)}},function(e){return Object(ee.bindActionCreators)({clearSolutionDetails:tm,fetchTeacherSolutionDetails:Qd,selectSubmission:Lo},e)})(DM);class RM extends a.Component{render(){const{solutions:e,pathParams:t,errorBlockMix:s}=this.props,{courseId:a,groupId:r,solutionId:i}=t;if(this.shouldRedirect()){const[t]=e,s=_.taskSolutions.build({courseId:a,groupId:r,lessonId:t.task.lesson.id.toString(),taskId:t.task.id.toString(),solutionId:t.id.toString()});return n.a.createElement(I.a,{to:s})}return i?n.a.createElement(PM,{solutionId:Number(i),groupId:Number(r)}):n.a.createElement("div",{className:s},O.b.text({id:"no-sent-solutions",keyset:"solutions"}))}shouldRedirect(){const{solutionsFetchStatus:e,solutions:t,pathParams:s}=this.props,{solutionId:a}=s;return!a&&e===Gt.a.SUCCESS&&t.length>0}}RM.displayName="SolutionOrRedirect";var LM=RM;var FM=Object(b.b)(function(e){return{solutionsFetchStatus:qT(e),solutions:KT(e)}})(LM);s(995);const zM=d.a.with("task-solutions-teacher");class UM extends a.Component{shouldComponentUpdate(e){const{solutionId:t}=this.props.match.params;return t!==e.match.params.solutionId}render(){const{params:e}=this.props.match,{courseId:t,groupId:s,taskId:a,lessonId:r}=e,i=w.lessonDetails.build({courseId:t,groupId:s,lessonId:r});return n.a.createElement("article",{className:zM()},n.a.createElement(Pn,{type:"wide"},n.a.createElement(Pn.Top,null,n.a.createElement(vM,{withDescriptionTab:!0,courseId:t,groupId:s,lessonUrl:i,taskId:a})),n.a.createElement(Pn.Main,null,n.a.createElement("div",{className:zM("main-content")},n.a.createElement(FM,{pathParams:e,errorBlockMix:zM("error-message")}))),n.a.createElement(Pn.Aside,null,n.a.createElement("div",{className:zM("solution-list")},n.a.createElement(yM,{courseId:t,groupId:s,taskId:a,lessonId:r})))))}}UM.displayName="TaskSolutions";var HM=hE(UM);s(996);const VM=d.a.with("plagiarism-actions"),GM=e=>{let{cls:t,suspiciousSubmissionId:s,sourceSubmissionId:r}=e;const i=Object(b.c)(),o="".concat(s,",").concat(r),c=Object(b.d)(DS.getSubmissionsPlagiarismsFetchResults)[o],l=Object(a.useCallback)(()=>{i(DS.updateSubmissionsPlagiarism.request({suspiciousSubmissionId:s,sourceSubmissionId:r,body:{status:lO.Declined}}))},[i,s,r]),u=Object(a.useCallback)(()=>{i(DS.updateSubmissionsPlagiarism.request({suspiciousSubmissionId:s,sourceSubmissionId:r,body:{status:lO.Confirmed}}))},[i,s,r]);return c?n.a.createElement("div",{className:Object(le.b)(t,VM())},c.updateStatus===Gt.a.PENDING?n.a.createElement(ye.a,{progress:!0,size:"l",position:"center"}):n.a.createElement(n.a.Fragment,null,n.a.createElement(Se.a,{className:VM("button",{action:"decline"}),size:"l",theme:"approve",view:"lyceum",onClick:l},O.b.text({keyset:"antiplagiary",id:"not-plagiarism"})),n.a.createElement(Se.a,{className:VM("button",{action:"confirm"}),size:"l",theme:"reject",view:"lyceum",onClick:u},O.b.text({keyset:"antiplagiary",id:"plagiarism"})))):null};GM.displayName="PlagiarismActions";s(997);const BM=d.a.with("submissions-diff-header"),WM=Object(a.memo)(e=>{let{student:t,firstSubmission:s,secondSubmission:a,plagiarism:r}=e;return n.a.createElement("section",{className:BM("submission",{order:"first"})},n.a.createElement(cf,{className:BM("student"),avatar:t.avatar,size:"l",displayName:t.displayName,userId:t.id}),n.a.createElement("div",{className:BM("submission-info")},n.a.createElement("div",null,n.a.createElement(Oa,{level:4,className:BM("submission-heading")},s.file.runId?n.a.createElement(Kv,{runId:s.file.runId}):n.a.createElement(qv,{id:s.file.id}),r&&n.a.createElement(OO,{className:BM("submission-plagiarism"),plagiarism:r,size:"l"})),n.a.createElement("time",{className:BM("submission-submit-date")},Te.DateTime.fromISO(s.file.addedTime).toFormat("d MMM HH:mm"))),r&&r.status===lO.Unresolved&&n.a.createElement(GM,{cls:BM("plagiarism-actions"),suspiciousSubmissionId:s.id,sourceSubmissionId:a.id})))}),KM=Object(a.memo)(e=>{let{student:t,submission:s,plagiarism:a}=e;return n.a.createElement("section",{className:BM("submission",{order:"second"})},n.a.createElement(cf,{className:BM("student"),avatar:t.avatar,size:"l",displayName:t.displayName,userId:t.id}),n.a.createElement("div",{className:BM("submission-info")},n.a.createElement("div",null,n.a.createElement(Oa,{level:4,className:BM("submission-heading")},s.file.runId?n.a.createElement(n.a.Fragment,null,n.a.createElement(Kv,{runId:s.file.runId})):n.a.createElement(qv,{id:s.file.id}),a&&n.a.createElement(n.a.Fragment,null," (",O.b.text({keyset:"antiplagiary",id:"source"}),")")),n.a.createElement("time",{className:BM("submission-submit-date")},Te.DateTime.fromISO(s.file.addedTime).toFormat("d MMM HH:mm")))))}),qM=e=>{let{firstSubmission:t,secondSubmission:s,plagiarism:a}=e;const{student:r}=t,{student:i}=s;return n.a.createElement("header",{className:BM()},n.a.createElement(WM,{student:r,firstSubmission:t,secondSubmission:s,plagiarism:a}),n.a.createElement(KM,{student:i,submission:s,plagiarism:a}))};function YM(e){return e.includes("python")?"python":void 0}qM.displayName="SubmissionsDiffHeader";const JM=Object(a.lazy)(()=>Promise.all([s.e(0),s.e(2)]).then(s.bind(null,1140))),ZM=e=>{let{firstSubmission:t,firstFileContent:s,secondSubmission:r,secondFileContent:i,plagiarism:o}=e;const c=Object(a.useMemo)(()=>({sourceCode:s,language:YM(t.file.mimeType)}),[s,t.file.mimeType]),l=Object(a.useMemo)(()=>({sourceCode:i,language:YM(r.file.mimeType)}),[i,r.file.mimeType]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(qM,{firstSubmission:t,secondSubmission:r,plagiarism:o}),n.a.createElement(a.Suspense,{fallback:null},n.a.createElement(JM,{height:"500px",originalCode:c,modifiedCode:l})))},XM=e=>{let{match:t}=e;const s=Object(b.c)(),r=Object(I.h)(),{courseId:i,groupId:o,taskId:l}=t.params,u=Object(b.d)(Bl),d=Object(b.d)(ql),m=Object(b.d)(Yl);Object(a.useEffect)(()=>{m!==Gt.a.SUCCESS&&s(Ha({groupId:Number(o),taskId:Number(l)}))},[s,o,l,m]);const{firstSubmissionId:p,secondSubmissionId:h}=t.params,E=Object(b.d)(DS.getSubmissionsFetchResults)[p],f=Object(b.d)(DS.getSubmissionsFetchResults)[h],g="".concat(p,",").concat(h),y=Object(b.d)(DS.getSubmissionsPlagiarismsFetchResults)[g];Object(a.useEffect)(()=>{s(DS.fetchSubmission.request({submissionId:Number(p)}))},[s,p]),Object(a.useEffect)(()=>{s(DS.fetchSubmission.request({submissionId:Number(h)}))},[s,h]),Object(a.useEffect)(()=>{s(DS.fetchSubmissionsPlagiarism.request({suspiciousSubmissionId:Number(p),sourceSubmissionId:Number(h)}))},[s,p,h]);const{error:S,status:v}=function(e){if(e.some(e=>!e))return{error:null,status:null};const t=e.find(e=>e.fetchStatus===Gt.a.FAIL);return t?{error:t.fetchError,status:Gt.a.FAIL}:e.every(e=>e.fetchStatus===Gt.a.SUCCESS)?{error:null,status:Gt.a.SUCCESS}:{error:null,status:Gt.a.PENDING}}([E,f,y]);let N,k,T,C,j;return E&&({submission:N,fileContent:k}=E),f&&({submission:T,fileContent:C}=f),y&&({plagiarism:j}=y),n.a.createElement(yb,{fetchError:d,fetchStatus:m},(()=>{if(!u)return null;const e=O.b.text({id:"submissions-comparisons-teacher",keyset:"page-titles",params:{task:u.title}});return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,e),n.a.createElement("meta",{name:"title",content:e})),n.a.createElement(Pn,{type:"wide"},n.a.createElement(Pn.Main,null,n.a.createElement(da,{back:!0,exact:!0,to:r.state?r.state.previousPath:_.courseSolutions.build({courseId:i,groupId:o})},O.b.text({keyset:"common",id:"back"})),n.a.createElement(tS,{taskTitle:u.title,hasManualCheck:u.hasManualCheck,taskInfo:n.a.createElement(dS,{taskTag:u.tag,taskDeadline:u.deadline,taskMaxScore:u.scoreMax,taskStatistics:u.statistics})}),u.description&&n.a.createElement(BO,{taskUrl:"/",taskDescription:u.description,taskTitle:u.title,taskHasManualCheck:u.hasManualCheck}),n.a.createElement(yb,{fetchError:S,fetchStatus:v},N&&T&&void 0!==j&&n.a.createElement(ZM,{firstSubmission:N,firstFileContent:k||"",secondSubmission:T,secondFileContent:C||"",plagiarism:j})))))})())};XM.displayName="SubmissionsComparisonBase";const QM=hE(XM);var $M=s(1089);s(998);const ex=d.a.with("problem-solution-list"),tx=()=>{const e=Object(b.d)(S_),{courseId:t,lessonId:s,groupId:a}=Object(I.i)(),r=Object($M.a)("variant");if(!e)return null;const{solutions:i}=e;return 0===i.length?n.a.createElement("div",null,O.b.text({id:"solutionList.noSolutions",keyset:"problems"})):n.a.createElement("div",{className:ex()},i.map(e=>{const i=_.problemSolution.build({courseId:t,lessonId:s,groupId:a,problemLinkId:e.problemLinkId,solutionId:e.id},{variant:r||void 0});return n.a.createElement(o.c,{to:i,className:ex("link"),activeClassName:ex("link_active")},n.a.createElement(nT,{size:"m",className:ex("solution"),avatar:e.user.avatar,renderDisplayName:t=>{let{className:s}=t;return n.a.createElement("div",{className:ex("student-info")},n.a.createElement("span",{className:Object(le.b)(ex("student-name"),s),title:e.user.displayName},e.user.displayName),n.a.createElement("div",{className:ex("status")},n.a.createElement(bg,{type:e.status.type,score:e.score,scoreMax:e.scoreMax})))},addonAfter:n.a.createElement("time",{className:ex("updated-at")},e.lastAttempt&&Ce.fromISO(e.lastAttempt).toFormat("d MMM HH:mm"))}))}))};tx.displayName="ProblemSolutionList";var sx=tx;s(999);const ax=d.a.with("problem-solutions"),nx=()=>{},rx=()=>{const e=Object(b.c)(),{courseId:t,lessonId:s,problemLinkId:r,groupId:i,solutionId:o}=Object(I.i)(),c=Object($M.a)("variant"),l=!o,u=Object(b.d)(e=>k_(e,{solutionId:Number(o)})),d=Object(b.d)(N_),m=Object(b.d)(I_),p=Object(b.d)(e=>su(e,{problemLinkId:Number(r)})),h=Object(a.useMemo)(()=>p?mN(p.problem):{},[p]);return Object(Bf.a)(function(){e(Um(Number(r),Number(i),Number(o))),l&&e(Ga({groupId:Number(i),lessonId:Number(s),problemVariantIndex:Number(c)}))}),Object(Wf.a)(function(){return e(Um(Number(r),Number(i),Number(o))),()=>{e(zm())}},[e,t,s,r,i]),Object(Wf.a)(function(){e(Um(Number(r),Number(i),Number(o)))},[o]),Object(Kf.a)(function(){e(zm()),e(Ka())}),n.a.createElement(Pn,{type:"wide"},n.a.createElement(Pn.Top,null,n.a.createElement(da,{back:!0,exact:!0,to:w.lessonDetails.build({courseId:t,groupId:i,lessonId:s})},O.b.text({id:"backToLesson",keyset:"problems"})),d&&n.a.createElement(tS,{taskTitle:d.title,hasManualCheck:!1,taskInfo:n.a.createElement(dS,{taskDeadline:null,taskMaxScore:d.scoreMax,taskTag:d.tag})}),l&&p&&n.a.createElement(tS,{taskTitle:p.title,hasManualCheck:!1,taskInfo:n.a.createElement(dS,{taskDeadline:null,taskMaxScore:p.scoreMax,taskTag:p.tag})})),n.a.createElement(Pn.Main,{className:ax("main-area")},d&&n.a.createElement(fT,{answer:m,mode:"teacher",attemptsMax:d.attemptsMax,problem:d.problem,solution:d.solution,key:d.problem.id,user:u}),l&&p&&n.a.createElement("div",{className:ax("unsolved-problem")},n.a.createElement(Jk,{disabled:!1,problem:p.problem,statusMode:kl.correctAnswer,userAnswer:p.problem.markup.answers,correctAnswer:h,setAnswer:nx}))),n.a.createElement(Pn.Aside,null,n.a.createElement(sx,null)))};rx.displayName="ProblemSolutions";var ix=rx;const ox=[{exact:!0,key:"course-details",component:aC,path:w.courseDetails.template,passTypes:[D.Schedule,D.Conditional]},{exact:!0,key:"course-solutions",component:AA,path:_.courseSolutions.template,passTypes:[D.Schedule,D.Conditional]},{key:"course-progress",exact:!1,component:vj,path:_.courseProgress.template,passTypes:[D.Schedule,D.Conditional]},{key:"course-schedule",exact:!0,component:cw,path:te.courseSchedule.template,passTypes:[D.Schedule]},{key:"lesson-details",exact:!0,component:q_,path:w.lessonDetails.template,passTypes:[D.Schedule,D.Conditional]},{key:"lesson-progress",exact:!0,component:dM,path:_.lessonProgress.template,passTypes:[D.Schedule,D.Conditional]},{key:"lesson-material",exact:!1,component:J_,path:w.lessonMaterial.template,passTypes:[D.Schedule,D.Conditional]},{key:"task-solutions",exact:!1,component:HM,path:_.taskSolutions.template,passTypes:[D.Schedule,D.Conditional]},{key:"submissions-comparison",exact:!0,component:QM,path:Jv.submissionsComparison.template,passTypes:[D.Schedule,D.Conditional]},{key:"problem-solution",exact:!1,component:ix,path:_.problemSolution.template,passTypes:[D.Schedule,D.Conditional]}];var cx=()=>{const{courseId:e}=Object(I.i)(),t=ce(Number(e)),s=Object(a.useMemo)(()=>ox.filter(e=>e.passTypes.includes(t.passType)),[t.passType]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.b,{path:w.courseDetails.template,component:AT}),n.a.createElement(I.d,null,s.map(e=>{let t=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(e,["passTypes"]);return n.a.createElement(I.b,t)}),n.a.createElement(I.b,{component:QM,path:Jv.submissionsComparison.template}),n.a.createElement(iN,{code:wn.d,component:So})))};const lx={activation:new C.a("/invites/:inviteKey")},ux={activation:new C.a("/invites/parent/:inviteKey")},dx={activation:new C.a("/invites/group/:inviteKey")},mx=Object(le.a)("invite-activation"),px={fetchError:null,fetchStatus:null},hx=Object(I.k)(e=>{let{match:t}=e;const{inviteKey:s}=t.params,[r,i]=Object(a.useState)(px);Object(a.useEffect)(()=>{(async()=>{try{const e=await Object(Do.a)(vb.activation.build({inviteKey:s}));i({response:e,fetchError:null,fetchStatus:Gt.a.SUCCESS})}catch(e){i({fetchError:e,fetchStatus:Gt.a.FAIL})}})()},[s]);const{fetchError:o,fetchStatus:l}=r,u=w.root.build(),d=O.b.text({id:"parentInvite.pageTitle",keyset:"invites"}),m=Object(a.useCallback)(e=>{e.preventDefault(),window.location.assign(u)},[u]),p=Object(a.useCallback)(()=>n.a.createElement("div",{className:mx("progress")},n.a.createElement(ye.a,{progress:!0,size:"l"}),n.a.createElement("span",{className:mx("progress-text")},O.b.text({id:"profile-activation",keyset:"invites"}))),[]),h=Object(a.useCallback)(()=>n.a.createElement(Rn,{type:"wide"},n.a.createElement(Rn.Main,null,n.a.createElement("article",{className:mx()},n.a.createElement("section",{className:mx("greeting")},n.a.createElement(lE,{className:mx("greeting-image"),width:500,height:500}),n.a.createElement("div",{className:mx("greeting-heading")},O.b.markdown({id:"parentInvite.greeting",keyset:"invites"})),n.a.createElement(Se.a,{className:mx("guide-button"),type:"link",url:u,size:"l",view:"lyceum",theme:"action",onClick:m},O.b.text({id:"parentInvite.greetingButton",keyset:"invites"})))))),[u,m]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,null,n.a.createElement("title",null,d),n.a.createElement("meta",{name:"title",content:d})),n.a.createElement(yb,{fetchError:o,fetchStatus:l,renderPending:p,renderSuccess:h}))});var bx;function Ex(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}let fx=(Ex((bx=class extends a.Component{renderMainPage(){const{user:e,courseMap:t}=this.props;return Object.keys(t).length?n.a.createElement(CE,null):e?n.a.createElement(I.a,{to:Ls.profile.build({userId:e.id.toString()})}):null}renderProfilePage(e){let{match:{params:t}}=e;const{userId:s}=t,{user:a}=this.props;return a?s?a.id===Number(s)?n.a.createElement(Gf,null):n.a.createElement(Rf,null):n.a.createElement(I.a,{to:Ls.profile.build({userId:a.id.toString()})}):null}renderRoutes(e){let{match:{params:t}}=e;const{courseId:s,groupId:a}=t,{courseMap:r}=this.props,i=r[s],o=Number(a);if(!i||!i.groups.includes(o))return n.a.createElement(fo,{statusCode:wn.c,errorCode:"403_course_view_permission_denied"});let c;switch(i.role){case x.Student:c=_T;break;case x.Teacher:case x.Methodist:c=cx;break;default:throw new T("Role not supported",{role:i.role})}return n.a.createElement(fb,{role:i.role},n.a.createElement(c,null))}render(){return n.a.createElement(I.d,null,n.a.createElement(I.b,{exact:!0,path:w.root.template,render:this.renderMainPage}),n.a.createElement(I.b,{exact:!0,path:w.courses.template,component:CE}),n.a.createElement(I.b,{exact:!0,path:lx.activation.template,render:()=>n.a.createElement(pE,{inviteType:mE.DEFAULT_INVITE})}),n.a.createElement(I.b,{exact:!0,path:dx.activation.template,render:()=>n.a.createElement(pE,{inviteType:mE.GROUP_INVITE})}),n.a.createElement(I.b,{exact:!0,path:ux.activation.template,component:hx}),n.a.createElement(I.b,{exact:!0,path:Ls.profile.template,render:this.renderProfilePage}),n.a.createElement(I.b,{path:w.courseDetails.template,render:this.renderRoutes}),n.a.createElement(iN,{code:wn.d,component:So}))}}).prototype,"renderMainPage",[$.a],Object.getOwnPropertyDescriptor(bx.prototype,"renderMainPage"),bx.prototype),Ex(bx.prototype,"renderProfilePage",[$.a],Object.getOwnPropertyDescriptor(bx.prototype,"renderProfilePage"),bx.prototype),Ex(bx.prototype,"renderRoutes",[$.a],Object.getOwnPropertyDescriptor(bx.prototype,"renderRoutes"),bx.prototype),bx);fx.displayName="Routes";var gx=function(e){return Object(I.k)(class extends a.Component{componentDidMount(){this.log()}componentDidUpdate(e){e.location!==this.props.location&&this.log()}render(){return n.a.createElement(e,this.props)}log(){const{location:{pathname:e,search:t}}=this.props;var s,a;s="".concat(e).concat(t),a={referrer:document.referrer},L()("hit",s,a)}})}(Object(b.b)(function(e){return{user:e.users.user,courseMap:e.courses.courseMap}})(fx));s(1e3);const yx=e=>{let{hintView:t,onNextHint:s,onClose:r,hintsAvailable:i}=e;const o=Object(a.useRef)(t.target);return n.a.createElement(ra,{theme:"normal",view:"default",mainOffset:8,target:"anchor",anchor:o,visible:!0,directions:t.directions,hasTail:!0,tailSize:10,className:"wizard__hint",onOutsideClick:r},n.a.createElement("div",{className:"wizard__hint-content"},O.b.markdown({id:t.messageId,keyset:"wizard"})),n.a.createElement("div",{className:"wizard__controls-block"},i>1&&n.a.createElement(Se.a,{view:"lyceum",theme:"action",size:"m",onClick:s},O.b.text({id:"wizard.nextHint"})),n.a.createElement(Se.a,{className:"wizard__close",size:"m",onClick:r},O.b.text({id:"wizard.close"}))))};yx.displayName="WizardHint";var Sx=yx;const Ox=[{id:0,element:"/html/body/div[2]/div/div[2]/header/div[1]/div[2]/nav/button[1]",messageId:"initialWizardHint"}];function vx(e){return"id"in e}var Nx;function Ix(e,t,s,a,n){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}const kx=["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"];function Tx(e){return document.evaluate(e,document.body,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}const Cx={target:null,hintIndex:-1,hintsAvailable:0};let jx=(Ix((Nx=class e extends n.a.Component{constructor(e){super(e),this.updateTimerId=void 0,this.state=Cx}componentDidMount(){uT.isMobile||this.checkAvailableHints()}static getHintDirections(e){return e?Array.isArray(e)?0===e.length?kx:e:[e]:kx}onNextHint(){this.runCheckCloseInitialHint();const e=this.getNextHintIndex();if(-1===e)return void this.closeWizard();const t=Tx(this.hints[e].element);t&&this.showHint(e,t)}get hints(){return function(){const e=El.get(ol.WizardViewedHints)||[];return Ox.filter(t=>void 0!==t.id&&!e.includes(t.id))}().concat(this.props.hints)}getNextHintIndex(){const{hintIndex:e}=this.state,t=this.hints.findIndex((t,s)=>s>e&&Boolean(Tx(t.element)));return-1!==t?t:this.hints.findIndex((t,s)=>s<e&&Boolean(Tx(t.element)))}getCurrentHintView(){const{target:t,hintIndex:s}=this.state;if(!t)return null;const a=this.hints[s];return{target:t,messageId:a.messageId,directions:e.getHintDirections(a.direction)}}getAvailableHints(){return this.hints.filter(e=>Tx(e.element))}runCheckCloseInitialHint(){const{hintIndex:e}=this.state,t=this.hints[e];if(t&&vx(t)&&Tx(t.element)){const e=(El.get(ol.WizardViewedHints)||[]).concat([t.id]);El.set(ol.WizardViewedHints,e),this.checkAvailableHints()}}showHint(e,t){this.setState({hintIndex:e,target:t})}showInitialHint(e){const{hintIndex:t}=this.state,s=this.hints.indexOf(e);if(t===s)return;const a=Tx(e.element);a&&this.showHint(s,a)}checkAvailableHints(){const e=this.getAvailableHints(),t=e.find(vx),s=e.length;this.setState({hintsAvailable:s},()=>{void 0!==this.updateTimerId&&clearTimeout(this.updateTimerId),this.updateTimerId=setTimeout(this.checkAvailableHints,2e3),t&&this.showInitialHint(t)})}run(){this.onNextHint()}closeWizard(){this.runCheckCloseInitialHint(),this.setState(e=>{let{hintsAvailable:t}=e;return Object.assign({},Cx,{hintsAvailable:t})})}render(){const{hintIndex:e,hintsAvailable:t}=this.state,s=t>0,a=this.getCurrentHintView();return n.a.createElement(nn.Provider,{value:{run:this.run,hasHints:s}},a&&n.a.createElement(Sx,{key:e,onNextHint:this.onNextHint,hintView:a,onClose:this.closeWizard,hintsAvailable:t}),this.props.children)}}).prototype,"onNextHint",[$.a],Object.getOwnPropertyDescriptor(Nx.prototype,"onNextHint"),Nx.prototype),Ix(Nx.prototype,"getNextHintIndex",[$.a],Object.getOwnPropertyDescriptor(Nx.prototype,"getNextHintIndex"),Nx.prototype),Ix(Nx.prototype,"checkAvailableHints",[$.a],Object.getOwnPropertyDescriptor(Nx.prototype,"checkAvailableHints"),Nx.prototype),Ix(Nx.prototype,"run",[$.a],Object.getOwnPropertyDescriptor(Nx.prototype,"run"),Nx.prototype),Ix(Nx.prototype,"closeWizard",[$.a],Object.getOwnPropertyDescriptor(Nx.prototype,"closeWizard"),Nx.prototype),Nx);jx.displayName="Wizard";var wx=jx,Ax=s(383),_x=s(384);const Mx=e=>{const t=new MutationObserver(()=>{window.chatWidget&&(window.chatWidget.addListener("chatShow",()=>{e&&e.users&&e.users.user&&e.users.user.uid&&F("QScreenChat",{uid:e.users.user.uid})}),t.disconnect())});t.observe(document.body,{childList:!0,subtree:!1})},xx=e=>{let{lang:t,service:s="lyceum"}=e;const a=O.b.text({id:s,keyset:"organizations"});return n.a.createElement(c.a,{defaultTitle:a,titleTemplate:"%s — ".concat(a)},n.a.createElement("html",{lang:t}),n.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}))};xx.displayName="BaseHelmet";s(1008),s(1009),s(1010),s(1011);Object(Ax.configureRootTheme)({theme:_x.theme});const Dx=d.a.with("desktop");class Px extends a.Component{constructor(e){var t;super(e),this.store=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(vo?Oo.composeWithDevTools:ee.compose)(Object(ee.applyMiddleware)(kp)),s=Object(ee.createStore)(bb,e,t);return kp.run(Ip),s}(this.props.state),t=e.data.lang,Te.Settings.defaultLocale=t,Object(O.c)(e.translation)}componentDidMount(){Mx(this.props.state)}render(){const{data:e}=this.props,t={language:e.lang,tld:e.tld};return n.a.createElement(W,{settings:t},n.a.createElement(os,{avatarOptions:{host:e.avatarHost}},n.a.createElement(Cn,{fileLimits:e.fileLimits},n.a.createElement(ls,{id:e.lyceumBotId},n.a.createElement(In,{options:e.contest},n.a.createElement(b.a,{store:this.store},n.a.createElement(wx,{hints:e.wizard},n.a.createElement(S,{renderFallback:yo},n.a.createElement("div",{"data-version":e.version,className:Dx()},n.a.createElement(g,null),n.a.createElement(hn,e.metrika),n.a.createElement(h.a,{lang:e.faviconLang}),n.a.createElement(m.a,null),n.a.createElement(xx,{lang:e.lang}),n.a.createElement("div",{className:Dx("content")},n.a.createElement(mn,{passportHost:e.passportHost,yandexuid:e.yandexuid,currentUrl:e.currentUrl}),n.a.createElement(gx,null),n.a.createElement(Q,{withHelpLink:!0})),n.a.createElement(En,null),n.a.createElement(vn,null))))))))))}}Px.displayName="Bundle";const Rx=window.STATIC_DATA;delete window.STATIC_DATA;const Lx=window.INITIAL_STATE;delete window.INITIAL_STATE;const Fx=Lx.users&&Lx.users.user?Lx.users.user.uid.toString():"";Rx.errorLogging.enabled&&l.init(Fx),Object(r.hydrate)(n.a.createElement(c.b,null,n.a.createElement(o.a,null,n.a.createElement(Px,{data:Rx,state:Lx}))),document.getElementById("root"))},14:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var a=s(29),n=s(283);s.d(t,"b",function(){return n.classnames});const r=Object(a.withNaming)({e:"__",m:"_"})},16:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var a=s(74),n=s(346),r=s.n(n);class i{constructor(e,t){this.template=void 0,this.pathGenerator=void 0,this.template=e,this.pathGenerator=r.a.compile(e,t)}build(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.pathGenerator(e,s.path);if(!t||0===Object.keys(t).length)return n;const r=Object(a.stringify)(t,s.query);return r?"".concat(n,"?").concat(r):n}}},17:function(e,t,s){"use strict";s.d(t,"b",function(){return u});var a=s(269),n=s.n(a),r=s(355),i=s.n(r),o=s(39),c=s(35);const l={"Content-Type":"application/json"};async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{method:s="GET",headers:a={},excludeDefaultHeaders:r=!1}=t,u=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["method","headers","excludeDefaultHeaders"]),d={};["GET","HEAD","OPTIONS"].includes(s)||(d["X-CSRF-Token"]=i.a.get("csrftoken")||"");const m=r?{}:l,p=new Request(e,Object.assign({headers:Object.assign({},m,{},d,{},a,{Accept:"application/json","X-Request-Id":n()()}),method:s,credentials:"same-origin"},u)),h=await fetch(p);return h.ok||await async function(e,t){const{status:s}=t;let a,n;try{a=await t.json()}finally{n=a&&a.code||s}throw new c.a(s,n,"Request failed")}(0,h),async function(e){if(e.status===o.a)return;return e.json()}(h)}t.a=u},18:function(e,t,s){"use strict";var a=s(5),n=s(1097),r=s(1130),i=s(1127),o=s(1126),c=s(22),l=s(0),u=s.n(l),d=s(266);const m=Object(a.withBemMod)(Object(n.b)(),{type:"router-link"},e=>t=>{let{url:s="",disabled:a,tabIndex:n}=t,r=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["url","disabled","tabIndex"]);return u.a.createElement(e,Object.assign({},r,{disabled:a,tabIndex:a?-1:n,as:Object(d.a)(c.b),to:s,type:null}))}),p=Object(a.compose)(Object(a.composeU)(n.o,r.a),Object(a.composeU)(i.a,o.a,n.h,n.i,n.k,n.j),Object(a.composeU)(n.g,n.f,n.e,n.d),Object(a.composeU)(n.n,n.m,m),n.l,n.c)(n.a);s.d(t,"a",function(){return p})},2:function(e,t,s){"use strict";var a=s(0),n=s.n(a),r=s(87);function i(e,t){return!e||t||"string"!=typeof e?e:Object(a.createElement)("span",{dangerouslySetInnerHTML:{__html:e.toString()}})}function o(e){return e&&e.code?{id:e.code,keyset:"api-errors"}:{id:"fetch-error",keyset:"errors"}}s.d(t,"b",function(){return u}),s.d(t,"c",function(){return d}),s.d(t,"a",function(){return o});let c="undefined"==typeof window?{}:window.TRANSLATIONS;function l(e){return function(t){const{id:s,keyset:n="common",params:r,escape:o}=t,l=c[n]&&c[n][s];let u=void 0!==l?l:s;if(!r)return i(u,o);if(Array.isArray(u)&&(u=r.count||0===r.count?function(e,t){if(0===e)return t[3]||t[2];const s=e%10,a=e%100;return 1===s&&11!==a?t[0]:s>=2&&s<=4&&(a<10||a>=20)?t[1]:t[2]}(r.count,u):u.toString()),e.plainText)return Object.keys(r).reduce((e,t)=>e.replace("{".concat(t,"}"),r[t].toString()),u);const d=Object.keys(r).reduce((e,t)=>e.replace("{".concat(t,"}"),"__{".concat(t,"}__")),u).split("__").filter(Boolean).map(e=>i(function(e){return e.startsWith("{")&&e.endsWith("}")}(e)?r[function(e){return e.substr(1,e.length-2)}(e)]:e,o));return Object(a.createElement)(a.Fragment,null,...d)}}const u={element:e=>l({plainText:!1})(e),text:e=>l({plainText:!0})(Object.assign({},e,{escape:!0})),markdown:e=>n.a.createElement(r.a,null,u.text(e))},d=e=>{e&&(c=e)}},24:function(e,t,s){"use strict";let a,n;s.d(t,"b",function(){return a}),s.d(t,"a",function(){return n}),function(e){e.ERROR="error",e.INFO="info",e.SUCCESS="success"}(a||(a={})),function(e){e.ADD_NOTIFICATION="[notifications] add",e.REMOVE_NOTIFICATION="[notifications] remove"}(n||(n={}))},25:function(e,t,s){"use strict";s.d(t,"a",function(){return i}),s.d(t,"b",function(){return o});var a=s(24);let n=0;const r=()=>n++;function i(e){return{type:a.a.ADD_NOTIFICATION,payload:Object.assign({},e,{id:r()})}}function o(e){return{type:a.a.REMOVE_NOTIFICATION,payload:{id:e}}}},262:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var a=s(15),n=s(8),r=s(40);const i=Object(a.createReducer)({submissionsMap:{},contestLogsMap:{},plagiarismsMap:{}}).handleAction(r.b.request,(e,t)=>{const{submissionId:s}=t.payload;let a=null,r=null;return s in e.submissionsMap&&({submission:a,fileContent:r}=e.submissionsMap[s]),Object.assign({},e,{submissionsMap:Object.assign({},e.submissionsMap,{[s]:{submission:a,fileContent:r,fetchError:null,fetchStatus:n.a.PENDING}})})}).handleAction(r.b.success,(e,t)=>{const{submissionId:s,submission:a,fileContent:r}=t.payload;return Object.assign({},e,{submissionsMap:Object.assign({},e.submissionsMap,{[s]:{submission:a,fileContent:r,fetchError:null,fetchStatus:n.a.SUCCESS}})})}).handleAction(r.b.failure,(e,t)=>{const{submissionId:s,error:a}=t.payload;let r=null,i=null;return s in e.submissionsMap&&({submission:r,fileContent:i}=e.submissionsMap[s]),Object.assign({},e,{submissionsMap:Object.assign({},e.submissionsMap,{[s]:{submission:r,fileContent:i,fetchError:a,fetchStatus:n.a.FAIL}})})}).handleAction(r.a.request,(e,t)=>{const{submissionId:s}=t.payload;let a=null;return s in e.contestLogsMap&&({contestLogs:a}=e.contestLogsMap[s]),Object.assign({},e,{contestLogsMap:Object.assign({},e.contestLogsMap,{[s]:{contestLogs:a,fetchError:null,fetchStatus:n.a.PENDING}})})}).handleAction(r.a.success,(e,t)=>{const{submissionId:s,contestLogs:a}=t.payload;return Object.assign({},e,{contestLogsMap:Object.assign({},e.contestLogsMap,{[s]:{contestLogs:a,fetchError:null,fetchStatus:n.a.SUCCESS}})})}).handleAction(r.a.failure,(e,t)=>{const{submissionId:s,error:a}=t.payload;let r=null;return s in e.contestLogsMap&&({contestLogs:r}=e.contestLogsMap[s]),Object.assign({},e,{contestLogsMap:Object.assign({},e.contestLogsMap,{[s]:{contestLogs:r,fetchError:a,fetchStatus:n.a.FAIL}})})}).handleAction(r.c.request,(e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:a}=t.payload,r=o(s,a);let i=null;return r in e.plagiarismsMap&&({plagiarism:i}=e.plagiarismsMap[r]),Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[r]:Object.assign({},e.plagiarismsMap[r],{plagiarism:i,fetchError:null,fetchStatus:n.a.PENDING})})})}).handleAction(r.c.success,(e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:a,plagiarism:r}=t.payload,i=o(s,a);return Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[i]:Object.assign({},e.plagiarismsMap[i],{plagiarism:r,fetchError:null,fetchStatus:n.a.SUCCESS})})})}).handleAction(r.c.failure,(e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:a,error:r}=t.payload,i=o(s,a);let c=null;return i in e.plagiarismsMap&&({plagiarism:c}=e.plagiarismsMap[i]),Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[i]:Object.assign({},e.plagiarismsMap[i],{plagiarism:c,fetchError:r,fetchStatus:n.a.FAIL})})})}).handleAction(r.d.request,(e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:a}=t.payload,r=o(s,a);return Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[r]:Object.assign({},e.plagiarismsMap[r],{updateError:null,updateStatus:n.a.PENDING})})})}).handleAction(r.d.success,(e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:a,body:r}=t.payload,i=o(s,a);let{plagiarism:c}=e.plagiarismsMap[i];return c&&(c=Object.assign({},c,{},r)),Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[i]:Object.assign({},e.plagiarismsMap[i],{plagiarism:c,updateError:null,updateStatus:n.a.SUCCESS})})})}).handleAction(r.d.failure,(e,t)=>{const{suspiciousSubmissionId:s,sourceSubmissionId:a,error:r}=t.payload,i=o(s,a);return Object.assign({},e,{plagiarismsMap:Object.assign({},e.plagiarismsMap,{[i]:Object.assign({},e.plagiarismsMap[i],{updateError:r,updateStatus:n.a.FAIL})})})});function o(e,t){return"".concat(e,",").concat(t)}},263:function(e,t,s){"use strict";var a=s(15),n=s(3),r=s(17),i=s(2),o=s(24),c=s(25),l=s(16);const u={submission:new l.a("/api/submissions/:submissionId"),contestLogs:new l.a("/api/submissions/:submissionId/contest-logs"),plagiarism:new l.a("/api/submissions/:suspiciousSubmissionId/plagiarisms/:sourceSubmissionId")};var d=s(40);function*m(e){const{submissionId:t}=e.payload,s=u.submission.build({submissionId:t.toString()});try{const{submission:e,fileContent:a}=yield Object(n.b)(r.b,s);yield Object(n.f)(d.b.success({submissionId:t,submission:e,fileContent:a}))}catch(e){yield Object(n.f)(d.b.failure({submissionId:t,error:e}))}}function*p(e){const{submissionId:t}=e.payload,s=u.contestLogs.build({submissionId:t.toString()});try{const e=yield Object(n.b)(r.b,s);yield Object(n.f)(d.a.success({submissionId:t,contestLogs:e}))}catch(e){yield Object(n.f)(d.a.failure({submissionId:t,error:e}))}}function*h(e){const{suspiciousSubmissionId:t,sourceSubmissionId:s}=e.payload,a=u.plagiarism.build({suspiciousSubmissionId:t.toString(),sourceSubmissionId:s.toString()});try{const e=yield Object(n.b)(r.b,a);yield Object(n.f)(d.c.success({suspiciousSubmissionId:t,sourceSubmissionId:s,plagiarism:e}))}catch(e){yield Object(n.f)(d.c.failure({suspiciousSubmissionId:t,sourceSubmissionId:s,error:e}))}}function*b(e){const{suspiciousSubmissionId:t,sourceSubmissionId:s,body:a}=e.payload,l=u.plagiarism.build({suspiciousSubmissionId:t.toString(),sourceSubmissionId:s.toString()});try{yield Object(n.b)(r.b,l,{method:"PATCH",body:JSON.stringify(a)}),yield Object(n.f)(d.d.success({suspiciousSubmissionId:t,sourceSubmissionId:s,body:a}))}catch(e){yield Object(n.f)(d.d.failure({suspiciousSubmissionId:t,sourceSubmissionId:s,error:e})),yield Object(n.f)(Object(c.a)({i18n:Object(i.a)(e),type:o.b.ERROR}))}}function*E(){yield Object(n.a)([Object(n.j)(Object(a.getType)(d.b.request),m),Object(n.j)(Object(a.getType)(d.a.request),p),Object(n.j)(Object(a.getType)(d.c.request),h),Object(n.j)(Object(a.getType)(d.d.request),b)])}s.d(t,"a",function(){return E})},264:function(e,t,s){"use strict";s.d(t,"a",function(){return c});var a=s(5),n=s(396),r=s(0),i=s.n(r);const o=Object(a.compose)(n.d)(n.b),c=e=>i.a.createElement(o,Object.assign({flavor:"blueberry"},e));c.displayName="BlueberryTable"},265:function(e,t,s){"use strict";s.d(t,"a",function(){return a}),s.d(t,"b",function(){return n});const a=e=>{const t={};return e.markup.formulas&&(t.formulas=e.markup.formulas),e.resources&&(t.resources=e.resources),t};function n(e){const t=e.match(/\w*(="[^"]*")?/gim),s={};return Array.isArray(t)&&t.forEach(e=>{const t=e.match(/(\w*)(="([^"]*)")?/i);if(t&&t[1]){const e=t[1],a=!t[3]||t[3];s[e]="style"===e?function(e){return"string"!=typeof e?{}:e.split(";").reduce((e,t)=>{const[s,a]=t.split(":"),n=function(e){return e.replace(/-([a-z])/g,e=>e[1].toUpperCase())}(s.trim());return""!==n&&"string"==typeof a&&(e[n]=a.trim()),e},{})}(a):a}}),s}},266:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var a=s(0),n=s.n(a);function r(e){return n.a.forwardRef((t,s)=>n.a.createElement(e,Object.assign({},t,{innerRef:s})))}},273:function(e,t,s){e.exports={comments:"y1b87d--comments",commentsHeader:"y1b87d--comments__header",commentsLink:"y1b87d--comments__link",commentsTitle:"y1b87d--comments__title",commentsHasScroll:"y1b87d--comments_has-scroll"}},277:function(e,t,s){"use strict";var a=s(81),n=s.n(a),r=s(94),i=s.n(r),o=s(0),c=s.n(o),l=s(31),u=s(14);const d=.25,m=0;function p(e,t){if(e&&t)return t===m?e:e*d}const h=e=>{let{mixClassname:t,resource:s}=e;const{imageWidth:a,version:n,name:r}=s,i=Object(u.b)("resource__image",t);return c.a.createElement("img",{className:i,src:s.url,width:p(a,n),alt:r})};h.displayName="ResourceImage";var b=h;s(438);const E={IMAGE:["jpg","jpeg","png","svg","gif"]},f={IMAGE:b},g=e=>{let{resource:t,className:s}=e;const a=(e=>Object.keys(E).find(t=>E[t].includes(e)))(t.type);if(!a)return null;const n=f[a];return c.a.createElement(n,{mixClassname:s,resource:t})};g.displayName="Resource";var y=g;s.d(t,"a",function(){return S});const S=e=>t=>{let{rules:s}=t,a=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["rules"]);const r=Object(o.useMemo)(()=>Object.assign({},s,{resource:{order:0,match:Object(l.inlineRegex)(/^{resource:(\d+)}/),parse:e=>({content:e[1]}),react:(e,t,s)=>!i()(n()(s,["resources",e.content]))?c.a.createElement(y,{resource:s.resources[e.content],key:"resource_".concat(e.content,"_").concat(s.key)}):null}}),[s]);return c.a.createElement(e,Object.assign({},a,{rules:r}))}},286:function(e,t,s){},288:function(e,t,s){},299:function(e,t,s){"use strict";let a;s.d(t,"a",function(){return a}),function(e){e.CPP="cpp",e.PYTHON="python"}(a||(a={}))},317:function(e,t,s){},330:function(e,t,s){},331:function(e,t,s){"use strict";s.d(t,"b",function(){return a}),s.d(t,"a",function(){return n}),s.d(t,"c",function(){return r});const a=e=>e.submissions.submissionsMap,n=e=>e.submissions.contestLogsMap,r=e=>e.submissions.plagiarismsMap},332:function(e,t){},336:function(e,t,s){},337:function(e,t,s){},35:function(e,t,s){"use strict";class a extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e),this.name="BaseError",this.extra=void 0,this.causes=void 0,this.extra=t,this.causes=s,Object.setPrototypeOf(this,new.target.prototype)}}class n extends a{constructor(){super(...arguments),this.name="InvalidArgumentError"}}class r extends a{constructor(){super(...arguments),this.name="InitializationError"}}class i extends a{constructor(){super(...arguments),this.name="NoRequiredDataError"}}class o extends a{constructor(){super(...arguments),this.name="UnsupportedDataTypeError"}}class c extends a{constructor(e,t,s){super(s,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},arguments.length>4&&void 0!==arguments[4]?arguments[4]:null),this.name="APIError",this.code=void 0,this.statusCode=void 0,this.code=t,this.statusCode=e}}s.d(t,"b",function(){return a}),s.d(t,"d",function(){return n}),s.d(t,"c",function(){return r}),s.d(t,"e",function(){return i}),s.d(t,"f",function(){return o}),s.d(t,"a",function(){return c})},361:function(e,t,s){e.exports={taskGroupNavigation:"yd609d--task-group-navigation",taskGroupNavigationGroups:"yd609d--task-group-navigation__groups",taskGroupNavigationTasks:"yd609d--task-group-navigation__tasks",taskGroupNavigationGroup:"yd609d--task-group-navigation__group",taskGroupNavigationTag:"yd609d--task-group-navigation__tag",taskGroupNavigationTask:"yd609d--task-group-navigation__task",taskGroupNavigationLink:"yd609d--task-group-navigation__link",taskGroupNavigationLinkChecked:"yd609d--task-group-navigation__link_checked",taskGroupNavigationTooltip:"yd609d--task-group-navigation__tooltip"}},362:function(e,t,s){e.exports={arrowNavigation:"yd407c--arrow-navigation",arrowNavigationArrow:"yd407c--arrow-navigation__arrow",arrowNavigationArrowDirectionLeft:"yd407c--arrow-navigation__arrow_direction_left",arrowNavigationArrowDirectionRight:"yd407c--arrow-navigation__arrow_direction_right"}},363:function(e,t,s){e.exports={taskHeader:"yde1c4--task-header",taskHeaderHeading:"yde1c4--task-header__heading",taskHeaderInfo:"yde1c4--task-header__info",taskHeaderCheckInfo:"yde1c4--task-header__check-info"}},364:function(e,t,s){e.exports={taskInfo:"y43a24--task-info",taskInfoTag:"y43a24--task-info__tag",taskInfoTagName:"y43a24--task-info__tag-name",taskInfoDeadlineTime:"y43a24--task-info__deadline-time",taskInfoScore:"y43a24--task-info__score",taskInfoDeadline:"y43a24--task-info__deadline",taskInfoMaxScore:"y43a24--task-info__max-score",taskInfoStatusBar:"y43a24--task-info__status-bar"}},365:function(e,t,s){e.exports={taskDescription:"y6c2ac--task-description",taskDescriptionHeader:"y6c2ac--task-description__header",taskDescriptionHeading:"y6c2ac--task-description__heading",taskDescriptionContentWrapper:"y6c2ac--task-description__content-wrapper",taskDescriptionContent:"y6c2ac--task-description__content",taskDescriptionCheckInfo:"y6c2ac--task-description__check-info"}},366:function(e,t,s){e.exports={subLayout:"y0d3de--sub-layout",subLayoutLeftColumn:"y0d3de--sub-layout__left-column",subLayoutLeftColumnNarrow:"y0d3de--sub-layout__left-column_narrow",subLayoutRightColumn:"y0d3de--sub-layout__right-column"}},367:function(e,t,s){e.exports={roundedWrapper:"yadc9f--rounded-wrapper",roundedWrapperBorder:"yadc9f--rounded-wrapper_border",roundedWrapperAll:"yadc9f--rounded-wrapper_all",roundedWrapperTopLeft:"yadc9f--rounded-wrapper_top-left",roundedWrapperTopRight:"yadc9f--rounded-wrapper_top-right"}},370:function(e,t,s){e.exports={plagiaryStatusIndicator:"yede32--plagiary-status-indicator",plagiaryStatusIndicatorColorYellow:"yede32--plagiary-status-indicator_color_yellow",plagiaryStatusIndicatorColorRed:"yede32--plagiary-status-indicator_color_red",plagiaryStatusIndicatorColorGrey:"yede32--plagiary-status-indicator_color_grey"}},371:function(e,t,s){e.exports={plagiaryMarkerViewer:"y22e45--plagiary-marker-viewer",plagiaryMarkerViewerFull:"y22e45--plagiary-marker-viewer_full",plagiaryMarkerViewerSizeL:"y22e45--plagiary-marker-viewer_size_l",plagiaryMarkerViewerIndicator:"y22e45--plagiary-marker-viewer__indicator"}},372:function(e,t,s){e.exports={taskDescriptionOpener:"y4ef2d--task-description-opener",taskDescriptionOpenerSideblock:"y4ef2d--task-description-opener__sideblock"}},373:function(e,t,s){e.exports={message:"y3034e--message",messageAlignRight:"y3034e--message_align_right",messageAlignCenter:"y3034e--message_align_center",messageTypeError:"y3034e--message_type_error"}},374:function(e,t,s){e.exports={submission:"y5bb67--submission",submissionHeaderWrapper:"y5bb67--submission__header-wrapper",submissionWarning:"y5bb67--submission__warning",submissionFile:"y5bb67--submission__file"}},39:function(e,t,s){"use strict";s.d(t,"f",function(){return a}),s.d(t,"a",function(){return n}),s.d(t,"b",function(){return r}),s.d(t,"c",function(){return i}),s.d(t,"d",function(){return o}),s.d(t,"e",function(){return c});const a=e=>e>=500&&e<=599,n=204,r=401,i=403,o=404,c=500},40:function(e,t,s){"use strict";s.d(t,"b",function(){return n}),s.d(t,"a",function(){return r}),s.d(t,"c",function(){return i}),s.d(t,"d",function(){return o});var a=s(15);const n=Object(a.createAsyncAction)("[submissions] fetch submission start","[submissions] fetch submission success","[submissions] fetch submission failure")(),r=Object(a.createAsyncAction)("[submissions] fetch contest logs start","[submissions] fetch contest logs success","[submissions] fetch contest logs failure")(),i=Object(a.createAsyncAction)("[submissions] fetch submissions plagiarism start","[submissions] fetch submissions plagiarism success","[submissions] fetch submissions plagiarism failure")(),o=Object(a.createAsyncAction)("[submissions] update submissions plagiarism start","[submissions] update submissions plagiarism success","[submissions] update submissions plagiarism failure")()},438:function(e,t,s){},49:function(e,t,s){"use strict";var a=s(0),n=s.n(a),r=s(5),i=s(1098),o=s(1114),c=s(22);const l=Object(r.withBemMod)(Object(i.b)(),{behavior:"router"},e=>t=>{let s=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["behavior"]);return n.a.createElement(e,Object.assign({},s,{as:c.b}))});const u=Object(r.withBemMod)(Object(i.b)(),{behavior:"external"},e=>t=>{let s=function(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}(t,["behavior"]);return n.a.createElement(e,Object.assign({as:"a",rel:"noopener noreferrer",target:"_blank"},s))}),d=Object(r.compose)(i.c,o.a,Object(r.composeU)(i.e,i.d,i.f),Object(r.composeU)(l,u))(i.a),m=e=>n.a.createElement(d,Object.assign({theme:"normal",view:"lyceum"},e.to&&{behavior:"router"},e));m.displayName="Link",s.d(t,"a",function(){return m})},522:function(e,t,s){},523:function(e,t,s){},524:function(e,t,s){},547:function(e,t,s){},548:function(e,t,s){},556:function(e,t,s){},557:function(e,t,s){},558:function(e,t,s){},559:function(e,t,s){},560:function(e,t,s){},561:function(e,t,s){},580:function(e,t,s){},585:function(e,t,s){},586:function(e,t,s){},60:function(e,t,s){"use strict";var a=s(40);s.d(t,"fetchContestLogs",function(){return a.a}),s.d(t,"fetchSubmission",function(){return a.b}),s.d(t,"fetchSubmissionsPlagiarism",function(){return a.c}),s.d(t,"updateSubmissionsPlagiarism",function(){return a.d});s(262);var n=s(331);s.d(t,"getContestLogsFetchResults",function(){return n.a}),s.d(t,"getSubmissionsFetchResults",function(){return n.b}),s.d(t,"getSubmissionsPlagiarismsFetchResults",function(){return n.c});s(263),s(332)},602:function(e,t,s){},603:function(e,t,s){},608:function(e,t,s){},609:function(e,t,s){},610:function(e,t,s){},611:function(e,t,s){},612:function(e,t,s){},613:function(e,t,s){},614:function(e,t,s){},615:function(e,t,s){},616:function(e,t,s){},617:function(e,t,s){},618:function(e,t,s){},619:function(e,t,s){},620:function(e,t,s){},663:function(e,t,s){},718:function(e,t,s){},719:function(e,t,s){},720:function(e,t,s){},721:function(e,t,s){},722:function(e,t,s){},723:function(e,t,s){},724:function(e,t,s){},725:function(e,t,s){},726:function(e,t,s){},730:function(e,t,s){},731:function(e,t,s){},732:function(e,t,s){},733:function(e,t,s){},734:function(e,t,s){},735:function(e,t,s){},736:function(e,t,s){},737:function(e,t,s){},738:function(e,t,s){},739:function(e,t,s){},740:function(e,t,s){},741:function(e,t,s){},742:function(e,t,s){},743:function(e,t,s){},744:function(e,t,s){},745:function(e,t,s){},746:function(e,t,s){},747:function(e,t,s){},748:function(e,t,s){},753:function(e,t,s){},754:function(e,t,s){},755:function(e,t,s){},756:function(e,t,s){},759:function(e,t,s){},765:function(e,t,s){},766:function(e,t,s){},767:function(e,t,s){},768:function(e,t,s){},769:function(e,t,s){},770:function(e,t,s){},771:function(e,t,s){},772:function(e,t,s){},773:function(e,t,s){},774:function(e,t,s){},775:function(e,t,s){},776:function(e,t,s){},8:function(e,t,s){"use strict";let a;s.d(t,"a",function(){return a}),function(e){e.PENDING="pending",e.SUCCESS="success",e.FAIL="fail"}(a||(a={}))},855:function(e,t,s){},856:function(e,t,s){},857:function(e,t,s){},862:function(e,t,s){},87:function(e,t,s){"use strict";var a=s(5),n=s(9),r=s(396),i=s(118),o=s(343),c=s(264),l=s(277),u=s(31),d=s.n(u),m=s(0),p=s.n(m),h=s(265),b=s(49),E=s(18);function f(e,t){if(null==e)return{};var s,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||(n[s]=e[s]);return n}s.d(t,"a",function(){return y});const g=new n.Registry({id:Object(r.c)()});g.set("Table",c.a),g.set("Formula",i.a);const y=Object(a.compose)(Object(n.withRegistry)(g),r.f,r.k,r.e,r.g,r.h,r.i,r.j,r.l,r.m,r.n,r.o,r.p,r.q,r.r,r.s,o.a,l.a,e=>t=>{let{rules:s}=t,a=f(t,["rules"]);const n=Object(m.useMemo)(()=>Object.assign({},s,{link:{order:0,match:d.a.inlineRegex(new RegExp("^\\[(".concat("(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",")\\]\\(").concat("\\s*<?((?:[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*","\\)(").concat('?:{:((?:\\w*(="[^"]*")?\\s?)*)}',")?"))),parse:(e,t,s)=>({content:t(e[1],s),target:e[2],title:e[3],attributes:e[4]?Object(h.b)(e[4]):{}}),react(e,t,s){const a=d.a.sanitizeUrl(e.target)||"",n=t(e.content,s),{attributes:r={}}=e,{isRouter:i,isButton:o,target:c,rel:l}=r,u=f(r,["isRouter","isButton","target","rel"]),m={key:s.key,title:e.title,target:c,rel:l};return i?o?p.a.createElement(b.a,Object.assign({to:a},m),p.a.createElement(E.a,Object.assign({view:"lyceum"},u),n)):p.a.createElement(b.a,Object.assign({to:a},m,u),n):o?p.a.createElement("a",Object.assign({href:a},m),p.a.createElement(E.a,Object.assign({view:"lyceum"},u),n)):p.a.createElement("a",Object.assign({href:a},m,u),n)}}}),[s]);return p.a.createElement(e,Object.assign({},a,{rules:n}))})(r.a)},872:function(e,t,s){},875:function(e,t,s){var a={"./correct.png":876,"./correct@2x.png":877,"./correct@3x.png":878,"./correct@4x.png":879,"./incorrect.png":880,"./incorrect@2x.png":881,"./incorrect@3x.png":882,"./incorrect@4x.png":883,"./skipped.png":884,"./skipped@2x.png":885,"./skipped@3x.png":886,"./skipped@4x.png":887};function n(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id=875},907:function(e,t,s){},908:function(e,t,s){},909:function(e,t,s){},910:function(e,t,s){},912:function(e,t,s){},913:function(e,t,s){},914:function(e,t,s){},915:function(e,t,s){},941:function(e,t,s){},942:function(e,t,s){},943:function(e,t,s){},944:function(e,t,s){},945:function(e,t,s){},946:function(e,t,s){},947:function(e,t,s){},948:function(e,t,s){},949:function(e,t,s){},950:function(e,t,s){},951:function(e,t,s){},952:function(e,t,s){},953:function(e,t,s){},954:function(e,t,s){},955:function(e,t,s){},956:function(e,t,s){},957:function(e,t,s){},958:function(e,t,s){},959:function(e,t,s){},960:function(e,t,s){},961:function(e,t,s){},962:function(e,t,s){},963:function(e,t,s){},964:function(e,t,s){},965:function(e,t,s){},966:function(e,t,s){},967:function(e,t,s){},968:function(e,t,s){},969:function(e,t,s){},970:function(e,t,s){},971:function(e,t,s){},972:function(e,t,s){},973:function(e,t,s){},977:function(e,t,s){},978:function(e,t,s){},979:function(e,t,s){},980:function(e,t,s){},981:function(e,t,s){},982:function(e,t,s){},983:function(e,t,s){},984:function(e,t,s){},985:function(e,t,s){},986:function(e,t,s){},987:function(e,t,s){},988:function(e,t,s){},989:function(e,t,s){},990:function(e,t,s){},991:function(e,t,s){},992:function(e,t,s){},993:function(e,t,s){},994:function(e,t,s){},995:function(e,t,s){},996:function(e,t,s){},997:function(e,t,s){},998:function(e,t,s){},999:function(e,t,s){}},[[1012,5,0]]]);
